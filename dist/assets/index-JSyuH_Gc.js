(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();/**
* @vue/shared v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(r){const e=Object.create(null);for(const n of r.split(","))e[n]=1;return n=>n in e}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=r=>r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&(r.charCodeAt(2)>122||r.charCodeAt(2)<97),isModelListener=r=>r.startsWith("onUpdate:"),extend$1=Object.assign,remove=(r,e)=>{const n=r.indexOf(e);n>-1&&r.splice(n,1)},hasOwnProperty$3=Object.prototype.hasOwnProperty,hasOwn=(r,e)=>hasOwnProperty$3.call(r,e),isArray=Array.isArray,isMap=r=>toTypeString(r)==="[object Map]",isSet=r=>toTypeString(r)==="[object Set]",isFunction$1=r=>typeof r=="function",isString=r=>typeof r=="string",isSymbol$1=r=>typeof r=="symbol",isObject$4=r=>r!==null&&typeof r=="object",isPromise$2=r=>(isObject$4(r)||isFunction$1(r))&&isFunction$1(r.then)&&isFunction$1(r.catch),objectToString$1=Object.prototype.toString,toTypeString=r=>objectToString$1.call(r),toRawType=r=>toTypeString(r).slice(8,-1),isPlainObject=r=>toTypeString(r)==="[object Object]",isIntegerKey=r=>isString(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=r=>{const e=Object.create(null);return n=>e[n]||(e[n]=r(n))},camelizeRE$1=/-(\w)/g,camelize$1=cacheStringFunction(r=>r.replace(camelizeRE$1,(e,n)=>n?n.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(r=>r.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(r=>r.charAt(0).toUpperCase()+r.slice(1)),toHandlerKey=cacheStringFunction(r=>r?`on${capitalize(r)}`:""),hasChanged=(r,e)=>!Object.is(r,e),invokeArrayFns=(r,...e)=>{for(let n=0;n<r.length;n++)r[n](...e)},def=(r,e,n,s=!1)=>{Object.defineProperty(r,e,{configurable:!0,enumerable:!1,writable:s,value:n})},looseToNumber=r=>{const e=parseFloat(r);return isNaN(e)?r:e},toNumber$1=r=>{const e=isString(r)?Number(r):NaN;return isNaN(e)?r:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(r){if(isArray(r)){const e={};for(let n=0;n<r.length;n++){const s=r[n],a=isString(s)?parseStringStyle(s):normalizeStyle(s);if(a)for(const o in a)e[o]=a[o]}return e}else if(isString(r)||isObject$4(r))return r}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(r){const e={};return r.replace(styleCommentRE,"").split(listDelimiterRE).forEach(n=>{if(n){const s=n.split(propertyDelimiterRE);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function normalizeClass(r){let e="";if(isString(r))e=r;else if(isArray(r))for(let n=0;n<r.length;n++){const s=normalizeClass(r[n]);s&&(e+=s+" ")}else if(isObject$4(r))for(const n in r)r[n]&&(e+=n+" ");return e.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(r){return!!r||r===""}const isRef$1=r=>!!(r&&r.__v_isRef===!0),toDisplayString=r=>isString(r)?r:r==null?"":isArray(r)||isObject$4(r)&&(r.toString===objectToString$1||!isFunction$1(r.toString))?isRef$1(r)?toDisplayString(r.value):JSON.stringify(r,replacer,2):String(r),replacer=(r,e)=>isRef$1(e)?replacer(r,e.value):isMap(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,a],o)=>(n[stringifySymbol(s,o)+" =>"]=a,n),{})}:isSet(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>stringifySymbol(n))}:isSymbol$1(e)?stringifySymbol(e):isObject$4(e)&&!isArray(e)&&!isPlainObject(e)?String(e):e,stringifySymbol=(r,e="")=>{var n;return isSymbol$1(r)?`Symbol(${(n=r.description)!=null?n:e})`:r};/**
* @vue/reactivity v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=n}}}on(){++this._on===1&&(this.prevScope=activeEffectScope,activeEffectScope=this)}off(){this._on>0&&--this._on===0&&(activeEffectScope=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0}}}function getCurrentScope(){return activeEffectScope}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const e=activeSub,n=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=e,shouldTrack=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)removeSub(e);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(r,e=!1){if(r.flags|=8,e){r.next=batchedComputed,batchedComputed=r;return}r.next=batchedSub,batchedSub=r}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let e=batchedComputed;for(batchedComputed=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let r;for(;batchedSub;){let e=batchedSub;for(batchedSub=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){r||(r=s)}e=n}}if(r)throw r}function prepareDeps(r){for(let e=r.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function cleanupDeps(r){let e,n=r.depsTail,s=n;for(;s;){const a=s.prevDep;s.version===-1?(s===n&&(n=a),removeSub(s),removeDep(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=a}r.deps=e,r.depsTail=n}function isDirty(r){for(let e=r.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(refreshComputed(e.dep.computed)||e.dep.version!==e.version))return!0;return!!r._dirty}function refreshComputed(r){if(r.flags&4&&!(r.flags&16)||(r.flags&=-17,r.globalVersion===globalVersion)||(r.globalVersion=globalVersion,!r.isSSR&&r.flags&128&&(!r.deps&&!r._dirty||!isDirty(r))))return;r.flags|=2;const e=r.dep,n=activeSub,s=shouldTrack;activeSub=r,shouldTrack=!0;try{prepareDeps(r);const a=r.fn(r._value);(e.version===0||hasChanged(a,r._value))&&(r.flags|=128,r._value=a,e.version++)}catch(a){throw e.version++,a}finally{activeSub=n,shouldTrack=s,cleanupDeps(r),r.flags&=-3}}function removeSub(r,e=!1){const{dep:n,prevSub:s,nextSub:a}=r;if(s&&(s.nextSub=a,r.prevSub=void 0),a&&(a.prevSub=s,r.nextSub=void 0),n.subs===r&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let o=n.computed.deps;o;o=o.nextDep)removeSub(o,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function removeDep(r){const{prevDep:e,nextDep:n}=r;e&&(e.nextDep=n,r.prevDep=void 0),n&&(n.prevDep=e,r.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const r=trackStack.pop();shouldTrack=r===void 0?!0:r}function cleanupEffect(r){const{cleanup:e}=r;if(r.cleanup=void 0,e){const n=activeSub;activeSub=void 0;try{e()}finally{activeSub=n}}}let globalVersion=0;class Link{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==activeSub)n=this.activeLink=new Link(activeSub,this),activeSub.deps?(n.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=n,activeSub.depsTail=n):activeSub.deps=activeSub.depsTail=n,addSub(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=activeSub.depsTail,n.nextDep=void 0,activeSub.depsTail.nextDep=n,activeSub.depsTail=n,activeSub.deps===n&&(activeSub.deps=s)}return n}trigger(e){this.version++,globalVersion++,this.notify(e)}notify(e){startBatch();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{endBatch()}}}function addSub(r){if(r.dep.sc++,r.sub.flags&4){const e=r.dep.computed;if(e&&!r.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)addSub(s)}const n=r.dep.subs;n!==r&&(r.prevSub=n,n&&(n.nextSub=r)),r.dep.subs=r}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(r,e,n){if(shouldTrack&&activeSub){let s=targetMap.get(r);s||targetMap.set(r,s=new Map);let a=s.get(n);a||(s.set(n,a=new Dep),a.map=s,a.key=n),a.track()}}function trigger$1(r,e,n,s,a,o){const l=targetMap.get(r);if(!l){globalVersion++;return}const u=c=>{c&&c.trigger()};if(startBatch(),e==="clear")l.forEach(u);else{const c=isArray(r),f=c&&isIntegerKey(n);if(c&&n==="length"){const m=Number(s);l.forEach((v,x)=>{(x==="length"||x===ARRAY_ITERATE_KEY||!isSymbol$1(x)&&x>=m)&&u(v)})}else switch((n!==void 0||l.has(void 0))&&u(l.get(n)),f&&u(l.get(ARRAY_ITERATE_KEY)),e){case"add":c?f&&u(l.get("length")):(u(l.get(ITERATE_KEY)),isMap(r)&&u(l.get(MAP_KEY_ITERATE_KEY)));break;case"delete":c||(u(l.get(ITERATE_KEY)),isMap(r)&&u(l.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(r)&&u(l.get(ITERATE_KEY));break}}endBatch()}function reactiveReadArray(r){const e=toRaw(r);return e===r?e:(track(e,"iterate",ARRAY_ITERATE_KEY),isShallow(r)?e:e.map(toReactive))}function shallowReadArray(r){return track(r=toRaw(r),"iterate",ARRAY_ITERATE_KEY),r}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...r){return reactiveReadArray(this).concat(...r.map(e=>isArray(e)?reactiveReadArray(e):e))},entries(){return iterator(this,"entries",r=>(r[1]=toReactive(r[1]),r))},every(r,e){return apply(this,"every",r,e,void 0,arguments)},filter(r,e){return apply(this,"filter",r,e,n=>n.map(toReactive),arguments)},find(r,e){return apply(this,"find",r,e,toReactive,arguments)},findIndex(r,e){return apply(this,"findIndex",r,e,void 0,arguments)},findLast(r,e){return apply(this,"findLast",r,e,toReactive,arguments)},findLastIndex(r,e){return apply(this,"findLastIndex",r,e,void 0,arguments)},forEach(r,e){return apply(this,"forEach",r,e,void 0,arguments)},includes(...r){return searchProxy(this,"includes",r)},indexOf(...r){return searchProxy(this,"indexOf",r)},join(r){return reactiveReadArray(this).join(r)},lastIndexOf(...r){return searchProxy(this,"lastIndexOf",r)},map(r,e){return apply(this,"map",r,e,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...r){return noTracking(this,"push",r)},reduce(r,...e){return reduce$1(this,"reduce",r,e)},reduceRight(r,...e){return reduce$1(this,"reduceRight",r,e)},shift(){return noTracking(this,"shift")},some(r,e){return apply(this,"some",r,e,void 0,arguments)},splice(...r){return noTracking(this,"splice",r)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(r){return reactiveReadArray(this).toSorted(r)},toSpliced(...r){return reactiveReadArray(this).toSpliced(...r)},unshift(...r){return noTracking(this,"unshift",r)},values(){return iterator(this,"values",toReactive)}};function iterator(r,e,n){const s=shallowReadArray(r),a=s[e]();return s!==r&&!isShallow(r)&&(a._next=a.next,a.next=()=>{const o=a._next();return o.value&&(o.value=n(o.value)),o}),a}const arrayProto=Array.prototype;function apply(r,e,n,s,a,o){const l=shallowReadArray(r),u=l!==r&&!isShallow(r),c=l[e];if(c!==arrayProto[e]){const v=c.apply(r,o);return u?toReactive(v):v}let f=n;l!==r&&(u?f=function(v,x){return n.call(this,toReactive(v),x,r)}:n.length>2&&(f=function(v,x){return n.call(this,v,x,r)}));const m=c.call(l,f,s);return u&&a?a(m):m}function reduce$1(r,e,n,s){const a=shallowReadArray(r);let o=n;return a!==r&&(isShallow(r)?n.length>3&&(o=function(l,u,c){return n.call(this,l,u,c,r)}):o=function(l,u,c){return n.call(this,l,toReactive(u),c,r)}),a[e](o,...s)}function searchProxy(r,e,n){const s=toRaw(r);track(s,"iterate",ARRAY_ITERATE_KEY);const a=s[e](...n);return(a===-1||a===!1)&&isProxy(n[0])?(n[0]=toRaw(n[0]),s[e](...n)):a}function noTracking(r,e,n=[]){pauseTracking(),startBatch();const s=toRaw(r)[e].apply(r,n);return endBatch(),resetTracking(),s}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(isSymbol$1));function hasOwnProperty$2(r){isSymbol$1(r)||(r=String(r));const e=toRaw(this);return track(e,"has",r),e.hasOwnProperty(r)}class BaseReactiveHandler{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const a=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!a;if(n==="__v_isReadonly")return a;if(n==="__v_isShallow")return o;if(n==="__v_raw")return s===(a?o?shallowReadonlyMap:readonlyMap:o?shallowReactiveMap:reactiveMap).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const l=isArray(e);if(!a){let c;if(l&&(c=arrayInstrumentations[n]))return c;if(n==="hasOwnProperty")return hasOwnProperty$2}const u=Reflect.get(e,n,isRef(e)?e:s);return(isSymbol$1(n)?builtInSymbols.has(n):isNonTrackableKeys(n))||(a||track(e,"get",n),o)?u:isRef(u)?l&&isIntegerKey(n)?u:u.value:isObject$4(u)?a?readonly(u):reactive(u):u}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!1,e)}set(e,n,s,a){let o=e[n];if(!this._isShallow){const c=isReadonly(o);if(!isShallow(s)&&!isReadonly(s)&&(o=toRaw(o),s=toRaw(s)),!isArray(e)&&isRef(o)&&!isRef(s))return c?!1:(o.value=s,!0)}const l=isArray(e)&&isIntegerKey(n)?Number(n)<e.length:hasOwn(e,n),u=Reflect.set(e,n,s,isRef(e)?e:a);return e===toRaw(a)&&(l?hasChanged(s,o)&&trigger$1(e,"set",n,s):trigger$1(e,"add",n,s)),u}deleteProperty(e,n){const s=hasOwn(e,n);e[n];const a=Reflect.deleteProperty(e,n);return a&&s&&trigger$1(e,"delete",n,void 0),a}has(e,n){const s=Reflect.has(e,n);return(!isSymbol$1(n)||!builtInSymbols.has(n))&&track(e,"has",n),s}ownKeys(e){return track(e,"iterate",isArray(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=r=>r,getProto=r=>Reflect.getPrototypeOf(r);function createIterableMethod(r,e,n){return function(...s){const a=this.__v_raw,o=toRaw(a),l=isMap(o),u=r==="entries"||r===Symbol.iterator&&l,c=r==="keys"&&l,f=a[r](...s),m=n?toShallow:e?toReadonly:toReactive;return!e&&track(o,"iterate",c?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:v,done:x}=f.next();return x?{value:v,done:x}:{value:u?[m(v[0]),m(v[1])]:m(v),done:x}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(r){return function(...e){return r==="delete"?!1:r==="clear"?void 0:this}}function createInstrumentations(r,e){const n={get(a){const o=this.__v_raw,l=toRaw(o),u=toRaw(a);r||(hasChanged(a,u)&&track(l,"get",a),track(l,"get",u));const{has:c}=getProto(l),f=e?toShallow:r?toReadonly:toReactive;if(c.call(l,a))return f(o.get(a));if(c.call(l,u))return f(o.get(u));o!==l&&o.get(a)},get size(){const a=this.__v_raw;return!r&&track(toRaw(a),"iterate",ITERATE_KEY),Reflect.get(a,"size",a)},has(a){const o=this.__v_raw,l=toRaw(o),u=toRaw(a);return r||(hasChanged(a,u)&&track(l,"has",a),track(l,"has",u)),a===u?o.has(a):o.has(a)||o.has(u)},forEach(a,o){const l=this,u=l.__v_raw,c=toRaw(u),f=e?toShallow:r?toReadonly:toReactive;return!r&&track(c,"iterate",ITERATE_KEY),u.forEach((m,v)=>a.call(o,f(m),f(v),l))}};return extend$1(n,r?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(a){!e&&!isShallow(a)&&!isReadonly(a)&&(a=toRaw(a));const o=toRaw(this);return getProto(o).has.call(o,a)||(o.add(a),trigger$1(o,"add",a,a)),this},set(a,o){!e&&!isShallow(o)&&!isReadonly(o)&&(o=toRaw(o));const l=toRaw(this),{has:u,get:c}=getProto(l);let f=u.call(l,a);f||(a=toRaw(a),f=u.call(l,a));const m=c.call(l,a);return l.set(a,o),f?hasChanged(o,m)&&trigger$1(l,"set",a,o):trigger$1(l,"add",a,o),this},delete(a){const o=toRaw(this),{has:l,get:u}=getProto(o);let c=l.call(o,a);c||(a=toRaw(a),c=l.call(o,a)),u&&u.call(o,a);const f=o.delete(a);return c&&trigger$1(o,"delete",a,void 0),f},clear(){const a=toRaw(this),o=a.size!==0,l=a.clear();return o&&trigger$1(a,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(a=>{n[a]=createIterableMethod(a,r,e)}),n}function createInstrumentationGetter(r,e){const n=createInstrumentations(r,e);return(s,a,o)=>a==="__v_isReactive"?!r:a==="__v_isReadonly"?r:a==="__v_raw"?s:Reflect.get(hasOwn(n,a)&&a in s?n:s,a,o)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(r){return r.__v_skip||!Object.isExtensible(r)?0:targetTypeMap(toRawType(r))}function reactive(r){return isReadonly(r)?r:createReactiveObject(r,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(r){return createReactiveObject(r,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(r){return createReactiveObject(r,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(r){return createReactiveObject(r,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(r,e,n,s,a){if(!isObject$4(r)||r.__v_raw&&!(e&&r.__v_isReactive))return r;const o=getTargetType(r);if(o===0)return r;const l=a.get(r);if(l)return l;const u=new Proxy(r,o===2?s:n);return a.set(r,u),u}function isReactive(r){return isReadonly(r)?isReactive(r.__v_raw):!!(r&&r.__v_isReactive)}function isReadonly(r){return!!(r&&r.__v_isReadonly)}function isShallow(r){return!!(r&&r.__v_isShallow)}function isProxy(r){return r?!!r.__v_raw:!1}function toRaw(r){const e=r&&r.__v_raw;return e?toRaw(e):r}function markRaw(r){return!hasOwn(r,"__v_skip")&&Object.isExtensible(r)&&def(r,"__v_skip",!0),r}const toReactive=r=>isObject$4(r)?reactive(r):r,toReadonly=r=>isObject$4(r)?readonly(r):r;function isRef(r){return r?r.__v_isRef===!0:!1}function ref(r){return createRef(r,!1)}function createRef(r,e){return isRef(r)?r:new RefImpl(r,e)}class RefImpl{constructor(e,n){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:toRaw(e),this._value=n?e:toReactive(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||isShallow(e)||isReadonly(e);e=s?e:toRaw(e),hasChanged(e,n)&&(this._rawValue=e,this._value=s?e:toReactive(e),this.dep.trigger())}}function unref(r){return isRef(r)?r.value:r}const shallowUnwrapHandlers={get:(r,e,n)=>e==="__v_raw"?r:unref(Reflect.get(r,e,n)),set:(r,e,n,s)=>{const a=r[e];return isRef(a)&&!isRef(n)?(a.value=n,!0):Reflect.set(r,e,n,s)}};function proxyRefs(r){return isReactive(r)?r:new Proxy(r,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const e=this.dep.track();return refreshComputed(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function computed$1(r,e,n=!1){let s,a;return isFunction$1(r)?s=r:(s=r.get,a=r.set),new ComputedRefImpl(s,a,n)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(r,e=!1,n=activeWatcher){if(n){let s=cleanupMap.get(n);s||cleanupMap.set(n,s=[]),s.push(r)}}function watch$1(r,e,n=EMPTY_OBJ){const{immediate:s,deep:a,once:o,scheduler:l,augmentJob:u,call:c}=n,f=F=>a?F:isShallow(F)||a===!1||a===0?traverse(F,1):traverse(F);let m,v,x,C,w=!1,S=!1;if(isRef(r)?(v=()=>r.value,w=isShallow(r)):isReactive(r)?(v=()=>f(r),w=!0):isArray(r)?(S=!0,w=r.some(F=>isReactive(F)||isShallow(F)),v=()=>r.map(F=>{if(isRef(F))return F.value;if(isReactive(F))return f(F);if(isFunction$1(F))return c?c(F,2):F()})):isFunction$1(r)?e?v=c?()=>c(r,2):r:v=()=>{if(x){pauseTracking();try{x()}finally{resetTracking()}}const F=activeWatcher;activeWatcher=m;try{return c?c(r,3,[C]):r(C)}finally{activeWatcher=F}}:v=NOOP,e&&a){const F=v,G=a===!0?1/0:a;v=()=>traverse(F(),G)}const k=getCurrentScope(),M=()=>{m.stop(),k&&k.active&&remove(k.effects,m)};if(o&&e){const F=e;e=(...G)=>{F(...G),M()}}let V=S?new Array(r.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const H=F=>{if(!(!(m.flags&1)||!m.dirty&&!F))if(e){const G=m.run();if(a||w||(S?G.some((W,R)=>hasChanged(W,V[R])):hasChanged(G,V))){x&&x();const W=activeWatcher;activeWatcher=m;try{const R=[G,V===INITIAL_WATCHER_VALUE?void 0:S&&V[0]===INITIAL_WATCHER_VALUE?[]:V,C];c?c(e,3,R):e(...R),V=G}finally{activeWatcher=W}}}else m.run()};return u&&u(H),m=new ReactiveEffect(v),m.scheduler=l?()=>l(H,!1):H,C=F=>onWatcherCleanup(F,!1,m),x=m.onStop=()=>{const F=cleanupMap.get(m);if(F){if(c)c(F,4);else for(const G of F)G();cleanupMap.delete(m)}},e?s?H(!0):V=m.run():l?l(H.bind(null,!0),!0):m.run(),M.pause=m.pause.bind(m),M.resume=m.resume.bind(m),M.stop=M,M}function traverse(r,e=1/0,n){if(e<=0||!isObject$4(r)||r.__v_skip||(n=n||new Set,n.has(r)))return r;if(n.add(r),e--,isRef(r))traverse(r.value,e,n);else if(isArray(r))for(let s=0;s<r.length;s++)traverse(r[s],e,n);else if(isSet(r)||isMap(r))r.forEach(s=>{traverse(s,e,n)});else if(isPlainObject(r)){for(const s in r)traverse(r[s],e,n);for(const s of Object.getOwnPropertySymbols(r))Object.prototype.propertyIsEnumerable.call(r,s)&&traverse(r[s],e,n)}return r}/**
* @vue/runtime-core v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];let isWarning=!1;function warn$1(r,...e){if(isWarning)return;isWarning=!0,pauseTracking();const n=stack.length?stack[stack.length-1].component:null,s=n&&n.appContext.config.warnHandler,a=getComponentTrace();if(s)callWithErrorHandling(s,n,11,[r+e.map(o=>{var l,u;return(u=(l=o.toString)==null?void 0:l.call(o))!=null?u:JSON.stringify(o)}).join(""),n&&n.proxy,a.map(({vnode:o})=>`at <${formatComponentName(n,o.type)}>`).join(`
`),a]);else{const o=[`[Vue warn]: ${r}`,...e];a.length&&o.push(`
`,...formatTrace(a)),console.warn(...o)}resetTracking(),isWarning=!1}function getComponentTrace(){let r=stack[stack.length-1];if(!r)return[];const e=[];for(;r;){const n=e[0];n&&n.vnode===r?n.recurseCount++:e.push({vnode:r,recurseCount:0});const s=r.component&&r.component.parent;r=s&&s.vnode}return e}function formatTrace(r){const e=[];return r.forEach((n,s)=>{e.push(...s===0?[]:[`
`],...formatTraceEntry(n))}),e}function formatTraceEntry({vnode:r,recurseCount:e}){const n=e>0?`... (${e} recursive calls)`:"",s=r.component?r.component.parent==null:!1,a=` at <${formatComponentName(r.component,r.type,s)}`,o=">"+n;return r.props?[a,...formatProps(r.props),o]:[a+o]}function formatProps(r){const e=[],n=Object.keys(r);return n.slice(0,3).forEach(s=>{e.push(...formatProp(s,r[s]))}),n.length>3&&e.push(" ..."),e}function formatProp(r,e,n){return isString(e)?(e=JSON.stringify(e),n?e:[`${r}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?n?e:[`${r}=${e}`]:isRef(e)?(e=formatProp(r,toRaw(e.value),!0),n?e:[`${r}=Ref<`,e,">"]):isFunction$1(e)?[`${r}=fn${e.name?`<${e.name}>`:""}`]:(e=toRaw(e),n?e:[`${r}=`,e])}function callWithErrorHandling(r,e,n,s){try{return s?r(...s):r()}catch(a){handleError(a,e,n)}}function callWithAsyncErrorHandling(r,e,n,s){if(isFunction$1(r)){const a=callWithErrorHandling(r,e,n,s);return a&&isPromise$2(a)&&a.catch(o=>{handleError(o,e,n)}),a}if(isArray(r)){const a=[];for(let o=0;o<r.length;o++)a.push(callWithAsyncErrorHandling(r[o],e,n,s));return a}}function handleError(r,e,n,s=!0){const a=e?e.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:l}=e&&e.appContext.config||EMPTY_OBJ;if(e){let u=e.parent;const c=e.proxy,f=`https://vuejs.org/error-reference/#runtime-${n}`;for(;u;){const m=u.ec;if(m){for(let v=0;v<m.length;v++)if(m[v](r,c,f)===!1)return}u=u.parent}if(o){pauseTracking(),callWithErrorHandling(o,null,10,[r,c,f]),resetTracking();return}}logError(r,n,a,s,l)}function logError(r,e,n,s=!0,a=!1){if(a)throw r;console.error(r)}const queue$1=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(r){const e=currentFlushPromise||resolvedPromise;return r?e.then(this?r.bind(this):r):e}function findInsertionIndex(r){let e=flushIndex+1,n=queue$1.length;for(;e<n;){const s=e+n>>>1,a=queue$1[s],o=getId(a);o<r||o===r&&a.flags&2?e=s+1:n=s}return e}function queueJob(r){if(!(r.flags&1)){const e=getId(r),n=queue$1[queue$1.length-1];!n||!(r.flags&2)&&e>=getId(n)?queue$1.push(r):queue$1.splice(findInsertionIndex(e),0,r),r.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(r){isArray(r)?pendingPostFlushCbs.push(...r):activePostFlushCbs&&r.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,r):r.flags&1||(pendingPostFlushCbs.push(r),r.flags|=1),queueFlush()}function flushPreFlushCbs(r,e,n=flushIndex+1){for(;n<queue$1.length;n++){const s=queue$1[n];if(s&&s.flags&2){if(r&&s.id!==r.uid)continue;queue$1.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function flushPostFlushCbs(r){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)].sort((n,s)=>getId(n)-getId(s));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const n=activePostFlushCbs[postFlushIndex];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=r=>r.id==null?r.flags&2?-1:1/0:r.id;function flushJobs(r){try{for(flushIndex=0;flushIndex<queue$1.length;flushIndex++){const e=queue$1[flushIndex];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),callWithErrorHandling(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;flushIndex<queue$1.length;flushIndex++){const e=queue$1[flushIndex];e&&(e.flags&=-2)}flushIndex=-1,queue$1.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue$1.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(r){const e=currentRenderingInstance;return currentRenderingInstance=r,currentScopeId=r&&r.type.__scopeId||null,e}function withCtx(r,e=currentRenderingInstance,n){if(!e||r._n)return r;const s=(...a)=>{s._d&&setBlockTracking(-1);const o=setCurrentRenderingInstance(e);let l;try{l=r(...a)}finally{setCurrentRenderingInstance(o),s._d&&setBlockTracking(1)}return l};return s._n=!0,s._c=!0,s._d=!0,s}function withDirectives(r,e){if(currentRenderingInstance===null)return r;const n=getComponentPublicInstance(currentRenderingInstance),s=r.dirs||(r.dirs=[]);for(let a=0;a<e.length;a++){let[o,l,u,c=EMPTY_OBJ]=e[a];o&&(isFunction$1(o)&&(o={mounted:o,updated:o}),o.deep&&traverse(l),s.push({dir:o,instance:n,value:l,oldValue:void 0,arg:u,modifiers:c}))}return r}function invokeDirectiveHook(r,e,n,s){const a=r.dirs,o=e&&e.dirs;for(let l=0;l<a.length;l++){const u=a[l];o&&(u.oldValue=o[l].value);let c=u.dir[s];c&&(pauseTracking(),callWithAsyncErrorHandling(c,n,8,[r.el,u,r,e]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=r=>r.__isTeleport,isTeleportDisabled=r=>r&&(r.disabled||r.disabled===""),isTeleportDeferred=r=>r&&(r.defer||r.defer===""),isTargetSVG=r=>typeof SVGElement<"u"&&r instanceof SVGElement,isTargetMathML=r=>typeof MathMLElement=="function"&&r instanceof MathMLElement,resolveTarget=(r,e)=>{const n=r&&r.to;return isString(n)?e?e(n):null:n},TeleportImpl={name:"Teleport",__isTeleport:!0,process(r,e,n,s,a,o,l,u,c,f){const{mc:m,pc:v,pbc:x,o:{insert:C,querySelector:w,createText:S,createComment:k}}=f,M=isTeleportDisabled(e.props);let{shapeFlag:V,children:H,dynamicChildren:F}=e;if(r==null){const G=e.el=S(""),W=e.anchor=S("");C(G,n,s),C(W,n,s);const R=(A,P)=>{V&16&&(a&&a.isCE&&(a.ce._teleportTarget=A),m(H,A,P,a,o,l,u,c))},Q=()=>{const A=e.target=resolveTarget(e.props,w),P=prepareAnchor(A,e,S,C);A&&(l!=="svg"&&isTargetSVG(A)?l="svg":l!=="mathml"&&isTargetMathML(A)&&(l="mathml"),M||(R(A,P),updateCssVars(e,!1)))};M&&(R(n,W),updateCssVars(e,!0)),isTeleportDeferred(e.props)?queuePostRenderEffect(()=>{Q(),e.el.__isMounted=!0},o):Q()}else{if(isTeleportDeferred(e.props)&&!r.el.__isMounted){queuePostRenderEffect(()=>{TeleportImpl.process(r,e,n,s,a,o,l,u,c,f),delete r.el.__isMounted},o);return}e.el=r.el,e.targetStart=r.targetStart;const G=e.anchor=r.anchor,W=e.target=r.target,R=e.targetAnchor=r.targetAnchor,Q=isTeleportDisabled(r.props),A=Q?n:W,P=Q?G:R;if(l==="svg"||isTargetSVG(W)?l="svg":(l==="mathml"||isTargetMathML(W))&&(l="mathml"),F?(x(r.dynamicChildren,F,A,a,o,l,u),traverseStaticChildren(r,e,!0)):c||v(r,e,A,P,a,o,l,u,!1),M)Q?e.props&&r.props&&e.props.to!==r.props.to&&(e.props.to=r.props.to):moveTeleport(e,n,G,f,1);else if((e.props&&e.props.to)!==(r.props&&r.props.to)){const j=e.target=resolveTarget(e.props,w);j&&moveTeleport(e,j,null,f,0)}else Q&&moveTeleport(e,W,R,f,1);updateCssVars(e,M)}},remove(r,e,n,{um:s,o:{remove:a}},o){const{shapeFlag:l,children:u,anchor:c,targetStart:f,targetAnchor:m,target:v,props:x}=r;if(v&&(a(f),a(m)),o&&a(c),l&16){const C=o||!isTeleportDisabled(x);for(let w=0;w<u.length;w++){const S=u[w];s(S,e,n,C,!!S.dynamicChildren)}}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(r,e,n,{o:{insert:s},m:a},o=2){o===0&&s(r.targetAnchor,e,n);const{el:l,anchor:u,shapeFlag:c,children:f,props:m}=r,v=o===2;if(v&&s(l,e,n),(!v||isTeleportDisabled(m))&&c&16)for(let x=0;x<f.length;x++)a(f[x],e,n,2);v&&s(u,e,n)}function hydrateTeleport(r,e,n,s,a,o,{o:{nextSibling:l,parentNode:u,querySelector:c,insert:f,createText:m}},v){const x=e.target=resolveTarget(e.props,c);if(x){const C=isTeleportDisabled(e.props),w=x._lpa||x.firstChild;if(e.shapeFlag&16)if(C)e.anchor=v(l(r),e,u(r),n,s,a,o),e.targetStart=w,e.targetAnchor=w&&l(w);else{e.anchor=l(r);let S=w;for(;S;){if(S&&S.nodeType===8){if(S.data==="teleport start anchor")e.targetStart=S;else if(S.data==="teleport anchor"){e.targetAnchor=S,x._lpa=e.targetAnchor&&l(e.targetAnchor);break}}S=l(S)}e.targetAnchor||prepareAnchor(x,e,m,f),v(w&&l(w),e,x,n,s,a,o)}updateCssVars(e,C)}return e.anchor&&l(e.anchor)}const Teleport=TeleportImpl;function updateCssVars(r,e){const n=r.ctx;if(n&&n.ut){let s,a;for(e?(s=r.el,a=r.anchor):(s=r.targetStart,a=r.targetAnchor);s&&s!==a;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}function prepareAnchor(r,e,n,s){const a=e.targetStart=n(""),o=e.targetAnchor=n("");return a[TeleportEndKey]=o,r&&(s(a,r),s(o,r)),o}const leaveCbKey=Symbol("_leaveCb"),enterCbKey=Symbol("_enterCb");function useTransitionState(){const r={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{r.isMounted=!0}),onBeforeUnmount(()=>{r.isUnmounting=!0}),r}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},recursiveGetSubtree=r=>{const e=r.subTree;return e.component?recursiveGetSubtree(e.component):e},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(r,{slots:e}){const n=getCurrentInstance(),s=useTransitionState();return()=>{const a=e.default&&getTransitionRawChildren(e.default(),!0);if(!a||!a.length)return;const o=findNonCommentChild(a),l=toRaw(r),{mode:u}=l;if(s.isLeaving)return emptyPlaceholder(o);const c=getInnerChild$1(o);if(!c)return emptyPlaceholder(o);let f=resolveTransitionHooks(c,l,s,n,v=>f=v);c.type!==Comment&&setTransitionHooks(c,f);let m=n.subTree&&getInnerChild$1(n.subTree);if(m&&m.type!==Comment&&!isSameVNodeType(c,m)&&recursiveGetSubtree(n).type!==Comment){let v=resolveTransitionHooks(m,l,s,n);if(setTransitionHooks(m,v),u==="out-in"&&c.type!==Comment)return s.isLeaving=!0,v.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete v.afterLeave,m=void 0},emptyPlaceholder(o);u==="in-out"&&c.type!==Comment?v.delayLeave=(x,C,w)=>{const S=getLeavingNodesForType(s,m);S[String(m.key)]=m,x[leaveCbKey]=()=>{C(),x[leaveCbKey]=void 0,delete f.delayedLeave,m=void 0},f.delayedLeave=()=>{w(),delete f.delayedLeave,m=void 0}}:m=void 0}else m&&(m=void 0);return o}}};function findNonCommentChild(r){let e=r[0];if(r.length>1){for(const n of r)if(n.type!==Comment){e=n;break}}return e}const BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(r,e){const{leavingVNodes:n}=r;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function resolveTransitionHooks(r,e,n,s,a){const{appear:o,mode:l,persisted:u=!1,onBeforeEnter:c,onEnter:f,onAfterEnter:m,onEnterCancelled:v,onBeforeLeave:x,onLeave:C,onAfterLeave:w,onLeaveCancelled:S,onBeforeAppear:k,onAppear:M,onAfterAppear:V,onAppearCancelled:H}=e,F=String(r.key),G=getLeavingNodesForType(n,r),W=(A,P)=>{A&&callWithAsyncErrorHandling(A,s,9,P)},R=(A,P)=>{const j=P[1];W(A,P),isArray(A)?A.every(X=>X.length<=1)&&j():A.length<=1&&j()},Q={mode:l,persisted:u,beforeEnter(A){let P=c;if(!n.isMounted)if(o)P=k||c;else return;A[leaveCbKey]&&A[leaveCbKey](!0);const j=G[F];j&&isSameVNodeType(r,j)&&j.el[leaveCbKey]&&j.el[leaveCbKey](),W(P,[A])},enter(A){let P=f,j=m,X=v;if(!n.isMounted)if(o)P=M||f,j=V||m,X=H||v;else return;let Z=!1;const ae=A[enterCbKey]=pe=>{Z||(Z=!0,pe?W(X,[A]):W(j,[A]),Q.delayedLeave&&Q.delayedLeave(),A[enterCbKey]=void 0)};P?R(P,[A,ae]):ae()},leave(A,P){const j=String(r.key);if(A[enterCbKey]&&A[enterCbKey](!0),n.isUnmounting)return P();W(x,[A]);let X=!1;const Z=A[leaveCbKey]=ae=>{X||(X=!0,P(),ae?W(S,[A]):W(w,[A]),A[leaveCbKey]=void 0,G[j]===r&&delete G[j])};G[j]=r,C?R(C,[A,Z]):Z()},clone(A){const P=resolveTransitionHooks(A,e,n,s,a);return a&&a(P),P}};return Q}function emptyPlaceholder(r){if(isKeepAlive(r))return r=cloneVNode(r),r.children=null,r}function getInnerChild$1(r){if(!isKeepAlive(r))return isTeleport(r.type)&&r.children?findNonCommentChild(r.children):r;if(r.component)return r.component.subTree;const{shapeFlag:e,children:n}=r;if(n){if(e&16)return n[0];if(e&32&&isFunction$1(n.default))return n.default()}}function setTransitionHooks(r,e){r.shapeFlag&6&&r.component?(r.transition=e,setTransitionHooks(r.component.subTree,e)):r.shapeFlag&128?(r.ssContent.transition=e.clone(r.ssContent),r.ssFallback.transition=e.clone(r.ssFallback)):r.transition=e}function getTransitionRawChildren(r,e=!1,n){let s=[],a=0;for(let o=0;o<r.length;o++){let l=r[o];const u=n==null?l.key:String(n)+String(l.key!=null?l.key:o);l.type===Fragment?(l.patchFlag&128&&a++,s=s.concat(getTransitionRawChildren(l.children,e,u))):(e||l.type!==Comment)&&s.push(u!=null?cloneVNode(l,{key:u}):l)}if(a>1)for(let o=0;o<s.length;o++)s[o].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(r,e){return isFunction$1(r)?extend$1({name:r.name},e,{setup:r}):r}function markAsyncBoundary(r){r.ids=[r.ids[0]+r.ids[2]+++"-",0,0]}function setRef(r,e,n,s,a=!1){if(isArray(r)){r.forEach((w,S)=>setRef(w,e&&(isArray(e)?e[S]:e),n,s,a));return}if(isAsyncWrapper(s)&&!a){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&setRef(r,e,n,s.component.subTree);return}const o=s.shapeFlag&4?getComponentPublicInstance(s.component):s.el,l=a?null:o,{i:u,r:c}=r,f=e&&e.r,m=u.refs===EMPTY_OBJ?u.refs={}:u.refs,v=u.setupState,x=toRaw(v),C=v===EMPTY_OBJ?()=>!1:w=>hasOwn(x,w);if(f!=null&&f!==c&&(isString(f)?(m[f]=null,C(f)&&(v[f]=null)):isRef(f)&&(f.value=null)),isFunction$1(c))callWithErrorHandling(c,u,12,[l,m]);else{const w=isString(c),S=isRef(c);if(w||S){const k=()=>{if(r.f){const M=w?C(c)?v[c]:m[c]:c.value;a?isArray(M)&&remove(M,o):isArray(M)?M.includes(o)||M.push(o):w?(m[c]=[o],C(c)&&(v[c]=m[c])):(c.value=[o],r.k&&(m[r.k]=c.value))}else w?(m[c]=l,C(c)&&(v[c]=l)):S&&(c.value=l,r.k&&(m[r.k]=l))};l?(k.id=-1,queuePostRenderEffect(k,n)):k()}}}getGlobalThis().requestIdleCallback;getGlobalThis().cancelIdleCallback;const isAsyncWrapper=r=>!!r.type.__asyncLoader,isKeepAlive=r=>r.type.__isKeepAlive;function onActivated(r,e){registerKeepAliveHook(r,"a",e)}function onDeactivated(r,e){registerKeepAliveHook(r,"da",e)}function registerKeepAliveHook(r,e,n=currentInstance){const s=r.__wdc||(r.__wdc=()=>{let a=n;for(;a;){if(a.isDeactivated)return;a=a.parent}return r()});if(injectHook(e,s,n),n){let a=n.parent;for(;a&&a.parent;)isKeepAlive(a.parent.vnode)&&injectToKeepAliveRoot(s,e,n,a),a=a.parent}}function injectToKeepAliveRoot(r,e,n,s){const a=injectHook(e,r,s,!0);onUnmounted(()=>{remove(s[e],a)},n)}function injectHook(r,e,n=currentInstance,s=!1){if(n){const a=n[r]||(n[r]=[]),o=e.__weh||(e.__weh=(...l)=>{pauseTracking();const u=setCurrentInstance(n),c=callWithAsyncErrorHandling(e,n,r,l);return u(),resetTracking(),c});return s?a.unshift(o):a.push(o),o}}const createHook=r=>(e,n=currentInstance)=>{(!isInSSRComponentSetup||r==="sp")&&injectHook(r,(...s)=>e(...s),n)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(r,e=currentInstance){injectHook("ec",r,e)}const COMPONENTS="components";function resolveComponent(r,e){return resolveAsset(COMPONENTS,r,!0,e)||r}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveAsset(r,e,n=!0,s=!1){const a=currentRenderingInstance||currentInstance;if(a){const o=a.type;{const u=getComponentName(o,!1);if(u&&(u===e||u===camelize$1(e)||u===capitalize(camelize$1(e))))return o}const l=resolve(a[r]||o[r],e)||resolve(a.appContext[r],e);return!l&&s?o:l}}function resolve(r,e){return r&&(r[e]||r[camelize$1(e)]||r[capitalize(camelize$1(e))])}function renderList(r,e,n,s){let a;const o=n,l=isArray(r);if(l||isString(r)){const u=l&&isReactive(r);let c=!1,f=!1;u&&(c=!isShallow(r),f=isReadonly(r),r=shallowReadArray(r)),a=new Array(r.length);for(let m=0,v=r.length;m<v;m++)a[m]=e(c?f?toReadonly(toReactive(r[m])):toReactive(r[m]):r[m],m,void 0,o)}else if(typeof r=="number"){a=new Array(r);for(let u=0;u<r;u++)a[u]=e(u+1,u,void 0,o)}else if(isObject$4(r))if(r[Symbol.iterator])a=Array.from(r,(u,c)=>e(u,c,void 0,o));else{const u=Object.keys(r);a=new Array(u.length);for(let c=0,f=u.length;c<f;c++){const m=u[c];a[c]=e(r[m],m,c,o)}}else a=[];return a}const getPublicInstance=r=>r?isStatefulComponent(r)?getComponentPublicInstance(r):getPublicInstance(r.parent):null,publicPropertiesMap=extend$1(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>getPublicInstance(r.parent),$root:r=>getPublicInstance(r.root),$host:r=>r.ce,$emit:r=>r.emit,$options:r=>resolveMergedOptions(r),$forceUpdate:r=>r.f||(r.f=()=>{queueJob(r.update)}),$nextTick:r=>r.n||(r.n=nextTick.bind(r.proxy)),$watch:r=>instanceWatch.bind(r)}),hasSetupBinding=(r,e)=>r!==EMPTY_OBJ&&!r.__isScriptSetup&&hasOwn(r,e),PublicInstanceProxyHandlers={get({_:r},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:a,props:o,accessCache:l,type:u,appContext:c}=r;let f;if(e[0]!=="$"){const C=l[e];if(C!==void 0)switch(C){case 1:return s[e];case 2:return a[e];case 4:return n[e];case 3:return o[e]}else{if(hasSetupBinding(s,e))return l[e]=1,s[e];if(a!==EMPTY_OBJ&&hasOwn(a,e))return l[e]=2,a[e];if((f=r.propsOptions[0])&&hasOwn(f,e))return l[e]=3,o[e];if(n!==EMPTY_OBJ&&hasOwn(n,e))return l[e]=4,n[e];shouldCacheAccess&&(l[e]=0)}}const m=publicPropertiesMap[e];let v,x;if(m)return e==="$attrs"&&track(r.attrs,"get",""),m(r);if((v=u.__cssModules)&&(v=v[e]))return v;if(n!==EMPTY_OBJ&&hasOwn(n,e))return l[e]=4,n[e];if(x=c.config.globalProperties,hasOwn(x,e))return x[e]},set({_:r},e,n){const{data:s,setupState:a,ctx:o}=r;return hasSetupBinding(a,e)?(a[e]=n,!0):s!==EMPTY_OBJ&&hasOwn(s,e)?(s[e]=n,!0):hasOwn(r.props,e)||e[0]==="$"&&e.slice(1)in r?!1:(o[e]=n,!0)},has({_:{data:r,setupState:e,accessCache:n,ctx:s,appContext:a,propsOptions:o}},l){let u;return!!n[l]||r!==EMPTY_OBJ&&hasOwn(r,l)||hasSetupBinding(e,l)||(u=o[0])&&hasOwn(u,l)||hasOwn(s,l)||hasOwn(publicPropertiesMap,l)||hasOwn(a.config.globalProperties,l)},defineProperty(r,e,n){return n.get!=null?r._.accessCache[e]=0:hasOwn(n,"value")&&this.set(r,e,n.value,null),Reflect.defineProperty(r,e,n)}};function normalizePropsOrEmits(r){return isArray(r)?r.reduce((e,n)=>(e[n]=null,e),{}):r}let shouldCacheAccess=!0;function applyOptions(r){const e=resolveMergedOptions(r),n=r.proxy,s=r.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook$1(e.beforeCreate,r,"bc");const{data:a,computed:o,methods:l,watch:u,provide:c,inject:f,created:m,beforeMount:v,mounted:x,beforeUpdate:C,updated:w,activated:S,deactivated:k,beforeDestroy:M,beforeUnmount:V,destroyed:H,unmounted:F,render:G,renderTracked:W,renderTriggered:R,errorCaptured:Q,serverPrefetch:A,expose:P,inheritAttrs:j,components:X,directives:Z,filters:ae}=e;if(f&&resolveInjections(f,s,null),l)for(const ee in l){const ne=l[ee];isFunction$1(ne)&&(s[ee]=ne.bind(n))}if(a){const ee=a.call(n,n);isObject$4(ee)&&(r.data=reactive(ee))}if(shouldCacheAccess=!0,o)for(const ee in o){const ne=o[ee],oe=isFunction$1(ne)?ne.bind(n,n):isFunction$1(ne.get)?ne.get.bind(n,n):NOOP,he=!isFunction$1(ne)&&isFunction$1(ne.set)?ne.set.bind(n):NOOP,ge=computed({get:oe,set:he});Object.defineProperty(s,ee,{enumerable:!0,configurable:!0,get:()=>ge.value,set:Ie=>ge.value=Ie})}if(u)for(const ee in u)createWatcher(u[ee],s,n,ee);if(c){const ee=isFunction$1(c)?c.call(n):c;Reflect.ownKeys(ee).forEach(ne=>{provide(ne,ee[ne])})}m&&callHook$1(m,r,"c");function me(ee,ne){isArray(ne)?ne.forEach(oe=>ee(oe.bind(n))):ne&&ee(ne.bind(n))}if(me(onBeforeMount,v),me(onMounted,x),me(onBeforeUpdate,C),me(onUpdated,w),me(onActivated,S),me(onDeactivated,k),me(onErrorCaptured,Q),me(onRenderTracked,W),me(onRenderTriggered,R),me(onBeforeUnmount,V),me(onUnmounted,F),me(onServerPrefetch,A),isArray(P))if(P.length){const ee=r.exposed||(r.exposed={});P.forEach(ne=>{Object.defineProperty(ee,ne,{get:()=>n[ne],set:oe=>n[ne]=oe})})}else r.exposed||(r.exposed={});G&&r.render===NOOP&&(r.render=G),j!=null&&(r.inheritAttrs=j),X&&(r.components=X),Z&&(r.directives=Z),A&&markAsyncBoundary(r)}function resolveInjections(r,e,n=NOOP){isArray(r)&&(r=normalizeInject(r));for(const s in r){const a=r[s];let o;isObject$4(a)?"default"in a?o=inject(a.from||s,a.default,!0):o=inject(a.from||s):o=inject(a),isRef(o)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:l=>o.value=l}):e[s]=o}}function callHook$1(r,e,n){callWithAsyncErrorHandling(isArray(r)?r.map(s=>s.bind(e.proxy)):r.bind(e.proxy),e,n)}function createWatcher(r,e,n,s){let a=s.includes(".")?createPathGetter(n,s):()=>n[s];if(isString(r)){const o=e[r];isFunction$1(o)&&watch(a,o)}else if(isFunction$1(r))watch(a,r.bind(n));else if(isObject$4(r))if(isArray(r))r.forEach(o=>createWatcher(o,e,n,s));else{const o=isFunction$1(r.handler)?r.handler.bind(n):e[r.handler];isFunction$1(o)&&watch(a,o,r)}}function resolveMergedOptions(r){const e=r.type,{mixins:n,extends:s}=e,{mixins:a,optionsCache:o,config:{optionMergeStrategies:l}}=r.appContext,u=o.get(e);let c;return u?c=u:!a.length&&!n&&!s?c=e:(c={},a.length&&a.forEach(f=>mergeOptions(c,f,l,!0)),mergeOptions(c,e,l)),isObject$4(e)&&o.set(e,c),c}function mergeOptions(r,e,n,s=!1){const{mixins:a,extends:o}=e;o&&mergeOptions(r,o,n,!0),a&&a.forEach(l=>mergeOptions(r,l,n,!0));for(const l in e)if(!(s&&l==="expose")){const u=internalOptionMergeStrats[l]||n&&n[l];r[l]=u?u(r[l],e[l]):e[l]}return r}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(r,e){return e?r?function(){return extend$1(isFunction$1(r)?r.call(this,this):r,isFunction$1(e)?e.call(this,this):e)}:e:r}function mergeInject(r,e){return mergeObjectOptions(normalizeInject(r),normalizeInject(e))}function normalizeInject(r){if(isArray(r)){const e={};for(let n=0;n<r.length;n++)e[r[n]]=r[n];return e}return r}function mergeAsArray(r,e){return r?[...new Set([].concat(r,e))]:e}function mergeObjectOptions(r,e){return r?extend$1(Object.create(null),r,e):e}function mergeEmitsOrPropsOptions(r,e){return r?isArray(r)&&isArray(e)?[...new Set([...r,...e])]:extend$1(Object.create(null),normalizePropsOrEmits(r),normalizePropsOrEmits(e??{})):e}function mergeWatchOptions(r,e){if(!r)return e;if(!e)return r;const n=extend$1(Object.create(null),r);for(const s in e)n[s]=mergeAsArray(r[s],e[s]);return n}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(r,e){return function(s,a=null){isFunction$1(s)||(s=extend$1({},s)),a!=null&&!isObject$4(a)&&(a=null);const o=createAppContext(),l=new WeakSet,u=[];let c=!1;const f=o.app={_uid:uid$1++,_component:s,_props:a,_container:null,_context:o,_instance:null,version:version$7,get config(){return o.config},set config(m){},use(m,...v){return l.has(m)||(m&&isFunction$1(m.install)?(l.add(m),m.install(f,...v)):isFunction$1(m)&&(l.add(m),m(f,...v))),f},mixin(m){return o.mixins.includes(m)||o.mixins.push(m),f},component(m,v){return v?(o.components[m]=v,f):o.components[m]},directive(m,v){return v?(o.directives[m]=v,f):o.directives[m]},mount(m,v,x){if(!c){const C=f._ceVNode||createVNode(s,a);return C.appContext=o,x===!0?x="svg":x===!1&&(x=void 0),r(C,m,x),c=!0,f._container=m,m.__vue_app__=f,getComponentPublicInstance(C.component)}},onUnmount(m){u.push(m)},unmount(){c&&(callWithAsyncErrorHandling(u,f._instance,16),r(null,f._container),delete f._container.__vue_app__)},provide(m,v){return o.provides[m]=v,f},runWithContext(m){const v=currentApp;currentApp=f;try{return m()}finally{currentApp=v}}};return f}}let currentApp=null;function provide(r,e){if(currentInstance){let n=currentInstance.provides;const s=currentInstance.parent&&currentInstance.parent.provides;s===n&&(n=currentInstance.provides=Object.create(s)),n[r]=e}}function inject(r,e,n=!1){const s=currentInstance||currentRenderingInstance;if(s||currentApp){const a=currentApp?currentApp._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(a&&r in a)return a[r];if(arguments.length>1)return n&&isFunction$1(e)?e.call(s&&s.proxy):e}}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=r=>Object.getPrototypeOf(r)===internalObjectProto;function initProps(r,e,n,s=!1){const a={},o=createInternalObject();r.propsDefaults=Object.create(null),setFullProps(r,e,a,o);for(const l in r.propsOptions[0])l in a||(a[l]=void 0);n?r.props=s?a:shallowReactive(a):r.type.props?r.props=a:r.props=o,r.attrs=o}function updateProps(r,e,n,s){const{props:a,attrs:o,vnode:{patchFlag:l}}=r,u=toRaw(a),[c]=r.propsOptions;let f=!1;if((s||l>0)&&!(l&16)){if(l&8){const m=r.vnode.dynamicProps;for(let v=0;v<m.length;v++){let x=m[v];if(isEmitListener(r.emitsOptions,x))continue;const C=e[x];if(c)if(hasOwn(o,x))C!==o[x]&&(o[x]=C,f=!0);else{const w=camelize$1(x);a[w]=resolvePropValue(c,u,w,C,r,!1)}else C!==o[x]&&(o[x]=C,f=!0)}}}else{setFullProps(r,e,a,o)&&(f=!0);let m;for(const v in u)(!e||!hasOwn(e,v)&&((m=hyphenate(v))===v||!hasOwn(e,m)))&&(c?n&&(n[v]!==void 0||n[m]!==void 0)&&(a[v]=resolvePropValue(c,u,v,void 0,r,!0)):delete a[v]);if(o!==u)for(const v in o)(!e||!hasOwn(e,v))&&(delete o[v],f=!0)}f&&trigger$1(r.attrs,"set","")}function setFullProps(r,e,n,s){const[a,o]=r.propsOptions;let l=!1,u;if(e)for(let c in e){if(isReservedProp(c))continue;const f=e[c];let m;a&&hasOwn(a,m=camelize$1(c))?!o||!o.includes(m)?n[m]=f:(u||(u={}))[m]=f:isEmitListener(r.emitsOptions,c)||(!(c in s)||f!==s[c])&&(s[c]=f,l=!0)}if(o){const c=toRaw(n),f=u||EMPTY_OBJ;for(let m=0;m<o.length;m++){const v=o[m];n[v]=resolvePropValue(a,c,v,f[v],r,!hasOwn(f,v))}}return l}function resolvePropValue(r,e,n,s,a,o){const l=r[n];if(l!=null){const u=hasOwn(l,"default");if(u&&s===void 0){const c=l.default;if(l.type!==Function&&!l.skipFactory&&isFunction$1(c)){const{propsDefaults:f}=a;if(n in f)s=f[n];else{const m=setCurrentInstance(a);s=f[n]=c.call(null,e),m()}}else s=c;a.ce&&a.ce._setProp(n,s)}l[0]&&(o&&!u?s=!1:l[1]&&(s===""||s===hyphenate(n))&&(s=!0))}return s}const mixinPropsCache=new WeakMap;function normalizePropsOptions(r,e,n=!1){const s=n?mixinPropsCache:e.propsCache,a=s.get(r);if(a)return a;const o=r.props,l={},u=[];let c=!1;if(!isFunction$1(r)){const m=v=>{c=!0;const[x,C]=normalizePropsOptions(v,e,!0);extend$1(l,x),C&&u.push(...C)};!n&&e.mixins.length&&e.mixins.forEach(m),r.extends&&m(r.extends),r.mixins&&r.mixins.forEach(m)}if(!o&&!c)return isObject$4(r)&&s.set(r,EMPTY_ARR),EMPTY_ARR;if(isArray(o))for(let m=0;m<o.length;m++){const v=camelize$1(o[m]);validatePropName(v)&&(l[v]=EMPTY_OBJ)}else if(o)for(const m in o){const v=camelize$1(m);if(validatePropName(v)){const x=o[m],C=l[v]=isArray(x)||isFunction$1(x)?{type:x}:extend$1({},x),w=C.type;let S=!1,k=!0;if(isArray(w))for(let M=0;M<w.length;++M){const V=w[M],H=isFunction$1(V)&&V.name;if(H==="Boolean"){S=!0;break}else H==="String"&&(k=!1)}else S=isFunction$1(w)&&w.name==="Boolean";C[0]=S,C[1]=k,(S||hasOwn(C,"default"))&&u.push(v)}}const f=[l,u];return isObject$4(r)&&s.set(r,f),f}function validatePropName(r){return r[0]!=="$"&&!isReservedProp(r)}const isInternalKey=r=>r[0]==="_"||r==="$stable",normalizeSlotValue=r=>isArray(r)?r.map(normalizeVNode):[normalizeVNode(r)],normalizeSlot=(r,e,n)=>{if(e._n)return e;const s=withCtx((...a)=>normalizeSlotValue(e(...a)),n);return s._c=!1,s},normalizeObjectSlots=(r,e,n)=>{const s=r._ctx;for(const a in r){if(isInternalKey(a))continue;const o=r[a];if(isFunction$1(o))e[a]=normalizeSlot(a,o,s);else if(o!=null){const l=normalizeSlotValue(o);e[a]=()=>l}}},normalizeVNodeSlots=(r,e)=>{const n=normalizeSlotValue(e);r.slots.default=()=>n},assignSlots=(r,e,n)=>{for(const s in e)(n||!isInternalKey(s))&&(r[s]=e[s])},initSlots=(r,e,n)=>{const s=r.slots=createInternalObject();if(r.vnode.shapeFlag&32){const a=e._;a?(assignSlots(s,e,n),n&&def(s,"_",a,!0)):normalizeObjectSlots(e,s)}else e&&normalizeVNodeSlots(r,e)},updateSlots=(r,e,n)=>{const{vnode:s,slots:a}=r;let o=!0,l=EMPTY_OBJ;if(s.shapeFlag&32){const u=e._;u?n&&u===1?o=!1:assignSlots(a,e,n):(o=!e.$stable,normalizeObjectSlots(e,a)),l=e}else e&&(normalizeVNodeSlots(r,e),l={default:1});if(o)for(const u in a)!isInternalKey(u)&&l[u]==null&&delete a[u]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(r){return baseCreateRenderer(r)}function baseCreateRenderer(r,e){const n=getGlobalThis();n.__VUE__=!0;const{insert:s,remove:a,patchProp:o,createElement:l,createText:u,createComment:c,setText:f,setElementText:m,parentNode:v,nextSibling:x,setScopeId:C=NOOP,insertStaticContent:w}=r,S=(z,Y,te,ye=null,ce=null,_e=null,be=void 0,ve=null,fe=!!Y.dynamicChildren)=>{if(z===Y)return;z&&!isSameVNodeType(z,Y)&&(ye=Ze(z),Ie(z,ce,_e,!0),z=null),Y.patchFlag===-2&&(fe=!1,Y.dynamicChildren=null);const{type:ue,ref:we,shapeFlag:Se}=Y;switch(ue){case Text:k(z,Y,te,ye);break;case Comment:M(z,Y,te,ye);break;case Static:z==null&&V(Y,te,ye,be);break;case Fragment:X(z,Y,te,ye,ce,_e,be,ve,fe);break;default:Se&1?G(z,Y,te,ye,ce,_e,be,ve,fe):Se&6?Z(z,Y,te,ye,ce,_e,be,ve,fe):(Se&64||Se&128)&&ue.process(z,Y,te,ye,ce,_e,be,ve,fe,at)}we!=null&&ce&&setRef(we,z&&z.ref,_e,Y||z,!Y)},k=(z,Y,te,ye)=>{if(z==null)s(Y.el=u(Y.children),te,ye);else{const ce=Y.el=z.el;Y.children!==z.children&&f(ce,Y.children)}},M=(z,Y,te,ye)=>{z==null?s(Y.el=c(Y.children||""),te,ye):Y.el=z.el},V=(z,Y,te,ye)=>{[z.el,z.anchor]=w(z.children,Y,te,ye,z.el,z.anchor)},H=({el:z,anchor:Y},te,ye)=>{let ce;for(;z&&z!==Y;)ce=x(z),s(z,te,ye),z=ce;s(Y,te,ye)},F=({el:z,anchor:Y})=>{let te;for(;z&&z!==Y;)te=x(z),a(z),z=te;a(Y)},G=(z,Y,te,ye,ce,_e,be,ve,fe)=>{Y.type==="svg"?be="svg":Y.type==="math"&&(be="mathml"),z==null?W(Y,te,ye,ce,_e,be,ve,fe):A(z,Y,ce,_e,be,ve,fe)},W=(z,Y,te,ye,ce,_e,be,ve)=>{let fe,ue;const{props:we,shapeFlag:Se,transition:De,dirs:Pe}=z;if(fe=z.el=l(z.type,_e,we&&we.is,we),Se&8?m(fe,z.children):Se&16&&Q(z.children,fe,null,ye,ce,resolveChildrenNamespace(z,_e),be,ve),Pe&&invokeDirectiveHook(z,null,ye,"created"),R(fe,z,z.scopeId,be,ye),we){for(const He in we)He!=="value"&&!isReservedProp(He)&&o(fe,He,null,we[He],_e,ye);"value"in we&&o(fe,"value",null,we.value,_e),(ue=we.onVnodeBeforeMount)&&invokeVNodeHook(ue,ye,z)}Pe&&invokeDirectiveHook(z,null,ye,"beforeMount");const Ne=needTransition(ce,De);Ne&&De.beforeEnter(fe),s(fe,Y,te),((ue=we&&we.onVnodeMounted)||Ne||Pe)&&queuePostRenderEffect(()=>{ue&&invokeVNodeHook(ue,ye,z),Ne&&De.enter(fe),Pe&&invokeDirectiveHook(z,null,ye,"mounted")},ce)},R=(z,Y,te,ye,ce)=>{if(te&&C(z,te),ye)for(let _e=0;_e<ye.length;_e++)C(z,ye[_e]);if(ce){let _e=ce.subTree;if(Y===_e||isSuspense(_e.type)&&(_e.ssContent===Y||_e.ssFallback===Y)){const be=ce.vnode;R(z,be,be.scopeId,be.slotScopeIds,ce.parent)}}},Q=(z,Y,te,ye,ce,_e,be,ve,fe=0)=>{for(let ue=fe;ue<z.length;ue++){const we=z[ue]=ve?cloneIfMounted(z[ue]):normalizeVNode(z[ue]);S(null,we,Y,te,ye,ce,_e,be,ve)}},A=(z,Y,te,ye,ce,_e,be)=>{const ve=Y.el=z.el;let{patchFlag:fe,dynamicChildren:ue,dirs:we}=Y;fe|=z.patchFlag&16;const Se=z.props||EMPTY_OBJ,De=Y.props||EMPTY_OBJ;let Pe;if(te&&toggleRecurse(te,!1),(Pe=De.onVnodeBeforeUpdate)&&invokeVNodeHook(Pe,te,Y,z),we&&invokeDirectiveHook(Y,z,te,"beforeUpdate"),te&&toggleRecurse(te,!0),(Se.innerHTML&&De.innerHTML==null||Se.textContent&&De.textContent==null)&&m(ve,""),ue?P(z.dynamicChildren,ue,ve,te,ye,resolveChildrenNamespace(Y,ce),_e):be||ne(z,Y,ve,null,te,ye,resolveChildrenNamespace(Y,ce),_e,!1),fe>0){if(fe&16)j(ve,Se,De,te,ce);else if(fe&2&&Se.class!==De.class&&o(ve,"class",null,De.class,ce),fe&4&&o(ve,"style",Se.style,De.style,ce),fe&8){const Ne=Y.dynamicProps;for(let He=0;He<Ne.length;He++){const je=Ne[He],it=Se[je],Je=De[je];(Je!==it||je==="value")&&o(ve,je,it,Je,ce,te)}}fe&1&&z.children!==Y.children&&m(ve,Y.children)}else!be&&ue==null&&j(ve,Se,De,te,ce);((Pe=De.onVnodeUpdated)||we)&&queuePostRenderEffect(()=>{Pe&&invokeVNodeHook(Pe,te,Y,z),we&&invokeDirectiveHook(Y,z,te,"updated")},ye)},P=(z,Y,te,ye,ce,_e,be)=>{for(let ve=0;ve<Y.length;ve++){const fe=z[ve],ue=Y[ve],we=fe.el&&(fe.type===Fragment||!isSameVNodeType(fe,ue)||fe.shapeFlag&70)?v(fe.el):te;S(fe,ue,we,null,ye,ce,_e,be,!0)}},j=(z,Y,te,ye,ce)=>{if(Y!==te){if(Y!==EMPTY_OBJ)for(const _e in Y)!isReservedProp(_e)&&!(_e in te)&&o(z,_e,Y[_e],null,ce,ye);for(const _e in te){if(isReservedProp(_e))continue;const be=te[_e],ve=Y[_e];be!==ve&&_e!=="value"&&o(z,_e,ve,be,ce,ye)}"value"in te&&o(z,"value",Y.value,te.value,ce)}},X=(z,Y,te,ye,ce,_e,be,ve,fe)=>{const ue=Y.el=z?z.el:u(""),we=Y.anchor=z?z.anchor:u("");let{patchFlag:Se,dynamicChildren:De,slotScopeIds:Pe}=Y;Pe&&(ve=ve?ve.concat(Pe):Pe),z==null?(s(ue,te,ye),s(we,te,ye),Q(Y.children||[],te,we,ce,_e,be,ve,fe)):Se>0&&Se&64&&De&&z.dynamicChildren?(P(z.dynamicChildren,De,te,ce,_e,be,ve),(Y.key!=null||ce&&Y===ce.subTree)&&traverseStaticChildren(z,Y,!0)):ne(z,Y,te,we,ce,_e,be,ve,fe)},Z=(z,Y,te,ye,ce,_e,be,ve,fe)=>{Y.slotScopeIds=ve,z==null?Y.shapeFlag&512?ce.ctx.activate(Y,te,ye,be,fe):ae(Y,te,ye,ce,_e,be,fe):pe(z,Y,fe)},ae=(z,Y,te,ye,ce,_e,be)=>{const ve=z.component=createComponentInstance(z,ye,ce);if(isKeepAlive(z)&&(ve.ctx.renderer=at),setupComponent(ve,!1,be),ve.asyncDep){if(ce&&ce.registerDep(ve,me,be),!z.el){const fe=ve.subTree=createVNode(Comment);M(null,fe,Y,te)}}else me(ve,z,Y,te,ce,_e,be)},pe=(z,Y,te)=>{const ye=Y.component=z.component;if(shouldUpdateComponent(z,Y,te))if(ye.asyncDep&&!ye.asyncResolved){ee(ye,Y,te);return}else ye.next=Y,ye.update();else Y.el=z.el,ye.vnode=Y},me=(z,Y,te,ye,ce,_e,be)=>{const ve=()=>{if(z.isMounted){let{next:Se,bu:De,u:Pe,parent:Ne,vnode:He}=z;{const Fe=locateNonHydratedAsyncRoot(z);if(Fe){Se&&(Se.el=He.el,ee(z,Se,be)),Fe.asyncDep.then(()=>{z.isUnmounted||ve()});return}}let je=Se,it;toggleRecurse(z,!1),Se?(Se.el=He.el,ee(z,Se,be)):Se=He,De&&invokeArrayFns(De),(it=Se.props&&Se.props.onVnodeBeforeUpdate)&&invokeVNodeHook(it,Ne,Se,He),toggleRecurse(z,!0);const Je=renderComponentRoot(z),rt=z.subTree;z.subTree=Je,S(rt,Je,v(rt.el),Ze(rt),z,ce,_e),Se.el=Je.el,je===null&&updateHOCHostEl(z,Je.el),Pe&&queuePostRenderEffect(Pe,ce),(it=Se.props&&Se.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(it,Ne,Se,He),ce)}else{let Se;const{el:De,props:Pe}=Y,{bm:Ne,m:He,parent:je,root:it,type:Je}=z,rt=isAsyncWrapper(Y);toggleRecurse(z,!1),Ne&&invokeArrayFns(Ne),!rt&&(Se=Pe&&Pe.onVnodeBeforeMount)&&invokeVNodeHook(Se,je,Y),toggleRecurse(z,!0);{it.ce&&it.ce._injectChildStyle(Je);const Fe=z.subTree=renderComponentRoot(z);S(null,Fe,te,ye,z,ce,_e),Y.el=Fe.el}if(He&&queuePostRenderEffect(He,ce),!rt&&(Se=Pe&&Pe.onVnodeMounted)){const Fe=Y;queuePostRenderEffect(()=>invokeVNodeHook(Se,je,Fe),ce)}(Y.shapeFlag&256||je&&isAsyncWrapper(je.vnode)&&je.vnode.shapeFlag&256)&&z.a&&queuePostRenderEffect(z.a,ce),z.isMounted=!0,Y=te=ye=null}};z.scope.on();const fe=z.effect=new ReactiveEffect(ve);z.scope.off();const ue=z.update=fe.run.bind(fe),we=z.job=fe.runIfDirty.bind(fe);we.i=z,we.id=z.uid,fe.scheduler=()=>queueJob(we),toggleRecurse(z,!0),ue()},ee=(z,Y,te)=>{Y.component=z;const ye=z.vnode.props;z.vnode=Y,z.next=null,updateProps(z,Y.props,ye,te),updateSlots(z,Y.children,te),pauseTracking(),flushPreFlushCbs(z),resetTracking()},ne=(z,Y,te,ye,ce,_e,be,ve,fe=!1)=>{const ue=z&&z.children,we=z?z.shapeFlag:0,Se=Y.children,{patchFlag:De,shapeFlag:Pe}=Y;if(De>0){if(De&128){he(ue,Se,te,ye,ce,_e,be,ve,fe);return}else if(De&256){oe(ue,Se,te,ye,ce,_e,be,ve,fe);return}}Pe&8?(we&16&&Xe(ue,ce,_e),Se!==ue&&m(te,Se)):we&16?Pe&16?he(ue,Se,te,ye,ce,_e,be,ve,fe):Xe(ue,ce,_e,!0):(we&8&&m(te,""),Pe&16&&Q(Se,te,ye,ce,_e,be,ve,fe))},oe=(z,Y,te,ye,ce,_e,be,ve,fe)=>{z=z||EMPTY_ARR,Y=Y||EMPTY_ARR;const ue=z.length,we=Y.length,Se=Math.min(ue,we);let De;for(De=0;De<Se;De++){const Pe=Y[De]=fe?cloneIfMounted(Y[De]):normalizeVNode(Y[De]);S(z[De],Pe,te,null,ce,_e,be,ve,fe)}ue>we?Xe(z,ce,_e,!0,!1,Se):Q(Y,te,ye,ce,_e,be,ve,fe,Se)},he=(z,Y,te,ye,ce,_e,be,ve,fe)=>{let ue=0;const we=Y.length;let Se=z.length-1,De=we-1;for(;ue<=Se&&ue<=De;){const Pe=z[ue],Ne=Y[ue]=fe?cloneIfMounted(Y[ue]):normalizeVNode(Y[ue]);if(isSameVNodeType(Pe,Ne))S(Pe,Ne,te,null,ce,_e,be,ve,fe);else break;ue++}for(;ue<=Se&&ue<=De;){const Pe=z[Se],Ne=Y[De]=fe?cloneIfMounted(Y[De]):normalizeVNode(Y[De]);if(isSameVNodeType(Pe,Ne))S(Pe,Ne,te,null,ce,_e,be,ve,fe);else break;Se--,De--}if(ue>Se){if(ue<=De){const Pe=De+1,Ne=Pe<we?Y[Pe].el:ye;for(;ue<=De;)S(null,Y[ue]=fe?cloneIfMounted(Y[ue]):normalizeVNode(Y[ue]),te,Ne,ce,_e,be,ve,fe),ue++}}else if(ue>De)for(;ue<=Se;)Ie(z[ue],ce,_e,!0),ue++;else{const Pe=ue,Ne=ue,He=new Map;for(ue=Ne;ue<=De;ue++){const st=Y[ue]=fe?cloneIfMounted(Y[ue]):normalizeVNode(Y[ue]);st.key!=null&&He.set(st.key,ue)}let je,it=0;const Je=De-Ne+1;let rt=!1,Fe=0;const yt=new Array(Je);for(ue=0;ue<Je;ue++)yt[ue]=0;for(ue=Pe;ue<=Se;ue++){const st=z[ue];if(it>=Je){Ie(st,ce,_e,!0);continue}let lt;if(st.key!=null)lt=He.get(st.key);else for(je=Ne;je<=De;je++)if(yt[je-Ne]===0&&isSameVNodeType(st,Y[je])){lt=je;break}lt===void 0?Ie(st,ce,_e,!0):(yt[lt-Ne]=ue+1,lt>=Fe?Fe=lt:rt=!0,S(st,Y[lt],te,null,ce,_e,be,ve,fe),it++)}const _t=rt?getSequence(yt):EMPTY_ARR;for(je=_t.length-1,ue=Je-1;ue>=0;ue--){const st=Ne+ue,lt=Y[st],ft=st+1<we?Y[st+1].el:ye;yt[ue]===0?S(null,lt,te,ft,ce,_e,be,ve,fe):rt&&(je<0||ue!==_t[je]?ge(lt,te,ft,2):je--)}}},ge=(z,Y,te,ye,ce=null)=>{const{el:_e,type:be,transition:ve,children:fe,shapeFlag:ue}=z;if(ue&6){ge(z.component.subTree,Y,te,ye);return}if(ue&128){z.suspense.move(Y,te,ye);return}if(ue&64){be.move(z,Y,te,at);return}if(be===Fragment){s(_e,Y,te);for(let Se=0;Se<fe.length;Se++)ge(fe[Se],Y,te,ye);s(z.anchor,Y,te);return}if(be===Static){H(z,Y,te);return}if(ye!==2&&ue&1&&ve)if(ye===0)ve.beforeEnter(_e),s(_e,Y,te),queuePostRenderEffect(()=>ve.enter(_e),ce);else{const{leave:Se,delayLeave:De,afterLeave:Pe}=ve,Ne=()=>{z.ctx.isUnmounted?a(_e):s(_e,Y,te)},He=()=>{Se(_e,()=>{Ne(),Pe&&Pe()})};De?De(_e,Ne,He):He()}else s(_e,Y,te)},Ie=(z,Y,te,ye=!1,ce=!1)=>{const{type:_e,props:be,ref:ve,children:fe,dynamicChildren:ue,shapeFlag:we,patchFlag:Se,dirs:De,cacheIndex:Pe}=z;if(Se===-2&&(ce=!1),ve!=null&&(pauseTracking(),setRef(ve,null,te,z,!0),resetTracking()),Pe!=null&&(Y.renderCache[Pe]=void 0),we&256){Y.ctx.deactivate(z);return}const Ne=we&1&&De,He=!isAsyncWrapper(z);let je;if(He&&(je=be&&be.onVnodeBeforeUnmount)&&invokeVNodeHook(je,Y,z),we&6)Oe(z.component,te,ye);else{if(we&128){z.suspense.unmount(te,ye);return}Ne&&invokeDirectiveHook(z,null,Y,"beforeUnmount"),we&64?z.type.remove(z,Y,te,at,ye):ue&&!ue.hasOnce&&(_e!==Fragment||Se>0&&Se&64)?Xe(ue,Y,te,!1,!0):(_e===Fragment&&Se&384||!ce&&we&16)&&Xe(fe,Y,te),ye&&Me(z)}(He&&(je=be&&be.onVnodeUnmounted)||Ne)&&queuePostRenderEffect(()=>{je&&invokeVNodeHook(je,Y,z),Ne&&invokeDirectiveHook(z,null,Y,"unmounted")},te)},Me=z=>{const{type:Y,el:te,anchor:ye,transition:ce}=z;if(Y===Fragment){Be(te,ye);return}if(Y===Static){F(z);return}const _e=()=>{a(te),ce&&!ce.persisted&&ce.afterLeave&&ce.afterLeave()};if(z.shapeFlag&1&&ce&&!ce.persisted){const{leave:be,delayLeave:ve}=ce,fe=()=>be(te,_e);ve?ve(z.el,_e,fe):fe()}else _e()},Be=(z,Y)=>{let te;for(;z!==Y;)te=x(z),a(z),z=te;a(Y)},Oe=(z,Y,te)=>{const{bum:ye,scope:ce,job:_e,subTree:be,um:ve,m:fe,a:ue,parent:we,slots:{__:Se}}=z;invalidateMount(fe),invalidateMount(ue),ye&&invokeArrayFns(ye),we&&isArray(Se)&&Se.forEach(De=>{we.renderCache[De]=void 0}),ce.stop(),_e&&(_e.flags|=8,Ie(be,z,Y,te)),ve&&queuePostRenderEffect(ve,Y),queuePostRenderEffect(()=>{z.isUnmounted=!0},Y),Y&&Y.pendingBranch&&!Y.isUnmounted&&z.asyncDep&&!z.asyncResolved&&z.suspenseId===Y.pendingId&&(Y.deps--,Y.deps===0&&Y.resolve())},Xe=(z,Y,te,ye=!1,ce=!1,_e=0)=>{for(let be=_e;be<z.length;be++)Ie(z[be],Y,te,ye,ce)},Ze=z=>{if(z.shapeFlag&6)return Ze(z.component.subTree);if(z.shapeFlag&128)return z.suspense.next();const Y=x(z.anchor||z.el),te=Y&&Y[TeleportEndKey];return te?x(te):Y};let ze=!1;const nt=(z,Y,te)=>{z==null?Y._vnode&&Ie(Y._vnode,null,null,!0):S(Y._vnode||null,z,Y,null,null,null,te),Y._vnode=z,ze||(ze=!0,flushPreFlushCbs(),flushPostFlushCbs(),ze=!1)},at={p:S,um:Ie,m:ge,r:Me,mt:ae,mc:Q,pc:ne,pbc:P,n:Ze,o:r};return{render:nt,hydrate:void 0,createApp:createAppAPI(nt)}}function resolveChildrenNamespace({type:r,props:e},n){return n==="svg"&&r==="foreignObject"||n==="mathml"&&r==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function toggleRecurse({effect:r,job:e},n){n?(r.flags|=32,e.flags|=4):(r.flags&=-33,e.flags&=-5)}function needTransition(r,e){return(!r||r&&!r.pendingBranch)&&e&&!e.persisted}function traverseStaticChildren(r,e,n=!1){const s=r.children,a=e.children;if(isArray(s)&&isArray(a))for(let o=0;o<s.length;o++){const l=s[o];let u=a[o];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=a[o]=cloneIfMounted(a[o]),u.el=l.el),!n&&u.patchFlag!==-2&&traverseStaticChildren(l,u)),u.type===Text&&(u.el=l.el),u.type===Comment&&!u.el&&(u.el=l.el)}}function getSequence(r){const e=r.slice(),n=[0];let s,a,o,l,u;const c=r.length;for(s=0;s<c;s++){const f=r[s];if(f!==0){if(a=n[n.length-1],r[a]<f){e[s]=a,n.push(s);continue}for(o=0,l=n.length-1;o<l;)u=o+l>>1,r[n[u]]<f?o=u+1:l=u;f<r[n[o]]&&(o>0&&(e[s]=n[o-1]),n[o]=s)}}for(o=n.length,l=n[o-1];o-- >0;)n[o]=l,l=e[l];return n}function locateNonHydratedAsyncRoot(r){const e=r.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:locateNonHydratedAsyncRoot(e)}function invalidateMount(r){if(r)for(let e=0;e<r.length;e++)r[e].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchEffect(r,e){return doWatch(r,null,e)}function watch(r,e,n){return doWatch(r,e,n)}function doWatch(r,e,n=EMPTY_OBJ){const{immediate:s,deep:a,flush:o,once:l}=n,u=extend$1({},n),c=e&&s||!e&&o!=="post";let f;if(isInSSRComponentSetup){if(o==="sync"){const C=useSSRContext();f=C.__watcherHandles||(C.__watcherHandles=[])}else if(!c){const C=()=>{};return C.stop=NOOP,C.resume=NOOP,C.pause=NOOP,C}}const m=currentInstance;u.call=(C,w,S)=>callWithAsyncErrorHandling(C,m,w,S);let v=!1;o==="post"?u.scheduler=C=>{queuePostRenderEffect(C,m&&m.suspense)}:o!=="sync"&&(v=!0,u.scheduler=(C,w)=>{w?C():queueJob(C)}),u.augmentJob=C=>{e&&(C.flags|=4),v&&(C.flags|=2,m&&(C.id=m.uid,C.i=m))};const x=watch$1(r,e,u);return isInSSRComponentSetup&&(f?f.push(x):c&&x()),x}function instanceWatch(r,e,n){const s=this.proxy,a=isString(r)?r.includes(".")?createPathGetter(s,r):()=>s[r]:r.bind(s,s);let o;isFunction$1(e)?o=e:(o=e.handler,n=e);const l=setCurrentInstance(this),u=doWatch(a,o.bind(s),n);return l(),u}function createPathGetter(r,e){const n=e.split(".");return()=>{let s=r;for(let a=0;a<n.length&&s;a++)s=s[n[a]];return s}}const getModelModifiers=(r,e)=>e==="modelValue"||e==="model-value"?r.modelModifiers:r[`${e}Modifiers`]||r[`${camelize$1(e)}Modifiers`]||r[`${hyphenate(e)}Modifiers`];function emit(r,e,...n){if(r.isUnmounted)return;const s=r.vnode.props||EMPTY_OBJ;let a=n;const o=e.startsWith("update:"),l=o&&getModelModifiers(s,e.slice(7));l&&(l.trim&&(a=n.map(m=>isString(m)?m.trim():m)),l.number&&(a=n.map(looseToNumber)));let u,c=s[u=toHandlerKey(e)]||s[u=toHandlerKey(camelize$1(e))];!c&&o&&(c=s[u=toHandlerKey(hyphenate(e))]),c&&callWithAsyncErrorHandling(c,r,6,a);const f=s[u+"Once"];if(f){if(!r.emitted)r.emitted={};else if(r.emitted[u])return;r.emitted[u]=!0,callWithAsyncErrorHandling(f,r,6,a)}}function normalizeEmitsOptions(r,e,n=!1){const s=e.emitsCache,a=s.get(r);if(a!==void 0)return a;const o=r.emits;let l={},u=!1;if(!isFunction$1(r)){const c=f=>{const m=normalizeEmitsOptions(f,e,!0);m&&(u=!0,extend$1(l,m))};!n&&e.mixins.length&&e.mixins.forEach(c),r.extends&&c(r.extends),r.mixins&&r.mixins.forEach(c)}return!o&&!u?(isObject$4(r)&&s.set(r,null),null):(isArray(o)?o.forEach(c=>l[c]=null):extend$1(l,o),isObject$4(r)&&s.set(r,l),l)}function isEmitListener(r,e){return!r||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(r,e[0].toLowerCase()+e.slice(1))||hasOwn(r,hyphenate(e))||hasOwn(r,e))}function markAttrsAccessed(){}function renderComponentRoot(r){const{type:e,vnode:n,proxy:s,withProxy:a,propsOptions:[o],slots:l,attrs:u,emit:c,render:f,renderCache:m,props:v,data:x,setupState:C,ctx:w,inheritAttrs:S}=r,k=setCurrentRenderingInstance(r);let M,V;try{if(n.shapeFlag&4){const F=a||s,G=F;M=normalizeVNode(f.call(G,F,m,v,C,x,w)),V=u}else{const F=e;M=normalizeVNode(F.length>1?F(v,{attrs:u,slots:l,emit:c}):F(v,null)),V=e.props?u:getFunctionalFallthrough(u)}}catch(F){blockStack.length=0,handleError(F,r,1),M=createVNode(Comment)}let H=M;if(V&&S!==!1){const F=Object.keys(V),{shapeFlag:G}=H;F.length&&G&7&&(o&&F.some(isModelListener)&&(V=filterModelListeners(V,o)),H=cloneVNode(H,V,!1,!0))}return n.dirs&&(H=cloneVNode(H,null,!1,!0),H.dirs=H.dirs?H.dirs.concat(n.dirs):n.dirs),n.transition&&setTransitionHooks(H,n.transition),M=H,setCurrentRenderingInstance(k),M}const getFunctionalFallthrough=r=>{let e;for(const n in r)(n==="class"||n==="style"||isOn(n))&&((e||(e={}))[n]=r[n]);return e},filterModelListeners=(r,e)=>{const n={};for(const s in r)(!isModelListener(s)||!(s.slice(9)in e))&&(n[s]=r[s]);return n};function shouldUpdateComponent(r,e,n){const{props:s,children:a,component:o}=r,{props:l,children:u,patchFlag:c}=e,f=o.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?hasPropsChanged(s,l,f):!!l;if(c&8){const m=e.dynamicProps;for(let v=0;v<m.length;v++){const x=m[v];if(l[x]!==s[x]&&!isEmitListener(f,x))return!0}}}else return(a||u)&&(!u||!u.$stable)?!0:s===l?!1:s?l?hasPropsChanged(s,l,f):!0:!!l;return!1}function hasPropsChanged(r,e,n){const s=Object.keys(e);if(s.length!==Object.keys(r).length)return!0;for(let a=0;a<s.length;a++){const o=s[a];if(e[o]!==r[o]&&!isEmitListener(n,o))return!0}return!1}function updateHOCHostEl({vnode:r,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===r&&(s.el=r.el),s===r)(r=e.vnode).el=n,e=e.parent;else break}}const isSuspense=r=>r.__isSuspense;function queueEffectWithSuspense(r,e){e&&e.pendingBranch?isArray(r)?e.effects.push(...r):e.effects.push(r):queuePostFlushCb(r)}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(r=!1){blockStack.push(currentBlock=r?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(r,e=!1){isBlockTreeEnabled+=r,r<0&&currentBlock&&e&&(currentBlock.hasOnce=!0)}function setupBlock(r){return r.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(r),r}function createElementBlock(r,e,n,s,a,o){return setupBlock(createBaseVNode(r,e,n,s,a,o,!0))}function createBlock(r,e,n,s,a){return setupBlock(createVNode(r,e,n,s,a,!0))}function isVNode(r){return r?r.__v_isVNode===!0:!1}function isSameVNodeType(r,e){return r.type===e.type&&r.key===e.key}const normalizeKey=({key:r})=>r??null,normalizeRef=({ref:r,ref_key:e,ref_for:n})=>(typeof r=="number"&&(r=""+r),r!=null?isString(r)||isRef(r)||isFunction$1(r)?{i:currentRenderingInstance,r,k:e,f:!!n}:r:null);function createBaseVNode(r,e=null,n=null,s=0,a=null,o=r===Fragment?0:1,l=!1,u=!1){const c={__v_isVNode:!0,__v_skip:!0,type:r,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:s,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return u?(normalizeChildren(c,n),o&128&&r.normalize(c)):n&&(c.shapeFlag|=isString(n)?8:16),isBlockTreeEnabled>0&&!l&&currentBlock&&(c.patchFlag>0||o&6)&&c.patchFlag!==32&&currentBlock.push(c),c}const createVNode=_createVNode;function _createVNode(r,e=null,n=null,s=0,a=null,o=!1){if((!r||r===NULL_DYNAMIC_COMPONENT)&&(r=Comment),isVNode(r)){const u=cloneVNode(r,e,!0);return n&&normalizeChildren(u,n),isBlockTreeEnabled>0&&!o&&currentBlock&&(u.shapeFlag&6?currentBlock[currentBlock.indexOf(r)]=u:currentBlock.push(u)),u.patchFlag=-2,u}if(isClassComponent(r)&&(r=r.__vccOpts),e){e=guardReactiveProps(e);let{class:u,style:c}=e;u&&!isString(u)&&(e.class=normalizeClass(u)),isObject$4(c)&&(isProxy(c)&&!isArray(c)&&(c=extend$1({},c)),e.style=normalizeStyle(c))}const l=isString(r)?1:isSuspense(r)?128:isTeleport(r)?64:isObject$4(r)?4:isFunction$1(r)?2:0;return createBaseVNode(r,e,n,s,a,l,o,!0)}function guardReactiveProps(r){return r?isProxy(r)||isInternalObject(r)?extend$1({},r):r:null}function cloneVNode(r,e,n=!1,s=!1){const{props:a,ref:o,patchFlag:l,children:u,transition:c}=r,f=e?mergeProps(a||{},e):a,m={__v_isVNode:!0,__v_skip:!0,type:r.type,props:f,key:f&&normalizeKey(f),ref:e&&e.ref?n&&o?isArray(o)?o.concat(normalizeRef(e)):[o,normalizeRef(e)]:normalizeRef(e):o,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:u,target:r.target,targetStart:r.targetStart,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:e&&r.type!==Fragment?l===-1?16:l|16:l,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:c,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&cloneVNode(r.ssContent),ssFallback:r.ssFallback&&cloneVNode(r.ssFallback),el:r.el,anchor:r.anchor,ctx:r.ctx,ce:r.ce};return c&&s&&setTransitionHooks(m,c.clone(m)),m}function createTextVNode(r=" ",e=0){return createVNode(Text,null,r,e)}function createCommentVNode(r="",e=!1){return e?(openBlock(),createBlock(Comment,null,r)):createVNode(Comment,null,r)}function normalizeVNode(r){return r==null||typeof r=="boolean"?createVNode(Comment):isArray(r)?createVNode(Fragment,null,r.slice()):isVNode(r)?cloneIfMounted(r):createVNode(Text,null,String(r))}function cloneIfMounted(r){return r.el===null&&r.patchFlag!==-1||r.memo?r:cloneVNode(r)}function normalizeChildren(r,e){let n=0;const{shapeFlag:s}=r;if(e==null)e=null;else if(isArray(e))n=16;else if(typeof e=="object")if(s&65){const a=e.default;a&&(a._c&&(a._d=!1),normalizeChildren(r,a()),a._c&&(a._d=!0));return}else{n=32;const a=e._;!a&&!isInternalObject(e)?e._ctx=currentRenderingInstance:a===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,r.patchFlag|=1024))}else isFunction$1(e)?(e={default:e,_ctx:currentRenderingInstance},n=32):(e=String(e),s&64?(n=16,e=[createTextVNode(e)]):n=8);r.children=e,r.shapeFlag|=n}function mergeProps(...r){const e={};for(let n=0;n<r.length;n++){const s=r[n];for(const a in s)if(a==="class")e.class!==s.class&&(e.class=normalizeClass([e.class,s.class]));else if(a==="style")e.style=normalizeStyle([e.style,s.style]);else if(isOn(a)){const o=e[a],l=s[a];l&&o!==l&&!(isArray(o)&&o.includes(l))&&(e[a]=o?[].concat(o,l):l)}else a!==""&&(e[a]=s[a])}return e}function invokeVNodeHook(r,e,n,s=null){callWithAsyncErrorHandling(r,e,7,[n,s])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(r,e,n){const s=r.type,a=(e?e.appContext:r.appContext)||emptyAppContext,o={uid:uid++,vnode:r,type:s,parent:e,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(a.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(s,a),emitsOptions:normalizeEmitsOptions(s,a),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:s.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=emit.bind(null,o),r.ce&&r.ce(o),o}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const r=getGlobalThis(),e=(n,s)=>{let a;return(a=r[n])||(a=r[n]=[]),a.push(s),o=>{a.length>1?a.forEach(l=>l(o)):a[0](o)}};internalSetCurrentInstance=e("__VUE_INSTANCE_SETTERS__",n=>currentInstance=n),setInSSRSetupState=e("__VUE_SSR_SETTERS__",n=>isInSSRComponentSetup=n)}const setCurrentInstance=r=>{const e=currentInstance;return internalSetCurrentInstance(r),r.scope.on(),()=>{r.scope.off(),internalSetCurrentInstance(e)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(r){return r.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(r,e=!1,n=!1){e&&setInSSRSetupState(e);const{props:s,children:a}=r.vnode,o=isStatefulComponent(r);initProps(r,s,o,e),initSlots(r,a,n||e);const l=o?setupStatefulComponent(r,e):void 0;return e&&setInSSRSetupState(!1),l}function setupStatefulComponent(r,e){const n=r.type;r.accessCache=Object.create(null),r.proxy=new Proxy(r.ctx,PublicInstanceProxyHandlers);const{setup:s}=n;if(s){pauseTracking();const a=r.setupContext=s.length>1?createSetupContext(r):null,o=setCurrentInstance(r),l=callWithErrorHandling(s,r,0,[r.props,a]),u=isPromise$2(l);if(resetTracking(),o(),(u||r.sp)&&!isAsyncWrapper(r)&&markAsyncBoundary(r),u){if(l.then(unsetCurrentInstance,unsetCurrentInstance),e)return l.then(c=>{handleSetupResult(r,c)}).catch(c=>{handleError(c,r,0)});r.asyncDep=l}else handleSetupResult(r,l)}else finishComponentSetup(r)}function handleSetupResult(r,e,n){isFunction$1(e)?r.type.__ssrInlineRender?r.ssrRender=e:r.render=e:isObject$4(e)&&(r.setupState=proxyRefs(e)),finishComponentSetup(r)}function finishComponentSetup(r,e,n){const s=r.type;r.render||(r.render=s.render||NOOP);{const a=setCurrentInstance(r);pauseTracking();try{applyOptions(r)}finally{resetTracking(),a()}}}const attrsProxyHandlers={get(r,e){return track(r,"get",""),r[e]}};function createSetupContext(r){const e=n=>{r.exposed=n||{}};return{attrs:new Proxy(r.attrs,attrsProxyHandlers),slots:r.slots,emit:r.emit,expose:e}}function getComponentPublicInstance(r){return r.exposed?r.exposeProxy||(r.exposeProxy=new Proxy(proxyRefs(markRaw(r.exposed)),{get(e,n){if(n in e)return e[n];if(n in publicPropertiesMap)return publicPropertiesMap[n](r)},has(e,n){return n in e||n in publicPropertiesMap}})):r.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=r=>r.replace(classifyRE,e=>e.toUpperCase()).replace(/[-_]/g,"");function getComponentName(r,e=!0){return isFunction$1(r)?r.displayName||r.name:r.name||e&&r.__name}function formatComponentName(r,e,n=!1){let s=getComponentName(e);if(!s&&e.__file){const a=e.__file.match(/([^/\\]+)\.\w+$/);a&&(s=a[1])}if(!s&&r&&r.parent){const a=o=>{for(const l in o)if(o[l]===e)return l};s=a(r.components||r.parent.type.components)||a(r.appContext.components)}return s?classify(s):n?"App":"Anonymous"}function isClassComponent(r){return isFunction$1(r)&&"__vccOpts"in r}const computed=(r,e)=>computed$1(r,e,isInSSRComponentSetup);function h(r,e,n){const s=arguments.length;return s===2?isObject$4(e)&&!isArray(e)?isVNode(e)?createVNode(r,null,[e]):createVNode(r,e):createVNode(r,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&isVNode(n)&&(n=[n]),createVNode(r,e,n))}const version$7="3.5.14";/**
* @vue/runtime-dom v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt=typeof window<"u"&&window.trustedTypes;if(tt)try{policy=tt.createPolicy("vue",{createHTML:r=>r})}catch{}const unsafeToTrustedHTML=policy?r=>policy.createHTML(r):r=>r,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(r,e,n)=>{e.insertBefore(r,n||null)},remove:r=>{const e=r.parentNode;e&&e.removeChild(r)},createElement:(r,e,n,s)=>{const a=e==="svg"?doc.createElementNS(svgNS,r):e==="mathml"?doc.createElementNS(mathmlNS,r):n?doc.createElement(r,{is:n}):doc.createElement(r);return r==="select"&&s&&s.multiple!=null&&a.setAttribute("multiple",s.multiple),a},createText:r=>doc.createTextNode(r),createComment:r=>doc.createComment(r),setText:(r,e)=>{r.nodeValue=e},setElementText:(r,e)=>{r.textContent=e},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>doc.querySelector(r),setScopeId(r,e){r.setAttribute(e,"")},insertStaticContent(r,e,n,s,a,o){const l=n?n.previousSibling:e.lastChild;if(a&&(a===o||a.nextSibling))for(;e.insertBefore(a.cloneNode(!0),n),!(a===o||!(a=a.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(s==="svg"?`<svg>${r}</svg>`:s==="mathml"?`<math>${r}</math>`:r);const u=templateContainer.content;if(s==="svg"||s==="mathml"){const c=u.firstChild;for(;c.firstChild;)u.appendChild(c.firstChild);u.removeChild(c)}e.insertBefore(u,n)}return[l?l.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},TRANSITION="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=extend$1({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),decorate$1=r=>(r.displayName="Transition",r.props=TransitionPropsValidators,r),Transition=decorate$1((r,{slots:e})=>h(BaseTransition,resolveTransitionProps(r),e)),callHook=(r,e=[])=>{isArray(r)?r.forEach(n=>n(...e)):r&&r(...e)},hasExplicitCallback=r=>r?isArray(r)?r.some(e=>e.length>1):r.length>1:!1;function resolveTransitionProps(r){const e={};for(const X in r)X in DOMTransitionPropsValidators||(e[X]=r[X]);if(r.css===!1)return e;const{name:n="v",type:s,duration:a,enterFromClass:o=`${n}-enter-from`,enterActiveClass:l=`${n}-enter-active`,enterToClass:u=`${n}-enter-to`,appearFromClass:c=o,appearActiveClass:f=l,appearToClass:m=u,leaveFromClass:v=`${n}-leave-from`,leaveActiveClass:x=`${n}-leave-active`,leaveToClass:C=`${n}-leave-to`}=r,w=normalizeDuration(a),S=w&&w[0],k=w&&w[1],{onBeforeEnter:M,onEnter:V,onEnterCancelled:H,onLeave:F,onLeaveCancelled:G,onBeforeAppear:W=M,onAppear:R=V,onAppearCancelled:Q=H}=e,A=(X,Z,ae,pe)=>{X._enterCancelled=pe,removeTransitionClass(X,Z?m:u),removeTransitionClass(X,Z?f:l),ae&&ae()},P=(X,Z)=>{X._isLeaving=!1,removeTransitionClass(X,v),removeTransitionClass(X,C),removeTransitionClass(X,x),Z&&Z()},j=X=>(Z,ae)=>{const pe=X?R:V,me=()=>A(Z,X,ae);callHook(pe,[Z,me]),nextFrame(()=>{removeTransitionClass(Z,X?c:o),addTransitionClass(Z,X?m:u),hasExplicitCallback(pe)||whenTransitionEnds(Z,s,S,me)})};return extend$1(e,{onBeforeEnter(X){callHook(M,[X]),addTransitionClass(X,o),addTransitionClass(X,l)},onBeforeAppear(X){callHook(W,[X]),addTransitionClass(X,c),addTransitionClass(X,f)},onEnter:j(!1),onAppear:j(!0),onLeave(X,Z){X._isLeaving=!0;const ae=()=>P(X,Z);addTransitionClass(X,v),X._enterCancelled?(addTransitionClass(X,x),forceReflow()):(forceReflow(),addTransitionClass(X,x)),nextFrame(()=>{X._isLeaving&&(removeTransitionClass(X,v),addTransitionClass(X,C),hasExplicitCallback(F)||whenTransitionEnds(X,s,k,ae))}),callHook(F,[X,ae])},onEnterCancelled(X){A(X,!1,void 0,!0),callHook(H,[X])},onAppearCancelled(X){A(X,!0,void 0,!0),callHook(Q,[X])},onLeaveCancelled(X){P(X),callHook(G,[X])}})}function normalizeDuration(r){if(r==null)return null;if(isObject$4(r))return[NumberOf(r.enter),NumberOf(r.leave)];{const e=NumberOf(r);return[e,e]}}function NumberOf(r){return toNumber$1(r)}function addTransitionClass(r,e){e.split(/\s+/).forEach(n=>n&&r.classList.add(n)),(r[vtcKey]||(r[vtcKey]=new Set)).add(e)}function removeTransitionClass(r,e){e.split(/\s+/).forEach(s=>s&&r.classList.remove(s));const n=r[vtcKey];n&&(n.delete(e),n.size||(r[vtcKey]=void 0))}function nextFrame(r){requestAnimationFrame(()=>{requestAnimationFrame(r)})}let endId=0;function whenTransitionEnds(r,e,n,s){const a=r._endId=++endId,o=()=>{a===r._endId&&s()};if(n!=null)return setTimeout(o,n);const{type:l,timeout:u,propCount:c}=getTransitionInfo(r,e);if(!l)return s();const f=l+"end";let m=0;const v=()=>{r.removeEventListener(f,x),o()},x=C=>{C.target===r&&++m>=c&&v()};setTimeout(()=>{m<c&&v()},u+1),r.addEventListener(f,x)}function getTransitionInfo(r,e){const n=window.getComputedStyle(r),s=w=>(n[w]||"").split(", "),a=s(`${TRANSITION}Delay`),o=s(`${TRANSITION}Duration`),l=getTimeout(a,o),u=s(`${ANIMATION}Delay`),c=s(`${ANIMATION}Duration`),f=getTimeout(u,c);let m=null,v=0,x=0;e===TRANSITION?l>0&&(m=TRANSITION,v=l,x=o.length):e===ANIMATION?f>0&&(m=ANIMATION,v=f,x=c.length):(v=Math.max(l,f),m=v>0?l>f?TRANSITION:ANIMATION:null,x=m?m===TRANSITION?o.length:c.length:0);const C=m===TRANSITION&&/\b(transform|all)(,|$)/.test(s(`${TRANSITION}Property`).toString());return{type:m,timeout:v,propCount:x,hasTransform:C}}function getTimeout(r,e){for(;r.length<e.length;)r=r.concat(r);return Math.max(...e.map((n,s)=>toMs(n)+toMs(r[s])))}function toMs(r){return r==="auto"?0:Number(r.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}function patchClass(r,e,n){const s=r[vtcKey];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?r.removeAttribute("class"):n?r.setAttribute("class",e):r.className=e}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={beforeMount(r,{value:e},{transition:n}){r[vShowOriginalDisplay]=r.style.display==="none"?"":r.style.display,n&&e?n.beforeEnter(r):setDisplay(r,e)},mounted(r,{value:e},{transition:n}){n&&e&&n.enter(r)},updated(r,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(r),setDisplay(r,!0),s.enter(r)):s.leave(r,()=>{setDisplay(r,!1)}):setDisplay(r,e))},beforeUnmount(r,{value:e}){setDisplay(r,e)}};function setDisplay(r,e){r.style.display=e?r[vShowOriginalDisplay]:"none",r[vShowHidden]=!e}const CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(r,e,n){const s=r.style,a=isString(n);let o=!1;if(n&&!a){if(e)if(isString(e))for(const l of e.split(";")){const u=l.slice(0,l.indexOf(":")).trim();n[u]==null&&setStyle(s,u,"")}else for(const l in e)n[l]==null&&setStyle(s,l,"");for(const l in n)l==="display"&&(o=!0),setStyle(s,l,n[l])}else if(a){if(e!==n){const l=s[CSS_VAR_TEXT];l&&(n+=";"+l),s.cssText=n,o=displayRE.test(n)}}else e&&r.removeAttribute("style");vShowOriginalDisplay in r&&(r[vShowOriginalDisplay]=o?s.display:"",r[vShowHidden]&&(s.display="none"))}const importantRE=/\s*!important$/;function setStyle(r,e,n){if(isArray(n))n.forEach(s=>setStyle(r,e,s));else if(n==null&&(n=""),e.startsWith("--"))r.setProperty(e,n);else{const s=autoPrefix(r,e);importantRE.test(n)?r.setProperty(hyphenate(s),n.replace(importantRE,""),"important"):r[s]=n}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(r,e){const n=prefixCache[e];if(n)return n;let s=camelize$1(e);if(s!=="filter"&&s in r)return prefixCache[e]=s;s=capitalize(s);for(let a=0;a<prefixes.length;a++){const o=prefixes[a]+s;if(o in r)return prefixCache[e]=o}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(r,e,n,s,a,o=isSpecialBooleanAttr(e)){s&&e.startsWith("xlink:")?n==null?r.removeAttributeNS(xlinkNS,e.slice(6,e.length)):r.setAttributeNS(xlinkNS,e,n):n==null||o&&!includeBooleanAttr(n)?r.removeAttribute(e):r.setAttribute(e,o?"":isSymbol$1(n)?String(n):n)}function patchDOMProp(r,e,n,s,a){if(e==="innerHTML"||e==="textContent"){n!=null&&(r[e]=e==="innerHTML"?unsafeToTrustedHTML(n):n);return}const o=r.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const u=o==="OPTION"?r.getAttribute("value")||"":r.value,c=n==null?r.type==="checkbox"?"on":"":String(n);(u!==c||!("_value"in r))&&(r.value=c),n==null&&r.removeAttribute(e),r._value=n;return}let l=!1;if(n===""||n==null){const u=typeof r[e];u==="boolean"?n=includeBooleanAttr(n):n==null&&u==="string"?(n="",l=!0):u==="number"&&(n=0,l=!0)}try{r[e]=n}catch{}l&&r.removeAttribute(a||e)}function addEventListener(r,e,n,s){r.addEventListener(e,n,s)}function removeEventListener(r,e,n,s){r.removeEventListener(e,n,s)}const veiKey=Symbol("_vei");function patchEvent(r,e,n,s,a=null){const o=r[veiKey]||(r[veiKey]={}),l=o[e];if(s&&l)l.value=s;else{const[u,c]=parseName(e);if(s){const f=o[e]=createInvoker(s,a);addEventListener(r,u,f,c)}else l&&(removeEventListener(r,u,l,c),o[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(r){let e;if(optionsModifierRE.test(r)){e={};let s;for(;s=r.match(optionsModifierRE);)r=r.slice(0,r.length-s[0].length),e[s[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):hyphenate(r.slice(2)),e]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(r,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(s,n.value),e,5,[s])};return n.value=r,n.attached=getNow(),n}function patchStopImmediatePropagation(r,e){if(isArray(e)){const n=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{n.call(r),r._stopped=!0},e.map(s=>a=>!a._stopped&&s&&s(a))}else return e}const isNativeOn=r=>r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&r.charCodeAt(2)>96&&r.charCodeAt(2)<123,patchProp=(r,e,n,s,a,o)=>{const l=a==="svg";e==="class"?patchClass(r,s,l):e==="style"?patchStyle(r,n,s):isOn(e)?isModelListener(e)||patchEvent(r,e,n,s,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(r,e,s,l))?(patchDOMProp(r,e,s),!r.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&patchAttr(r,e,s,l,o,e!=="value")):r._isVueCE&&(/[A-Z]/.test(e)||!isString(s))?patchDOMProp(r,camelize$1(e),s,o,e):(e==="true-value"?r._trueValue=s:e==="false-value"&&(r._falseValue=s),patchAttr(r,e,s,l))};function shouldSetAsProp(r,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in r&&isNativeOn(e)&&isFunction$1(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&r.tagName==="INPUT"||e==="type"&&r.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const a=r.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return isNativeOn(e)&&isString(n)?!1:e in r}const rendererOptions=extend$1({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...r)=>{const e=ensureRenderer().createApp(...r),{mount:n}=e;return e.mount=s=>{const a=normalizeContainer(s);if(!a)return;const o=e._component;!isFunction$1(o)&&!o.render&&!o.template&&(o.template=a.innerHTML),a.nodeType===1&&(a.textContent="");const l=n(a,!1,resolveRootNamespace(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),l},e};function resolveRootNamespace(r){if(r instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&r instanceof MathMLElement)return"mathml"}function normalizeContainer(r){return isString(r)?document.querySelector(r):r}function noop$1(){}const extend=Object.assign,inBrowser$1=typeof window<"u",isObject$3=r=>r!==null&&typeof r=="object",isDef=r=>r!=null,isFunction=r=>typeof r=="function",isPromise$1=r=>isObject$3(r)&&isFunction(r.then)&&isFunction(r.catch),isNumeric=r=>typeof r=="number"||/^\d+(\.\d+)?$/.test(r),isIOS=()=>inBrowser$1?/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase()):!1;function get$1(r,e){const n=e.split(".");let s=r;return n.forEach(a=>{var o;s=isObject$3(s)&&(o=s[a])!=null?o:""}),s}function pick(r,e,n){return e.reduce((s,a)=>(s[a]=r[a],s),{})}const unknownProp=null,numericProp=[Number,String],truthProp={type:Boolean,default:!0},makeNumberProp=r=>({type:Number,default:r}),makeNumericProp=r=>({type:numericProp,default:r}),makeStringProp=r=>({type:String,default:r});var inBrowser=typeof window<"u";function onMountedOrActivated(r){let e;onMounted(()=>{r(),nextTick(()=>{e=!0})}),onActivated(()=>{e&&r()})}function useEventListener(r,e,n={}){if(!inBrowser)return;const{target:s=window,passive:a=!1,capture:o=!1}=n;let l=!1,u;const c=v=>{if(l)return;const x=unref(v);x&&!u&&(x.addEventListener(r,e,{capture:o,passive:a}),u=!0)},f=v=>{if(l)return;const x=unref(v);x&&u&&(x.removeEventListener(r,e,o),u=!1)};onUnmounted(()=>f(s)),onDeactivated(()=>f(s)),onMountedOrActivated(()=>c(s));let m;return isRef(s)&&(m=watch(s,(v,x)=>{f(x),c(v)})),()=>{m==null||m(),f(s),l=!0}}var width,height;function useWindowSize(){if(!width&&(width=ref(0),height=ref(0),inBrowser)){const r=()=>{width.value=window.innerWidth,height.value=window.innerHeight};r(),window.addEventListener("resize",r,{passive:!0}),window.addEventListener("orientationchange",r,{passive:!0})}return{width,height}}var overflowScrollReg=/scroll|auto|overlay/i,defaultRoot=inBrowser?window:void 0;function isElement(r){return r.tagName!=="HTML"&&r.tagName!=="BODY"&&r.nodeType===1}function getScrollParent(r,e=defaultRoot){let n=r;for(;n&&n!==e&&isElement(n);){const{overflowY:s}=window.getComputedStyle(n);if(overflowScrollReg.test(s))return n;n=n.parentNode}return e}function useScrollParent(r,e=defaultRoot){const n=ref();return onMounted(()=>{r.value&&(n.value=getScrollParent(r.value,e))}),n}function getScrollTop(r){const e="scrollTop"in r?r.scrollTop:r.pageYOffset;return Math.max(e,0)}isIOS();const stopPropagation=r=>r.stopPropagation();function preventDefault(r,e){(typeof r.cancelable!="boolean"||r.cancelable)&&r.preventDefault(),e&&stopPropagation(r)}useWindowSize();function addUnit(r){if(isDef(r))return isNumeric(r)?`${r}px`:String(r)}function getSizeStyle(r){if(isDef(r)){if(Array.isArray(r))return{width:addUnit(r[0]),height:addUnit(r[1])};const e=addUnit(r);return{width:e,height:e}}}function getZIndexStyle(r){const e={};return r!==void 0&&(e.zIndex=+r),e}const camelizeRE=/-(\w)/g,camelize=r=>r.replace(camelizeRE,(e,n)=>n.toUpperCase()),{hasOwnProperty:hasOwnProperty$1}=Object.prototype;function assignKey(r,e,n){const s=e[n];isDef(s)&&(!hasOwnProperty$1.call(r,n)||!isObject$3(s)?r[n]=s:r[n]=deepAssign(Object(r[n]),s))}function deepAssign(r,e){return Object.keys(e).forEach(n=>{assignKey(r,e,n)}),r}var stdin_default$8={name:"姓名",tel:"电话",save:"保存",clear:"清空",cancel:"取消",confirm:"确认",delete:"删除",loading:"加载中...",noCoupon:"暂无优惠券",nameEmpty:"请填写姓名",addContact:"添加联系人",telInvalid:"请填写正确的电话",vanCalendar:{end:"结束",start:"开始",title:"日期选择",weekdays:["日","一","二","三","四","五","六"],monthTitle:(r,e)=>`${r}年${e}月`,rangePrompt:r=>`最多选择 ${r} 天`},vanCascader:{select:"请选择"},vanPagination:{prev:"上一页",next:"下一页"},vanPullRefresh:{pulling:"下拉即可刷新...",loosing:"释放即可刷新..."},vanSubmitBar:{label:"合计:"},vanCoupon:{unlimited:"无门槛",discount:r=>`${r}折`,condition:r=>`满${r}元可用`},vanCouponCell:{title:"优惠券",count:r=>`${r}张可用`},vanCouponList:{exchange:"兑换",close:"不使用",enable:"可用",disabled:"不可用",placeholder:"输入优惠码"},vanAddressEdit:{area:"地区",areaEmpty:"请选择地区",addressEmpty:"请填写详细地址",addressDetail:"详细地址",defaultAddress:"设为默认收货地址"},vanAddressList:{add:"新增地址"}};const lang=ref("zh-CN"),messages=reactive({"zh-CN":stdin_default$8}),Locale={messages(){return messages[lang.value]},use(r,e){lang.value=r,this.add({[r]:e})},add(r={}){deepAssign(messages,r)}};var stdin_default$7=Locale;function createTranslate(r){const e=camelize(r)+".";return(n,...s)=>{const a=stdin_default$7.messages(),o=get$1(a,e+n)||get$1(a,n);return isFunction(o)?o(...s):o}}function genBem(r,e){return e?typeof e=="string"?` ${r}--${e}`:Array.isArray(e)?e.reduce((n,s)=>n+genBem(r,s),""):Object.keys(e).reduce((n,s)=>n+(e[s]?genBem(r,s):""),""):""}function createBEM(r){return(e,n)=>(e&&typeof e!="string"&&(n=e,e=""),e=e?`${r}__${e}`:r,`${e}${genBem(e,n)}`)}function createNamespace(r){const e=`van-${r}`;return[e,createBEM(e),createTranslate(e)]}const HAPTICS_FEEDBACK="van-haptics-feedback",TAP_OFFSET=5;function callInterceptor(r,{args:e=[],done:n,canceled:s,error:a}){if(r){const o=r.apply(null,e);isPromise$1(o)?o.then(l=>{l?n():s&&s()}).catch(a||noop$1):o?n():s&&s()}else n()}function withInstall(r){return r.install=e=>{const{name:n}=r;n&&(e.component(n,r),e.component(camelize(`-${n}`),r))},r}const POPUP_TOGGLE_KEY=Symbol();function useExpose(r){const e=getCurrentInstance();e&&extend(e.proxy,r)}const[name$7,bem$7]=createNamespace("badge"),badgeProps={dot:Boolean,max:numericProp,tag:makeStringProp("div"),color:String,offset:Array,content:numericProp,showZero:truthProp,position:makeStringProp("top-right")};var stdin_default$6=defineComponent({name:name$7,props:badgeProps,setup(r,{slots:e}){const n=()=>{if(e.content)return!0;const{content:u,showZero:c}=r;return isDef(u)&&u!==""&&(c||u!==0&&u!=="0")},s=()=>{const{dot:u,max:c,content:f}=r;if(!u&&n())return e.content?e.content():isDef(c)&&isNumeric(f)&&+f>+c?`${c}+`:f},a=u=>u.startsWith("-")?u.replace("-",""):`-${u}`,o=computed(()=>{const u={background:r.color};if(r.offset){const[c,f]=r.offset,{position:m}=r,[v,x]=m.split("-");e.default?(typeof f=="number"?u[v]=addUnit(v==="top"?f:-f):u[v]=v==="top"?addUnit(f):a(f),typeof c=="number"?u[x]=addUnit(x==="left"?c:-c):u[x]=x==="left"?addUnit(c):a(c)):(u.marginTop=addUnit(f),u.marginLeft=addUnit(c))}return u}),l=()=>{if(n()||r.dot)return createVNode("div",{class:bem$7([r.position,{dot:r.dot,fixed:!!e.default}]),style:o.value},[s()])};return()=>{if(e.default){const{tag:u}=r;return createVNode(u,{class:bem$7("wrapper")},{default:()=>[e.default(),l()]})}return l()}}});const Badge=withInstall(stdin_default$6);let globalZIndex=2e3;const useGlobalZIndex=()=>++globalZIndex,[name$6,bem$6]=createNamespace("config-provider"),CONFIG_PROVIDER_KEY=Symbol(name$6),[name$5,bem$5]=createNamespace("icon"),isImage=r=>r==null?void 0:r.includes("/"),iconProps={dot:Boolean,tag:makeStringProp("i"),name:String,size:numericProp,badge:numericProp,color:String,badgeProps:Object,classPrefix:String};var stdin_default$5=defineComponent({name:name$5,props:iconProps,setup(r,{slots:e}){const n=inject(CONFIG_PROVIDER_KEY,null),s=computed(()=>r.classPrefix||(n==null?void 0:n.iconPrefix)||bem$5());return()=>{const{tag:a,dot:o,name:l,size:u,badge:c,color:f}=r,m=isImage(l);return createVNode(Badge,mergeProps({dot:o,tag:a,class:[s.value,m?"":`${s.value}-${l}`],style:{color:f,fontSize:addUnit(u)},content:c},r.badgeProps),{default:()=>{var v;return[(v=e.default)==null?void 0:v.call(e),m&&createVNode("img",{class:bem$5("image"),src:l},null)]}})}}});const Icon=withInstall(stdin_default$5),[name$4,bem$4]=createNamespace("loading"),SpinIcon=Array(12).fill(null).map((r,e)=>createVNode("i",{class:bem$4("line",String(e+1))},null)),CircularIcon=createVNode("svg",{class:bem$4("circular"),viewBox:"25 25 50 50"},[createVNode("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),loadingProps={size:numericProp,type:makeStringProp("circular"),color:String,vertical:Boolean,textSize:numericProp,textColor:String};var stdin_default$4=defineComponent({name:name$4,props:loadingProps,setup(r,{slots:e}){const n=computed(()=>extend({color:r.color},getSizeStyle(r.size))),s=()=>{const o=r.type==="spinner"?SpinIcon:CircularIcon;return createVNode("span",{class:bem$4("spinner",r.type),style:n.value},[e.icon?e.icon():o])},a=()=>{var o;if(e.default)return createVNode("span",{class:bem$4("text"),style:{fontSize:addUnit(r.textSize),color:(o=r.textColor)!=null?o:r.color}},[e.default()])};return()=>{const{type:o,vertical:l}=r;return createVNode("div",{class:bem$4([o,{vertical:l}]),"aria-live":"polite","aria-busy":!0},[s(),a()])}}});const Loading=withInstall(stdin_default$4),popupSharedProps={show:Boolean,zIndex:numericProp,overlay:truthProp,duration:numericProp,teleport:[String,Object],lockScroll:truthProp,lazyRender:truthProp,beforeClose:Function,overlayStyle:Object,overlayClass:unknownProp,transitionAppear:Boolean,closeOnClickOverlay:truthProp};function getDirection(r,e){return r>e?"horizontal":e>r?"vertical":""}function useTouch(){const r=ref(0),e=ref(0),n=ref(0),s=ref(0),a=ref(0),o=ref(0),l=ref(""),u=ref(!0),c=()=>l.value==="vertical",f=()=>l.value==="horizontal",m=()=>{n.value=0,s.value=0,a.value=0,o.value=0,l.value="",u.value=!0};return{move:C=>{const w=C.touches[0];n.value=(w.clientX<0?0:w.clientX)-r.value,s.value=w.clientY-e.value,a.value=Math.abs(n.value),o.value=Math.abs(s.value);const S=10;(!l.value||a.value<S&&o.value<S)&&(l.value=getDirection(a.value,o.value)),u.value&&(a.value>TAP_OFFSET||o.value>TAP_OFFSET)&&(u.value=!1)},start:C=>{m(),r.value=C.touches[0].clientX,e.value=C.touches[0].clientY},reset:m,startX:r,startY:e,deltaX:n,deltaY:s,offsetX:a,offsetY:o,direction:l,isVertical:c,isHorizontal:f,isTap:u}}let totalLockCount=0;const BODY_LOCK_CLASS="van-overflow-hidden";function useLockScroll(r,e){const n=useTouch(),s="01",a="10",o=m=>{n.move(m);const v=n.deltaY.value>0?a:s,x=getScrollParent(m.target,r.value),{scrollHeight:C,offsetHeight:w,scrollTop:S}=x;let k="11";S===0?k=w>=C?"00":"01":S+w>=C&&(k="10"),k!=="11"&&n.isVertical()&&!(parseInt(k,2)&parseInt(v,2))&&preventDefault(m,!0)},l=()=>{document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",o,{passive:!1}),totalLockCount||document.body.classList.add(BODY_LOCK_CLASS),totalLockCount++},u=()=>{totalLockCount&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",o),totalLockCount--,totalLockCount||document.body.classList.remove(BODY_LOCK_CLASS))},c=()=>e()&&l(),f=()=>e()&&u();onMountedOrActivated(c),onDeactivated(f),onBeforeUnmount(f),watch(e,m=>{m?l():u()})}function useLazyRender(r){const e=ref(!1);return watch(r,n=>{n&&(e.value=n)},{immediate:!0}),n=>()=>e.value?n():null}const useScopeId=()=>{var r;const{scopeId:e}=((r=getCurrentInstance())==null?void 0:r.vnode)||{};return e?{[e]:""}:null},[name$3,bem$3]=createNamespace("overlay"),overlayProps={show:Boolean,zIndex:numericProp,duration:numericProp,className:unknownProp,lockScroll:truthProp,lazyRender:truthProp,customStyle:Object,teleport:[String,Object]};var stdin_default$3=defineComponent({name:name$3,inheritAttrs:!1,props:overlayProps,setup(r,{attrs:e,slots:n}){const s=ref(),a=useLazyRender(()=>r.show||!r.lazyRender),o=u=>{r.lockScroll&&preventDefault(u,!0)},l=a(()=>{var u;const c=extend(getZIndexStyle(r.zIndex),r.customStyle);return isDef(r.duration)&&(c.animationDuration=`${r.duration}s`),withDirectives(createVNode("div",mergeProps({ref:s,style:c,class:[bem$3(),r.className]},e),[(u=n.default)==null?void 0:u.call(n)]),[[vShow,r.show]])});return useEventListener("touchmove",o,{target:s}),()=>{const u=createVNode(Transition,{name:"van-fade",appear:!0},{default:l});return r.teleport?createVNode(Teleport,{to:r.teleport},{default:()=>[u]}):u}}});const Overlay=withInstall(stdin_default$3),popupProps=extend({},popupSharedProps,{round:Boolean,position:makeStringProp("center"),closeIcon:makeStringProp("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:makeStringProp("top-right"),destroyOnClose:Boolean,safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[name$2,bem$2]=createNamespace("popup");var stdin_default$2=defineComponent({name:name$2,inheritAttrs:!1,props:popupProps,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(r,{emit:e,attrs:n,slots:s}){let a,o;const l=ref(),u=ref(),c=useLazyRender(()=>r.show||!r.lazyRender),f=computed(()=>{const W={zIndex:l.value};if(isDef(r.duration)){const R=r.position==="center"?"animationDuration":"transitionDuration";W[R]=`${r.duration}s`}return W}),m=()=>{a||(a=!0,l.value=r.zIndex!==void 0?+r.zIndex:useGlobalZIndex(),e("open"))},v=()=>{a&&callInterceptor(r.beforeClose,{done(){a=!1,e("close"),e("update:show",!1)}})},x=W=>{e("clickOverlay",W),r.closeOnClickOverlay&&v()},C=()=>{if(r.overlay)return createVNode(Overlay,mergeProps({show:r.show,class:r.overlayClass,zIndex:l.value,duration:r.duration,customStyle:r.overlayStyle,role:r.closeOnClickOverlay?"button":void 0,tabindex:r.closeOnClickOverlay?0:void 0},useScopeId(),{onClick:x}),{default:s["overlay-content"]})},w=W=>{e("clickCloseIcon",W),v()},S=()=>{if(r.closeable)return createVNode(Icon,{role:"button",tabindex:0,name:r.closeIcon,class:[bem$2("close-icon",r.closeIconPosition),HAPTICS_FEEDBACK],classPrefix:r.iconPrefix,onClick:w},null)};let k;const M=()=>{k&&clearTimeout(k),k=setTimeout(()=>{e("opened")})},V=()=>e("closed"),H=W=>e("keydown",W),F=c(()=>{var W;const{destroyOnClose:R,round:Q,position:A,safeAreaInsetTop:P,safeAreaInsetBottom:j,show:X}=r;if(!(!X&&R))return withDirectives(createVNode("div",mergeProps({ref:u,style:f.value,role:"dialog",tabindex:0,class:[bem$2({round:Q,[A]:A}),{"van-safe-area-top":P,"van-safe-area-bottom":j}],onKeydown:H},n,useScopeId()),[(W=s.default)==null?void 0:W.call(s),S()]),[[vShow,X]])}),G=()=>{const{position:W,transition:R,transitionAppear:Q}=r,A=W==="center"?"van-fade":`van-popup-slide-${W}`;return createVNode(Transition,{name:R||A,appear:Q,onAfterEnter:M,onAfterLeave:V},{default:F})};return watch(()=>r.show,W=>{W&&!a&&(m(),n.tabindex===0&&nextTick(()=>{var R;(R=u.value)==null||R.focus()})),!W&&a&&(a=!1,e("close"))}),useExpose({popupRef:u}),useLockScroll(u,()=>r.show&&r.lockScroll),useEventListener("popstate",()=>{r.closeOnPopstate&&(v(),o=!1)}),onMounted(()=>{r.show&&m()}),onActivated(()=>{o&&(e("update:show",!0),o=!1)}),onDeactivated(()=>{r.show&&r.teleport&&(v(),o=!0)}),provide(POPUP_TOGGLE_KEY,()=>r.show),()=>r.teleport?createVNode(Teleport,{to:r.teleport},{default:()=>[C(),G()]}):createVNode(Fragment,null,[C(),G()])}});const Popup=withInstall(stdin_default$2);let lockCount=0;function lockClick(r){r?(lockCount||document.body.classList.add("van-toast--unclickable"),lockCount++):lockCount&&(lockCount--,lockCount||document.body.classList.remove("van-toast--unclickable"))}const[name$1,bem$1]=createNamespace("toast"),popupInheritProps=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],toastProps={icon:String,show:Boolean,type:makeStringProp("text"),overlay:Boolean,message:numericProp,iconSize:numericProp,duration:makeNumberProp(2e3),position:makeStringProp("middle"),teleport:[String,Object],wordBreak:String,className:unknownProp,iconPrefix:String,transition:makeStringProp("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:unknownProp,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:numericProp};var stdin_default$1=defineComponent({name:name$1,props:toastProps,emits:["update:show"],setup(r,{emit:e,slots:n}){let s,a=!1;const o=()=>{const v=r.show&&r.forbidClick;a!==v&&(a=v,lockClick(a))},l=v=>e("update:show",v),u=()=>{r.closeOnClick&&l(!1)},c=()=>clearTimeout(s),f=()=>{const{icon:v,type:x,iconSize:C,iconPrefix:w,loadingType:S}=r;if(v||x==="success"||x==="fail")return createVNode(Icon,{name:v||x,size:C,class:bem$1("icon"),classPrefix:w},null);if(x==="loading")return createVNode(Loading,{class:bem$1("loading"),size:C,type:S},null)},m=()=>{const{type:v,message:x}=r;if(n.message)return createVNode("div",{class:bem$1("text")},[n.message()]);if(isDef(x)&&x!=="")return v==="html"?createVNode("div",{key:0,class:bem$1("text"),innerHTML:String(x)},null):createVNode("div",{class:bem$1("text")},[x])};return watch(()=>[r.show,r.forbidClick],o),watch(()=>[r.show,r.type,r.message,r.duration],()=>{c(),r.show&&r.duration>0&&(s=setTimeout(()=>{l(!1)},r.duration))}),onMounted(o),onUnmounted(o),()=>createVNode(Popup,mergeProps({class:[bem$1([r.position,r.wordBreak==="normal"?"break-normal":r.wordBreak,{[r.type]:!r.icon}]),r.className],lockScroll:!1,onClick:u,onClosed:c,"onUpdate:show":l},pick(r,popupInheritProps)),{default:()=>[f(),m()]})}});function usePopupState(){const r=reactive({show:!1}),e=a=>{r.show=a},n=a=>{extend(r,a,{transitionAppear:!0}),e(!0)},s=()=>e(!1);return useExpose({open:n,close:s,toggle:e}),{open:n,close:s,state:r,toggle:e}}function mountComponent(r){const e=createApp(r),n=document.createElement("div");return document.body.appendChild(n),{instance:e.mount(n),unmount(){e.unmount(),document.body.removeChild(n)}}}const defaultOptions$1={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let queue=[],allowMultiple=!1,currentOptions=extend({},defaultOptions$1);const defaultOptionsMap=new Map;function parseOptions(r){return isObject$3(r)?r:{message:r}}function createInstance(){const{instance:r}=mountComponent({setup(){const e=ref(""),{open:n,state:s,close:a,toggle:o}=usePopupState(),l=()=>{},u=()=>createVNode(stdin_default$1,mergeProps(s,{onClosed:l,"onUpdate:show":o}),null);return watch(e,c=>{s.message=c}),getCurrentInstance().render=u,{open:n,close:a,message:e}}});return r}function getInstance(){if(!queue.length||allowMultiple){const r=createInstance();queue.push(r)}return queue[queue.length-1]}function showToast(r={}){if(!inBrowser$1)return{};const e=getInstance(),n=parseOptions(r);return e.open(extend({},currentOptions,defaultOptionsMap.get(n.type||currentOptions.type),n)),e}withInstall(stdin_default$1);const[name,bem,t]=createNamespace("pull-refresh"),DEFAULT_HEAD_HEIGHT=50,TEXT_STATUS=["pulling","loosing","success"],pullRefreshProps={disabled:Boolean,modelValue:Boolean,headHeight:makeNumericProp(DEFAULT_HEAD_HEIGHT),successText:String,pullingText:String,loosingText:String,loadingText:String,pullDistance:numericProp,successDuration:makeNumericProp(500),animationDuration:makeNumericProp(300)};var stdin_default=defineComponent({name,props:pullRefreshProps,emits:["change","refresh","update:modelValue"],setup(r,{emit:e,slots:n}){let s;const a=ref(),o=ref(),l=useScrollParent(a),u=reactive({status:"normal",distance:0,duration:0}),c=useTouch(),f=()=>{if(r.headHeight!==DEFAULT_HEAD_HEIGHT)return{height:`${r.headHeight}px`}},m=()=>u.status!=="loading"&&u.status!=="success"&&!r.disabled,v=F=>{const G=+(r.pullDistance||r.headHeight);return F>G&&(F<G*2?F=G+(F-G)/2:F=G*1.5+(F-G*2)/4),Math.round(F)},x=(F,G)=>{const W=+(r.pullDistance||r.headHeight);u.distance=F,G?u.status="loading":F===0?u.status="normal":F<W?u.status="pulling":u.status="loosing",e("change",{status:u.status,distance:F})},C=()=>{const{status:F}=u;return F==="normal"?"":r[`${F}Text`]||t(F)},w=()=>{const{status:F,distance:G}=u;if(n[F])return n[F]({distance:G});const W=[];return TEXT_STATUS.includes(F)&&W.push(createVNode("div",{class:bem("text")},[C()])),F==="loading"&&W.push(createVNode(Loading,{class:bem("loading")},{default:C})),W},S=()=>{u.status="success",setTimeout(()=>{x(0)},+r.successDuration)},k=F=>{s=getScrollTop(l.value)===0,s&&(u.duration=0,c.start(F))},M=F=>{m()&&k(F)},V=F=>{if(m()){s||k(F);const{deltaY:G}=c;c.move(F),s&&G.value>=0&&c.isVertical()&&(preventDefault(F),x(v(G.value)))}},H=()=>{s&&c.deltaY.value&&m()&&(u.duration=+r.animationDuration,u.status==="loosing"?(x(+r.headHeight,!0),e("update:modelValue",!0),nextTick(()=>e("refresh"))):x(0))};return watch(()=>r.modelValue,F=>{u.duration=+r.animationDuration,F?x(+r.headHeight,!0):n.success||r.successText?S():x(0,!1)}),useEventListener("touchmove",V,{target:o}),()=>{var F;const G={transitionDuration:`${u.duration}ms`,transform:u.distance?`translate3d(0,${u.distance}px, 0)`:""};return createVNode("div",{ref:a,class:bem()},[createVNode("div",{ref:o,class:bem("track"),style:G,onTouchstartPassive:M,onTouchend:H,onTouchcancel:H},[createVNode("div",{class:bem("head"),style:f()},[w()]),(F=n.default)==null?void 0:F.call(n)])])}}});const PullRefresh=withInstall(stdin_default);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function getAugmentedNamespace(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(r).forEach(function(s){var a=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:function(){return r[s]}})}),n}var mock$1={exports:{}},mock=mock$1.exports,hasRequiredMock;function requireMock(){return hasRequiredMock||(hasRequiredMock=1,function(module,exports){(function(e,n){module.exports=n()})(mock,function(){return function(r){var e={};function n(s){if(e[s])return e[s].exports;var a=e[s]={exports:{},id:s,loaded:!1};return r[s].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}return n.m=r,n.c=e,n.p="",n(0)}([function(r,e,n){var s=n(1),a=n(3),o=n(5),l=n(20),u=n(23),c=n(25),f;typeof window<"u"&&(f=n(27));/*!
    Mock - 模拟请求 & 模拟数据
    https://github.com/nuysoft/Mock
    墨智 mozhi.gyy@taobao.com nuysoft@gmail.com
*/var m={Handler:s,Random:o,Util:a,XHR:f,RE:l,toJSONSchema:u,valid:c,heredoc:a.heredoc,setup:function(v){return f.setup(v)},_mocked:{}};m.version="1.0.1-beta3",f&&(f.Mock=m),m.mock=function(v,x,C){return arguments.length===1?s.gen(v):(arguments.length===2&&(C=x,x=void 0),f&&(window.XMLHttpRequest=f),m._mocked[v+(x||"")]={rurl:v,rtype:x,template:C},m)},r.exports=m},function(module,exports,__webpack_require__){var Constant=__webpack_require__(2),Util=__webpack_require__(3),Parser=__webpack_require__(4),Random=__webpack_require__(5),RE=__webpack_require__(20),Handler={extend:Util.extend};Handler.gen=function(r,e,n){e=e==null?"":e+"",n=n||{},n={path:n.path||[Constant.GUID],templatePath:n.templatePath||[Constant.GUID++],currentContext:n.currentContext,templateCurrentContext:n.templateCurrentContext||r,root:n.root||n.currentContext,templateRoot:n.templateRoot||n.templateCurrentContext||r};var s=Parser.parse(e),a=Util.type(r),o;return Handler[a]?(o=Handler[a]({type:a,template:r,name:e,parsedName:e&&e.replace(Constant.RE_KEY,"$1"),rule:s,context:n}),n.root||(n.root=o),o):r},Handler.extend({array:function(r){var e=[],n,s;if(r.template.length===0)return e;if(r.rule.parameters)if(r.rule.min===1&&r.rule.max===void 0)r.context.path.push(r.name),r.context.templatePath.push(r.name),e=Random.pick(Handler.gen(r.template,void 0,{path:r.context.path,templatePath:r.context.templatePath,currentContext:e,templateCurrentContext:r.template,root:r.context.root||e,templateRoot:r.context.templateRoot||r.template})),r.context.path.pop(),r.context.templatePath.pop();else if(r.rule.parameters[2])r.template.__order_index=r.template.__order_index||0,r.context.path.push(r.name),r.context.templatePath.push(r.name),e=Handler.gen(r.template,void 0,{path:r.context.path,templatePath:r.context.templatePath,currentContext:e,templateCurrentContext:r.template,root:r.context.root||e,templateRoot:r.context.templateRoot||r.template})[r.template.__order_index%r.template.length],r.template.__order_index+=+r.rule.parameters[2],r.context.path.pop(),r.context.templatePath.pop();else for(n=0;n<r.rule.count;n++)for(s=0;s<r.template.length;s++)r.context.path.push(e.length),r.context.templatePath.push(s),e.push(Handler.gen(r.template[s],e.length,{path:r.context.path,templatePath:r.context.templatePath,currentContext:e,templateCurrentContext:r.template,root:r.context.root||e,templateRoot:r.context.templateRoot||r.template})),r.context.path.pop(),r.context.templatePath.pop();else for(n=0;n<r.template.length;n++)r.context.path.push(n),r.context.templatePath.push(n),e.push(Handler.gen(r.template[n],n,{path:r.context.path,templatePath:r.context.templatePath,currentContext:e,templateCurrentContext:r.template,root:r.context.root||e,templateRoot:r.context.templateRoot||r.template})),r.context.path.pop(),r.context.templatePath.pop();return e},object:function(r){var e={},n,s,a,o,l,u;if(r.rule.min!=null)for(n=Util.keys(r.template),n=Random.shuffle(n),n=n.slice(0,r.rule.count),u=0;u<n.length;u++)a=n[u],o=a.replace(Constant.RE_KEY,"$1"),r.context.path.push(o),r.context.templatePath.push(a),e[o]=Handler.gen(r.template[a],a,{path:r.context.path,templatePath:r.context.templatePath,currentContext:e,templateCurrentContext:r.template,root:r.context.root||e,templateRoot:r.context.templateRoot||r.template}),r.context.path.pop(),r.context.templatePath.pop();else{n=[],s=[];for(a in r.template)(typeof r.template[a]=="function"?s:n).push(a);for(n=n.concat(s),u=0;u<n.length;u++)a=n[u],o=a.replace(Constant.RE_KEY,"$1"),r.context.path.push(o),r.context.templatePath.push(a),e[o]=Handler.gen(r.template[a],a,{path:r.context.path,templatePath:r.context.templatePath,currentContext:e,templateCurrentContext:r.template,root:r.context.root||e,templateRoot:r.context.templateRoot||r.template}),r.context.path.pop(),r.context.templatePath.pop(),l=a.match(Constant.RE_KEY),l&&l[2]&&Util.type(r.template[a])==="number"&&(r.template[a]+=parseInt(l[2],10))}return e},number:function(r){var e,n;if(r.rule.decimal){for(r.template+="",n=r.template.split("."),n[0]=r.rule.range?r.rule.count:n[0],n[1]=(n[1]||"").slice(0,r.rule.dcount);n[1].length<r.rule.dcount;)n[1]+=n[1].length<r.rule.dcount-1?Random.character("number"):Random.character("123456789");e=parseFloat(n.join("."),10)}else e=r.rule.range&&!r.rule.parameters[2]?r.rule.count:r.template;return e},boolean:function(r){var e;return e=r.rule.parameters?Random.bool(r.rule.min,r.rule.max,r.template):r.template,e},string:function(r){var e="",n,s,a,o;if(r.template.length){for(r.rule.count==null&&(e+=r.template),n=0;n<r.rule.count;n++)e+=r.template;for(s=e.match(Constant.RE_PLACEHOLDER)||[],n=0;n<s.length;n++){if(a=s[n],/^\\/.test(a)){s.splice(n--,1);continue}if(o=Handler.placeholder(a,r.context.currentContext,r.context.templateCurrentContext,r),s.length===1&&a===e&&typeof o!=typeof e){e=o;break}e=e.replace(a,o)}}else e=r.rule.range?Random.string(r.rule.count):r.template;return e},function:function(r){return r.template.call(r.context.currentContext,r)},regexp:function(r){var e="";r.rule.count==null&&(e+=r.template.source);for(var n=0;n<r.rule.count;n++)e+=r.template.source;return RE.Handler.gen(RE.Parser.parse(e))}}),Handler.extend({_all:function(){var r={};for(var e in Random)r[e.toLowerCase()]=e;return r},placeholder:function(placeholder,obj,templateContext,options){Constant.RE_PLACEHOLDER.exec("");var parts=Constant.RE_PLACEHOLDER.exec(placeholder),key=parts&&parts[1],lkey=key&&key.toLowerCase(),okey=this._all()[lkey],params=parts&&parts[2]||"",pathParts=this.splitPathToArray(key);try{params=eval("(function(){ return [].splice.call(arguments, 0 ) })("+params+")")}catch(r){params=parts[2].split(/,\s*/)}if(obj&&key in obj)return obj[key];if(key.charAt(0)==="/"||pathParts.length>1)return this.getValueByKeyPath(key,options);if(templateContext&&typeof templateContext=="object"&&key in templateContext&&placeholder!==templateContext[key])return templateContext[key]=Handler.gen(templateContext[key],key,{currentContext:obj,templateCurrentContext:templateContext}),templateContext[key];if(!(key in Random)&&!(lkey in Random)&&!(okey in Random))return placeholder;for(var i=0;i<params.length;i++)Constant.RE_PLACEHOLDER.exec(""),Constant.RE_PLACEHOLDER.test(params[i])&&(params[i]=Handler.placeholder(params[i],obj,templateContext,options));var handle=Random[key]||Random[lkey]||Random[okey];switch(Util.type(handle)){case"array":return Random.pick(handle);case"function":handle.options=options;var re=handle.apply(Random,params);return re===void 0&&(re=""),delete handle.options,re}},getValueByKeyPath:function(r,e){var n=r,s=this.splitPathToArray(r),a=[];r.charAt(0)==="/"?a=[e.context.path[0]].concat(this.normalizePath(s)):s.length>1&&(a=e.context.path.slice(0),a.pop(),a=this.normalizePath(a.concat(s)));try{r=s[s.length-1];for(var o=e.context.root,l=e.context.templateRoot,u=1;u<a.length-1;u++)o=o[a[u]],l=l[a[u]];if(o&&r in o)return o[r];if(l&&typeof l=="object"&&r in l&&n!==l[r])return l[r]=Handler.gen(l[r],r,{currentContext:o,templateCurrentContext:l}),l[r]}catch{}return"@"+s.join("/")},normalizePath:function(r){for(var e=[],n=0;n<r.length;n++)switch(r[n]){case"..":e.pop();break;case".":break;default:e.push(r[n])}return e},splitPathToArray:function(r){var e=r.split(/\/+/);return e[e.length-1]||(e=e.slice(0,-1)),e[0]||(e=e.slice(1)),e}}),module.exports=Handler},function(r,e){r.exports={GUID:1,RE_KEY:/(.+)\|(?:\+(\d+)|([\+\-]?\d+-?[\+\-]?\d*)?(?:\.(\d+-?\d*))?)/,RE_RANGE:/([\+\-]?\d+)-?([\+\-]?\d+)?/,RE_PLACEHOLDER:/\\*@([^@#%&()\?\s]+)(?:\((.*?)\))?/g}},function(r,e){var n={};n.extend=function(){var a=arguments[0]||{},o=1,l=arguments.length,u,c,f,m,v;for(l===1&&(a=this,o=0);o<l;o++)if(u=arguments[o],!!u)for(c in u)f=a[c],m=u[c],a!==m&&m!==void 0&&(n.isArray(m)||n.isObject(m)?(n.isArray(m)&&(v=f&&n.isArray(f)?f:[]),n.isObject(m)&&(v=f&&n.isObject(f)?f:{}),a[c]=n.extend(v,m)):a[c]=m);return a},n.each=function(a,o,l){var u,c;if(this.type(a)==="number")for(u=0;u<a;u++)o(u,u);else if(a.length===+a.length)for(u=0;u<a.length&&o.call(l,a[u],u,a)!==!1;u++);else for(c in a)if(o.call(l,a[c],c,a)===!1)break},n.type=function(a){return a==null?String(a):Object.prototype.toString.call(a).match(/\[object (\w+)\]/)[1].toLowerCase()},n.each("String Object Array RegExp Function".split(" "),function(s){n["is"+s]=function(a){return n.type(a)===s.toLowerCase()}}),n.isObjectOrArray=function(s){return n.isObject(s)||n.isArray(s)},n.isNumeric=function(s){return!isNaN(parseFloat(s))&&isFinite(s)},n.keys=function(s){var a=[];for(var o in s)s.hasOwnProperty(o)&&a.push(o);return a},n.values=function(s){var a=[];for(var o in s)s.hasOwnProperty(o)&&a.push(s[o]);return a},n.heredoc=function(a){return a.toString().replace(/^[^\/]+\/\*!?/,"").replace(/\*\/[^\/]+$/,"").replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")},n.noop=function(){},r.exports=n},function(r,e,n){var s=n(2),a=n(5);r.exports={parse:function(o){o=o==null?"":o+"";var l=(o||"").match(s.RE_KEY),u=l&&l[3]&&l[3].match(s.RE_RANGE),c=u&&u[1]&&parseInt(u[1],10),f=u&&u[2]&&parseInt(u[2],10),m=u?u[2]?a.integer(c,f):parseInt(u[1],10):void 0,v=l&&l[4]&&l[4].match(s.RE_RANGE),x=v&&v[1]&&parseInt(v[1],10),C=v&&v[2]&&parseInt(v[2],10),w=v?!v[2]&&parseInt(v[1],10)||a.integer(x,C):void 0,S={parameters:l,range:u,min:c,max:f,count:m,decimal:v,dmin:x,dmax:C,dcount:w};for(var k in S)if(S[k]!=null)return S;return{}}}},function(r,e,n){var s=n(3),a={extend:s.extend};a.extend(n(6)),a.extend(n(7)),a.extend(n(8)),a.extend(n(10)),a.extend(n(13)),a.extend(n(15)),a.extend(n(16)),a.extend(n(17)),a.extend(n(14)),a.extend(n(19)),r.exports=a},function(r,e){r.exports={boolean:function(n,s,a){return a!==void 0?(n=typeof n<"u"&&!isNaN(n)?parseInt(n,10):1,s=typeof s<"u"&&!isNaN(s)?parseInt(s,10):1,Math.random()>1/(n+s)*n?!a:a):Math.random()>=.5},bool:function(n,s,a){return this.boolean(n,s,a)},natural:function(n,s){return n=typeof n<"u"?parseInt(n,10):0,s=typeof s<"u"?parseInt(s,10):9007199254740992,Math.round(Math.random()*(s-n))+n},integer:function(n,s){return n=typeof n<"u"?parseInt(n,10):-9007199254740992,s=typeof s<"u"?parseInt(s,10):9007199254740992,Math.round(Math.random()*(s-n))+n},int:function(n,s){return this.integer(n,s)},float:function(n,s,a,o){a=a===void 0?0:a,a=Math.max(Math.min(a,17),0),o=o===void 0?17:o,o=Math.max(Math.min(o,17),0);for(var l=this.integer(n,s)+".",u=0,c=this.natural(a,o);u<c;u++)l+=u<c-1?this.character("number"):this.character("123456789");return parseFloat(l,10)},character:function(n){var s={lower:"abcdefghijklmnopqrstuvwxyz",upper:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",number:"0123456789",symbol:"!@#$%^&*()[]"};return s.alpha=s.lower+s.upper,s.undefined=s.lower+s.upper+s.number+s.symbol,n=s[(""+n).toLowerCase()]||n,n.charAt(this.natural(0,n.length-1))},char:function(n){return this.character(n)},string:function(n,s,a){var o;switch(arguments.length){case 0:o=this.natural(3,7);break;case 1:o=n,n=void 0;break;case 2:typeof arguments[0]=="string"?o=s:(o=this.natural(n,s),n=void 0);break;case 3:o=this.natural(s,a);break}for(var l="",u=0;u<o;u++)l+=this.character(n);return l},str:function(){return this.string.apply(this,arguments)},range:function(n,s,a){arguments.length<=1&&(s=n||0,n=0),a=arguments[2]||1,n=+n,s=+s,a=+a;for(var o=Math.max(Math.ceil((s-n)/a),0),l=0,u=new Array(o);l<o;)u[l++]=n,n+=a;return u}}},function(r,e){var n={yyyy:"getFullYear",yy:function(s){return(""+s.getFullYear()).slice(2)},y:"yy",MM:function(s){var a=s.getMonth()+1;return a<10?"0"+a:a},M:function(s){return s.getMonth()+1},dd:function(s){var a=s.getDate();return a<10?"0"+a:a},d:"getDate",HH:function(s){var a=s.getHours();return a<10?"0"+a:a},H:"getHours",hh:function(s){var a=s.getHours()%12;return a<10?"0"+a:a},h:function(s){return s.getHours()%12},mm:function(s){var a=s.getMinutes();return a<10?"0"+a:a},m:"getMinutes",ss:function(s){var a=s.getSeconds();return a<10?"0"+a:a},s:"getSeconds",SS:function(s){var a=s.getMilliseconds();return a<10&&"00"+a||a<100&&"0"+a||a},S:"getMilliseconds",A:function(s){return s.getHours()<12?"AM":"PM"},a:function(s){return s.getHours()<12?"am":"pm"},T:"getTime"};r.exports={_patternLetters:n,_rformat:new RegExp(function(){var s=[];for(var a in n)s.push(a);return"("+s.join("|")+")"}(),"g"),_formatDate:function(s,a){return a.replace(this._rformat,function o(l,u){return typeof n[u]=="function"?n[u](s):n[u]in n?o(l,n[u]):s[n[u]]()})},_randomDate:function(s,a){return s=s===void 0?new Date(0):s,a=a===void 0?new Date:a,new Date(Math.random()*(a.getTime()-s.getTime()))},date:function(s){return s=s||"yyyy-MM-dd",this._formatDate(this._randomDate(),s)},time:function(s){return s=s||"HH:mm:ss",this._formatDate(this._randomDate(),s)},datetime:function(s){return s=s||"yyyy-MM-dd HH:mm:ss",this._formatDate(this._randomDate(),s)},now:function(s,a){arguments.length===1&&(/year|month|day|hour|minute|second|week/.test(s)||(a=s,s="")),s=(s||"").toLowerCase(),a=a||"yyyy-MM-dd HH:mm:ss";var o=new Date;switch(s){case"year":o.setMonth(0);case"month":o.setDate(1);case"week":case"day":o.setHours(0);case"hour":o.setMinutes(0);case"minute":o.setSeconds(0);case"second":o.setMilliseconds(0)}switch(s){case"week":o.setDate(o.getDate()-o.getDay())}return this._formatDate(o,a)}}},function(r,e,n){(function(s){s.exports={_adSize:["300x250","250x250","240x400","336x280","180x150","720x300","468x60","234x60","88x31","120x90","120x60","120x240","125x125","728x90","160x600","120x600","300x600"],_screenSize:["320x200","320x240","640x480","800x480","800x480","1024x600","1024x768","1280x800","1440x900","1920x1200","2560x1600"],_videoSize:["720x480","768x576","1280x720","1920x1080"],image:function(a,o,l,u,c){return arguments.length===4&&(c=u,u=void 0),arguments.length===3&&(c=l,l=void 0),a||(a=this.pick(this._adSize)),o&&~o.indexOf("#")&&(o=o.slice(1)),l&&~l.indexOf("#")&&(l=l.slice(1)),"http://dummyimage.com/"+a+(o?"/"+o:"")+(l?"/"+l:"")+(u?"."+u:"")+(c?"&text="+c:"")},img:function(){return this.image.apply(this,arguments)},_brandColors:{"4ormat":"#fb0a2a","500px":"#02adea","About.me (blue)":"#00405d","About.me (yellow)":"#ffcc33",Addvocate:"#ff6138",Adobe:"#ff0000",Aim:"#fcd20b",Amazon:"#e47911",Android:"#a4c639","Angie's List":"#7fbb00",AOL:"#0060a3",Atlassian:"#003366",Behance:"#053eff","Big Cartel":"#97b538",bitly:"#ee6123",Blogger:"#fc4f08",Boeing:"#0039a6","Booking.com":"#003580",Carbonmade:"#613854",Cheddar:"#ff7243","Code School":"#3d4944",Delicious:"#205cc0",Dell:"#3287c1",Designmoo:"#e54a4f",Deviantart:"#4e6252","Designer News":"#2d72da",Devour:"#fd0001",DEWALT:"#febd17","Disqus (blue)":"#59a3fc","Disqus (orange)":"#db7132",Dribbble:"#ea4c89",Dropbox:"#3d9ae8",Drupal:"#0c76ab",Dunked:"#2a323a",eBay:"#89c507",Ember:"#f05e1b",Engadget:"#00bdf6",Envato:"#528036",Etsy:"#eb6d20",Evernote:"#5ba525","Fab.com":"#dd0017",Facebook:"#3b5998",Firefox:"#e66000","Flickr (blue)":"#0063dc","Flickr (pink)":"#ff0084",Forrst:"#5b9a68",Foursquare:"#25a0ca",Garmin:"#007cc3",GetGlue:"#2d75a2",Gimmebar:"#f70078",GitHub:"#171515","Google Blue":"#0140ca","Google Green":"#16a61e","Google Red":"#dd1812","Google Yellow":"#fcca03","Google+":"#dd4b39",Grooveshark:"#f77f00",Groupon:"#82b548","Hacker News":"#ff6600",HelloWallet:"#0085ca","Heroku (light)":"#c7c5e6","Heroku (dark)":"#6567a5",HootSuite:"#003366",Houzz:"#73ba37",HTML5:"#ec6231",IKEA:"#ffcc33",IMDb:"#f3ce13",Instagram:"#3f729b",Intel:"#0071c5",Intuit:"#365ebf",Kickstarter:"#76cc1e",kippt:"#e03500",Kodery:"#00af81",LastFM:"#c3000d",LinkedIn:"#0e76a8",Livestream:"#cf0005",Lumo:"#576396",Mixpanel:"#a086d3",Meetup:"#e51937",Nokia:"#183693",NVIDIA:"#76b900",Opera:"#cc0f16",Path:"#e41f11","PayPal (dark)":"#1e477a","PayPal (light)":"#3b7bbf",Pinboard:"#0000e6",Pinterest:"#c8232c",PlayStation:"#665cbe",Pocket:"#ee4056",Prezi:"#318bff",Pusha:"#0f71b4",Quora:"#a82400","QUOTE.fm":"#66ceff",Rdio:"#008fd5",Readability:"#9c0000","Red Hat":"#cc0000",Resource:"#7eb400",Rockpack:"#0ba6ab",Roon:"#62b0d9",RSS:"#ee802f",Salesforce:"#1798c1",Samsung:"#0c4da2",Shopify:"#96bf48",Skype:"#00aff0",Snagajob:"#f47a20",Softonic:"#008ace",SoundCloud:"#ff7700","Space Box":"#f86960",Spotify:"#81b71a",Sprint:"#fee100",Squarespace:"#121212",StackOverflow:"#ef8236",Staples:"#cc0000","Status Chart":"#d7584f",Stripe:"#008cdd",StudyBlue:"#00afe1",StumbleUpon:"#f74425","T-Mobile":"#ea0a8e",Technorati:"#40a800","The Next Web":"#ef4423",Treehouse:"#5cb868",Trulia:"#5eab1f",Tumblr:"#34526f","Twitch.tv":"#6441a5",Twitter:"#00acee",TYPO3:"#ff8700",Ubuntu:"#dd4814",Ustream:"#3388ff",Verizon:"#ef1d1d",Vimeo:"#86c9ef",Vine:"#00a478",Virb:"#06afd8","Virgin Media":"#cc0000",Wooga:"#5b009c","WordPress (blue)":"#21759b","WordPress (orange)":"#d54e21","WordPress (grey)":"#464646",Wunderlist:"#2b88d9",XBOX:"#9bc848",XING:"#126567","Yahoo!":"#720e9e",Yandex:"#ffcc00",Yelp:"#c41200",YouTube:"#c4302b",Zalongo:"#5498dc",Zendesk:"#78a300",Zerply:"#9dcc7a",Zootool:"#5e8b1d"},_brandNames:function(){var a=[];for(var o in this._brandColors)a.push(o);return a},dataImage:function(a,o){var l;if(typeof document<"u")l=document.createElement("canvas");else{var u=s.require("canvas");l=new u}var c=l&&l.getContext&&l.getContext("2d");if(!l||!c)return"";a||(a=this.pick(this._adSize)),o=o!==void 0?o:a,a=a.split("x");var f=parseInt(a[0],10),m=parseInt(a[1],10),v=this._brandColors[this.pick(this._brandNames())],x="#FFF",C=14,w="sans-serif";return l.width=f,l.height=m,c.textAlign="center",c.textBaseline="middle",c.fillStyle=v,c.fillRect(0,0,f,m),c.fillStyle=x,c.font="bold "+C+"px "+w,c.fillText(o,f/2,m/2,f),l.toDataURL("image/png")}}}).call(e,n(9)(r))},function(r,e){r.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children=[],n.webpackPolyfill=1),n}},function(r,e,n){var s=n(11),a=n(12);r.exports={color:function(o){return o||a[o]?a[o].nicer:this.hex()},hex:function(){var o=this._goldenRatioColor(),l=s.hsv2rgb(o),u=s.rgb2hex(l[0],l[1],l[2]);return u},rgb:function(){var o=this._goldenRatioColor(),l=s.hsv2rgb(o);return"rgb("+parseInt(l[0],10)+", "+parseInt(l[1],10)+", "+parseInt(l[2],10)+")"},rgba:function(){var o=this._goldenRatioColor(),l=s.hsv2rgb(o);return"rgba("+parseInt(l[0],10)+", "+parseInt(l[1],10)+", "+parseInt(l[2],10)+", "+Math.random().toFixed(2)+")"},hsl:function(){var o=this._goldenRatioColor(),l=s.hsv2hsl(o);return"hsl("+parseInt(l[0],10)+", "+parseInt(l[1],10)+", "+parseInt(l[2],10)+")"},_goldenRatioColor:function(o,l){return this._goldenRatio=.618033988749895,this._hue=this._hue||Math.random(),this._hue+=this._goldenRatio,this._hue%=1,typeof o!="number"&&(o=.5),typeof l!="number"&&(l=.95),[this._hue*360,o*100,l*100]}}},function(r,e){r.exports={rgb2hsl:function(s){var a=s[0]/255,o=s[1]/255,l=s[2]/255,u=Math.min(a,o,l),c=Math.max(a,o,l),f=c-u,m,v,x;return c==u?m=0:a==c?m=(o-l)/f:o==c?m=2+(l-a)/f:l==c&&(m=4+(a-o)/f),m=Math.min(m*60,360),m<0&&(m+=360),x=(u+c)/2,c==u?v=0:x<=.5?v=f/(c+u):v=f/(2-c-u),[m,v*100,x*100]},rgb2hsv:function(s){var a=s[0],o=s[1],l=s[2],u=Math.min(a,o,l),c=Math.max(a,o,l),f=c-u,m,v,x;return c===0?v=0:v=f/c*1e3/10,c==u?m=0:a==c?m=(o-l)/f:o==c?m=2+(l-a)/f:l==c&&(m=4+(a-o)/f),m=Math.min(m*60,360),m<0&&(m+=360),x=c/255*1e3/10,[m,v,x]},hsl2rgb:function(s){var a=s[0]/360,o=s[1]/100,l=s[2]/100,u,c,f,m,v;if(o===0)return v=l*255,[v,v,v];l<.5?c=l*(1+o):c=l+o-l*o,u=2*l-c,m=[0,0,0];for(var x=0;x<3;x++)f=a+1/3*-(x-1),f<0&&f++,f>1&&f--,6*f<1?v=u+(c-u)*6*f:2*f<1?v=c:3*f<2?v=u+(c-u)*(2/3-f)*6:v=u,m[x]=v*255;return m},hsl2hsv:function(s){var a=s[0],o=s[1]/100,l=s[2]/100,u,c;return l*=2,o*=l<=1?l:2-l,c=(l+o)/2,u=2*o/(l+o),[a,u*100,c*100]},hsv2rgb:function(s){var a=s[0]/60,o=s[1]/100,l=s[2]/100,u=Math.floor(a)%6,c=a-Math.floor(a),f=255*l*(1-o),m=255*l*(1-o*c),v=255*l*(1-o*(1-c));switch(l=255*l,u){case 0:return[l,v,f];case 1:return[m,l,f];case 2:return[f,l,v];case 3:return[f,m,l];case 4:return[v,f,l];case 5:return[l,f,m]}},hsv2hsl:function(s){var a=s[0],o=s[1]/100,l=s[2]/100,u,c;return c=(2-o)*l,u=o*l,u/=c<=1?c:2-c,c/=2,[a,u*100,c*100]},rgb2hex:function(n,s,a){return"#"+((256+n<<8|s)<<8|a).toString(16).slice(1)},hex2rgb:function(n){return n="0x"+n.slice(1).replace(n.length>4?n:/./g,"$&$&")|0,[n>>16,n>>8&255,n&255]}}},function(r,e){r.exports={navy:{value:"#000080",nicer:"#001F3F"},blue:{value:"#0000ff",nicer:"#0074D9"},aqua:{value:"#00ffff",nicer:"#7FDBFF"},teal:{value:"#008080",nicer:"#39CCCC"},olive:{value:"#008000",nicer:"#3D9970"},green:{value:"#008000",nicer:"#2ECC40"},lime:{value:"#00ff00",nicer:"#01FF70"},yellow:{value:"#ffff00",nicer:"#FFDC00"},orange:{value:"#ffa500",nicer:"#FF851B"},red:{value:"#ff0000",nicer:"#FF4136"},maroon:{value:"#800000",nicer:"#85144B"},fuchsia:{value:"#ff00ff",nicer:"#F012BE"},purple:{value:"#800080",nicer:"#B10DC9"},silver:{value:"#c0c0c0",nicer:"#DDDDDD"},gray:{value:"#808080",nicer:"#AAAAAA"},black:{value:"#000000",nicer:"#111111"},white:{value:"#FFFFFF",nicer:"#FFFFFF"}}},function(r,e,n){var s=n(6),a=n(14);function o(l,u,c,f){return c===void 0?s.natural(l,u):f===void 0?c:s.natural(parseInt(c,10),parseInt(f,10))}r.exports={paragraph:function(l,u){for(var c=o(3,7,l,u),f=[],m=0;m<c;m++)f.push(this.sentence());return f.join(" ")},cparagraph:function(l,u){for(var c=o(3,7,l,u),f=[],m=0;m<c;m++)f.push(this.csentence());return f.join("")},sentence:function(l,u){for(var c=o(12,18,l,u),f=[],m=0;m<c;m++)f.push(this.word());return a.capitalize(f.join(" "))+"."},csentence:function(l,u){for(var c=o(12,18,l,u),f=[],m=0;m<c;m++)f.push(this.cword());return f.join("")+"。"},word:function(l,u){for(var c=o(3,10,l,u),f="",m=0;m<c;m++)f+=s.character("lower");return f},cword:function(l,u,c){var f="的一是在不了有和人这中大为上个国我以要他时来用们生到作地于出就分对成会可主发年动同工也能下过子说产种面而方后多定行学法所民得经十三之进着等部度家电力里如水化高自二理起小物现实加量都两体制机当使点从业本去把性好应开它合还因由其些然前外天政四日那社义事平形相全表间样与关各重新线内数正心反你明看原又么利比或但质气第向道命此变条只没结解问意建月公无系军很情者最立代想已通并提直题党程展五果料象员革位入常文总次品式活设及管特件长求老头基资边流路级少图山统接知较将组见计别她手角期根论运农指几九区强放决西被干做必战先回则任取据处队南给色光门即保治北造百规热领七海口东导器压志世金增争济阶油思术极交受联什认六共权收证改清己美再采转更单风切打白教速花带安场身车例真务具万每目至达走积示议声报斗完类八离华名确才科张信马节话米整空元况今集温传土许步群广石记需段研界拉林律叫且究观越织装影算低持音众书布复容儿须际商非验连断深难近矿千周委素技备半办青省列习响约支般史感劳便团往酸历市克何除消构府称太准精值号率族维划选标写存候毛亲快效斯院查江型眼王按格养易置派层片始却专状育厂京识适属圆包火住调满县局照参红细引听该铁价严龙飞",m;switch(arguments.length){case 0:l=f,m=1;break;case 1:typeof arguments[0]=="string"?m=1:(m=l,l=f);break;case 2:typeof arguments[0]=="string"?m=u:(m=this.natural(l,u),l=f);break;case 3:m=this.natural(u,c);break}for(var v="",x=0;x<m;x++)v+=l.charAt(this.natural(0,l.length-1));return v},title:function(l,u){for(var c=o(3,7,l,u),f=[],m=0;m<c;m++)f.push(this.capitalize(this.word()));return f.join(" ")},ctitle:function(l,u){for(var c=o(3,7,l,u),f=[],m=0;m<c;m++)f.push(this.cword());return f.join("")}}},function(r,e,n){var s=n(3);r.exports={capitalize:function(a){return(a+"").charAt(0).toUpperCase()+(a+"").substr(1)},upper:function(a){return(a+"").toUpperCase()},lower:function(a){return(a+"").toLowerCase()},pick:function(o,l,u){return s.isArray(o)?(l===void 0&&(l=1),u===void 0&&(u=l)):(o=[].slice.call(arguments),l=1,u=1),l===1&&u===1?o[this.natural(0,o.length-1)]:this.shuffle(o,l,u)},shuffle:function(o,l,u){o=o||[];for(var c=o.slice(0),f=[],m=0,v=c.length,x=0;x<v;x++)m=this.natural(0,c.length-1),f.push(c[m]),c.splice(m,1);switch(arguments.length){case 0:case 1:return f;case 2:u=l;case 3:return l=parseInt(l,10),u=parseInt(u,10),f.slice(0,this.natural(l,u))}},order:function a(o){a.cache=a.cache||{},arguments.length>1&&(o=[].slice.call(arguments,0));var l=a.options,u=l.context.templatePath.join("."),c=a.cache[u]=a.cache[u]||{index:0,array:o};return c.array[c.index++%c.array.length]}}},function(r,e){r.exports={first:function(){var n=["James","John","Robert","Michael","William","David","Richard","Charles","Joseph","Thomas","Christopher","Daniel","Paul","Mark","Donald","George","Kenneth","Steven","Edward","Brian","Ronald","Anthony","Kevin","Jason","Matthew","Gary","Timothy","Jose","Larry","Jeffrey","Frank","Scott","Eric"].concat(["Mary","Patricia","Linda","Barbara","Elizabeth","Jennifer","Maria","Susan","Margaret","Dorothy","Lisa","Nancy","Karen","Betty","Helen","Sandra","Donna","Carol","Ruth","Sharon","Michelle","Laura","Sarah","Kimberly","Deborah","Jessica","Shirley","Cynthia","Angela","Melissa","Brenda","Amy","Anna"]);return this.pick(n)},last:function(){var n=["Smith","Johnson","Williams","Brown","Jones","Miller","Davis","Garcia","Rodriguez","Wilson","Martinez","Anderson","Taylor","Thomas","Hernandez","Moore","Martin","Jackson","Thompson","White","Lopez","Lee","Gonzalez","Harris","Clark","Lewis","Robinson","Walker","Perez","Hall","Young","Allen"];return this.pick(n)},name:function(n){return this.first()+" "+(n?this.first()+" ":"")+this.last()},cfirst:function(){var n="王 李 张 刘 陈 杨 赵 黄 周 吴 徐 孙 胡 朱 高 林 何 郭 马 罗 梁 宋 郑 谢 韩 唐 冯 于 董 萧 程 曹 袁 邓 许 傅 沈 曾 彭 吕 苏 卢 蒋 蔡 贾 丁 魏 薛 叶 阎 余 潘 杜 戴 夏 锺 汪 田 任 姜 范 方 石 姚 谭 廖 邹 熊 金 陆 郝 孔 白 崔 康 毛 邱 秦 江 史 顾 侯 邵 孟 龙 万 段 雷 钱 汤 尹 黎 易 常 武 乔 贺 赖 龚 文".split(" ");return this.pick(n)},clast:function(){var n="伟 芳 娜 秀英 敏 静 丽 强 磊 军 洋 勇 艳 杰 娟 涛 明 超 秀兰 霞 平 刚 桂英".split(" ");return this.pick(n)},cname:function(){return this.cfirst()+this.clast()}}},function(r,e){r.exports={url:function(n,s){return(n||this.protocol())+"://"+(s||this.domain())+"/"+this.word()},protocol:function(){return this.pick("http ftp gopher mailto mid cid news nntp prospero telnet rlogin tn3270 wais".split(" "))},domain:function(n){return this.word()+"."+(n||this.tld())},tld:function(){return this.pick("com net org edu gov int mil cn com.cn net.cn gov.cn org.cn 中国 中国互联.公司 中国互联.网络 tel biz cc tv info name hk mobi asia cd travel pro museum coop aero ad ae af ag ai al am an ao aq ar as at au aw az ba bb bd be bf bg bh bi bj bm bn bo br bs bt bv bw by bz ca cc cf cg ch ci ck cl cm cn co cq cr cu cv cx cy cz de dj dk dm do dz ec ee eg eh es et ev fi fj fk fm fo fr ga gb gd ge gf gh gi gl gm gn gp gr gt gu gw gy hk hm hn hr ht hu id ie il in io iq ir is it jm jo jp ke kg kh ki km kn kp kr kw ky kz la lb lc li lk lr ls lt lu lv ly ma mc md mg mh ml mm mn mo mp mq mr ms mt mv mw mx my mz na nc ne nf ng ni nl no np nr nt nu nz om qa pa pe pf pg ph pk pl pm pn pr pt pw py re ro ru rw sa sb sc sd se sg sh si sj sk sl sm sn so sr st su sy sz tc td tf tg th tj tk tm tn to tp tr tt tv tw tz ua ug uk us uy va vc ve vg vn vu wf ws ye yu za zm zr zw".split(" "))},email:function(n){return this.character("lower")+"."+this.word()+"@"+(n||this.word()+"."+this.tld())},ip:function(){return this.natural(0,255)+"."+this.natural(0,255)+"."+this.natural(0,255)+"."+this.natural(0,255)}}},function(r,e,n){var s=n(18),a=["东北","华北","华东","华中","华南","西南","西北"];r.exports={region:function(){return this.pick(a)},province:function(){return this.pick(s).name},city:function(o){var l=this.pick(s),u=this.pick(l.children);return o?[l.name,u.name].join(" "):u.name},county:function(o){var l=this.pick(s),u=this.pick(l.children),c=this.pick(u.children)||{name:"-"};return o?[l.name,u.name,c.name].join(" "):c.name},zip:function(o){for(var l="",u=0;u<(o||6);u++)l+=this.natural(0,9);return l}}},function(r,e){var n={11e4:"北京",110100:"北京市",110101:"东城区",110102:"西城区",110105:"朝阳区",110106:"丰台区",110107:"石景山区",110108:"海淀区",110109:"门头沟区",110111:"房山区",110112:"通州区",110113:"顺义区",110114:"昌平区",110115:"大兴区",110116:"怀柔区",110117:"平谷区",110228:"密云县",110229:"延庆县",110230:"其它区",12e4:"天津",120100:"天津市",120101:"和平区",120102:"河东区",120103:"河西区",120104:"南开区",120105:"河北区",120106:"红桥区",120110:"东丽区",120111:"西青区",120112:"津南区",120113:"北辰区",120114:"武清区",120115:"宝坻区",120116:"滨海新区",120221:"宁河县",120223:"静海县",120225:"蓟县",120226:"其它区",13e4:"河北省",130100:"石家庄市",130102:"长安区",130103:"桥东区",130104:"桥西区",130105:"新华区",130107:"井陉矿区",130108:"裕华区",130121:"井陉县",130123:"正定县",130124:"栾城县",130125:"行唐县",130126:"灵寿县",130127:"高邑县",130128:"深泽县",130129:"赞皇县",130130:"无极县",130131:"平山县",130132:"元氏县",130133:"赵县",130181:"辛集市",130182:"藁城市",130183:"晋州市",130184:"新乐市",130185:"鹿泉市",130186:"其它区",130200:"唐山市",130202:"路南区",130203:"路北区",130204:"古冶区",130205:"开平区",130207:"丰南区",130208:"丰润区",130223:"滦县",130224:"滦南县",130225:"乐亭县",130227:"迁西县",130229:"玉田县",130230:"曹妃甸区",130281:"遵化市",130283:"迁安市",130284:"其它区",130300:"秦皇岛市",130302:"海港区",130303:"山海关区",130304:"北戴河区",130321:"青龙满族自治县",130322:"昌黎县",130323:"抚宁县",130324:"卢龙县",130398:"其它区",130400:"邯郸市",130402:"邯山区",130403:"丛台区",130404:"复兴区",130406:"峰峰矿区",130421:"邯郸县",130423:"临漳县",130424:"成安县",130425:"大名县",130426:"涉县",130427:"磁县",130428:"肥乡县",130429:"永年县",130430:"邱县",130431:"鸡泽县",130432:"广平县",130433:"馆陶县",130434:"魏县",130435:"曲周县",130481:"武安市",130482:"其它区",130500:"邢台市",130502:"桥东区",130503:"桥西区",130521:"邢台县",130522:"临城县",130523:"内丘县",130524:"柏乡县",130525:"隆尧县",130526:"任县",130527:"南和县",130528:"宁晋县",130529:"巨鹿县",130530:"新河县",130531:"广宗县",130532:"平乡县",130533:"威县",130534:"清河县",130535:"临西县",130581:"南宫市",130582:"沙河市",130583:"其它区",130600:"保定市",130602:"新市区",130603:"北市区",130604:"南市区",130621:"满城县",130622:"清苑县",130623:"涞水县",130624:"阜平县",130625:"徐水县",130626:"定兴县",130627:"唐县",130628:"高阳县",130629:"容城县",130630:"涞源县",130631:"望都县",130632:"安新县",130633:"易县",130634:"曲阳县",130635:"蠡县",130636:"顺平县",130637:"博野县",130638:"雄县",130681:"涿州市",130682:"定州市",130683:"安国市",130684:"高碑店市",130699:"其它区",130700:"张家口市",130702:"桥东区",130703:"桥西区",130705:"宣化区",130706:"下花园区",130721:"宣化县",130722:"张北县",130723:"康保县",130724:"沽源县",130725:"尚义县",130726:"蔚县",130727:"阳原县",130728:"怀安县",130729:"万全县",130730:"怀来县",130731:"涿鹿县",130732:"赤城县",130733:"崇礼县",130734:"其它区",130800:"承德市",130802:"双桥区",130803:"双滦区",130804:"鹰手营子矿区",130821:"承德县",130822:"兴隆县",130823:"平泉县",130824:"滦平县",130825:"隆化县",130826:"丰宁满族自治县",130827:"宽城满族自治县",130828:"围场满族蒙古族自治县",130829:"其它区",130900:"沧州市",130902:"新华区",130903:"运河区",130921:"沧县",130922:"青县",130923:"东光县",130924:"海兴县",130925:"盐山县",130926:"肃宁县",130927:"南皮县",130928:"吴桥县",130929:"献县",130930:"孟村回族自治县",130981:"泊头市",130982:"任丘市",130983:"黄骅市",130984:"河间市",130985:"其它区",131e3:"廊坊市",131002:"安次区",131003:"广阳区",131022:"固安县",131023:"永清县",131024:"香河县",131025:"大城县",131026:"文安县",131028:"大厂回族自治县",131081:"霸州市",131082:"三河市",131083:"其它区",131100:"衡水市",131102:"桃城区",131121:"枣强县",131122:"武邑县",131123:"武强县",131124:"饶阳县",131125:"安平县",131126:"故城县",131127:"景县",131128:"阜城县",131181:"冀州市",131182:"深州市",131183:"其它区",14e4:"山西省",140100:"太原市",140105:"小店区",140106:"迎泽区",140107:"杏花岭区",140108:"尖草坪区",140109:"万柏林区",140110:"晋源区",140121:"清徐县",140122:"阳曲县",140123:"娄烦县",140181:"古交市",140182:"其它区",140200:"大同市",140202:"城区",140203:"矿区",140211:"南郊区",140212:"新荣区",140221:"阳高县",140222:"天镇县",140223:"广灵县",140224:"灵丘县",140225:"浑源县",140226:"左云县",140227:"大同县",140228:"其它区",140300:"阳泉市",140302:"城区",140303:"矿区",140311:"郊区",140321:"平定县",140322:"盂县",140323:"其它区",140400:"长治市",140421:"长治县",140423:"襄垣县",140424:"屯留县",140425:"平顺县",140426:"黎城县",140427:"壶关县",140428:"长子县",140429:"武乡县",140430:"沁县",140431:"沁源县",140481:"潞城市",140482:"城区",140483:"郊区",140485:"其它区",140500:"晋城市",140502:"城区",140521:"沁水县",140522:"阳城县",140524:"陵川县",140525:"泽州县",140581:"高平市",140582:"其它区",140600:"朔州市",140602:"朔城区",140603:"平鲁区",140621:"山阴县",140622:"应县",140623:"右玉县",140624:"怀仁县",140625:"其它区",140700:"晋中市",140702:"榆次区",140721:"榆社县",140722:"左权县",140723:"和顺县",140724:"昔阳县",140725:"寿阳县",140726:"太谷县",140727:"祁县",140728:"平遥县",140729:"灵石县",140781:"介休市",140782:"其它区",140800:"运城市",140802:"盐湖区",140821:"临猗县",140822:"万荣县",140823:"闻喜县",140824:"稷山县",140825:"新绛县",140826:"绛县",140827:"垣曲县",140828:"夏县",140829:"平陆县",140830:"芮城县",140881:"永济市",140882:"河津市",140883:"其它区",140900:"忻州市",140902:"忻府区",140921:"定襄县",140922:"五台县",140923:"代县",140924:"繁峙县",140925:"宁武县",140926:"静乐县",140927:"神池县",140928:"五寨县",140929:"岢岚县",140930:"河曲县",140931:"保德县",140932:"偏关县",140981:"原平市",140982:"其它区",141e3:"临汾市",141002:"尧都区",141021:"曲沃县",141022:"翼城县",141023:"襄汾县",141024:"洪洞县",141025:"古县",141026:"安泽县",141027:"浮山县",141028:"吉县",141029:"乡宁县",141030:"大宁县",141031:"隰县",141032:"永和县",141033:"蒲县",141034:"汾西县",141081:"侯马市",141082:"霍州市",141083:"其它区",141100:"吕梁市",141102:"离石区",141121:"文水县",141122:"交城县",141123:"兴县",141124:"临县",141125:"柳林县",141126:"石楼县",141127:"岚县",141128:"方山县",141129:"中阳县",141130:"交口县",141181:"孝义市",141182:"汾阳市",141183:"其它区",15e4:"内蒙古自治区",150100:"呼和浩特市",150102:"新城区",150103:"回民区",150104:"玉泉区",150105:"赛罕区",150121:"土默特左旗",150122:"托克托县",150123:"和林格尔县",150124:"清水河县",150125:"武川县",150126:"其它区",150200:"包头市",150202:"东河区",150203:"昆都仑区",150204:"青山区",150205:"石拐区",150206:"白云鄂博矿区",150207:"九原区",150221:"土默特右旗",150222:"固阳县",150223:"达尔罕茂明安联合旗",150224:"其它区",150300:"乌海市",150302:"海勃湾区",150303:"海南区",150304:"乌达区",150305:"其它区",150400:"赤峰市",150402:"红山区",150403:"元宝山区",150404:"松山区",150421:"阿鲁科尔沁旗",150422:"巴林左旗",150423:"巴林右旗",150424:"林西县",150425:"克什克腾旗",150426:"翁牛特旗",150428:"喀喇沁旗",150429:"宁城县",150430:"敖汉旗",150431:"其它区",150500:"通辽市",150502:"科尔沁区",150521:"科尔沁左翼中旗",150522:"科尔沁左翼后旗",150523:"开鲁县",150524:"库伦旗",150525:"奈曼旗",150526:"扎鲁特旗",150581:"霍林郭勒市",150582:"其它区",150600:"鄂尔多斯市",150602:"东胜区",150621:"达拉特旗",150622:"准格尔旗",150623:"鄂托克前旗",150624:"鄂托克旗",150625:"杭锦旗",150626:"乌审旗",150627:"伊金霍洛旗",150628:"其它区",150700:"呼伦贝尔市",150702:"海拉尔区",150703:"扎赉诺尔区",150721:"阿荣旗",150722:"莫力达瓦达斡尔族自治旗",150723:"鄂伦春自治旗",150724:"鄂温克族自治旗",150725:"陈巴尔虎旗",150726:"新巴尔虎左旗",150727:"新巴尔虎右旗",150781:"满洲里市",150782:"牙克石市",150783:"扎兰屯市",150784:"额尔古纳市",150785:"根河市",150786:"其它区",150800:"巴彦淖尔市",150802:"临河区",150821:"五原县",150822:"磴口县",150823:"乌拉特前旗",150824:"乌拉特中旗",150825:"乌拉特后旗",150826:"杭锦后旗",150827:"其它区",150900:"乌兰察布市",150902:"集宁区",150921:"卓资县",150922:"化德县",150923:"商都县",150924:"兴和县",150925:"凉城县",150926:"察哈尔右翼前旗",150927:"察哈尔右翼中旗",150928:"察哈尔右翼后旗",150929:"四子王旗",150981:"丰镇市",150982:"其它区",152200:"兴安盟",152201:"乌兰浩特市",152202:"阿尔山市",152221:"科尔沁右翼前旗",152222:"科尔沁右翼中旗",152223:"扎赉特旗",152224:"突泉县",152225:"其它区",152500:"锡林郭勒盟",152501:"二连浩特市",152502:"锡林浩特市",152522:"阿巴嘎旗",152523:"苏尼特左旗",152524:"苏尼特右旗",152525:"东乌珠穆沁旗",152526:"西乌珠穆沁旗",152527:"太仆寺旗",152528:"镶黄旗",152529:"正镶白旗",152530:"正蓝旗",152531:"多伦县",152532:"其它区",152900:"阿拉善盟",152921:"阿拉善左旗",152922:"阿拉善右旗",152923:"额济纳旗",152924:"其它区",21e4:"辽宁省",210100:"沈阳市",210102:"和平区",210103:"沈河区",210104:"大东区",210105:"皇姑区",210106:"铁西区",210111:"苏家屯区",210112:"东陵区",210113:"新城子区",210114:"于洪区",210122:"辽中县",210123:"康平县",210124:"法库县",210181:"新民市",210184:"沈北新区",210185:"其它区",210200:"大连市",210202:"中山区",210203:"西岗区",210204:"沙河口区",210211:"甘井子区",210212:"旅顺口区",210213:"金州区",210224:"长海县",210281:"瓦房店市",210282:"普兰店市",210283:"庄河市",210298:"其它区",210300:"鞍山市",210302:"铁东区",210303:"铁西区",210304:"立山区",210311:"千山区",210321:"台安县",210323:"岫岩满族自治县",210381:"海城市",210382:"其它区",210400:"抚顺市",210402:"新抚区",210403:"东洲区",210404:"望花区",210411:"顺城区",210421:"抚顺县",210422:"新宾满族自治县",210423:"清原满族自治县",210424:"其它区",210500:"本溪市",210502:"平山区",210503:"溪湖区",210504:"明山区",210505:"南芬区",210521:"本溪满族自治县",210522:"桓仁满族自治县",210523:"其它区",210600:"丹东市",210602:"元宝区",210603:"振兴区",210604:"振安区",210624:"宽甸满族自治县",210681:"东港市",210682:"凤城市",210683:"其它区",210700:"锦州市",210702:"古塔区",210703:"凌河区",210711:"太和区",210726:"黑山县",210727:"义县",210781:"凌海市",210782:"北镇市",210783:"其它区",210800:"营口市",210802:"站前区",210803:"西市区",210804:"鲅鱼圈区",210811:"老边区",210881:"盖州市",210882:"大石桥市",210883:"其它区",210900:"阜新市",210902:"海州区",210903:"新邱区",210904:"太平区",210905:"清河门区",210911:"细河区",210921:"阜新蒙古族自治县",210922:"彰武县",210923:"其它区",211e3:"辽阳市",211002:"白塔区",211003:"文圣区",211004:"宏伟区",211005:"弓长岭区",211011:"太子河区",211021:"辽阳县",211081:"灯塔市",211082:"其它区",211100:"盘锦市",211102:"双台子区",211103:"兴隆台区",211121:"大洼县",211122:"盘山县",211123:"其它区",211200:"铁岭市",211202:"银州区",211204:"清河区",211221:"铁岭县",211223:"西丰县",211224:"昌图县",211281:"调兵山市",211282:"开原市",211283:"其它区",211300:"朝阳市",211302:"双塔区",211303:"龙城区",211321:"朝阳县",211322:"建平县",211324:"喀喇沁左翼蒙古族自治县",211381:"北票市",211382:"凌源市",211383:"其它区",211400:"葫芦岛市",211402:"连山区",211403:"龙港区",211404:"南票区",211421:"绥中县",211422:"建昌县",211481:"兴城市",211482:"其它区",22e4:"吉林省",220100:"长春市",220102:"南关区",220103:"宽城区",220104:"朝阳区",220105:"二道区",220106:"绿园区",220112:"双阳区",220122:"农安县",220181:"九台市",220182:"榆树市",220183:"德惠市",220188:"其它区",220200:"吉林市",220202:"昌邑区",220203:"龙潭区",220204:"船营区",220211:"丰满区",220221:"永吉县",220281:"蛟河市",220282:"桦甸市",220283:"舒兰市",220284:"磐石市",220285:"其它区",220300:"四平市",220302:"铁西区",220303:"铁东区",220322:"梨树县",220323:"伊通满族自治县",220381:"公主岭市",220382:"双辽市",220383:"其它区",220400:"辽源市",220402:"龙山区",220403:"西安区",220421:"东丰县",220422:"东辽县",220423:"其它区",220500:"通化市",220502:"东昌区",220503:"二道江区",220521:"通化县",220523:"辉南县",220524:"柳河县",220581:"梅河口市",220582:"集安市",220583:"其它区",220600:"白山市",220602:"浑江区",220621:"抚松县",220622:"靖宇县",220623:"长白朝鲜族自治县",220625:"江源区",220681:"临江市",220682:"其它区",220700:"松原市",220702:"宁江区",220721:"前郭尔罗斯蒙古族自治县",220722:"长岭县",220723:"乾安县",220724:"扶余市",220725:"其它区",220800:"白城市",220802:"洮北区",220821:"镇赉县",220822:"通榆县",220881:"洮南市",220882:"大安市",220883:"其它区",222400:"延边朝鲜族自治州",222401:"延吉市",222402:"图们市",222403:"敦化市",222404:"珲春市",222405:"龙井市",222406:"和龙市",222424:"汪清县",222426:"安图县",222427:"其它区",23e4:"黑龙江省",230100:"哈尔滨市",230102:"道里区",230103:"南岗区",230104:"道外区",230106:"香坊区",230108:"平房区",230109:"松北区",230111:"呼兰区",230123:"依兰县",230124:"方正县",230125:"宾县",230126:"巴彦县",230127:"木兰县",230128:"通河县",230129:"延寿县",230181:"阿城区",230182:"双城市",230183:"尚志市",230184:"五常市",230186:"其它区",230200:"齐齐哈尔市",230202:"龙沙区",230203:"建华区",230204:"铁锋区",230205:"昂昂溪区",230206:"富拉尔基区",230207:"碾子山区",230208:"梅里斯达斡尔族区",230221:"龙江县",230223:"依安县",230224:"泰来县",230225:"甘南县",230227:"富裕县",230229:"克山县",230230:"克东县",230231:"拜泉县",230281:"讷河市",230282:"其它区",230300:"鸡西市",230302:"鸡冠区",230303:"恒山区",230304:"滴道区",230305:"梨树区",230306:"城子河区",230307:"麻山区",230321:"鸡东县",230381:"虎林市",230382:"密山市",230383:"其它区",230400:"鹤岗市",230402:"向阳区",230403:"工农区",230404:"南山区",230405:"兴安区",230406:"东山区",230407:"兴山区",230421:"萝北县",230422:"绥滨县",230423:"其它区",230500:"双鸭山市",230502:"尖山区",230503:"岭东区",230505:"四方台区",230506:"宝山区",230521:"集贤县",230522:"友谊县",230523:"宝清县",230524:"饶河县",230525:"其它区",230600:"大庆市",230602:"萨尔图区",230603:"龙凤区",230604:"让胡路区",230605:"红岗区",230606:"大同区",230621:"肇州县",230622:"肇源县",230623:"林甸县",230624:"杜尔伯特蒙古族自治县",230625:"其它区",230700:"伊春市",230702:"伊春区",230703:"南岔区",230704:"友好区",230705:"西林区",230706:"翠峦区",230707:"新青区",230708:"美溪区",230709:"金山屯区",230710:"五营区",230711:"乌马河区",230712:"汤旺河区",230713:"带岭区",230714:"乌伊岭区",230715:"红星区",230716:"上甘岭区",230722:"嘉荫县",230781:"铁力市",230782:"其它区",230800:"佳木斯市",230803:"向阳区",230804:"前进区",230805:"东风区",230811:"郊区",230822:"桦南县",230826:"桦川县",230828:"汤原县",230833:"抚远县",230881:"同江市",230882:"富锦市",230883:"其它区",230900:"七台河市",230902:"新兴区",230903:"桃山区",230904:"茄子河区",230921:"勃利县",230922:"其它区",231e3:"牡丹江市",231002:"东安区",231003:"阳明区",231004:"爱民区",231005:"西安区",231024:"东宁县",231025:"林口县",231081:"绥芬河市",231083:"海林市",231084:"宁安市",231085:"穆棱市",231086:"其它区",231100:"黑河市",231102:"爱辉区",231121:"嫩江县",231123:"逊克县",231124:"孙吴县",231181:"北安市",231182:"五大连池市",231183:"其它区",231200:"绥化市",231202:"北林区",231221:"望奎县",231222:"兰西县",231223:"青冈县",231224:"庆安县",231225:"明水县",231226:"绥棱县",231281:"安达市",231282:"肇东市",231283:"海伦市",231284:"其它区",232700:"大兴安岭地区",232702:"松岭区",232703:"新林区",232704:"呼中区",232721:"呼玛县",232722:"塔河县",232723:"漠河县",232724:"加格达奇区",232725:"其它区",31e4:"上海",310100:"上海市",310101:"黄浦区",310104:"徐汇区",310105:"长宁区",310106:"静安区",310107:"普陀区",310108:"闸北区",310109:"虹口区",310110:"杨浦区",310112:"闵行区",310113:"宝山区",310114:"嘉定区",310115:"浦东新区",310116:"金山区",310117:"松江区",310118:"青浦区",310120:"奉贤区",310230:"崇明县",310231:"其它区",32e4:"江苏省",320100:"南京市",320102:"玄武区",320104:"秦淮区",320105:"建邺区",320106:"鼓楼区",320111:"浦口区",320113:"栖霞区",320114:"雨花台区",320115:"江宁区",320116:"六合区",320124:"溧水区",320125:"高淳区",320126:"其它区",320200:"无锡市",320202:"崇安区",320203:"南长区",320204:"北塘区",320205:"锡山区",320206:"惠山区",320211:"滨湖区",320281:"江阴市",320282:"宜兴市",320297:"其它区",320300:"徐州市",320302:"鼓楼区",320303:"云龙区",320305:"贾汪区",320311:"泉山区",320321:"丰县",320322:"沛县",320323:"铜山区",320324:"睢宁县",320381:"新沂市",320382:"邳州市",320383:"其它区",320400:"常州市",320402:"天宁区",320404:"钟楼区",320405:"戚墅堰区",320411:"新北区",320412:"武进区",320481:"溧阳市",320482:"金坛市",320483:"其它区",320500:"苏州市",320505:"虎丘区",320506:"吴中区",320507:"相城区",320508:"姑苏区",320581:"常熟市",320582:"张家港市",320583:"昆山市",320584:"吴江区",320585:"太仓市",320596:"其它区",320600:"南通市",320602:"崇川区",320611:"港闸区",320612:"通州区",320621:"海安县",320623:"如东县",320681:"启东市",320682:"如皋市",320684:"海门市",320694:"其它区",320700:"连云港市",320703:"连云区",320705:"新浦区",320706:"海州区",320721:"赣榆县",320722:"东海县",320723:"灌云县",320724:"灌南县",320725:"其它区",320800:"淮安市",320802:"清河区",320803:"淮安区",320804:"淮阴区",320811:"清浦区",320826:"涟水县",320829:"洪泽县",320830:"盱眙县",320831:"金湖县",320832:"其它区",320900:"盐城市",320902:"亭湖区",320903:"盐都区",320921:"响水县",320922:"滨海县",320923:"阜宁县",320924:"射阳县",320925:"建湖县",320981:"东台市",320982:"大丰市",320983:"其它区",321e3:"扬州市",321002:"广陵区",321003:"邗江区",321023:"宝应县",321081:"仪征市",321084:"高邮市",321088:"江都区",321093:"其它区",321100:"镇江市",321102:"京口区",321111:"润州区",321112:"丹徒区",321181:"丹阳市",321182:"扬中市",321183:"句容市",321184:"其它区",321200:"泰州市",321202:"海陵区",321203:"高港区",321281:"兴化市",321282:"靖江市",321283:"泰兴市",321284:"姜堰区",321285:"其它区",321300:"宿迁市",321302:"宿城区",321311:"宿豫区",321322:"沭阳县",321323:"泗阳县",321324:"泗洪县",321325:"其它区",33e4:"浙江省",330100:"杭州市",330102:"上城区",330103:"下城区",330104:"江干区",330105:"拱墅区",330106:"西湖区",330108:"滨江区",330109:"萧山区",330110:"余杭区",330122:"桐庐县",330127:"淳安县",330182:"建德市",330183:"富阳市",330185:"临安市",330186:"其它区",330200:"宁波市",330203:"海曙区",330204:"江东区",330205:"江北区",330206:"北仑区",330211:"镇海区",330212:"鄞州区",330225:"象山县",330226:"宁海县",330281:"余姚市",330282:"慈溪市",330283:"奉化市",330284:"其它区",330300:"温州市",330302:"鹿城区",330303:"龙湾区",330304:"瓯海区",330322:"洞头县",330324:"永嘉县",330326:"平阳县",330327:"苍南县",330328:"文成县",330329:"泰顺县",330381:"瑞安市",330382:"乐清市",330383:"其它区",330400:"嘉兴市",330402:"南湖区",330411:"秀洲区",330421:"嘉善县",330424:"海盐县",330481:"海宁市",330482:"平湖市",330483:"桐乡市",330484:"其它区",330500:"湖州市",330502:"吴兴区",330503:"南浔区",330521:"德清县",330522:"长兴县",330523:"安吉县",330524:"其它区",330600:"绍兴市",330602:"越城区",330621:"绍兴县",330624:"新昌县",330681:"诸暨市",330682:"上虞市",330683:"嵊州市",330684:"其它区",330700:"金华市",330702:"婺城区",330703:"金东区",330723:"武义县",330726:"浦江县",330727:"磐安县",330781:"兰溪市",330782:"义乌市",330783:"东阳市",330784:"永康市",330785:"其它区",330800:"衢州市",330802:"柯城区",330803:"衢江区",330822:"常山县",330824:"开化县",330825:"龙游县",330881:"江山市",330882:"其它区",330900:"舟山市",330902:"定海区",330903:"普陀区",330921:"岱山县",330922:"嵊泗县",330923:"其它区",331e3:"台州市",331002:"椒江区",331003:"黄岩区",331004:"路桥区",331021:"玉环县",331022:"三门县",331023:"天台县",331024:"仙居县",331081:"温岭市",331082:"临海市",331083:"其它区",331100:"丽水市",331102:"莲都区",331121:"青田县",331122:"缙云县",331123:"遂昌县",331124:"松阳县",331125:"云和县",331126:"庆元县",331127:"景宁畲族自治县",331181:"龙泉市",331182:"其它区",34e4:"安徽省",340100:"合肥市",340102:"瑶海区",340103:"庐阳区",340104:"蜀山区",340111:"包河区",340121:"长丰县",340122:"肥东县",340123:"肥西县",340192:"其它区",340200:"芜湖市",340202:"镜湖区",340203:"弋江区",340207:"鸠江区",340208:"三山区",340221:"芜湖县",340222:"繁昌县",340223:"南陵县",340224:"其它区",340300:"蚌埠市",340302:"龙子湖区",340303:"蚌山区",340304:"禹会区",340311:"淮上区",340321:"怀远县",340322:"五河县",340323:"固镇县",340324:"其它区",340400:"淮南市",340402:"大通区",340403:"田家庵区",340404:"谢家集区",340405:"八公山区",340406:"潘集区",340421:"凤台县",340422:"其它区",340500:"马鞍山市",340503:"花山区",340504:"雨山区",340506:"博望区",340521:"当涂县",340522:"其它区",340600:"淮北市",340602:"杜集区",340603:"相山区",340604:"烈山区",340621:"濉溪县",340622:"其它区",340700:"铜陵市",340702:"铜官山区",340703:"狮子山区",340711:"郊区",340721:"铜陵县",340722:"其它区",340800:"安庆市",340802:"迎江区",340803:"大观区",340811:"宜秀区",340822:"怀宁县",340823:"枞阳县",340824:"潜山县",340825:"太湖县",340826:"宿松县",340827:"望江县",340828:"岳西县",340881:"桐城市",340882:"其它区",341e3:"黄山市",341002:"屯溪区",341003:"黄山区",341004:"徽州区",341021:"歙县",341022:"休宁县",341023:"黟县",341024:"祁门县",341025:"其它区",341100:"滁州市",341102:"琅琊区",341103:"南谯区",341122:"来安县",341124:"全椒县",341125:"定远县",341126:"凤阳县",341181:"天长市",341182:"明光市",341183:"其它区",341200:"阜阳市",341202:"颍州区",341203:"颍东区",341204:"颍泉区",341221:"临泉县",341222:"太和县",341225:"阜南县",341226:"颍上县",341282:"界首市",341283:"其它区",341300:"宿州市",341302:"埇桥区",341321:"砀山县",341322:"萧县",341323:"灵璧县",341324:"泗县",341325:"其它区",341400:"巢湖市",341421:"庐江县",341422:"无为县",341423:"含山县",341424:"和县",341500:"六安市",341502:"金安区",341503:"裕安区",341521:"寿县",341522:"霍邱县",341523:"舒城县",341524:"金寨县",341525:"霍山县",341526:"其它区",341600:"亳州市",341602:"谯城区",341621:"涡阳县",341622:"蒙城县",341623:"利辛县",341624:"其它区",341700:"池州市",341702:"贵池区",341721:"东至县",341722:"石台县",341723:"青阳县",341724:"其它区",341800:"宣城市",341802:"宣州区",341821:"郎溪县",341822:"广德县",341823:"泾县",341824:"绩溪县",341825:"旌德县",341881:"宁国市",341882:"其它区",35e4:"福建省",350100:"福州市",350102:"鼓楼区",350103:"台江区",350104:"仓山区",350105:"马尾区",350111:"晋安区",350121:"闽侯县",350122:"连江县",350123:"罗源县",350124:"闽清县",350125:"永泰县",350128:"平潭县",350181:"福清市",350182:"长乐市",350183:"其它区",350200:"厦门市",350203:"思明区",350205:"海沧区",350206:"湖里区",350211:"集美区",350212:"同安区",350213:"翔安区",350214:"其它区",350300:"莆田市",350302:"城厢区",350303:"涵江区",350304:"荔城区",350305:"秀屿区",350322:"仙游县",350323:"其它区",350400:"三明市",350402:"梅列区",350403:"三元区",350421:"明溪县",350423:"清流县",350424:"宁化县",350425:"大田县",350426:"尤溪县",350427:"沙县",350428:"将乐县",350429:"泰宁县",350430:"建宁县",350481:"永安市",350482:"其它区",350500:"泉州市",350502:"鲤城区",350503:"丰泽区",350504:"洛江区",350505:"泉港区",350521:"惠安县",350524:"安溪县",350525:"永春县",350526:"德化县",350527:"金门县",350581:"石狮市",350582:"晋江市",350583:"南安市",350584:"其它区",350600:"漳州市",350602:"芗城区",350603:"龙文区",350622:"云霄县",350623:"漳浦县",350624:"诏安县",350625:"长泰县",350626:"东山县",350627:"南靖县",350628:"平和县",350629:"华安县",350681:"龙海市",350682:"其它区",350700:"南平市",350702:"延平区",350721:"顺昌县",350722:"浦城县",350723:"光泽县",350724:"松溪县",350725:"政和县",350781:"邵武市",350782:"武夷山市",350783:"建瓯市",350784:"建阳市",350785:"其它区",350800:"龙岩市",350802:"新罗区",350821:"长汀县",350822:"永定县",350823:"上杭县",350824:"武平县",350825:"连城县",350881:"漳平市",350882:"其它区",350900:"宁德市",350902:"蕉城区",350921:"霞浦县",350922:"古田县",350923:"屏南县",350924:"寿宁县",350925:"周宁县",350926:"柘荣县",350981:"福安市",350982:"福鼎市",350983:"其它区",36e4:"江西省",360100:"南昌市",360102:"东湖区",360103:"西湖区",360104:"青云谱区",360105:"湾里区",360111:"青山湖区",360121:"南昌县",360122:"新建县",360123:"安义县",360124:"进贤县",360128:"其它区",360200:"景德镇市",360202:"昌江区",360203:"珠山区",360222:"浮梁县",360281:"乐平市",360282:"其它区",360300:"萍乡市",360302:"安源区",360313:"湘东区",360321:"莲花县",360322:"上栗县",360323:"芦溪县",360324:"其它区",360400:"九江市",360402:"庐山区",360403:"浔阳区",360421:"九江县",360423:"武宁县",360424:"修水县",360425:"永修县",360426:"德安县",360427:"星子县",360428:"都昌县",360429:"湖口县",360430:"彭泽县",360481:"瑞昌市",360482:"其它区",360483:"共青城市",360500:"新余市",360502:"渝水区",360521:"分宜县",360522:"其它区",360600:"鹰潭市",360602:"月湖区",360622:"余江县",360681:"贵溪市",360682:"其它区",360700:"赣州市",360702:"章贡区",360721:"赣县",360722:"信丰县",360723:"大余县",360724:"上犹县",360725:"崇义县",360726:"安远县",360727:"龙南县",360728:"定南县",360729:"全南县",360730:"宁都县",360731:"于都县",360732:"兴国县",360733:"会昌县",360734:"寻乌县",360735:"石城县",360781:"瑞金市",360782:"南康市",360783:"其它区",360800:"吉安市",360802:"吉州区",360803:"青原区",360821:"吉安县",360822:"吉水县",360823:"峡江县",360824:"新干县",360825:"永丰县",360826:"泰和县",360827:"遂川县",360828:"万安县",360829:"安福县",360830:"永新县",360881:"井冈山市",360882:"其它区",360900:"宜春市",360902:"袁州区",360921:"奉新县",360922:"万载县",360923:"上高县",360924:"宜丰县",360925:"靖安县",360926:"铜鼓县",360981:"丰城市",360982:"樟树市",360983:"高安市",360984:"其它区",361e3:"抚州市",361002:"临川区",361021:"南城县",361022:"黎川县",361023:"南丰县",361024:"崇仁县",361025:"乐安县",361026:"宜黄县",361027:"金溪县",361028:"资溪县",361029:"东乡县",361030:"广昌县",361031:"其它区",361100:"上饶市",361102:"信州区",361121:"上饶县",361122:"广丰县",361123:"玉山县",361124:"铅山县",361125:"横峰县",361126:"弋阳县",361127:"余干县",361128:"鄱阳县",361129:"万年县",361130:"婺源县",361181:"德兴市",361182:"其它区",37e4:"山东省",370100:"济南市",370102:"历下区",370103:"市中区",370104:"槐荫区",370105:"天桥区",370112:"历城区",370113:"长清区",370124:"平阴县",370125:"济阳县",370126:"商河县",370181:"章丘市",370182:"其它区",370200:"青岛市",370202:"市南区",370203:"市北区",370211:"黄岛区",370212:"崂山区",370213:"李沧区",370214:"城阳区",370281:"胶州市",370282:"即墨市",370283:"平度市",370285:"莱西市",370286:"其它区",370300:"淄博市",370302:"淄川区",370303:"张店区",370304:"博山区",370305:"临淄区",370306:"周村区",370321:"桓台县",370322:"高青县",370323:"沂源县",370324:"其它区",370400:"枣庄市",370402:"市中区",370403:"薛城区",370404:"峄城区",370405:"台儿庄区",370406:"山亭区",370481:"滕州市",370482:"其它区",370500:"东营市",370502:"东营区",370503:"河口区",370521:"垦利县",370522:"利津县",370523:"广饶县",370591:"其它区",370600:"烟台市",370602:"芝罘区",370611:"福山区",370612:"牟平区",370613:"莱山区",370634:"长岛县",370681:"龙口市",370682:"莱阳市",370683:"莱州市",370684:"蓬莱市",370685:"招远市",370686:"栖霞市",370687:"海阳市",370688:"其它区",370700:"潍坊市",370702:"潍城区",370703:"寒亭区",370704:"坊子区",370705:"奎文区",370724:"临朐县",370725:"昌乐县",370781:"青州市",370782:"诸城市",370783:"寿光市",370784:"安丘市",370785:"高密市",370786:"昌邑市",370787:"其它区",370800:"济宁市",370802:"市中区",370811:"任城区",370826:"微山县",370827:"鱼台县",370828:"金乡县",370829:"嘉祥县",370830:"汶上县",370831:"泗水县",370832:"梁山县",370881:"曲阜市",370882:"兖州市",370883:"邹城市",370884:"其它区",370900:"泰安市",370902:"泰山区",370903:"岱岳区",370921:"宁阳县",370923:"东平县",370982:"新泰市",370983:"肥城市",370984:"其它区",371e3:"威海市",371002:"环翠区",371081:"文登市",371082:"荣成市",371083:"乳山市",371084:"其它区",371100:"日照市",371102:"东港区",371103:"岚山区",371121:"五莲县",371122:"莒县",371123:"其它区",371200:"莱芜市",371202:"莱城区",371203:"钢城区",371204:"其它区",371300:"临沂市",371302:"兰山区",371311:"罗庄区",371312:"河东区",371321:"沂南县",371322:"郯城县",371323:"沂水县",371324:"苍山县",371325:"费县",371326:"平邑县",371327:"莒南县",371328:"蒙阴县",371329:"临沭县",371330:"其它区",371400:"德州市",371402:"德城区",371421:"陵县",371422:"宁津县",371423:"庆云县",371424:"临邑县",371425:"齐河县",371426:"平原县",371427:"夏津县",371428:"武城县",371481:"乐陵市",371482:"禹城市",371483:"其它区",371500:"聊城市",371502:"东昌府区",371521:"阳谷县",371522:"莘县",371523:"茌平县",371524:"东阿县",371525:"冠县",371526:"高唐县",371581:"临清市",371582:"其它区",371600:"滨州市",371602:"滨城区",371621:"惠民县",371622:"阳信县",371623:"无棣县",371624:"沾化县",371625:"博兴县",371626:"邹平县",371627:"其它区",371700:"菏泽市",371702:"牡丹区",371721:"曹县",371722:"单县",371723:"成武县",371724:"巨野县",371725:"郓城县",371726:"鄄城县",371727:"定陶县",371728:"东明县",371729:"其它区",41e4:"河南省",410100:"郑州市",410102:"中原区",410103:"二七区",410104:"管城回族区",410105:"金水区",410106:"上街区",410108:"惠济区",410122:"中牟县",410181:"巩义市",410182:"荥阳市",410183:"新密市",410184:"新郑市",410185:"登封市",410188:"其它区",410200:"开封市",410202:"龙亭区",410203:"顺河回族区",410204:"鼓楼区",410205:"禹王台区",410211:"金明区",410221:"杞县",410222:"通许县",410223:"尉氏县",410224:"开封县",410225:"兰考县",410226:"其它区",410300:"洛阳市",410302:"老城区",410303:"西工区",410304:"瀍河回族区",410305:"涧西区",410306:"吉利区",410307:"洛龙区",410322:"孟津县",410323:"新安县",410324:"栾川县",410325:"嵩县",410326:"汝阳县",410327:"宜阳县",410328:"洛宁县",410329:"伊川县",410381:"偃师市",410400:"平顶山市",410402:"新华区",410403:"卫东区",410404:"石龙区",410411:"湛河区",410421:"宝丰县",410422:"叶县",410423:"鲁山县",410425:"郏县",410481:"舞钢市",410482:"汝州市",410483:"其它区",410500:"安阳市",410502:"文峰区",410503:"北关区",410505:"殷都区",410506:"龙安区",410522:"安阳县",410523:"汤阴县",410526:"滑县",410527:"内黄县",410581:"林州市",410582:"其它区",410600:"鹤壁市",410602:"鹤山区",410603:"山城区",410611:"淇滨区",410621:"浚县",410622:"淇县",410623:"其它区",410700:"新乡市",410702:"红旗区",410703:"卫滨区",410704:"凤泉区",410711:"牧野区",410721:"新乡县",410724:"获嘉县",410725:"原阳县",410726:"延津县",410727:"封丘县",410728:"长垣县",410781:"卫辉市",410782:"辉县市",410783:"其它区",410800:"焦作市",410802:"解放区",410803:"中站区",410804:"马村区",410811:"山阳区",410821:"修武县",410822:"博爱县",410823:"武陟县",410825:"温县",410881:"济源市",410882:"沁阳市",410883:"孟州市",410884:"其它区",410900:"濮阳市",410902:"华龙区",410922:"清丰县",410923:"南乐县",410926:"范县",410927:"台前县",410928:"濮阳县",410929:"其它区",411e3:"许昌市",411002:"魏都区",411023:"许昌县",411024:"鄢陵县",411025:"襄城县",411081:"禹州市",411082:"长葛市",411083:"其它区",411100:"漯河市",411102:"源汇区",411103:"郾城区",411104:"召陵区",411121:"舞阳县",411122:"临颍县",411123:"其它区",411200:"三门峡市",411202:"湖滨区",411221:"渑池县",411222:"陕县",411224:"卢氏县",411281:"义马市",411282:"灵宝市",411283:"其它区",411300:"南阳市",411302:"宛城区",411303:"卧龙区",411321:"南召县",411322:"方城县",411323:"西峡县",411324:"镇平县",411325:"内乡县",411326:"淅川县",411327:"社旗县",411328:"唐河县",411329:"新野县",411330:"桐柏县",411381:"邓州市",411382:"其它区",411400:"商丘市",411402:"梁园区",411403:"睢阳区",411421:"民权县",411422:"睢县",411423:"宁陵县",411424:"柘城县",411425:"虞城县",411426:"夏邑县",411481:"永城市",411482:"其它区",411500:"信阳市",411502:"浉河区",411503:"平桥区",411521:"罗山县",411522:"光山县",411523:"新县",411524:"商城县",411525:"固始县",411526:"潢川县",411527:"淮滨县",411528:"息县",411529:"其它区",411600:"周口市",411602:"川汇区",411621:"扶沟县",411622:"西华县",411623:"商水县",411624:"沈丘县",411625:"郸城县",411626:"淮阳县",411627:"太康县",411628:"鹿邑县",411681:"项城市",411682:"其它区",411700:"驻马店市",411702:"驿城区",411721:"西平县",411722:"上蔡县",411723:"平舆县",411724:"正阳县",411725:"确山县",411726:"泌阳县",411727:"汝南县",411728:"遂平县",411729:"新蔡县",411730:"其它区",42e4:"湖北省",420100:"武汉市",420102:"江岸区",420103:"江汉区",420104:"硚口区",420105:"汉阳区",420106:"武昌区",420107:"青山区",420111:"洪山区",420112:"东西湖区",420113:"汉南区",420114:"蔡甸区",420115:"江夏区",420116:"黄陂区",420117:"新洲区",420118:"其它区",420200:"黄石市",420202:"黄石港区",420203:"西塞山区",420204:"下陆区",420205:"铁山区",420222:"阳新县",420281:"大冶市",420282:"其它区",420300:"十堰市",420302:"茅箭区",420303:"张湾区",420321:"郧县",420322:"郧西县",420323:"竹山县",420324:"竹溪县",420325:"房县",420381:"丹江口市",420383:"其它区",420500:"宜昌市",420502:"西陵区",420503:"伍家岗区",420504:"点军区",420505:"猇亭区",420506:"夷陵区",420525:"远安县",420526:"兴山县",420527:"秭归县",420528:"长阳土家族自治县",420529:"五峰土家族自治县",420581:"宜都市",420582:"当阳市",420583:"枝江市",420584:"其它区",420600:"襄阳市",420602:"襄城区",420606:"樊城区",420607:"襄州区",420624:"南漳县",420625:"谷城县",420626:"保康县",420682:"老河口市",420683:"枣阳市",420684:"宜城市",420685:"其它区",420700:"鄂州市",420702:"梁子湖区",420703:"华容区",420704:"鄂城区",420705:"其它区",420800:"荆门市",420802:"东宝区",420804:"掇刀区",420821:"京山县",420822:"沙洋县",420881:"钟祥市",420882:"其它区",420900:"孝感市",420902:"孝南区",420921:"孝昌县",420922:"大悟县",420923:"云梦县",420981:"应城市",420982:"安陆市",420984:"汉川市",420985:"其它区",421e3:"荆州市",421002:"沙市区",421003:"荆州区",421022:"公安县",421023:"监利县",421024:"江陵县",421081:"石首市",421083:"洪湖市",421087:"松滋市",421088:"其它区",421100:"黄冈市",421102:"黄州区",421121:"团风县",421122:"红安县",421123:"罗田县",421124:"英山县",421125:"浠水县",421126:"蕲春县",421127:"黄梅县",421181:"麻城市",421182:"武穴市",421183:"其它区",421200:"咸宁市",421202:"咸安区",421221:"嘉鱼县",421222:"通城县",421223:"崇阳县",421224:"通山县",421281:"赤壁市",421283:"其它区",421300:"随州市",421302:"曾都区",421321:"随县",421381:"广水市",421382:"其它区",422800:"恩施土家族苗族自治州",422801:"恩施市",422802:"利川市",422822:"建始县",422823:"巴东县",422825:"宣恩县",422826:"咸丰县",422827:"来凤县",422828:"鹤峰县",422829:"其它区",429004:"仙桃市",429005:"潜江市",429006:"天门市",429021:"神农架林区",43e4:"湖南省",430100:"长沙市",430102:"芙蓉区",430103:"天心区",430104:"岳麓区",430105:"开福区",430111:"雨花区",430121:"长沙县",430122:"望城区",430124:"宁乡县",430181:"浏阳市",430182:"其它区",430200:"株洲市",430202:"荷塘区",430203:"芦淞区",430204:"石峰区",430211:"天元区",430221:"株洲县",430223:"攸县",430224:"茶陵县",430225:"炎陵县",430281:"醴陵市",430282:"其它区",430300:"湘潭市",430302:"雨湖区",430304:"岳塘区",430321:"湘潭县",430381:"湘乡市",430382:"韶山市",430383:"其它区",430400:"衡阳市",430405:"珠晖区",430406:"雁峰区",430407:"石鼓区",430408:"蒸湘区",430412:"南岳区",430421:"衡阳县",430422:"衡南县",430423:"衡山县",430424:"衡东县",430426:"祁东县",430481:"耒阳市",430482:"常宁市",430483:"其它区",430500:"邵阳市",430502:"双清区",430503:"大祥区",430511:"北塔区",430521:"邵东县",430522:"新邵县",430523:"邵阳县",430524:"隆回县",430525:"洞口县",430527:"绥宁县",430528:"新宁县",430529:"城步苗族自治县",430581:"武冈市",430582:"其它区",430600:"岳阳市",430602:"岳阳楼区",430603:"云溪区",430611:"君山区",430621:"岳阳县",430623:"华容县",430624:"湘阴县",430626:"平江县",430681:"汨罗市",430682:"临湘市",430683:"其它区",430700:"常德市",430702:"武陵区",430703:"鼎城区",430721:"安乡县",430722:"汉寿县",430723:"澧县",430724:"临澧县",430725:"桃源县",430726:"石门县",430781:"津市市",430782:"其它区",430800:"张家界市",430802:"永定区",430811:"武陵源区",430821:"慈利县",430822:"桑植县",430823:"其它区",430900:"益阳市",430902:"资阳区",430903:"赫山区",430921:"南县",430922:"桃江县",430923:"安化县",430981:"沅江市",430982:"其它区",431e3:"郴州市",431002:"北湖区",431003:"苏仙区",431021:"桂阳县",431022:"宜章县",431023:"永兴县",431024:"嘉禾县",431025:"临武县",431026:"汝城县",431027:"桂东县",431028:"安仁县",431081:"资兴市",431082:"其它区",431100:"永州市",431102:"零陵区",431103:"冷水滩区",431121:"祁阳县",431122:"东安县",431123:"双牌县",431124:"道县",431125:"江永县",431126:"宁远县",431127:"蓝山县",431128:"新田县",431129:"江华瑶族自治县",431130:"其它区",431200:"怀化市",431202:"鹤城区",431221:"中方县",431222:"沅陵县",431223:"辰溪县",431224:"溆浦县",431225:"会同县",431226:"麻阳苗族自治县",431227:"新晃侗族自治县",431228:"芷江侗族自治县",431229:"靖州苗族侗族自治县",431230:"通道侗族自治县",431281:"洪江市",431282:"其它区",431300:"娄底市",431302:"娄星区",431321:"双峰县",431322:"新化县",431381:"冷水江市",431382:"涟源市",431383:"其它区",433100:"湘西土家族苗族自治州",433101:"吉首市",433122:"泸溪县",433123:"凤凰县",433124:"花垣县",433125:"保靖县",433126:"古丈县",433127:"永顺县",433130:"龙山县",433131:"其它区",44e4:"广东省",440100:"广州市",440103:"荔湾区",440104:"越秀区",440105:"海珠区",440106:"天河区",440111:"白云区",440112:"黄埔区",440113:"番禺区",440114:"花都区",440115:"南沙区",440116:"萝岗区",440183:"增城市",440184:"从化市",440189:"其它区",440200:"韶关市",440203:"武江区",440204:"浈江区",440205:"曲江区",440222:"始兴县",440224:"仁化县",440229:"翁源县",440232:"乳源瑶族自治县",440233:"新丰县",440281:"乐昌市",440282:"南雄市",440283:"其它区",440300:"深圳市",440303:"罗湖区",440304:"福田区",440305:"南山区",440306:"宝安区",440307:"龙岗区",440308:"盐田区",440309:"其它区",440320:"光明新区",440321:"坪山新区",440322:"大鹏新区",440323:"龙华新区",440400:"珠海市",440402:"香洲区",440403:"斗门区",440404:"金湾区",440488:"其它区",440500:"汕头市",440507:"龙湖区",440511:"金平区",440512:"濠江区",440513:"潮阳区",440514:"潮南区",440515:"澄海区",440523:"南澳县",440524:"其它区",440600:"佛山市",440604:"禅城区",440605:"南海区",440606:"顺德区",440607:"三水区",440608:"高明区",440609:"其它区",440700:"江门市",440703:"蓬江区",440704:"江海区",440705:"新会区",440781:"台山市",440783:"开平市",440784:"鹤山市",440785:"恩平市",440786:"其它区",440800:"湛江市",440802:"赤坎区",440803:"霞山区",440804:"坡头区",440811:"麻章区",440823:"遂溪县",440825:"徐闻县",440881:"廉江市",440882:"雷州市",440883:"吴川市",440884:"其它区",440900:"茂名市",440902:"茂南区",440903:"茂港区",440923:"电白县",440981:"高州市",440982:"化州市",440983:"信宜市",440984:"其它区",441200:"肇庆市",441202:"端州区",441203:"鼎湖区",441223:"广宁县",441224:"怀集县",441225:"封开县",441226:"德庆县",441283:"高要市",441284:"四会市",441285:"其它区",441300:"惠州市",441302:"惠城区",441303:"惠阳区",441322:"博罗县",441323:"惠东县",441324:"龙门县",441325:"其它区",441400:"梅州市",441402:"梅江区",441421:"梅县",441422:"大埔县",441423:"丰顺县",441424:"五华县",441426:"平远县",441427:"蕉岭县",441481:"兴宁市",441482:"其它区",441500:"汕尾市",441502:"城区",441521:"海丰县",441523:"陆河县",441581:"陆丰市",441582:"其它区",441600:"河源市",441602:"源城区",441621:"紫金县",441622:"龙川县",441623:"连平县",441624:"和平县",441625:"东源县",441626:"其它区",441700:"阳江市",441702:"江城区",441721:"阳西县",441723:"阳东县",441781:"阳春市",441782:"其它区",441800:"清远市",441802:"清城区",441821:"佛冈县",441823:"阳山县",441825:"连山壮族瑶族自治县",441826:"连南瑶族自治县",441827:"清新区",441881:"英德市",441882:"连州市",441883:"其它区",441900:"东莞市",442e3:"中山市",442101:"东沙群岛",445100:"潮州市",445102:"湘桥区",445121:"潮安区",445122:"饶平县",445186:"其它区",445200:"揭阳市",445202:"榕城区",445221:"揭东区",445222:"揭西县",445224:"惠来县",445281:"普宁市",445285:"其它区",445300:"云浮市",445302:"云城区",445321:"新兴县",445322:"郁南县",445323:"云安县",445381:"罗定市",445382:"其它区",45e4:"广西壮族自治区",450100:"南宁市",450102:"兴宁区",450103:"青秀区",450105:"江南区",450107:"西乡塘区",450108:"良庆区",450109:"邕宁区",450122:"武鸣县",450123:"隆安县",450124:"马山县",450125:"上林县",450126:"宾阳县",450127:"横县",450128:"其它区",450200:"柳州市",450202:"城中区",450203:"鱼峰区",450204:"柳南区",450205:"柳北区",450221:"柳江县",450222:"柳城县",450223:"鹿寨县",450224:"融安县",450225:"融水苗族自治县",450226:"三江侗族自治县",450227:"其它区",450300:"桂林市",450302:"秀峰区",450303:"叠彩区",450304:"象山区",450305:"七星区",450311:"雁山区",450321:"阳朔县",450322:"临桂区",450323:"灵川县",450324:"全州县",450325:"兴安县",450326:"永福县",450327:"灌阳县",450328:"龙胜各族自治县",450329:"资源县",450330:"平乐县",450331:"荔浦县",450332:"恭城瑶族自治县",450333:"其它区",450400:"梧州市",450403:"万秀区",450405:"长洲区",450406:"龙圩区",450421:"苍梧县",450422:"藤县",450423:"蒙山县",450481:"岑溪市",450482:"其它区",450500:"北海市",450502:"海城区",450503:"银海区",450512:"铁山港区",450521:"合浦县",450522:"其它区",450600:"防城港市",450602:"港口区",450603:"防城区",450621:"上思县",450681:"东兴市",450682:"其它区",450700:"钦州市",450702:"钦南区",450703:"钦北区",450721:"灵山县",450722:"浦北县",450723:"其它区",450800:"贵港市",450802:"港北区",450803:"港南区",450804:"覃塘区",450821:"平南县",450881:"桂平市",450882:"其它区",450900:"玉林市",450902:"玉州区",450903:"福绵区",450921:"容县",450922:"陆川县",450923:"博白县",450924:"兴业县",450981:"北流市",450982:"其它区",451e3:"百色市",451002:"右江区",451021:"田阳县",451022:"田东县",451023:"平果县",451024:"德保县",451025:"靖西县",451026:"那坡县",451027:"凌云县",451028:"乐业县",451029:"田林县",451030:"西林县",451031:"隆林各族自治县",451032:"其它区",451100:"贺州市",451102:"八步区",451119:"平桂管理区",451121:"昭平县",451122:"钟山县",451123:"富川瑶族自治县",451124:"其它区",451200:"河池市",451202:"金城江区",451221:"南丹县",451222:"天峨县",451223:"凤山县",451224:"东兰县",451225:"罗城仫佬族自治县",451226:"环江毛南族自治县",451227:"巴马瑶族自治县",451228:"都安瑶族自治县",451229:"大化瑶族自治县",451281:"宜州市",451282:"其它区",451300:"来宾市",451302:"兴宾区",451321:"忻城县",451322:"象州县",451323:"武宣县",451324:"金秀瑶族自治县",451381:"合山市",451382:"其它区",451400:"崇左市",451402:"江州区",451421:"扶绥县",451422:"宁明县",451423:"龙州县",451424:"大新县",451425:"天等县",451481:"凭祥市",451482:"其它区",46e4:"海南省",460100:"海口市",460105:"秀英区",460106:"龙华区",460107:"琼山区",460108:"美兰区",460109:"其它区",460200:"三亚市",460300:"三沙市",460321:"西沙群岛",460322:"南沙群岛",460323:"中沙群岛的岛礁及其海域",469001:"五指山市",469002:"琼海市",469003:"儋州市",469005:"文昌市",469006:"万宁市",469007:"东方市",469025:"定安县",469026:"屯昌县",469027:"澄迈县",469028:"临高县",469030:"白沙黎族自治县",469031:"昌江黎族自治县",469033:"乐东黎族自治县",469034:"陵水黎族自治县",469035:"保亭黎族苗族自治县",469036:"琼中黎族苗族自治县",471005:"其它区",5e5:"重庆",500100:"重庆市",500101:"万州区",500102:"涪陵区",500103:"渝中区",500104:"大渡口区",500105:"江北区",500106:"沙坪坝区",500107:"九龙坡区",500108:"南岸区",500109:"北碚区",500110:"万盛区",500111:"双桥区",500112:"渝北区",500113:"巴南区",500114:"黔江区",500115:"长寿区",500222:"綦江区",500223:"潼南县",500224:"铜梁县",500225:"大足区",500226:"荣昌县",500227:"璧山县",500228:"梁平县",500229:"城口县",500230:"丰都县",500231:"垫江县",500232:"武隆县",500233:"忠县",500234:"开县",500235:"云阳县",500236:"奉节县",500237:"巫山县",500238:"巫溪县",500240:"石柱土家族自治县",500241:"秀山土家族苗族自治县",500242:"酉阳土家族苗族自治县",500243:"彭水苗族土家族自治县",500381:"江津区",500382:"合川区",500383:"永川区",500384:"南川区",500385:"其它区",51e4:"四川省",510100:"成都市",510104:"锦江区",510105:"青羊区",510106:"金牛区",510107:"武侯区",510108:"成华区",510112:"龙泉驿区",510113:"青白江区",510114:"新都区",510115:"温江区",510121:"金堂县",510122:"双流县",510124:"郫县",510129:"大邑县",510131:"蒲江县",510132:"新津县",510181:"都江堰市",510182:"彭州市",510183:"邛崃市",510184:"崇州市",510185:"其它区",510300:"自贡市",510302:"自流井区",510303:"贡井区",510304:"大安区",510311:"沿滩区",510321:"荣县",510322:"富顺县",510323:"其它区",510400:"攀枝花市",510402:"东区",510403:"西区",510411:"仁和区",510421:"米易县",510422:"盐边县",510423:"其它区",510500:"泸州市",510502:"江阳区",510503:"纳溪区",510504:"龙马潭区",510521:"泸县",510522:"合江县",510524:"叙永县",510525:"古蔺县",510526:"其它区",510600:"德阳市",510603:"旌阳区",510623:"中江县",510626:"罗江县",510681:"广汉市",510682:"什邡市",510683:"绵竹市",510684:"其它区",510700:"绵阳市",510703:"涪城区",510704:"游仙区",510722:"三台县",510723:"盐亭县",510724:"安县",510725:"梓潼县",510726:"北川羌族自治县",510727:"平武县",510781:"江油市",510782:"其它区",510800:"广元市",510802:"利州区",510811:"昭化区",510812:"朝天区",510821:"旺苍县",510822:"青川县",510823:"剑阁县",510824:"苍溪县",510825:"其它区",510900:"遂宁市",510903:"船山区",510904:"安居区",510921:"蓬溪县",510922:"射洪县",510923:"大英县",510924:"其它区",511e3:"内江市",511002:"市中区",511011:"东兴区",511024:"威远县",511025:"资中县",511028:"隆昌县",511029:"其它区",511100:"乐山市",511102:"市中区",511111:"沙湾区",511112:"五通桥区",511113:"金口河区",511123:"犍为县",511124:"井研县",511126:"夹江县",511129:"沐川县",511132:"峨边彝族自治县",511133:"马边彝族自治县",511181:"峨眉山市",511182:"其它区",511300:"南充市",511302:"顺庆区",511303:"高坪区",511304:"嘉陵区",511321:"南部县",511322:"营山县",511323:"蓬安县",511324:"仪陇县",511325:"西充县",511381:"阆中市",511382:"其它区",511400:"眉山市",511402:"东坡区",511421:"仁寿县",511422:"彭山县",511423:"洪雅县",511424:"丹棱县",511425:"青神县",511426:"其它区",511500:"宜宾市",511502:"翠屏区",511521:"宜宾县",511522:"南溪区",511523:"江安县",511524:"长宁县",511525:"高县",511526:"珙县",511527:"筠连县",511528:"兴文县",511529:"屏山县",511530:"其它区",511600:"广安市",511602:"广安区",511603:"前锋区",511621:"岳池县",511622:"武胜县",511623:"邻水县",511681:"华蓥市",511683:"其它区",511700:"达州市",511702:"通川区",511721:"达川区",511722:"宣汉县",511723:"开江县",511724:"大竹县",511725:"渠县",511781:"万源市",511782:"其它区",511800:"雅安市",511802:"雨城区",511821:"名山区",511822:"荥经县",511823:"汉源县",511824:"石棉县",511825:"天全县",511826:"芦山县",511827:"宝兴县",511828:"其它区",511900:"巴中市",511902:"巴州区",511903:"恩阳区",511921:"通江县",511922:"南江县",511923:"平昌县",511924:"其它区",512e3:"资阳市",512002:"雁江区",512021:"安岳县",512022:"乐至县",512081:"简阳市",512082:"其它区",513200:"阿坝藏族羌族自治州",513221:"汶川县",513222:"理县",513223:"茂县",513224:"松潘县",513225:"九寨沟县",513226:"金川县",513227:"小金县",513228:"黑水县",513229:"马尔康县",513230:"壤塘县",513231:"阿坝县",513232:"若尔盖县",513233:"红原县",513234:"其它区",513300:"甘孜藏族自治州",513321:"康定县",513322:"泸定县",513323:"丹巴县",513324:"九龙县",513325:"雅江县",513326:"道孚县",513327:"炉霍县",513328:"甘孜县",513329:"新龙县",513330:"德格县",513331:"白玉县",513332:"石渠县",513333:"色达县",513334:"理塘县",513335:"巴塘县",513336:"乡城县",513337:"稻城县",513338:"得荣县",513339:"其它区",513400:"凉山彝族自治州",513401:"西昌市",513422:"木里藏族自治县",513423:"盐源县",513424:"德昌县",513425:"会理县",513426:"会东县",513427:"宁南县",513428:"普格县",513429:"布拖县",513430:"金阳县",513431:"昭觉县",513432:"喜德县",513433:"冕宁县",513434:"越西县",513435:"甘洛县",513436:"美姑县",513437:"雷波县",513438:"其它区",52e4:"贵州省",520100:"贵阳市",520102:"南明区",520103:"云岩区",520111:"花溪区",520112:"乌当区",520113:"白云区",520121:"开阳县",520122:"息烽县",520123:"修文县",520151:"观山湖区",520181:"清镇市",520182:"其它区",520200:"六盘水市",520201:"钟山区",520203:"六枝特区",520221:"水城县",520222:"盘县",520223:"其它区",520300:"遵义市",520302:"红花岗区",520303:"汇川区",520321:"遵义县",520322:"桐梓县",520323:"绥阳县",520324:"正安县",520325:"道真仡佬族苗族自治县",520326:"务川仡佬族苗族自治县",520327:"凤冈县",520328:"湄潭县",520329:"余庆县",520330:"习水县",520381:"赤水市",520382:"仁怀市",520383:"其它区",520400:"安顺市",520402:"西秀区",520421:"平坝县",520422:"普定县",520423:"镇宁布依族苗族自治县",520424:"关岭布依族苗族自治县",520425:"紫云苗族布依族自治县",520426:"其它区",522200:"铜仁市",522201:"碧江区",522222:"江口县",522223:"玉屏侗族自治县",522224:"石阡县",522225:"思南县",522226:"印江土家族苗族自治县",522227:"德江县",522228:"沿河土家族自治县",522229:"松桃苗族自治县",522230:"万山区",522231:"其它区",522300:"黔西南布依族苗族自治州",522301:"兴义市",522322:"兴仁县",522323:"普安县",522324:"晴隆县",522325:"贞丰县",522326:"望谟县",522327:"册亨县",522328:"安龙县",522329:"其它区",522400:"毕节市",522401:"七星关区",522422:"大方县",522423:"黔西县",522424:"金沙县",522425:"织金县",522426:"纳雍县",522427:"威宁彝族回族苗族自治县",522428:"赫章县",522429:"其它区",522600:"黔东南苗族侗族自治州",522601:"凯里市",522622:"黄平县",522623:"施秉县",522624:"三穗县",522625:"镇远县",522626:"岑巩县",522627:"天柱县",522628:"锦屏县",522629:"剑河县",522630:"台江县",522631:"黎平县",522632:"榕江县",522633:"从江县",522634:"雷山县",522635:"麻江县",522636:"丹寨县",522637:"其它区",522700:"黔南布依族苗族自治州",522701:"都匀市",522702:"福泉市",522722:"荔波县",522723:"贵定县",522725:"瓮安县",522726:"独山县",522727:"平塘县",522728:"罗甸县",522729:"长顺县",522730:"龙里县",522731:"惠水县",522732:"三都水族自治县",522733:"其它区",53e4:"云南省",530100:"昆明市",530102:"五华区",530103:"盘龙区",530111:"官渡区",530112:"西山区",530113:"东川区",530121:"呈贡区",530122:"晋宁县",530124:"富民县",530125:"宜良县",530126:"石林彝族自治县",530127:"嵩明县",530128:"禄劝彝族苗族自治县",530129:"寻甸回族彝族自治县",530181:"安宁市",530182:"其它区",530300:"曲靖市",530302:"麒麟区",530321:"马龙县",530322:"陆良县",530323:"师宗县",530324:"罗平县",530325:"富源县",530326:"会泽县",530328:"沾益县",530381:"宣威市",530382:"其它区",530400:"玉溪市",530402:"红塔区",530421:"江川县",530422:"澄江县",530423:"通海县",530424:"华宁县",530425:"易门县",530426:"峨山彝族自治县",530427:"新平彝族傣族自治县",530428:"元江哈尼族彝族傣族自治县",530429:"其它区",530500:"保山市",530502:"隆阳区",530521:"施甸县",530522:"腾冲县",530523:"龙陵县",530524:"昌宁县",530525:"其它区",530600:"昭通市",530602:"昭阳区",530621:"鲁甸县",530622:"巧家县",530623:"盐津县",530624:"大关县",530625:"永善县",530626:"绥江县",530627:"镇雄县",530628:"彝良县",530629:"威信县",530630:"水富县",530631:"其它区",530700:"丽江市",530702:"古城区",530721:"玉龙纳西族自治县",530722:"永胜县",530723:"华坪县",530724:"宁蒗彝族自治县",530725:"其它区",530800:"普洱市",530802:"思茅区",530821:"宁洱哈尼族彝族自治县",530822:"墨江哈尼族自治县",530823:"景东彝族自治县",530824:"景谷傣族彝族自治县",530825:"镇沅彝族哈尼族拉祜族自治县",530826:"江城哈尼族彝族自治县",530827:"孟连傣族拉祜族佤族自治县",530828:"澜沧拉祜族自治县",530829:"西盟佤族自治县",530830:"其它区",530900:"临沧市",530902:"临翔区",530921:"凤庆县",530922:"云县",530923:"永德县",530924:"镇康县",530925:"双江拉祜族佤族布朗族傣族自治县",530926:"耿马傣族佤族自治县",530927:"沧源佤族自治县",530928:"其它区",532300:"楚雄彝族自治州",532301:"楚雄市",532322:"双柏县",532323:"牟定县",532324:"南华县",532325:"姚安县",532326:"大姚县",532327:"永仁县",532328:"元谋县",532329:"武定县",532331:"禄丰县",532332:"其它区",532500:"红河哈尼族彝族自治州",532501:"个旧市",532502:"开远市",532522:"蒙自市",532523:"屏边苗族自治县",532524:"建水县",532525:"石屏县",532526:"弥勒市",532527:"泸西县",532528:"元阳县",532529:"红河县",532530:"金平苗族瑶族傣族自治县",532531:"绿春县",532532:"河口瑶族自治县",532533:"其它区",532600:"文山壮族苗族自治州",532621:"文山市",532622:"砚山县",532623:"西畴县",532624:"麻栗坡县",532625:"马关县",532626:"丘北县",532627:"广南县",532628:"富宁县",532629:"其它区",532800:"西双版纳傣族自治州",532801:"景洪市",532822:"勐海县",532823:"勐腊县",532824:"其它区",532900:"大理白族自治州",532901:"大理市",532922:"漾濞彝族自治县",532923:"祥云县",532924:"宾川县",532925:"弥渡县",532926:"南涧彝族自治县",532927:"巍山彝族回族自治县",532928:"永平县",532929:"云龙县",532930:"洱源县",532931:"剑川县",532932:"鹤庆县",532933:"其它区",533100:"德宏傣族景颇族自治州",533102:"瑞丽市",533103:"芒市",533122:"梁河县",533123:"盈江县",533124:"陇川县",533125:"其它区",533300:"怒江傈僳族自治州",533321:"泸水县",533323:"福贡县",533324:"贡山独龙族怒族自治县",533325:"兰坪白族普米族自治县",533326:"其它区",533400:"迪庆藏族自治州",533421:"香格里拉县",533422:"德钦县",533423:"维西傈僳族自治县",533424:"其它区",54e4:"西藏自治区",540100:"拉萨市",540102:"城关区",540121:"林周县",540122:"当雄县",540123:"尼木县",540124:"曲水县",540125:"堆龙德庆县",540126:"达孜县",540127:"墨竹工卡县",540128:"其它区",542100:"昌都地区",542121:"昌都县",542122:"江达县",542123:"贡觉县",542124:"类乌齐县",542125:"丁青县",542126:"察雅县",542127:"八宿县",542128:"左贡县",542129:"芒康县",542132:"洛隆县",542133:"边坝县",542134:"其它区",542200:"山南地区",542221:"乃东县",542222:"扎囊县",542223:"贡嘎县",542224:"桑日县",542225:"琼结县",542226:"曲松县",542227:"措美县",542228:"洛扎县",542229:"加查县",542231:"隆子县",542232:"错那县",542233:"浪卡子县",542234:"其它区",542300:"日喀则地区",542301:"日喀则市",542322:"南木林县",542323:"江孜县",542324:"定日县",542325:"萨迦县",542326:"拉孜县",542327:"昂仁县",542328:"谢通门县",542329:"白朗县",542330:"仁布县",542331:"康马县",542332:"定结县",542333:"仲巴县",542334:"亚东县",542335:"吉隆县",542336:"聂拉木县",542337:"萨嘎县",542338:"岗巴县",542339:"其它区",542400:"那曲地区",542421:"那曲县",542422:"嘉黎县",542423:"比如县",542424:"聂荣县",542425:"安多县",542426:"申扎县",542427:"索县",542428:"班戈县",542429:"巴青县",542430:"尼玛县",542431:"其它区",542432:"双湖县",542500:"阿里地区",542521:"普兰县",542522:"札达县",542523:"噶尔县",542524:"日土县",542525:"革吉县",542526:"改则县",542527:"措勤县",542528:"其它区",542600:"林芝地区",542621:"林芝县",542622:"工布江达县",542623:"米林县",542624:"墨脱县",542625:"波密县",542626:"察隅县",542627:"朗县",542628:"其它区",61e4:"陕西省",610100:"西安市",610102:"新城区",610103:"碑林区",610104:"莲湖区",610111:"灞桥区",610112:"未央区",610113:"雁塔区",610114:"阎良区",610115:"临潼区",610116:"长安区",610122:"蓝田县",610124:"周至县",610125:"户县",610126:"高陵县",610127:"其它区",610200:"铜川市",610202:"王益区",610203:"印台区",610204:"耀州区",610222:"宜君县",610223:"其它区",610300:"宝鸡市",610302:"渭滨区",610303:"金台区",610304:"陈仓区",610322:"凤翔县",610323:"岐山县",610324:"扶风县",610326:"眉县",610327:"陇县",610328:"千阳县",610329:"麟游县",610330:"凤县",610331:"太白县",610332:"其它区",610400:"咸阳市",610402:"秦都区",610403:"杨陵区",610404:"渭城区",610422:"三原县",610423:"泾阳县",610424:"乾县",610425:"礼泉县",610426:"永寿县",610427:"彬县",610428:"长武县",610429:"旬邑县",610430:"淳化县",610431:"武功县",610481:"兴平市",610482:"其它区",610500:"渭南市",610502:"临渭区",610521:"华县",610522:"潼关县",610523:"大荔县",610524:"合阳县",610525:"澄城县",610526:"蒲城县",610527:"白水县",610528:"富平县",610581:"韩城市",610582:"华阴市",610583:"其它区",610600:"延安市",610602:"宝塔区",610621:"延长县",610622:"延川县",610623:"子长县",610624:"安塞县",610625:"志丹县",610626:"吴起县",610627:"甘泉县",610628:"富县",610629:"洛川县",610630:"宜川县",610631:"黄龙县",610632:"黄陵县",610633:"其它区",610700:"汉中市",610702:"汉台区",610721:"南郑县",610722:"城固县",610723:"洋县",610724:"西乡县",610725:"勉县",610726:"宁强县",610727:"略阳县",610728:"镇巴县",610729:"留坝县",610730:"佛坪县",610731:"其它区",610800:"榆林市",610802:"榆阳区",610821:"神木县",610822:"府谷县",610823:"横山县",610824:"靖边县",610825:"定边县",610826:"绥德县",610827:"米脂县",610828:"佳县",610829:"吴堡县",610830:"清涧县",610831:"子洲县",610832:"其它区",610900:"安康市",610902:"汉滨区",610921:"汉阴县",610922:"石泉县",610923:"宁陕县",610924:"紫阳县",610925:"岚皋县",610926:"平利县",610927:"镇坪县",610928:"旬阳县",610929:"白河县",610930:"其它区",611e3:"商洛市",611002:"商州区",611021:"洛南县",611022:"丹凤县",611023:"商南县",611024:"山阳县",611025:"镇安县",611026:"柞水县",611027:"其它区",62e4:"甘肃省",620100:"兰州市",620102:"城关区",620103:"七里河区",620104:"西固区",620105:"安宁区",620111:"红古区",620121:"永登县",620122:"皋兰县",620123:"榆中县",620124:"其它区",620200:"嘉峪关市",620300:"金昌市",620302:"金川区",620321:"永昌县",620322:"其它区",620400:"白银市",620402:"白银区",620403:"平川区",620421:"靖远县",620422:"会宁县",620423:"景泰县",620424:"其它区",620500:"天水市",620502:"秦州区",620503:"麦积区",620521:"清水县",620522:"秦安县",620523:"甘谷县",620524:"武山县",620525:"张家川回族自治县",620526:"其它区",620600:"武威市",620602:"凉州区",620621:"民勤县",620622:"古浪县",620623:"天祝藏族自治县",620624:"其它区",620700:"张掖市",620702:"甘州区",620721:"肃南裕固族自治县",620722:"民乐县",620723:"临泽县",620724:"高台县",620725:"山丹县",620726:"其它区",620800:"平凉市",620802:"崆峒区",620821:"泾川县",620822:"灵台县",620823:"崇信县",620824:"华亭县",620825:"庄浪县",620826:"静宁县",620827:"其它区",620900:"酒泉市",620902:"肃州区",620921:"金塔县",620922:"瓜州县",620923:"肃北蒙古族自治县",620924:"阿克塞哈萨克族自治县",620981:"玉门市",620982:"敦煌市",620983:"其它区",621e3:"庆阳市",621002:"西峰区",621021:"庆城县",621022:"环县",621023:"华池县",621024:"合水县",621025:"正宁县",621026:"宁县",621027:"镇原县",621028:"其它区",621100:"定西市",621102:"安定区",621121:"通渭县",621122:"陇西县",621123:"渭源县",621124:"临洮县",621125:"漳县",621126:"岷县",621127:"其它区",621200:"陇南市",621202:"武都区",621221:"成县",621222:"文县",621223:"宕昌县",621224:"康县",621225:"西和县",621226:"礼县",621227:"徽县",621228:"两当县",621229:"其它区",622900:"临夏回族自治州",622901:"临夏市",622921:"临夏县",622922:"康乐县",622923:"永靖县",622924:"广河县",622925:"和政县",622926:"东乡族自治县",622927:"积石山保安族东乡族撒拉族自治县",622928:"其它区",623e3:"甘南藏族自治州",623001:"合作市",623021:"临潭县",623022:"卓尼县",623023:"舟曲县",623024:"迭部县",623025:"玛曲县",623026:"碌曲县",623027:"夏河县",623028:"其它区",63e4:"青海省",630100:"西宁市",630102:"城东区",630103:"城中区",630104:"城西区",630105:"城北区",630121:"大通回族土族自治县",630122:"湟中县",630123:"湟源县",630124:"其它区",632100:"海东市",632121:"平安县",632122:"民和回族土族自治县",632123:"乐都区",632126:"互助土族自治县",632127:"化隆回族自治县",632128:"循化撒拉族自治县",632129:"其它区",632200:"海北藏族自治州",632221:"门源回族自治县",632222:"祁连县",632223:"海晏县",632224:"刚察县",632225:"其它区",632300:"黄南藏族自治州",632321:"同仁县",632322:"尖扎县",632323:"泽库县",632324:"河南蒙古族自治县",632325:"其它区",632500:"海南藏族自治州",632521:"共和县",632522:"同德县",632523:"贵德县",632524:"兴海县",632525:"贵南县",632526:"其它区",632600:"果洛藏族自治州",632621:"玛沁县",632622:"班玛县",632623:"甘德县",632624:"达日县",632625:"久治县",632626:"玛多县",632627:"其它区",632700:"玉树藏族自治州",632721:"玉树市",632722:"杂多县",632723:"称多县",632724:"治多县",632725:"囊谦县",632726:"曲麻莱县",632727:"其它区",632800:"海西蒙古族藏族自治州",632801:"格尔木市",632802:"德令哈市",632821:"乌兰县",632822:"都兰县",632823:"天峻县",632824:"其它区",64e4:"宁夏回族自治区",640100:"银川市",640104:"兴庆区",640105:"西夏区",640106:"金凤区",640121:"永宁县",640122:"贺兰县",640181:"灵武市",640182:"其它区",640200:"石嘴山市",640202:"大武口区",640205:"惠农区",640221:"平罗县",640222:"其它区",640300:"吴忠市",640302:"利通区",640303:"红寺堡区",640323:"盐池县",640324:"同心县",640381:"青铜峡市",640382:"其它区",640400:"固原市",640402:"原州区",640422:"西吉县",640423:"隆德县",640424:"泾源县",640425:"彭阳县",640426:"其它区",640500:"中卫市",640502:"沙坡头区",640521:"中宁县",640522:"海原县",640523:"其它区",65e4:"新疆维吾尔自治区",650100:"乌鲁木齐市",650102:"天山区",650103:"沙依巴克区",650104:"新市区",650105:"水磨沟区",650106:"头屯河区",650107:"达坂城区",650109:"米东区",650121:"乌鲁木齐县",650122:"其它区",650200:"克拉玛依市",650202:"独山子区",650203:"克拉玛依区",650204:"白碱滩区",650205:"乌尔禾区",650206:"其它区",652100:"吐鲁番地区",652101:"吐鲁番市",652122:"鄯善县",652123:"托克逊县",652124:"其它区",652200:"哈密地区",652201:"哈密市",652222:"巴里坤哈萨克自治县",652223:"伊吾县",652224:"其它区",652300:"昌吉回族自治州",652301:"昌吉市",652302:"阜康市",652323:"呼图壁县",652324:"玛纳斯县",652325:"奇台县",652327:"吉木萨尔县",652328:"木垒哈萨克自治县",652329:"其它区",652700:"博尔塔拉蒙古自治州",652701:"博乐市",652702:"阿拉山口市",652722:"精河县",652723:"温泉县",652724:"其它区",652800:"巴音郭楞蒙古自治州",652801:"库尔勒市",652822:"轮台县",652823:"尉犁县",652824:"若羌县",652825:"且末县",652826:"焉耆回族自治县",652827:"和静县",652828:"和硕县",652829:"博湖县",652830:"其它区",652900:"阿克苏地区",652901:"阿克苏市",652922:"温宿县",652923:"库车县",652924:"沙雅县",652925:"新和县",652926:"拜城县",652927:"乌什县",652928:"阿瓦提县",652929:"柯坪县",652930:"其它区",653e3:"克孜勒苏柯尔克孜自治州",653001:"阿图什市",653022:"阿克陶县",653023:"阿合奇县",653024:"乌恰县",653025:"其它区",653100:"喀什地区",653101:"喀什市",653121:"疏附县",653122:"疏勒县",653123:"英吉沙县",653124:"泽普县",653125:"莎车县",653126:"叶城县",653127:"麦盖提县",653128:"岳普湖县",653129:"伽师县",653130:"巴楚县",653131:"塔什库尔干塔吉克自治县",653132:"其它区",653200:"和田地区",653201:"和田市",653221:"和田县",653222:"墨玉县",653223:"皮山县",653224:"洛浦县",653225:"策勒县",653226:"于田县",653227:"民丰县",653228:"其它区",654e3:"伊犁哈萨克自治州",654002:"伊宁市",654003:"奎屯市",654021:"伊宁县",654022:"察布查尔锡伯自治县",654023:"霍城县",654024:"巩留县",654025:"新源县",654026:"昭苏县",654027:"特克斯县",654028:"尼勒克县",654029:"其它区",654200:"塔城地区",654201:"塔城市",654202:"乌苏市",654221:"额敏县",654223:"沙湾县",654224:"托里县",654225:"裕民县",654226:"和布克赛尔蒙古自治县",654227:"其它区",654300:"阿勒泰地区",654301:"阿勒泰市",654321:"布尔津县",654322:"富蕴县",654323:"福海县",654324:"哈巴河县",654325:"青河县",654326:"吉木乃县",654327:"其它区",659001:"石河子市",659002:"阿拉尔市",659003:"图木舒克市",659004:"五家渠市",71e4:"台湾",710100:"台北市",710101:"中正区",710102:"大同区",710103:"中山区",710104:"松山区",710105:"大安区",710106:"万华区",710107:"信义区",710108:"士林区",710109:"北投区",710110:"内湖区",710111:"南港区",710112:"文山区",710113:"其它区",710200:"高雄市",710201:"新兴区",710202:"前金区",710203:"芩雅区",710204:"盐埕区",710205:"鼓山区",710206:"旗津区",710207:"前镇区",710208:"三民区",710209:"左营区",710210:"楠梓区",710211:"小港区",710212:"其它区",710241:"苓雅区",710242:"仁武区",710243:"大社区",710244:"冈山区",710245:"路竹区",710246:"阿莲区",710247:"田寮区",710248:"燕巢区",710249:"桥头区",710250:"梓官区",710251:"弥陀区",710252:"永安区",710253:"湖内区",710254:"凤山区",710255:"大寮区",710256:"林园区",710257:"鸟松区",710258:"大树区",710259:"旗山区",710260:"美浓区",710261:"六龟区",710262:"内门区",710263:"杉林区",710264:"甲仙区",710265:"桃源区",710266:"那玛夏区",710267:"茂林区",710268:"茄萣区",710300:"台南市",710301:"中西区",710302:"东区",710303:"南区",710304:"北区",710305:"安平区",710306:"安南区",710307:"其它区",710339:"永康区",710340:"归仁区",710341:"新化区",710342:"左镇区",710343:"玉井区",710344:"楠西区",710345:"南化区",710346:"仁德区",710347:"关庙区",710348:"龙崎区",710349:"官田区",710350:"麻豆区",710351:"佳里区",710352:"西港区",710353:"七股区",710354:"将军区",710355:"学甲区",710356:"北门区",710357:"新营区",710358:"后壁区",710359:"白河区",710360:"东山区",710361:"六甲区",710362:"下营区",710363:"柳营区",710364:"盐水区",710365:"善化区",710366:"大内区",710367:"山上区",710368:"新市区",710369:"安定区",710400:"台中市",710401:"中区",710402:"东区",710403:"南区",710404:"西区",710405:"北区",710406:"北屯区",710407:"西屯区",710408:"南屯区",710409:"其它区",710431:"太平区",710432:"大里区",710433:"雾峰区",710434:"乌日区",710435:"丰原区",710436:"后里区",710437:"石冈区",710438:"东势区",710439:"和平区",710440:"新社区",710441:"潭子区",710442:"大雅区",710443:"神冈区",710444:"大肚区",710445:"沙鹿区",710446:"龙井区",710447:"梧栖区",710448:"清水区",710449:"大甲区",710450:"外埔区",710451:"大安区",710500:"金门县",710507:"金沙镇",710508:"金湖镇",710509:"金宁乡",710510:"金城镇",710511:"烈屿乡",710512:"乌坵乡",710600:"南投县",710614:"南投市",710615:"中寮乡",710616:"草屯镇",710617:"国姓乡",710618:"埔里镇",710619:"仁爱乡",710620:"名间乡",710621:"集集镇",710622:"水里乡",710623:"鱼池乡",710624:"信义乡",710625:"竹山镇",710626:"鹿谷乡",710700:"基隆市",710701:"仁爱区",710702:"信义区",710703:"中正区",710704:"中山区",710705:"安乐区",710706:"暖暖区",710707:"七堵区",710708:"其它区",710800:"新竹市",710801:"东区",710802:"北区",710803:"香山区",710804:"其它区",710900:"嘉义市",710901:"东区",710902:"西区",710903:"其它区",711100:"新北市",711130:"万里区",711131:"金山区",711132:"板桥区",711133:"汐止区",711134:"深坑区",711135:"石碇区",711136:"瑞芳区",711137:"平溪区",711138:"双溪区",711139:"贡寮区",711140:"新店区",711141:"坪林区",711142:"乌来区",711143:"永和区",711144:"中和区",711145:"土城区",711146:"三峡区",711147:"树林区",711148:"莺歌区",711149:"三重区",711150:"新庄区",711151:"泰山区",711152:"林口区",711153:"芦洲区",711154:"五股区",711155:"八里区",711156:"淡水区",711157:"三芝区",711158:"石门区",711200:"宜兰县",711214:"宜兰市",711215:"头城镇",711216:"礁溪乡",711217:"壮围乡",711218:"员山乡",711219:"罗东镇",711220:"三星乡",711221:"大同乡",711222:"五结乡",711223:"冬山乡",711224:"苏澳镇",711225:"南澳乡",711226:"钓鱼台",711300:"新竹县",711314:"竹北市",711315:"湖口乡",711316:"新丰乡",711317:"新埔镇",711318:"关西镇",711319:"芎林乡",711320:"宝山乡",711321:"竹东镇",711322:"五峰乡",711323:"横山乡",711324:"尖石乡",711325:"北埔乡",711326:"峨眉乡",711400:"桃园县",711414:"中坜市",711415:"平镇市",711416:"龙潭乡",711417:"杨梅市",711418:"新屋乡",711419:"观音乡",711420:"桃园市",711421:"龟山乡",711422:"八德市",711423:"大溪镇",711424:"复兴乡",711425:"大园乡",711426:"芦竹乡",711500:"苗栗县",711519:"竹南镇",711520:"头份镇",711521:"三湾乡",711522:"南庄乡",711523:"狮潭乡",711524:"后龙镇",711525:"通霄镇",711526:"苑里镇",711527:"苗栗市",711528:"造桥乡",711529:"头屋乡",711530:"公馆乡",711531:"大湖乡",711532:"泰安乡",711533:"铜锣乡",711534:"三义乡",711535:"西湖乡",711536:"卓兰镇",711700:"彰化县",711727:"彰化市",711728:"芬园乡",711729:"花坛乡",711730:"秀水乡",711731:"鹿港镇",711732:"福兴乡",711733:"线西乡",711734:"和美镇",711735:"伸港乡",711736:"员林镇",711737:"社头乡",711738:"永靖乡",711739:"埔心乡",711740:"溪湖镇",711741:"大村乡",711742:"埔盐乡",711743:"田中镇",711744:"北斗镇",711745:"田尾乡",711746:"埤头乡",711747:"溪州乡",711748:"竹塘乡",711749:"二林镇",711750:"大城乡",711751:"芳苑乡",711752:"二水乡",711900:"嘉义县",711919:"番路乡",711920:"梅山乡",711921:"竹崎乡",711922:"阿里山乡",711923:"中埔乡",711924:"大埔乡",711925:"水上乡",711926:"鹿草乡",711927:"太保市",711928:"朴子市",711929:"东石乡",711930:"六脚乡",711931:"新港乡",711932:"民雄乡",711933:"大林镇",711934:"溪口乡",711935:"义竹乡",711936:"布袋镇",712100:"云林县",712121:"斗南镇",712122:"大埤乡",712123:"虎尾镇",712124:"土库镇",712125:"褒忠乡",712126:"东势乡",712127:"台西乡",712128:"仑背乡",712129:"麦寮乡",712130:"斗六市",712131:"林内乡",712132:"古坑乡",712133:"莿桐乡",712134:"西螺镇",712135:"二仑乡",712136:"北港镇",712137:"水林乡",712138:"口湖乡",712139:"四湖乡",712140:"元长乡",712400:"屏东县",712434:"屏东市",712435:"三地门乡",712436:"雾台乡",712437:"玛家乡",712438:"九如乡",712439:"里港乡",712440:"高树乡",712441:"盐埔乡",712442:"长治乡",712443:"麟洛乡",712444:"竹田乡",712445:"内埔乡",712446:"万丹乡",712447:"潮州镇",712448:"泰武乡",712449:"来义乡",712450:"万峦乡",712451:"崁顶乡",712452:"新埤乡",712453:"南州乡",712454:"林边乡",712455:"东港镇",712456:"琉球乡",712457:"佳冬乡",712458:"新园乡",712459:"枋寮乡",712460:"枋山乡",712461:"春日乡",712462:"狮子乡",712463:"车城乡",712464:"牡丹乡",712465:"恒春镇",712466:"满州乡",712500:"台东县",712517:"台东市",712518:"绿岛乡",712519:"兰屿乡",712520:"延平乡",712521:"卑南乡",712522:"鹿野乡",712523:"关山镇",712524:"海端乡",712525:"池上乡",712526:"东河乡",712527:"成功镇",712528:"长滨乡",712529:"金峰乡",712530:"大武乡",712531:"达仁乡",712532:"太麻里乡",712600:"花莲县",712615:"花莲市",712616:"新城乡",712617:"太鲁阁",712618:"秀林乡",712619:"吉安乡",712620:"寿丰乡",712621:"凤林镇",712622:"光复乡",712623:"丰滨乡",712624:"瑞穗乡",712625:"万荣乡",712626:"玉里镇",712627:"卓溪乡",712628:"富里乡",712700:"澎湖县",712707:"马公市",712708:"西屿乡",712709:"望安乡",712710:"七美乡",712711:"白沙乡",712712:"湖西乡",712800:"连江县",712805:"南竿乡",712806:"北竿乡",712807:"莒光乡",712808:"东引乡",81e4:"香港特别行政区",810100:"香港岛",810101:"中西区",810102:"湾仔",810103:"东区",810104:"南区",810200:"九龙",810201:"九龙城区",810202:"油尖旺区",810203:"深水埗区",810204:"黄大仙区",810205:"观塘区",810300:"新界",810301:"北区",810302:"大埔区",810303:"沙田区",810304:"西贡区",810305:"元朗区",810306:"屯门区",810307:"荃湾区",810308:"葵青区",810309:"离岛区",82e4:"澳门特别行政区",820100:"澳门半岛",820200:"离岛",99e4:"海外",990100:"海外"};function s(o){for(var l={},u=0,c;u<o.length;u++)c=o[u],!(!c||!c.id)&&(l[c.id]=c);for(var f=[],m=0;m<o.length;m++)if(c=o[m],!!c){if(c.pid==null&&c.parentId==null){f.push(c);continue}var v=l[c.pid]||l[c.parentId];v&&(v.children||(v.children=[]),v.children.push(c))}return f}var a=function(){var o=[];for(var l in n){var u=l.slice(2,6)==="0000"?void 0:l.slice(4,6)=="00"?l.slice(0,2)+"0000":l.slice(0,4)+"00";o.push({id:l,pid:u,name:n[l]})}return s(o)}();r.exports=a},function(r,e,n){var s=n(18);r.exports={d4:function(){return this.natural(1,4)},d6:function(){return this.natural(1,6)},d8:function(){return this.natural(1,8)},d12:function(){return this.natural(1,12)},d20:function(){return this.natural(1,20)},d100:function(){return this.natural(1,100)},guid:function(){var a="abcdefABCDEF1234567890",o=this.string(a,8)+"-"+this.string(a,4)+"-"+this.string(a,4)+"-"+this.string(a,4)+"-"+this.string(a,12);return o},uuid:function(){return this.guid()},id:function(){var a,o=0,l=["7","9","10","5","8","4","2","1","6","3","7","9","10","5","8","4","2"],u=["1","0","X","9","8","7","6","5","4","3","2"];a=this.pick(s).id+this.date("yyyyMMdd")+this.string("number",3);for(var c=0;c<a.length;c++)o+=a[c]*l[c];return a+=u[o%11],a},increment:function(){var a=0;return function(o){return a+=+o||1}}(),inc:function(a){return this.increment(a)}}},function(r,e,n){var s=n(21),a=n(22);r.exports={Parser:s,Handler:a}},function(r,e){function n(F){this.type=F,this.offset=n.offset(),this.text=n.text()}function s(F,G){n.call(this,"alternate"),this.left=F,this.right=G}function a(F){n.call(this,"match"),this.body=F.filter(Boolean)}function o(F,G){n.call(this,F),this.body=G}function l(F){o.call(this,"capture-group"),this.index=H[this.offset]||(H[this.offset]=V++),this.body=F}function u(F,G){n.call(this,"quantified"),this.body=F,this.quantifier=G}function c(F,G){n.call(this,"quantifier"),this.min=F,this.max=G,this.greedy=!0}function f(F,G){n.call(this,"charset"),this.invert=F,this.body=G}function m(F,G){n.call(this,"range"),this.start=F,this.end=G}function v(F){n.call(this,"literal"),this.body=F,this.escaped=this.body!=this.text}function x(F){n.call(this,"unicode"),this.code=F.toUpperCase()}function C(F){n.call(this,"hex"),this.code=F.toUpperCase()}function w(F){n.call(this,"octal"),this.code=F.toUpperCase()}function S(F){n.call(this,"back-reference"),this.code=F.toUpperCase()}function k(F){n.call(this,"control-character"),this.code=F.toUpperCase()}var M=function(){function F(R,Q){function A(){this.constructor=R}A.prototype=Q.prototype,R.prototype=new A}function G(R,Q,A,P,j){function X(Z,ae){function pe(ne){function oe(he){return he.charCodeAt(0).toString(16).toUpperCase()}return ne.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(he){return"\\x0"+oe(he)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(he){return"\\x"+oe(he)}).replace(/[\u0180-\u0FFF]/g,function(he){return"\\u0"+oe(he)}).replace(/[\u1080-\uFFFF]/g,function(he){return"\\u"+oe(he)})}var me,ee;switch(Z.length){case 0:me="end of input";break;case 1:me=Z[0];break;default:me=Z.slice(0,-1).join(", ")+" or "+Z[Z.length-1]}return ee=ae?'"'+pe(ae)+'"':"end of input","Expected "+me+" but "+ee+" found."}this.expected=R,this.found=Q,this.offset=A,this.line=P,this.column=j,this.name="SyntaxError",this.message=X(R,Q)}function W(R){function Q(){return R.substring(ke,B)}function A(){return ke}function P(b){function D(le,Ae,$e){var qe,Ct;for(qe=Ae;$e>qe;qe++)Ct=R.charAt(qe),Ct===`
`?(le.seenCR||le.line++,le.column=1,le.seenCR=!1):Ct==="\r"||Ct==="\u2028"||Ct==="\u2029"?(le.line++,le.column=1,le.seenCR=!0):(le.column++,le.seenCR=!1)}return Zt!==b&&(Zt>b&&(Zt=0,$i={line:1,column:1,seenCR:!1}),D($i,Zt,b),Zt=b),$i}function j(b){vi>B||(B>vi&&(vi=B,Ti=[]),Ti.push(b))}function X(b){var D=0;for(b.sort();D<b.length;)b[D-1]===b[D]?b.splice(D,1):D++}function Z(){var b,D,le,Ae,$e;return b=B,D=ae(),D!==null?(le=B,R.charCodeAt(B)===124?(Ae=vt,B++):(Ae=null,Ce===0&&j(ct)),Ae!==null?($e=Z(),$e!==null?(Ae=[Ae,$e],le=Ae):(B=le,le=xe)):(B=le,le=xe),le===null&&(le=et),le!==null?(ke=b,D=pt(D,le),D===null&&(B=b),b=D):(B=b,b=xe)):(B=b,b=xe),b}function ae(){var b,D,le,Ae,$e;if(b=B,D=me(),D===null&&(D=et),D!==null)if(le=B,Ce++,Ae=oe(),Ce--,Ae===null?le=et:(B=le,le=xe),le!==null){for(Ae=[],$e=ne(),$e===null&&($e=pe());$e!==null;)Ae.push($e),$e=ne(),$e===null&&($e=pe());Ae!==null?($e=ee(),$e===null&&($e=et),$e!==null?(ke=b,D=Tt(D,Ae,$e),D===null&&(B=b),b=D):(B=b,b=xe)):(B=b,b=xe)}else B=b,b=xe;else B=b,b=xe;return b}function pe(){var b;return b=nt(),b===null&&(b=te(),b===null&&(b=ve())),b}function me(){var b,D;return b=B,R.charCodeAt(B)===94?(D=dt,B++):(D=null,Ce===0&&j(Ye)),D!==null&&(ke=b,D=mt()),D===null&&(B=b),b=D,b}function ee(){var b,D;return b=B,R.charCodeAt(B)===36?(D=wt,B++):(D=null,Ce===0&&j(xt)),D!==null&&(ke=b,D=We()),D===null&&(B=b),b=D,b}function ne(){var b,D,le;return b=B,D=pe(),D!==null?(le=oe(),le!==null?(ke=b,D=Pt(D,le),D===null&&(B=b),b=D):(B=b,b=xe)):(B=b,b=xe),b}function oe(){var b,D,le;return Ce++,b=B,D=he(),D!==null?(le=Ze(),le===null&&(le=et),le!==null?(ke=b,D=ii(D,le),D===null&&(B=b),b=D):(B=b,b=xe)):(B=b,b=xe),Ce--,b===null&&(D=null,Ce===0&&j(Ve)),b}function he(){var b;return b=ge(),b===null&&(b=Ie(),b===null&&(b=Me(),b===null&&(b=Be(),b===null&&(b=Oe(),b===null&&(b=Xe()))))),b}function ge(){var b,D,le,Ae,$e,qe;return b=B,R.charCodeAt(B)===123?(D=Lt,B++):(D=null,Ce===0&&j(Mt)),D!==null?(le=ze(),le!==null?(R.charCodeAt(B)===44?(Ae=An,B++):(Ae=null,Ce===0&&j(Rt)),Ae!==null?($e=ze(),$e!==null?(R.charCodeAt(B)===125?(qe=Ke,B++):(qe=null,Ce===0&&j(xi)),qe!==null?(ke=b,D=ni(le,$e),D===null&&(B=b),b=D):(B=b,b=xe)):(B=b,b=xe)):(B=b,b=xe)):(B=b,b=xe)):(B=b,b=xe),b}function Ie(){var b,D,le,Ae;return b=B,R.charCodeAt(B)===123?(D=Lt,B++):(D=null,Ce===0&&j(Mt)),D!==null?(le=ze(),le!==null?(R.substr(B,2)===Gi?(Ae=Gi,B+=2):(Ae=null,Ce===0&&j(Dn)),Ae!==null?(ke=b,D=In(le),D===null&&(B=b),b=D):(B=b,b=xe)):(B=b,b=xe)):(B=b,b=xe),b}function Me(){var b,D,le,Ae;return b=B,R.charCodeAt(B)===123?(D=Lt,B++):(D=null,Ce===0&&j(Mt)),D!==null?(le=ze(),le!==null?(R.charCodeAt(B)===125?(Ae=Ke,B++):(Ae=null,Ce===0&&j(xi)),Ae!==null?(ke=b,D=Wi(le),D===null&&(B=b),b=D):(B=b,b=xe)):(B=b,b=xe)):(B=b,b=xe),b}function Be(){var b,D;return b=B,R.charCodeAt(B)===43?(D=Ei,B++):(D=null,Ce===0&&j(Ci)),D!==null&&(ke=b,D=Ki()),D===null&&(B=b),b=D,b}function Oe(){var b,D;return b=B,R.charCodeAt(B)===42?(D=kn,B++):(D=null,Ce===0&&j(Pn)),D!==null&&(ke=b,D=ri()),D===null&&(B=b),b=D,b}function Xe(){var b,D;return b=B,R.charCodeAt(B)===63?(D=zt,B++):(D=null,Ce===0&&j(wi)),D!==null&&(ke=b,D=Gt()),D===null&&(B=b),b=D,b}function Ze(){var b;return R.charCodeAt(B)===63?(b=zt,B++):(b=null,Ce===0&&j(wi)),b}function ze(){var b,D,le;if(b=B,D=[],Nt.test(R.charAt(B))?(le=R.charAt(B),B++):(le=null,Ce===0&&j(Bt)),le!==null)for(;le!==null;)D.push(le),Nt.test(R.charAt(B))?(le=R.charAt(B),B++):(le=null,Ce===0&&j(Bt));else D=xe;return D!==null&&(ke=b,D=Wt(D)),D===null&&(B=b),b=D,b}function nt(){var b,D,le,Ae;return b=B,R.charCodeAt(B)===40?(D=Rn,B++):(D=null,Ce===0&&j(Xi)),D!==null?(le=z(),le===null&&(le=Y(),le===null&&(le=ot(),le===null&&(le=at()))),le!==null?(R.charCodeAt(B)===41?(Ae=On,B++):(Ae=null,Ce===0&&j(Ln)),Ae!==null?(ke=b,D=Dt(le),D===null&&(B=b),b=D):(B=b,b=xe)):(B=b,b=xe)):(B=b,b=xe),b}function at(){var b,D;return b=B,D=Z(),D!==null&&(ke=b,D=si(D)),D===null&&(B=b),b=D,b}function ot(){var b,D,le;return b=B,R.substr(B,2)===Yi?(D=Yi,B+=2):(D=null,Ce===0&&j(Ai)),D!==null?(le=Z(),le!==null?(ke=b,D=Di(le),D===null&&(B=b),b=D):(B=b,b=xe)):(B=b,b=xe),b}function z(){var b,D,le;return b=B,R.substr(B,2)===gt?(D=gt,B+=2):(D=null,Ce===0&&j(Mn)),D!==null?(le=Z(),le!==null?(ke=b,D=ai(le),D===null&&(B=b),b=D):(B=b,b=xe)):(B=b,b=xe),b}function Y(){var b,D,le;return b=B,R.substr(B,2)===Ft?(D=Ft,B+=2):(D=null,Ce===0&&j(oi)),D!==null?(le=Z(),le!==null?(ke=b,D=$t(le),D===null&&(B=b),b=D):(B=b,b=xe)):(B=b,b=xe),b}function te(){var b,D,le,Ae,$e;if(Ce++,b=B,R.charCodeAt(B)===91?(D=Qi,B++):(D=null,Ce===0&&j(ki)),D!==null)if(R.charCodeAt(B)===94?(le=dt,B++):(le=null,Ce===0&&j(Ye)),le===null&&(le=et),le!==null){for(Ae=[],$e=ye(),$e===null&&($e=ce());$e!==null;)Ae.push($e),$e=ye(),$e===null&&($e=ce());Ae!==null?(R.charCodeAt(B)===93?($e=Nn,B++):($e=null,Ce===0&&j(Bn)),$e!==null?(ke=b,D=$n(le,Ae),D===null&&(B=b),b=D):(B=b,b=xe)):(B=b,b=xe)}else B=b,b=xe;else B=b,b=xe;return Ce--,b===null&&(D=null,Ce===0&&j(Ii)),b}function ye(){var b,D,le,Ae;return Ce++,b=B,D=ce(),D!==null?(R.charCodeAt(B)===45?(le=Ji,B++):(le=null,Ce===0&&j(Un)),le!==null?(Ae=ce(),Ae!==null?(ke=b,D=Zi(D,Ae),D===null&&(B=b),b=D):(B=b,b=xe)):(B=b,b=xe)):(B=b,b=xe),Ce--,b===null&&(D=null,Ce===0&&j(li)),b}function ce(){var b;return Ce++,b=be(),b===null&&(b=_e()),Ce--,b===null&&Ce===0&&j(Hn),b}function _e(){var b,D;return b=B,en.test(R.charAt(B))?(D=R.charAt(B),B++):(D=null,Ce===0&&j(jn)),D!==null&&(ke=b,D=Ut(D)),D===null&&(B=b),b=D,b}function be(){var b;return b=Se(),b===null&&(b=ft(),b===null&&(b=Ne(),b===null&&(b=He(),b===null&&(b=je(),b===null&&(b=it(),b===null&&(b=Je(),b===null&&(b=rt(),b===null&&(b=Fe(),b===null&&(b=yt(),b===null&&(b=_t(),b===null&&(b=st(),b===null&&(b=lt(),b===null&&(b=Ot(),b===null&&(b=qt(),b===null&&(b=Si(),b===null&&(b=I(),b===null&&(b=O()))))))))))))))))),b}function ve(){var b;return b=fe(),b===null&&(b=we(),b===null&&(b=ue())),b}function fe(){var b,D;return b=B,R.charCodeAt(B)===46?(D=ui,B++):(D=null,Ce===0&&j(tn)),D!==null&&(ke=b,D=Vn()),D===null&&(B=b),b=D,b}function ue(){var b,D;return Ce++,b=B,nn.test(R.charAt(B))?(D=R.charAt(B),B++):(D=null,Ce===0&&j(rn)),D!==null&&(ke=b,D=Ut(D)),D===null&&(B=b),b=D,Ce--,b===null&&(D=null,Ce===0&&j(qn)),b}function we(){var b;return b=De(),b===null&&(b=Pe(),b===null&&(b=ft(),b===null&&(b=Ne(),b===null&&(b=He(),b===null&&(b=je(),b===null&&(b=it(),b===null&&(b=Je(),b===null&&(b=rt(),b===null&&(b=Fe(),b===null&&(b=yt(),b===null&&(b=_t(),b===null&&(b=st(),b===null&&(b=lt(),b===null&&(b=ti(),b===null&&(b=Ot(),b===null&&(b=qt(),b===null&&(b=Si(),b===null&&(b=I(),b===null&&(b=O()))))))))))))))))))),b}function Se(){var b,D;return b=B,R.substr(B,2)===ci?(D=ci,B+=2):(D=null,Ce===0&&j(Pi)),D!==null&&(ke=b,D=zn()),D===null&&(B=b),b=D,b}function De(){var b,D;return b=B,R.substr(B,2)===ci?(D=ci,B+=2):(D=null,Ce===0&&j(Pi)),D!==null&&(ke=b,D=Gn()),D===null&&(B=b),b=D,b}function Pe(){var b,D;return b=B,R.substr(B,2)===sn?(D=sn,B+=2):(D=null,Ce===0&&j(Wn)),D!==null&&(ke=b,D=Kn()),D===null&&(B=b),b=D,b}function Ne(){var b,D;return b=B,R.substr(B,2)===an?(D=an,B+=2):(D=null,Ce===0&&j(Ri)),D!==null&&(ke=b,D=Xn()),D===null&&(B=b),b=D,b}function He(){var b,D;return b=B,R.substr(B,2)===Oi?(D=Oi,B+=2):(D=null,Ce===0&&j(di)),D!==null&&(ke=b,D=Yn()),D===null&&(B=b),b=D,b}function je(){var b,D;return b=B,R.substr(B,2)===ln?(D=ln,B+=2):(D=null,Ce===0&&j(Qn)),D!==null&&(ke=b,D=Jn()),D===null&&(B=b),b=D,b}function it(){var b,D;return b=B,R.substr(B,2)===un?(D=un,B+=2):(D=null,Ce===0&&j(hi)),D!==null&&(ke=b,D=Kt()),D===null&&(B=b),b=D,b}function Je(){var b,D;return b=B,R.substr(B,2)===Ht?(D=Ht,B+=2):(D=null,Ce===0&&j(fi)),D!==null&&(ke=b,D=bt()),D===null&&(B=b),b=D,b}function rt(){var b,D;return b=B,R.substr(B,2)===Et?(D=Et,B+=2):(D=null,Ce===0&&j(pi)),D!==null&&(ke=b,D=cn()),D===null&&(B=b),b=D,b}function Fe(){var b,D;return b=B,R.substr(B,2)===dn?(D=dn,B+=2):(D=null,Ce===0&&j(Zn)),D!==null&&(ke=b,D=er()),D===null&&(B=b),b=D,b}function yt(){var b,D;return b=B,R.substr(B,2)===hn?(D=hn,B+=2):(D=null,Ce===0&&j(fn)),D!==null&&(ke=b,D=pn()),D===null&&(B=b),b=D,b}function _t(){var b,D;return b=B,R.substr(B,2)===Xt?(D=Xt,B+=2):(D=null,Ce===0&&j(Yt)),D!==null&&(ke=b,D=mi()),D===null&&(B=b),b=D,b}function st(){var b,D;return b=B,R.substr(B,2)===It?(D=It,B+=2):(D=null,Ce===0&&j(tr)),D!==null&&(ke=b,D=mn()),D===null&&(B=b),b=D,b}function lt(){var b,D;return b=B,R.substr(B,2)===Li?(D=Li,B+=2):(D=null,Ce===0&&j(gn)),D!==null&&(ke=b,D=ir()),D===null&&(B=b),b=D,b}function ft(){var b,D,le;return b=B,R.substr(B,2)===yn?(D=yn,B+=2):(D=null,Ce===0&&j(nr)),D!==null?(R.length>B?(le=R.charAt(B),B++):(le=null,Ce===0&&j(Qt)),le!==null?(ke=b,D=rr(le),D===null&&(B=b),b=D):(B=b,b=xe)):(B=b,b=xe),b}function ti(){var b,D,le;return b=B,R.charCodeAt(B)===92?(D=Mi,B++):(D=null,Ce===0&&j(_n)),D!==null?(sr.test(R.charAt(B))?(le=R.charAt(B),B++):(le=null,Ce===0&&j(vn)),le!==null?(ke=b,D=Ni(le),D===null&&(B=b),b=D):(B=b,b=xe)):(B=b,b=xe),b}function Ot(){var b,D,le,Ae;if(b=B,R.substr(B,2)===gi?(D=gi,B+=2):(D=null,Ce===0&&j(Tn)),D!==null){if(le=[],bn.test(R.charAt(B))?(Ae=R.charAt(B),B++):(Ae=null,Ce===0&&j(yi)),Ae!==null)for(;Ae!==null;)le.push(Ae),bn.test(R.charAt(B))?(Ae=R.charAt(B),B++):(Ae=null,Ce===0&&j(yi));else le=xe;le!==null?(ke=b,D=ar(le),D===null&&(B=b),b=D):(B=b,b=xe)}else B=b,b=xe;return b}function qt(){var b,D,le,Ae;if(b=B,R.substr(B,2)===Bi?(D=Bi,B+=2):(D=null,Ce===0&&j(or)),D!==null){if(le=[],_i.test(R.charAt(B))?(Ae=R.charAt(B),B++):(Ae=null,Ce===0&&j(Jt)),Ae!==null)for(;Ae!==null;)le.push(Ae),_i.test(R.charAt(B))?(Ae=R.charAt(B),B++):(Ae=null,Ce===0&&j(Jt));else le=xe;le!==null?(ke=b,D=lr(le),D===null&&(B=b),b=D):(B=b,b=xe)}else B=b,b=xe;return b}function Si(){var b,D,le,Ae;if(b=B,R.substr(B,2)===Fi?(D=Fi,B+=2):(D=null,Ce===0&&j(Sn)),D!==null){if(le=[],_i.test(R.charAt(B))?(Ae=R.charAt(B),B++):(Ae=null,Ce===0&&j(Jt)),Ae!==null)for(;Ae!==null;)le.push(Ae),_i.test(R.charAt(B))?(Ae=R.charAt(B),B++):(Ae=null,Ce===0&&j(Jt));else le=xe;le!==null?(ke=b,D=xn(le),D===null&&(B=b),b=D):(B=b,b=xe)}else B=b,b=xe;return b}function I(){var b,D;return b=B,R.substr(B,2)===gi?(D=gi,B+=2):(D=null,Ce===0&&j(Tn)),D!==null&&(ke=b,D=ur()),D===null&&(B=b),b=D,b}function O(){var b,D,le;return b=B,R.charCodeAt(B)===92?(D=Mi,B++):(D=null,Ce===0&&j(_n)),D!==null?(R.length>B?(le=R.charAt(B),B++):(le=null,Ce===0&&j(Qt)),le!==null?(ke=b,D=Ut(le),D===null&&(B=b),b=D):(B=b,b=xe)):(B=b,b=xe),b}var K,ie=arguments.length>1?arguments[1]:{},Te={regexp:Z},Le=Z,xe=null,et="",vt="|",ct='"|"',pt=function(b,D){return D?new s(b,D[1]):b},Tt=function(b,D,le){return new a([b].concat(D).concat([le]))},dt="^",Ye='"^"',mt=function(){return new n("start")},wt="$",xt='"$"',We=function(){return new n("end")},Pt=function(b,D){return new u(b,D)},Ve="Quantifier",ii=function(b,D){return D&&(b.greedy=!1),b},Lt="{",Mt='"{"',An=",",Rt='","',Ke="}",xi='"}"',ni=function(b,D){return new c(b,D)},Gi=",}",Dn='",}"',In=function(b){return new c(b,1/0)},Wi=function(b){return new c(b,b)},Ei="+",Ci='"+"',Ki=function(){return new c(1,1/0)},kn="*",Pn='"*"',ri=function(){return new c(0,1/0)},zt="?",wi='"?"',Gt=function(){return new c(0,1)},Nt=/^[0-9]/,Bt="[0-9]",Wt=function(b){return+b.join("")},Rn="(",Xi='"("',On=")",Ln='")"',Dt=function(b){return b},si=function(b){return new l(b)},Yi="?:",Ai='"?:"',Di=function(b){return new o("non-capture-group",b)},gt="?=",Mn='"?="',ai=function(b){return new o("positive-lookahead",b)},Ft="?!",oi='"?!"',$t=function(b){return new o("negative-lookahead",b)},Ii="CharacterSet",Qi="[",ki='"["',Nn="]",Bn='"]"',$n=function(b,D){return new f(!!b,D)},li="CharacterRange",Ji="-",Un='"-"',Zi=function(b,D){return new m(b,D)},Hn="Character",en=/^[^\\\]]/,jn="[^\\\\\\]]",Ut=function(b){return new v(b)},ui=".",tn='"."',Vn=function(){return new n("any-character")},qn="Literal",nn=/^[^|\\\/.[()?+*$\^]/,rn="[^|\\\\\\/.[()?+*$\\^]",ci="\\b",Pi='"\\\\b"',zn=function(){return new n("backspace")},Gn=function(){return new n("word-boundary")},sn="\\B",Wn='"\\\\B"',Kn=function(){return new n("non-word-boundary")},an="\\d",Ri='"\\\\d"',Xn=function(){return new n("digit")},Oi="\\D",di='"\\\\D"',Yn=function(){return new n("non-digit")},ln="\\f",Qn='"\\\\f"',Jn=function(){return new n("form-feed")},un="\\n",hi='"\\\\n"',Kt=function(){return new n("line-feed")},Ht="\\r",fi='"\\\\r"',bt=function(){return new n("carriage-return")},Et="\\s",pi='"\\\\s"',cn=function(){return new n("white-space")},dn="\\S",Zn='"\\\\S"',er=function(){return new n("non-white-space")},hn="\\t",fn='"\\\\t"',pn=function(){return new n("tab")},Xt="\\v",Yt='"\\\\v"',mi=function(){return new n("vertical-tab")},It="\\w",tr='"\\\\w"',mn=function(){return new n("word")},Li="\\W",gn='"\\\\W"',ir=function(){return new n("non-word")},yn="\\c",nr='"\\\\c"',Qt="any character",rr=function(b){return new k(b)},Mi="\\",_n='"\\\\"',sr=/^[1-9]/,vn="[1-9]",Ni=function(b){return new S(b)},gi="\\0",Tn='"\\\\0"',bn=/^[0-7]/,yi="[0-7]",ar=function(b){return new w(b.join(""))},Bi="\\x",or='"\\\\x"',_i=/^[0-9a-fA-F]/,Jt="[0-9a-fA-F]",lr=function(b){return new C(b.join(""))},Fi="\\u",Sn='"\\\\u"',xn=function(b){return new x(b.join(""))},ur=function(){return new n("null-character")},B=0,ke=0,Zt=0,$i={line:1,column:1,seenCR:!1},vi=0,Ti=[],Ce=0;if("startRule"in ie){if(!(ie.startRule in Te))throw new Error(`Can't start parsing from rule "`+ie.startRule+'".');Le=Te[ie.startRule]}if(n.offset=A,n.text=Q,K=Le(),K!==null&&B===R.length)return K;throw X(Ti),ke=Math.max(B,vi),new G(Ti,ke<R.length?R.charAt(ke):null,ke,P(ke).line,P(ke).column)}return F(G,Error),{SyntaxError:G,parse:W}}(),V=1,H={};r.exports=M},function(r,e,n){var s=n(3),a=n(5),o={extend:s.extend},l=C(97,122),u=C(65,90),c=C(48,57),f=C(32,47)+C(58,64)+C(91,96)+C(123,126),m=C(32,126),v=` \f
\r	\v \u2028\u2029`,x={"\\w":l+u+c+"_","\\W":f.replace("_",""),"\\s":v,"\\S":function(){for(var w=m,S=0;S<v.length;S++)w=w.replace(v[S],"");return w}(),"\\d":c,"\\D":l+u+f};function C(w,S){for(var k="",M=w;M<=S;M++)k+=String.fromCharCode(M);return k}o.gen=function(w,S,k){return k=k||{guid:1},o[w.type]?o[w.type](w,S,k):o.token(w,S,k)},o.extend({token:function(w,S,k){switch(w.type){case"start":case"end":return"";case"any-character":return a.character();case"backspace":return"";case"word-boundary":return"";case"non-word-boundary":break;case"digit":return a.pick(c.split(""));case"non-digit":return a.pick((l+u+f).split(""));case"form-feed":break;case"line-feed":return w.body||w.text;case"carriage-return":break;case"white-space":return a.pick(v.split(""));case"non-white-space":return a.pick((l+u+c).split(""));case"tab":break;case"vertical-tab":break;case"word":return a.pick((l+u+c).split(""));case"non-word":return a.pick(f.replace("_","").split(""))}return w.body||w.text},alternate:function(w,S,k){return this.gen(a.boolean()?w.left:w.right,S,k)},match:function(w,S,k){S="";for(var M=0;M<w.body.length;M++)S+=this.gen(w.body[M],S,k);return S},"capture-group":function(w,S,k){return S=this.gen(w.body,S,k),k[k.guid++]=S,S},"non-capture-group":function(w,S,k){return this.gen(w.body,S,k)},"positive-lookahead":function(w,S,k){return this.gen(w.body,S,k)},"negative-lookahead":function(w,S,k){return""},quantified:function(w,S,k){S="";for(var M=this.quantifier(w.quantifier),V=0;V<M;V++)S+=this.gen(w.body,S,k);return S},quantifier:function(w,S,k){var M=Math.max(w.min,0),V=isFinite(w.max)?w.max:M+a.integer(3,7);return a.integer(M,V)},charset:function(w,S,k){if(w.invert)return this["invert-charset"](w,S,k);var M=a.pick(w.body);return this.gen(M,S,k)},"invert-charset":function(w,S,k){for(var M=m,V=0,H;V<w.body.length;V++)switch(H=w.body[V],H.type){case"literal":M=M.replace(H.body,"");break;case"range":for(var F=this.gen(H.start,S,k).charCodeAt(),G=this.gen(H.end,S,k).charCodeAt(),W=F;W<=G;W++)M=M.replace(String.fromCharCode(W),"");default:var R=x[H.text];if(R)for(var Q=0;Q<=R.length;Q++)M=M.replace(R[Q],"")}return a.pick(M.split(""))},range:function(w,S,k){var M=this.gen(w.start,S,k).charCodeAt(),V=this.gen(w.end,S,k).charCodeAt();return String.fromCharCode(a.integer(M,V))},literal:function(w,S,k){return w.escaped?w.body:w.text},unicode:function(w,S,k){return String.fromCharCode(parseInt(w.code,16))},hex:function(w,S,k){return String.fromCharCode(parseInt(w.code,16))},octal:function(w,S,k){return String.fromCharCode(parseInt(w.code,8))},"back-reference":function(w,S,k){return k[w.code]||""},CONTROL_CHARACTER_MAP:function(){for(var w="@ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ \\ ] ^ _".split(" "),S=`\0       \x07 \b 	 
 \v \f \r              \x1B    `.split(" "),k={},M=0;M<w.length;M++)k[w[M]]=S[M];return k}(),"control-character":function(w,S,k){return this.CONTROL_CHARACTER_MAP[w.code]}}),r.exports=o},function(r,e,n){r.exports=n(24)},function(r,e,n){var s=n(2),a=n(3),o=n(4);function l(u,c,f){f=f||[];var m={name:typeof c=="string"?c.replace(s.RE_KEY,"$1"):c,template:u,type:a.type(u),rule:o.parse(c)};switch(m.path=f.slice(0),m.path.push(c===void 0?"ROOT":m.name),m.type){case"array":m.items=[],a.each(u,function(v,x){m.items.push(l(v,x,m.path))});break;case"object":m.properties=[],a.each(u,function(v,x){m.properties.push(l(v,x,m.path))});break}return m}r.exports=l},function(r,e,n){r.exports=n(26)},function(r,e,n){var s=n(2),a=n(3),o=n(23);function l(f,m){for(var v=o(f),x=u.diff(v,m),C=0;C<x.length;C++);return x}var u={diff:function(m,v,x){var C=[];return this.name(m,v,x,C)&&this.type(m,v,x,C)&&(this.value(m,v,x,C),this.properties(m,v,x,C),this.items(m,v,x,C)),C},name:function(f,m,v,x){var C=x.length;return c.equal("name",f.path,v+"",f.name+"",x),x.length===C},type:function(f,m,v,x){var C=x.length;switch(f.type){case"string":if(f.template.match(s.RE_PLACEHOLDER))return!0;break;case"array":if(f.rule.parameters&&(f.rule.min!==void 0&&f.rule.max===void 0&&f.rule.count===1||f.rule.parameters[2]))return!0;break;case"function":return!0}return c.equal("type",f.path,a.type(m),f.type,x),x.length===C},value:function(f,m,v,x){var C=x.length,w=f.rule,S=f.type;if(S==="object"||S==="array"||S==="function")return!0;if(!w.parameters){switch(S){case"regexp":return c.match("value",f.path,m,f.template,x),x.length===C;case"string":if(f.template.match(s.RE_PLACEHOLDER))return x.length===C;break}return c.equal("value",f.path,m,f.template,x),x.length===C}var k;switch(S){case"number":var M=(m+"").split(".");M[0]=+M[0],w.min!==void 0&&w.max!==void 0&&(c.greaterThanOrEqualTo("value",f.path,M[0],Math.min(w.min,w.max),x),c.lessThanOrEqualTo("value",f.path,M[0],Math.max(w.min,w.max),x)),w.min!==void 0&&w.max===void 0&&c.equal("value",f.path,M[0],w.min,x,"[value] "+v),w.decimal&&(w.dmin!==void 0&&w.dmax!==void 0&&(c.greaterThanOrEqualTo("value",f.path,M[1].length,w.dmin,x),c.lessThanOrEqualTo("value",f.path,M[1].length,w.dmax,x)),w.dmin!==void 0&&w.dmax===void 0&&c.equal("value",f.path,M[1].length,w.dmin,x));break;case"boolean":break;case"string":k=m.match(new RegExp(f.template,"g")),k=k?k.length:0,w.min!==void 0&&w.max!==void 0&&(c.greaterThanOrEqualTo("repeat count",f.path,k,w.min,x),c.lessThanOrEqualTo("repeat count",f.path,k,w.max,x)),w.min!==void 0&&w.max===void 0&&c.equal("repeat count",f.path,k,w.min,x);break;case"regexp":k=m.match(new RegExp(f.template.source.replace(/^\^|\$$/g,""),"g")),k=k?k.length:0,w.min!==void 0&&w.max!==void 0&&(c.greaterThanOrEqualTo("repeat count",f.path,k,w.min,x),c.lessThanOrEqualTo("repeat count",f.path,k,w.max,x)),w.min!==void 0&&w.max===void 0&&c.equal("repeat count",f.path,k,w.min,x);break}return x.length===C},properties:function(f,m,v,x){var C=x.length,w=f.rule,S=a.keys(m);if(f.properties){if(f.rule.parameters?(w.min!==void 0&&w.max!==void 0&&(c.greaterThanOrEqualTo("properties length",f.path,S.length,Math.min(w.min,w.max),x),c.lessThanOrEqualTo("properties length",f.path,S.length,Math.max(w.min,w.max),x)),w.min!==void 0&&w.max===void 0&&w.count!==1&&c.equal("properties length",f.path,S.length,w.min,x)):c.equal("properties length",f.path,S.length,f.properties.length,x),x.length!==C)return!1;for(var k=0;k<S.length;k++)x.push.apply(x,this.diff(function(){var M;return a.each(f.properties,function(V){V.name===S[k]&&(M=V)}),M||f.properties[k]}(),m[S[k]],S[k]));return x.length===C}},items:function(f,m,v,x){var C=x.length;if(f.items){var w=f.rule;if(!f.rule.parameters)c.equal("items length",f.path,m.length,f.items.length,x);else{if(w.min!==void 0&&w.max!==void 0&&(c.greaterThanOrEqualTo("items",f.path,m.length,Math.min(w.min,w.max)*f.items.length,x,"[{utype}] array is too short: {path} must have at least {expected} elements but instance has {actual} elements"),c.lessThanOrEqualTo("items",f.path,m.length,Math.max(w.min,w.max)*f.items.length,x,"[{utype}] array is too long: {path} must have at most {expected} elements but instance has {actual} elements")),w.min!==void 0&&w.max===void 0){if(w.count===1)return x.length===C;c.equal("items length",f.path,m.length,w.min*f.items.length,x)}if(w.parameters[2])return x.length===C}if(x.length!==C)return!1;for(var S=0;S<m.length;S++)x.push.apply(x,this.diff(f.items[S%f.items.length],m[S],S%f.items.length));return x.length===C}}},c={message:function(f){return(f.message||"[{utype}] Expect {path}'{ltype} {action} {expected}, but is {actual}").replace("{utype}",f.type.toUpperCase()).replace("{ltype}",f.type.toLowerCase()).replace("{path}",a.isArray(f.path)&&f.path.join(".")||f.path).replace("{action}",f.action).replace("{expected}",f.expected).replace("{actual}",f.actual)},equal:function(f,m,v,x,C,w){if(v===x)return!0;switch(f){case"type":if(x==="regexp"&&v==="string")return!0;break}var S={path:m,type:f,actual:v,expected:x,action:"is equal to",message:w};return S.message=c.message(S),C.push(S),!1},match:function(f,m,v,x,C,w){if(x.test(v))return!0;var S={path:m,type:f,actual:v,expected:x,action:"matches",message:w};return S.message=c.message(S),C.push(S),!1},notEqual:function(f,m,v,x,C,w){if(v!==x)return!0;var S={path:m,type:f,actual:v,expected:x,action:"is not equal to",message:w};return S.message=c.message(S),C.push(S),!1},greaterThan:function(f,m,v,x,C,w){if(v>x)return!0;var S={path:m,type:f,actual:v,expected:x,action:"is greater than",message:w};return S.message=c.message(S),C.push(S),!1},lessThan:function(f,m,v,x,C,w){if(v<x)return!0;var S={path:m,type:f,actual:v,expected:x,action:"is less to",message:w};return S.message=c.message(S),C.push(S),!1},greaterThanOrEqualTo:function(f,m,v,x,C,w){if(v>=x)return!0;var S={path:m,type:f,actual:v,expected:x,action:"is greater than or equal to",message:w};return S.message=c.message(S),C.push(S),!1},lessThanOrEqualTo:function(f,m,v,x,C,w){if(v<=x)return!0;var S={path:m,type:f,actual:v,expected:x,action:"is less than or equal to",message:w};return S.message=c.message(S),C.push(S),!1}};l.Diff=u,l.Assert=c,r.exports=l},function(r,e,n){r.exports=n(28)},function(r,e,n){var s=n(3);window._XMLHttpRequest=window.XMLHttpRequest,window._ActiveXObject=window.ActiveXObject;try{new window.Event("custom")}catch{window.Event=function(w,S,k,M){var V=document.createEvent("CustomEvent");return V.initCustomEvent(w,S,k,M),V}}var a={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},o="readystatechange loadstart progress abort error load timeout loadend".split(" "),l="timeout withCredentials".split(" "),u="readyState responseURL status statusText responseType response responseText responseXML".split(" "),c={200:"OK"};function f(){this.custom={events:{},requestHeaders:{},responseHeaders:{}}}f._settings={timeout:"10-100"},f.setup=function(C){return s.extend(f._settings,C),f._settings},s.extend(f,a),s.extend(f.prototype,a),f.prototype.mock=!0,f.prototype.match=!1,s.extend(f.prototype,{open:function(C,w,S,k,M){var V=this;s.extend(this.custom,{method:C,url:w,async:typeof S=="boolean"?S:!0,username:k,password:M,options:{url:w,type:C}}),this.custom.timeout=function(Q){if(typeof Q=="number")return Q;if(typeof Q=="string"&&!~Q.indexOf("-"))return parseInt(Q,10);if(typeof Q=="string"&&~Q.indexOf("-")){var A=Q.split("-"),P=parseInt(A[0],10),j=parseInt(A[1],10);return Math.round(Math.random()*(j-P))+P}}(f._settings.timeout);var H=v(this.custom.options);function F(Q){for(var A=0;A<u.length;A++)try{V[u[A]]=G[u[A]]}catch{}V.dispatchEvent(new Event(Q.type))}if(!H){var G=m();this.custom.xhr=G;for(var W=0;W<o.length;W++)G.addEventListener(o[W],F);k?G.open(C,w,S,k,M):G.open(C,w,S);for(var R=0;R<l.length;R++)try{G[l[R]]=V[l[R]]}catch{}return}this.match=!0,this.custom.template=H,this.readyState=f.OPENED,this.dispatchEvent(new Event("readystatechange"))},setRequestHeader:function(C,w){if(!this.match){this.custom.xhr.setRequestHeader(C,w);return}var S=this.custom.requestHeaders;S[C]?S[C]+=","+w:S[C]=w},timeout:0,withCredentials:!1,upload:{},send:function(w){var S=this;if(this.custom.options.body=w,!this.match){this.custom.xhr.send(w);return}this.setRequestHeader("X-Requested-With","MockXMLHttpRequest"),this.dispatchEvent(new Event("loadstart")),this.custom.async?setTimeout(k,this.custom.timeout):k();function k(){S.readyState=f.HEADERS_RECEIVED,S.dispatchEvent(new Event("readystatechange")),S.readyState=f.LOADING,S.dispatchEvent(new Event("readystatechange")),S.status=200,S.statusText=c[200],S.response=S.responseText=JSON.stringify(x(S.custom.template,S.custom.options),null,4),S.readyState=f.DONE,S.dispatchEvent(new Event("readystatechange")),S.dispatchEvent(new Event("load")),S.dispatchEvent(new Event("loadend"))}},abort:function(){if(!this.match){this.custom.xhr.abort();return}this.readyState=f.UNSENT,this.dispatchEvent(new Event("abort",!1,!1,this)),this.dispatchEvent(new Event("error",!1,!1,this))}}),s.extend(f.prototype,{responseURL:"",status:f.UNSENT,statusText:"",getResponseHeader:function(C){return this.match?this.custom.responseHeaders[C.toLowerCase()]:this.custom.xhr.getResponseHeader(C)},getAllResponseHeaders:function(){if(!this.match)return this.custom.xhr.getAllResponseHeaders();var C=this.custom.responseHeaders,w="";for(var S in C)C.hasOwnProperty(S)&&(w+=S+": "+C[S]+`\r
`);return w},overrideMimeType:function(){},responseType:"",response:null,responseText:"",responseXML:null}),s.extend(f.prototype,{addEventListener:function(w,S){var k=this.custom.events;k[w]||(k[w]=[]),k[w].push(S)},removeEventListener:function(w,S){for(var k=this.custom.events[w]||[],M=0;M<k.length;M++)k[M]===S&&k.splice(M--,1)},dispatchEvent:function(w){for(var S=this.custom.events[w.type]||[],k=0;k<S.length;k++)S[k].call(this,w);var M="on"+w.type;this[M]&&this[M](w)}});function m(){var C=function(){var k=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,M=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,V=location.href,H=M.exec(V.toLowerCase())||[];return k.test(H[1])}();return window.ActiveXObject?!C&&w()||S():w();function w(){try{return new window._XMLHttpRequest}catch{}}function S(){try{return new window._ActiveXObject("Microsoft.XMLHTTP")}catch{}}}function v(C){for(var w in f.Mock._mocked){var S=f.Mock._mocked[w];if((!S.rurl||k(S.rurl,C.url))&&(!S.rtype||k(S.rtype,C.type.toLowerCase())))return S}function k(M,V){if(s.type(M)==="string")return M===V;if(s.type(M)==="regexp")return M.test(V)}}function x(C,w){return s.isFunction(C.template)?C.template(w):f.Mock.mock(C.template)}r.exports=f}])})}(mock$1)),mock$1.exports}var mockExports=requireMock();const Mock=getDefaultExportFromCjs(mockExports);var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol$1=root.Symbol,objectProto$1=Object.prototype,hasOwnProperty=objectProto$1.hasOwnProperty,nativeObjectToString$1=objectProto$1.toString,symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0;function getRawTag(r){var e=hasOwnProperty.call(r,symToStringTag$1),n=r[symToStringTag$1];try{r[symToStringTag$1]=void 0;var s=!0}catch{}var a=nativeObjectToString$1.call(r);return s&&(e?r[symToStringTag$1]=n:delete r[symToStringTag$1]),a}var objectProto=Object.prototype,nativeObjectToString=objectProto.toString;function objectToString(r){return nativeObjectToString.call(r)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag(r){return r==null?r===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(r)?getRawTag(r):objectToString(r)}function isObjectLike(r){return r!=null&&typeof r=="object"}var symbolTag="[object Symbol]";function isSymbol(r){return typeof r=="symbol"||isObjectLike(r)&&baseGetTag(r)==symbolTag}var reWhitespace=/\s/;function trimmedEndIndex(r){for(var e=r.length;e--&&reWhitespace.test(r.charAt(e)););return e}var reTrimStart=/^\s+/;function baseTrim(r){return r&&r.slice(0,trimmedEndIndex(r)+1).replace(reTrimStart,"")}function isObject$2(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(r){if(typeof r=="number")return r;if(isSymbol(r))return NAN;if(isObject$2(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=isObject$2(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=baseTrim(r);var n=reIsBinary.test(r);return n||reIsOctal.test(r)?freeParseInt(r.slice(2),n?2:8):reIsBadHex.test(r)?NAN:+r}var now=function(){return root.Date.now()},FUNC_ERROR_TEXT$1="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce$2(r,e,n){var s,a,o,l,u,c,f=0,m=!1,v=!1,x=!0;if(typeof r!="function")throw new TypeError(FUNC_ERROR_TEXT$1);e=toNumber(e)||0,isObject$2(n)&&(m=!!n.leading,v="maxWait"in n,o=v?nativeMax(toNumber(n.maxWait)||0,e):o,x="trailing"in n?!!n.trailing:x);function C(W){var R=s,Q=a;return s=a=void 0,f=W,l=r.apply(Q,R),l}function w(W){return f=W,u=setTimeout(M,e),m?C(W):l}function S(W){var R=W-c,Q=W-f,A=e-R;return v?nativeMin(A,o-Q):A}function k(W){var R=W-c,Q=W-f;return c===void 0||R>=e||R<0||v&&Q>=o}function M(){var W=now();if(k(W))return V(W);u=setTimeout(M,S(W))}function V(W){return u=void 0,x&&s?C(W):(s=a=void 0,l)}function H(){u!==void 0&&clearTimeout(u),f=0,s=c=a=u=void 0}function F(){return u===void 0?l:V(now())}function G(){var W=now(),R=k(W);if(s=arguments,a=this,c=W,R){if(u===void 0)return w(c);if(v)return clearTimeout(u),u=setTimeout(M,e),C(c)}return u===void 0&&(u=setTimeout(M,e)),l}return G.cancel=H,G.flush=F,G}var FUNC_ERROR_TEXT="Expected a function";function throttle$1(r,e,n){var s=!0,a=!0;if(typeof r!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject$2(n)&&(s="leading"in n?!!n.leading:s,a="trailing"in n?!!n.trailing:a),debounce$2(r,e,{leading:s,maxWait:e,trailing:a})}const _hoisted_1={class:"demo"},_hoisted_2={class:"content"},_hoisted_3=["src"],_hoisted_4={key:1},_hoisted_5=["id","poster"],_hoisted_6={class:"title"},_hoisted_7={class:"label"},_hoisted_8={class:"bottom"},_hoisted_9={class:"user"},_hoisted_10=["src"],_hoisted_11={class:"name"},_hoisted_12={class:"like"},_hoisted_13={class:"count"},_sfc_main$1=defineComponent({__name:"HelloWorld",setup(r){const e=ref(!1),n=ref([]);ref(1),ref(!1);const s=ref(null);watchEffect(()=>{}),onMounted(()=>{setTimeout(()=>{a()},300),s.value.addEventListener("scroll",u)}),onUnmounted(()=>{});const a=()=>{const c=l(),f=Mock.mock({"list|10":[{id:"@id",title:"@title(2, 5)",content:c.type!=="video"?()=>({img:Mock.Random.image()}):()=>({video:Mock.Random.image()}),"label|2":["@word(1, 3)","@word(2, 4)"],user:{name:"@cname",avatar:"@image(18x18, #ffcc33)"},like:"@integer(0, 100)"}]}).list;n.value.push(...f)},o=()=>{setTimeout(()=>{showToast("刷新成功"),e.value=!1,n.value=[],a()},1e3)},l=()=>{const c=window.location.search.substring(1),f={};return c.split("&").forEach(m=>{const[v,x]=m.split("=");f[v]=decodeURIComponent(x||"")}),f},u=throttle$1(c=>{const{scrollTop:f,scrollHeight:m,clientHeight:v}=c.srcElement;f+v>=m-100&&a()},300);return(c,f)=>{const m=resolveComponent("van-icon"),v=resolveComponent("van-pull-refresh");return openBlock(),createElementBlock("div",_hoisted_1,[createVNode(v,{modelValue:e.value,"onUpdate:modelValue":f[0]||(f[0]=x=>e.value=x),onRefresh:o},{default:withCtx(()=>[createBaseVNode("div",{ref_key:"scrollContainer",ref:s,class:"list-container"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.value,(x,C)=>{var w,S,k;return openBlock(),createElementBlock("div",{key:x.id,class:"list-item",style:normalizeStyle({padding:C%2===0?"0 0 20px 10px":"20px 10px 0 0",height:(C%2===0,"calc(30vh - 20px)")})},[createBaseVNode("div",_hoisted_2,[(w=x==null?void 0:x.content)!=null&&w.img?(openBlock(),createElementBlock("img",{key:0,src:x.content.img},null,8,_hoisted_3)):createCommentVNode("",!0),(S=x==null?void 0:x.content)!=null&&S.video?(openBlock(),createElementBlock("div",_hoisted_4,[createBaseVNode("video",{id:`my-player-${x.id}`,class:"video-js",controls:"",preload:"auto",poster:(k=x==null?void 0:x.content)==null?void 0:k.video,"data-setup":"{}"},f[1]||(f[1]=[createBaseVNode("source",{src:"//vjs.zencdn.net/v/oceans.mp4",type:"video/mp4"},null,-1),createBaseVNode("source",{src:"//vjs.zencdn.net/v/oceans.webm",type:"video/webm"},null,-1),createBaseVNode("source",{src:"//vjs.zencdn.net/v/oceans.ogv",type:"video/ogg"},null,-1)]),8,_hoisted_5)])):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_6,toDisplayString(x.title),1),createBaseVNode("div",_hoisted_7,[(openBlock(!0),createElementBlock(Fragment,null,renderList(x.label,M=>(openBlock(),createElementBlock("div",{key:M,class:"tag"},toDisplayString(M),1))),128))]),createBaseVNode("div",_hoisted_8,[createBaseVNode("div",_hoisted_9,[createBaseVNode("img",{class:"avatar",src:x.user.avatar},null,8,_hoisted_10),createBaseVNode("div",_hoisted_11,toDisplayString(x.user.name),1)]),createBaseVNode("div",_hoisted_12,[createVNode(m,{name:"like-o"}),createBaseVNode("span",_hoisted_13,toDisplayString(x.like),1)])])],4)}),128))],512)]),_:1},8,["modelValue"])])}}}),_export_sfc=(r,e)=>{const n=r.__vccOpts||r;for(const[s,a]of e)n[s]=a;return n},HelloWorld=_export_sfc(_sfc_main$1,[["__scopeId","data-v-4ea9fe10"]]),_sfc_main=defineComponent({__name:"App",setup(r){return(e,n)=>(openBlock(),createBlock(HelloWorld))}});var window_1,hasRequiredWindow;function requireWindow(){if(hasRequiredWindow)return window_1;hasRequiredWindow=1;var r;return typeof window<"u"?r=window:typeof commonjsGlobal<"u"?r=commonjsGlobal:typeof self<"u"?r=self:r={},window_1=r,window_1}var windowExports=requireWindow();const window$1=getDefaultExportFromCjs(windowExports),__viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var document_1,hasRequiredDocument;function requireDocument(){if(hasRequiredDocument)return document_1;hasRequiredDocument=1;var r=typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:{},e=require$$0,n;return typeof document<"u"?n=document:(n=r["__GLOBAL_DOCUMENT_CACHE@4"],n||(n=r["__GLOBAL_DOCUMENT_CACHE@4"]=e)),document_1=n,document_1}var documentExports=requireDocument();const document$1=getDefaultExportFromCjs(documentExports);var lib$1={exports:{}},_extends$1={exports:{}},hasRequired_extends;function require_extends(){return hasRequired_extends||(hasRequired_extends=1,function(r){function e(){return r.exports=e=Object.assign?Object.assign.bind():function(n){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var o in a)({}).hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},r.exports.__esModule=!0,r.exports.default=r.exports,e.apply(null,arguments)}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports}(_extends$1)),_extends$1.exports}var isFunction_1,hasRequiredIsFunction;function requireIsFunction(){if(hasRequiredIsFunction)return isFunction_1;hasRequiredIsFunction=1,isFunction_1=e;var r=Object.prototype.toString;function e(n){if(!n)return!1;var s=r.call(n);return s==="[object Function]"||typeof n=="function"&&s!=="[object RegExp]"||typeof window<"u"&&(n===window.setTimeout||n===window.alert||n===window.confirm||n===window.prompt)}return isFunction_1}var interceptors,hasRequiredInterceptors;function requireInterceptors(){if(hasRequiredInterceptors)return interceptors;hasRequiredInterceptors=1;function r(a,o){var l=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(l)return(l=l.call(a)).next.bind(l);if(Array.isArray(a)||(l=e(a))||o){l&&(a=l);var u=0;return function(){return u>=a.length?{done:!0}:{done:!1,value:a[u++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e(a,o){if(a){if(typeof a=="string")return n(a,o);var l=Object.prototype.toString.call(a).slice(8,-1);if(l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set")return Array.from(a);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return n(a,o)}}function n(a,o){(o==null||o>a.length)&&(o=a.length);for(var l=0,u=new Array(o);l<o;l++)u[l]=a[l];return u}var s=function(){function a(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var o=a.prototype;return o.getIsEnabled=function(){return this.enabled_},o.enable=function(){this.enabled_=!0},o.disable=function(){this.enabled_=!1},o.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},o.addInterceptor=function(u,c){this.typeToInterceptorsMap_.has(u)||this.typeToInterceptorsMap_.set(u,new Set);var f=this.typeToInterceptorsMap_.get(u);return f.has(c)?!1:(f.add(c),!0)},o.removeInterceptor=function(u,c){var f=this.typeToInterceptorsMap_.get(u);return f&&f.has(c)?(f.delete(c),!0):!1},o.clearInterceptorsByType=function(u){var c=this.typeToInterceptorsMap_.get(u);return c?(this.typeToInterceptorsMap_.delete(u),this.typeToInterceptorsMap_.set(u,new Set),!0):!1},o.clear=function(){return this.typeToInterceptorsMap_.size?(this.typeToInterceptorsMap_=new Map,!0):!1},o.getForType=function(u){return this.typeToInterceptorsMap_.get(u)||new Set},o.execute=function(u,c){for(var f=this.getForType(u),m=r(f),v;!(v=m()).done;){var x=v.value;try{c=x(c)}catch{}}return c},a}();return interceptors=s,interceptors}var retry,hasRequiredRetry;function requireRetry(){if(hasRequiredRetry)return retry;hasRequiredRetry=1;var r=function(){function n(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var s=n.prototype;return s.getIsEnabled=function(){return this.enabled_},s.enable=function(){this.enabled_=!0},s.disable=function(){this.enabled_=!1},s.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},s.getMaxAttempts=function(){return this.maxAttempts_},s.setMaxAttempts=function(o){this.maxAttempts_=o},s.getDelayFactor=function(){return this.delayFactor_},s.setDelayFactor=function(o){this.delayFactor_=o},s.getFuzzFactor=function(){return this.fuzzFactor_},s.setFuzzFactor=function(o){this.fuzzFactor_=o},s.getInitialDelay=function(){return this.initialDelay_},s.setInitialDelay=function(o){this.initialDelay_=o},s.createRetry=function(o){var l=o===void 0?{}:o,u=l.maxAttempts,c=l.delayFactor,f=l.fuzzFactor,m=l.initialDelay;return new e({maxAttempts:u||this.maxAttempts_,delayFactor:c||this.delayFactor_,fuzzFactor:f||this.fuzzFactor_,initialDelay:m||this.initialDelay_})},n}(),e=function(){function n(a){this.maxAttempts_=a.maxAttempts,this.delayFactor_=a.delayFactor,this.fuzzFactor_=a.fuzzFactor,this.currentDelay_=a.initialDelay,this.currentAttempt_=1}var s=n.prototype;return s.moveToNextAttempt=function(){this.currentAttempt_++;var o=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+o},s.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},s.getCurrentDelay=function(){return this.currentDelay_},s.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},s.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},s.getCurrentFuzzedDelay=function(){var o=this.getCurrentMinPossibleDelay(),l=this.getCurrentMaxPossibleDelay();return o+Math.random()*(l-o)},n}();return retry=r,retry}var httpHandler,hasRequiredHttpHandler;function requireHttpHandler(){if(hasRequiredHttpHandler)return httpHandler;hasRequiredHttpHandler=1;var r=requireWindow(),e=function(a,o){return o===void 0&&(o=!1),function(l,u,c){if(l){a(l);return}if(u.statusCode>=400&&u.statusCode<=599){var f=c;if(o)if(r.TextDecoder){var m=n(u.headers&&u.headers["content-type"]);try{f=new TextDecoder(m).decode(c)}catch{}}else f=String.fromCharCode.apply(null,new Uint8Array(c));a({cause:f});return}a(null,c)}};function n(s){return s===void 0&&(s=""),s.toLowerCase().split(";").reduce(function(a,o){var l=o.split("="),u=l[0],c=l[1];return u.trim()==="charset"?c.trim():a},"utf-8")}return httpHandler=e,httpHandler}var hasRequiredLib$1;function requireLib$1(){if(hasRequiredLib$1)return lib$1.exports;hasRequiredLib$1=1;var r=requireWindow(),e=require_extends(),n=requireIsFunction(),s=requireInterceptors(),a=requireRetry();f.httpHandler=requireHttpHandler(),f.requestInterceptorsStorage=new s,f.responseInterceptorsStorage=new s,f.retryManager=new a;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Björklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var o=function(w){var S={};return w&&w.trim().split(`
`).forEach(function(k){var M=k.indexOf(":"),V=k.slice(0,M).trim().toLowerCase(),H=k.slice(M+1).trim();typeof S[V]>"u"?S[V]=H:Array.isArray(S[V])?S[V].push(H):S[V]=[S[V],H]}),S};lib$1.exports=f,lib$1.exports.default=f,f.XMLHttpRequest=r.XMLHttpRequest||x,f.XDomainRequest="withCredentials"in new f.XMLHttpRequest?f.XMLHttpRequest:r.XDomainRequest,l(["get","put","post","patch","head","delete"],function(C){f[C==="delete"?"del":C]=function(w,S,k){return S=c(w,S,k),S.method=C.toUpperCase(),m(S)}});function l(C,w){for(var S=0;S<C.length;S++)w(C[S])}function u(C){for(var w in C)if(C.hasOwnProperty(w))return!1;return!0}function c(C,w,S){var k=C;return n(w)?(S=w,typeof C=="string"&&(k={uri:C})):k=e({},w,{uri:C}),k.callback=S,k}function f(C,w,S){return w=c(C,w,S),m(w)}function m(C){if(typeof C.callback>"u")throw new Error("callback argument missing");if(C.requestType&&f.requestInterceptorsStorage.getIsEnabled()){var w={uri:C.uri||C.url,headers:C.headers||{},body:C.body,metadata:C.metadata||{},retry:C.retry,timeout:C.timeout},S=f.requestInterceptorsStorage.execute(C.requestType,w);C.uri=S.uri,C.headers=S.headers,C.body=S.body,C.metadata=S.metadata,C.retry=S.retry,C.timeout=S.timeout}var k=!1,M=function(ne,oe,he){k||(k=!0,C.callback(ne,oe,he))};function V(){W.readyState===4&&!f.responseInterceptorsStorage.getIsEnabled()&&setTimeout(G,0)}function H(){var ee=void 0;if(W.response?ee=W.response:ee=W.responseText||v(W),ae)try{ee=JSON.parse(ee)}catch{}return ee}function F(ee){if(clearTimeout(pe),clearTimeout(C.retryTimeout),ee instanceof Error||(ee=new Error(""+(ee||"Unknown XMLHttpRequest Error"))),ee.statusCode=0,!Q&&f.retryManager.getIsEnabled()&&C.retry&&C.retry.shouldRetry()){C.retryTimeout=setTimeout(function(){C.retry.moveToNextAttempt(),C.xhr=W,m(C)},C.retry.getCurrentFuzzedDelay());return}if(C.requestType&&f.responseInterceptorsStorage.getIsEnabled()){var ne={headers:me.headers||{},body:me.body,responseUrl:W.responseURL,responseType:W.responseType},oe=f.responseInterceptorsStorage.execute(C.requestType,ne);me.body=oe.body,me.headers=oe.headers}return M(ee,me)}function G(){if(!Q){var ee;clearTimeout(pe),clearTimeout(C.retryTimeout),C.useXDR&&W.status===void 0?ee=200:ee=W.status===1223?204:W.status;var ne=me,oe=null;if(ee!==0?(ne={body:H(),statusCode:ee,method:P,headers:{},url:A,rawRequest:W},W.getAllResponseHeaders&&(ne.headers=o(W.getAllResponseHeaders()))):oe=new Error("Internal XMLHttpRequest Error"),C.requestType&&f.responseInterceptorsStorage.getIsEnabled()){var he={headers:ne.headers||{},body:ne.body,responseUrl:W.responseURL,responseType:W.responseType},ge=f.responseInterceptorsStorage.execute(C.requestType,he);ne.body=ge.body,ne.headers=ge.headers}return M(oe,ne,ne.body)}}var W=C.xhr||null;W||(C.cors||C.useXDR?W=new f.XDomainRequest:W=new f.XMLHttpRequest);var R,Q,A=W.url=C.uri||C.url,P=W.method=C.method||"GET",j=C.body||C.data,X=W.headers=C.headers||{},Z=!!C.sync,ae=!1,pe,me={body:void 0,headers:{},statusCode:0,method:P,url:A,rawRequest:W};if("json"in C&&C.json!==!1&&(ae=!0,X.accept||X.Accept||(X.Accept="application/json"),P!=="GET"&&P!=="HEAD"&&(X["content-type"]||X["Content-Type"]||(X["Content-Type"]="application/json"),j=JSON.stringify(C.json===!0?j:C.json))),W.onreadystatechange=V,W.onload=G,W.onerror=F,W.onprogress=function(){},W.onabort=function(){Q=!0,clearTimeout(C.retryTimeout)},W.ontimeout=F,W.open(P,A,!Z,C.username,C.password),Z||(W.withCredentials=!!C.withCredentials),!Z&&C.timeout>0&&(pe=setTimeout(function(){if(!Q){Q=!0,W.abort("timeout");var ee=new Error("XMLHttpRequest timeout");ee.code="ETIMEDOUT",F(ee)}},C.timeout)),W.setRequestHeader)for(R in X)X.hasOwnProperty(R)&&W.setRequestHeader(R,X[R]);else if(C.headers&&!u(C.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in C&&(W.responseType=C.responseType),"beforeSend"in C&&typeof C.beforeSend=="function"&&C.beforeSend(W),W.send(j||null),W}function v(C){try{if(C.responseType==="document")return C.responseXML;var w=C.responseXML&&C.responseXML.documentElement.nodeName==="parsererror";if(C.responseType===""&&!w)return C.responseXML}catch{}return null}function x(){}return lib$1.exports}var libExports$1=requireLib$1();const XHR=getDefaultExportFromCjs(libExports$1);var browserIndex={exports:{}},vtt$1,hasRequiredVtt;function requireVtt(){if(hasRequiredVtt)return vtt$1;hasRequiredVtt=1;var r=requireDocument(),e=Object.create||function(){function A(){}return function(P){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return A.prototype=P,new A}}();function n(A,P){this.name="ParsingError",this.code=A.code,this.message=P||A.message}n.prototype=e(Error.prototype),n.prototype.constructor=n,n.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function s(A){function P(X,Z,ae,pe){return(X|0)*3600+(Z|0)*60+(ae|0)+(pe|0)/1e3}var j=A.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return j?j[3]?P(j[1],j[2],j[3].replace(":",""),j[4]):j[1]>59?P(j[1],j[2],0,j[4]):P(0,j[1],j[2],j[4]):null}function a(){this.values=e(null)}a.prototype={set:function(A,P){!this.get(A)&&P!==""&&(this.values[A]=P)},get:function(A,P,j){return j?this.has(A)?this.values[A]:P[j]:this.has(A)?this.values[A]:P},has:function(A){return A in this.values},alt:function(A,P,j){for(var X=0;X<j.length;++X)if(P===j[X]){this.set(A,P);break}},integer:function(A,P){/^-?\d+$/.test(P)&&this.set(A,parseInt(P,10))},percent:function(A,P){return P.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(P=parseFloat(P),P>=0&&P<=100)?(this.set(A,P),!0):!1}};function o(A,P,j,X){var Z=X?A.split(X):[A];for(var ae in Z)if(typeof Z[ae]=="string"){var pe=Z[ae].split(j);if(pe.length===2){var me=pe[0].trim(),ee=pe[1].trim();P(me,ee)}}}function l(A,P,j){var X=A;function Z(){var me=s(A);if(me===null)throw new n(n.Errors.BadTimeStamp,"Malformed timestamp: "+X);return A=A.replace(/^[^\sa-zA-Z-]+/,""),me}function ae(me,ee){var ne=new a;o(me,function(oe,he){switch(oe){case"region":for(var ge=j.length-1;ge>=0;ge--)if(j[ge].id===he){ne.set(oe,j[ge].region);break}break;case"vertical":ne.alt(oe,he,["rl","lr"]);break;case"line":var Ie=he.split(","),Me=Ie[0];ne.integer(oe,Me),ne.percent(oe,Me)&&ne.set("snapToLines",!1),ne.alt(oe,Me,["auto"]),Ie.length===2&&ne.alt("lineAlign",Ie[1],["start","center","end"]);break;case"position":Ie=he.split(","),ne.percent(oe,Ie[0]),Ie.length===2&&ne.alt("positionAlign",Ie[1],["start","center","end"]);break;case"size":ne.percent(oe,he);break;case"align":ne.alt(oe,he,["start","center","end","left","right"]);break}},/:/,/\s/),ee.region=ne.get("region",null),ee.vertical=ne.get("vertical","");try{ee.line=ne.get("line","auto")}catch{}ee.lineAlign=ne.get("lineAlign","start"),ee.snapToLines=ne.get("snapToLines",!0),ee.size=ne.get("size",100);try{ee.align=ne.get("align","center")}catch{ee.align=ne.get("align","middle")}try{ee.position=ne.get("position","auto")}catch{ee.position=ne.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},ee.align)}ee.positionAlign=ne.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},ee.align)}function pe(){A=A.replace(/^\s+/,"")}if(pe(),P.startTime=Z(),pe(),A.substr(0,3)!=="-->")throw new n(n.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+X);A=A.substr(3),pe(),P.endTime=Z(),pe(),ae(A,P)}var u=r.createElement&&r.createElement("textarea"),c={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},f={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},m={v:"title",lang:"lang"},v={rt:"ruby"};function x(A,P){function j(){if(!P)return null;function Me(Oe){return P=P.substr(Oe.length),Oe}var Be=P.match(/^([^<]*)(<[^>]*>?)?/);return Me(Be[1]?Be[1]:Be[2])}function X(Me){return u.innerHTML=Me,Me=u.textContent,u.textContent="",Me}function Z(Me,Be){return!v[Be.localName]||v[Be.localName]===Me.localName}function ae(Me,Be){var Oe=c[Me];if(!Oe)return null;var Xe=A.document.createElement(Oe),Ze=m[Me];return Ze&&Be&&(Xe[Ze]=Be.trim()),Xe}for(var pe=A.document.createElement("div"),me=pe,ee,ne=[];(ee=j())!==null;){if(ee[0]==="<"){if(ee[1]==="/"){ne.length&&ne[ne.length-1]===ee.substr(2).replace(">","")&&(ne.pop(),me=me.parentNode);continue}var oe=s(ee.substr(1,ee.length-2)),he;if(oe){he=A.document.createProcessingInstruction("timestamp",oe),me.appendChild(he);continue}var ge=ee.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!ge||(he=ae(ge[1],ge[3]),!he)||!Z(me,he))continue;if(ge[2]){var Ie=ge[2].split(".");Ie.forEach(function(Me){var Be=/^bg_/.test(Me),Oe=Be?Me.slice(3):Me;if(f.hasOwnProperty(Oe)){var Xe=Be?"background-color":"color",Ze=f[Oe];he.style[Xe]=Ze}}),he.className=Ie.join(" ")}ne.push(ge[1]),me.appendChild(he),me=he;continue}me.appendChild(A.document.createTextNode(X(ee)))}return pe}var C=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function w(A){for(var P=0;P<C.length;P++){var j=C[P];if(A>=j[0]&&A<=j[1])return!0}return!1}function S(A){var P=[],j="",X;if(!A||!A.childNodes)return"ltr";function Z(me,ee){for(var ne=ee.childNodes.length-1;ne>=0;ne--)me.push(ee.childNodes[ne])}function ae(me){if(!me||!me.length)return null;var ee=me.pop(),ne=ee.textContent||ee.innerText;if(ne){var oe=ne.match(/^.*(\n|\r)/);return oe?(me.length=0,oe[0]):ne}if(ee.tagName==="ruby")return ae(me);if(ee.childNodes)return Z(me,ee),ae(me)}for(Z(P,A);j=ae(P);)for(var pe=0;pe<j.length;pe++)if(X=j.charCodeAt(pe),w(X))return"rtl";return"ltr"}function k(A){if(typeof A.line=="number"&&(A.snapToLines||A.line>=0&&A.line<=100))return A.line;if(!A.track||!A.track.textTrackList||!A.track.textTrackList.mediaElement)return-1;for(var P=A.track,j=P.textTrackList,X=0,Z=0;Z<j.length&&j[Z]!==P;Z++)j[Z].mode==="showing"&&X++;return++X*-1}function M(){}M.prototype.applyStyles=function(A,P){P=P||this.div;for(var j in A)A.hasOwnProperty(j)&&(P.style[j]=A[j])},M.prototype.formatStyle=function(A,P){return A===0?0:A+P};function V(A,P,j){M.call(this),this.cue=P,this.cueDiv=x(A,P.text);var X={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:P.vertical===""?"horizontal-tb":P.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(X,this.cueDiv),this.div=A.document.createElement("div"),X={direction:S(this.cueDiv),writingMode:P.vertical===""?"horizontal-tb":P.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:P.align==="middle"?"center":P.align,font:j.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(X),this.div.appendChild(this.cueDiv);var Z=0;switch(P.positionAlign){case"start":case"line-left":Z=P.position;break;case"center":Z=P.position-P.size/2;break;case"end":case"line-right":Z=P.position-P.size;break}P.vertical===""?this.applyStyles({left:this.formatStyle(Z,"%"),width:this.formatStyle(P.size,"%")}):this.applyStyles({top:this.formatStyle(Z,"%"),height:this.formatStyle(P.size,"%")}),this.move=function(ae){this.applyStyles({top:this.formatStyle(ae.top,"px"),bottom:this.formatStyle(ae.bottom,"px"),left:this.formatStyle(ae.left,"px"),right:this.formatStyle(ae.right,"px"),height:this.formatStyle(ae.height,"px"),width:this.formatStyle(ae.width,"px")})}}V.prototype=e(M.prototype),V.prototype.constructor=V;function H(A){var P,j,X,Z;if(A.div){j=A.div.offsetHeight,X=A.div.offsetWidth,Z=A.div.offsetTop;var ae=(ae=A.div.childNodes)&&(ae=ae[0])&&ae.getClientRects&&ae.getClientRects();A=A.div.getBoundingClientRect(),P=ae?Math.max(ae[0]&&ae[0].height||0,A.height/ae.length):0}this.left=A.left,this.right=A.right,this.top=A.top||Z,this.height=A.height||j,this.bottom=A.bottom||Z+(A.height||j),this.width=A.width||X,this.lineHeight=P!==void 0?P:A.lineHeight}H.prototype.move=function(A,P){switch(P=P!==void 0?P:this.lineHeight,A){case"+x":this.left+=P,this.right+=P;break;case"-x":this.left-=P,this.right-=P;break;case"+y":this.top+=P,this.bottom+=P;break;case"-y":this.top-=P,this.bottom-=P;break}},H.prototype.overlaps=function(A){return this.left<A.right&&this.right>A.left&&this.top<A.bottom&&this.bottom>A.top},H.prototype.overlapsAny=function(A){for(var P=0;P<A.length;P++)if(this.overlaps(A[P]))return!0;return!1},H.prototype.within=function(A){return this.top>=A.top&&this.bottom<=A.bottom&&this.left>=A.left&&this.right<=A.right},H.prototype.overlapsOppositeAxis=function(A,P){switch(P){case"+x":return this.left<A.left;case"-x":return this.right>A.right;case"+y":return this.top<A.top;case"-y":return this.bottom>A.bottom}},H.prototype.intersectPercentage=function(A){var P=Math.max(0,Math.min(this.right,A.right)-Math.max(this.left,A.left)),j=Math.max(0,Math.min(this.bottom,A.bottom)-Math.max(this.top,A.top)),X=P*j;return X/(this.height*this.width)},H.prototype.toCSSCompatValues=function(A){return{top:this.top-A.top,bottom:A.bottom-this.bottom,left:this.left-A.left,right:A.right-this.right,height:this.height,width:this.width}},H.getSimpleBoxPosition=function(A){var P=A.div?A.div.offsetHeight:A.tagName?A.offsetHeight:0,j=A.div?A.div.offsetWidth:A.tagName?A.offsetWidth:0,X=A.div?A.div.offsetTop:A.tagName?A.offsetTop:0;A=A.div?A.div.getBoundingClientRect():A.tagName?A.getBoundingClientRect():A;var Z={left:A.left,right:A.right,top:A.top||X,height:A.height||P,bottom:A.bottom||X+(A.height||P),width:A.width||j};return Z};function F(A,P,j,X){function Z(Oe,Xe){for(var Ze,ze=new H(Oe),nt=1,at=0;at<Xe.length;at++){for(;Oe.overlapsOppositeAxis(j,Xe[at])||Oe.within(j)&&Oe.overlapsAny(X);)Oe.move(Xe[at]);if(Oe.within(j))return Oe;var ot=Oe.intersectPercentage(j);nt>ot&&(Ze=new H(Oe),nt=ot),Oe=new H(ze)}return Ze||ze}var ae=new H(P),pe=P.cue,me=k(pe),ee=[];if(pe.snapToLines){var ne;switch(pe.vertical){case"":ee=["+y","-y"],ne="height";break;case"rl":ee=["+x","-x"],ne="width";break;case"lr":ee=["-x","+x"],ne="width";break}var oe=ae.lineHeight,he=oe*Math.round(me),ge=j[ne]+oe,Ie=ee[0];Math.abs(he)>ge&&(he=he<0?-1:1,he*=Math.ceil(ge/oe)*oe),me<0&&(he+=pe.vertical===""?j.height:j.width,ee=ee.reverse()),ae.move(Ie,he)}else{var Me=ae.lineHeight/j.height*100;switch(pe.lineAlign){case"center":me-=Me/2;break;case"end":me-=Me;break}switch(pe.vertical){case"":P.applyStyles({top:P.formatStyle(me,"%")});break;case"rl":P.applyStyles({left:P.formatStyle(me,"%")});break;case"lr":P.applyStyles({right:P.formatStyle(me,"%")});break}ee=["+y","-x","+x","-y"],ae=new H(P)}var Be=Z(ae,ee);P.move(Be.toCSSCompatValues(j))}function G(){}G.StringDecoder=function(){return{decode:function(A){if(!A)return"";if(typeof A!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(A))}}},G.convertCueToDOMTree=function(A,P){return!A||!P?null:x(A,P)};var W=.05,R="sans-serif",Q="1.5%";return G.processCues=function(A,P,j){if(!A||!P||!j)return null;for(;j.firstChild;)j.removeChild(j.firstChild);var X=A.document.createElement("div");X.style.position="absolute",X.style.left="0",X.style.right="0",X.style.top="0",X.style.bottom="0",X.style.margin=Q,j.appendChild(X);function Z(oe){for(var he=0;he<oe.length;he++)if(oe[he].hasBeenReset||!oe[he].displayState)return!0;return!1}if(!Z(P)){for(var ae=0;ae<P.length;ae++)X.appendChild(P[ae].displayState);return}var pe=[],me=H.getSimpleBoxPosition(X),ee=Math.round(me.height*W*100)/100,ne={font:ee+"px "+R};(function(){for(var oe,he,ge=0;ge<P.length;ge++)he=P[ge],oe=new V(A,he,ne),X.appendChild(oe.div),F(A,oe,me,pe),he.displayState=oe.div,pe.push(H.getSimpleBoxPosition(oe))})()},G.Parser=function(A,P,j){j||(j=P,P={}),P||(P={}),this.window=A,this.vttjs=P,this.state="INITIAL",this.buffer="",this.decoder=j||new TextDecoder("utf8"),this.regionList=[]},G.Parser.prototype={reportOrThrowError:function(A){if(A instanceof n)this.onparsingerror&&this.onparsingerror(A);else throw A},parse:function(A){var P=this;A&&(P.buffer+=P.decoder.decode(A,{stream:!0}));function j(){for(var oe=P.buffer,he=0;he<oe.length&&oe[he]!=="\r"&&oe[he]!==`
`;)++he;var ge=oe.substr(0,he);return oe[he]==="\r"&&++he,oe[he]===`
`&&++he,P.buffer=oe.substr(he),ge}function X(oe){var he=new a;if(o(oe,function(Ie,Me){switch(Ie){case"id":he.set(Ie,Me);break;case"width":he.percent(Ie,Me);break;case"lines":he.integer(Ie,Me);break;case"regionanchor":case"viewportanchor":var Be=Me.split(",");if(Be.length!==2)break;var Oe=new a;if(Oe.percent("x",Be[0]),Oe.percent("y",Be[1]),!Oe.has("x")||!Oe.has("y"))break;he.set(Ie+"X",Oe.get("x")),he.set(Ie+"Y",Oe.get("y"));break;case"scroll":he.alt(Ie,Me,["up"]);break}},/=/,/\s/),he.has("id")){var ge=new(P.vttjs.VTTRegion||P.window.VTTRegion);ge.width=he.get("width",100),ge.lines=he.get("lines",3),ge.regionAnchorX=he.get("regionanchorX",0),ge.regionAnchorY=he.get("regionanchorY",100),ge.viewportAnchorX=he.get("viewportanchorX",0),ge.viewportAnchorY=he.get("viewportanchorY",100),ge.scroll=he.get("scroll",""),P.onregion&&P.onregion(ge),P.regionList.push({id:he.get("id"),region:ge})}}function Z(oe){var he=new a;o(oe,function(ge,Ie){switch(ge){case"MPEGT":he.integer(ge+"S",Ie);break;case"LOCA":he.set(ge+"L",s(Ie));break}},/[^\d]:/,/,/),P.ontimestampmap&&P.ontimestampmap({MPEGTS:he.get("MPEGTS"),LOCAL:he.get("LOCAL")})}function ae(oe){oe.match(/X-TIMESTAMP-MAP/)?o(oe,function(he,ge){switch(he){case"X-TIMESTAMP-MAP":Z(ge);break}},/=/):o(oe,function(he,ge){switch(he){case"Region":X(ge);break}},/:/)}try{var pe;if(P.state==="INITIAL"){if(!/\r\n|\n/.test(P.buffer))return this;pe=j();var me=pe.match(/^WEBVTT([ \t].*)?$/);if(!me||!me[0])throw new n(n.Errors.BadSignature);P.state="HEADER"}for(var ee=!1;P.buffer;){if(!/\r\n|\n/.test(P.buffer))return this;switch(ee?ee=!1:pe=j(),P.state){case"HEADER":/:/.test(pe)?ae(pe):pe||(P.state="ID");continue;case"NOTE":pe||(P.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(pe)){P.state="NOTE";break}if(!pe)continue;P.cue=new(P.vttjs.VTTCue||P.window.VTTCue)(0,0,"");try{P.cue.align="center"}catch{P.cue.align="middle"}if(P.state="CUE",pe.indexOf("-->")===-1){P.cue.id=pe;continue}case"CUE":try{l(pe,P.cue,P.regionList)}catch(oe){P.reportOrThrowError(oe),P.cue=null,P.state="BADCUE";continue}P.state="CUETEXT";continue;case"CUETEXT":var ne=pe.indexOf("-->")!==-1;if(!pe||ne&&(ee=!0)){P.oncue&&P.oncue(P.cue),P.cue=null,P.state="ID";continue}P.cue.text&&(P.cue.text+=`
`),P.cue.text+=pe.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":pe||(P.state="ID");continue}}}catch(oe){P.reportOrThrowError(oe),P.state==="CUETEXT"&&P.cue&&P.oncue&&P.oncue(P.cue),P.cue=null,P.state=P.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var A=this;try{if(A.buffer+=A.decoder.decode(),(A.cue||A.state==="HEADER")&&(A.buffer+=`

`,A.parse()),A.state==="INITIAL")throw new n(n.Errors.BadSignature)}catch(P){A.reportOrThrowError(P)}return A.onflush&&A.onflush(),this}},vtt$1=G,vtt$1}var vttcue,hasRequiredVttcue;function requireVttcue(){if(hasRequiredVttcue)return vttcue;hasRequiredVttcue=1;var r="auto",e={"":1,lr:1,rl:1},n={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function s(l){if(typeof l!="string")return!1;var u=e[l.toLowerCase()];return u?l.toLowerCase():!1}function a(l){if(typeof l!="string")return!1;var u=n[l.toLowerCase()];return u?l.toLowerCase():!1}function o(l,u,c){this.hasBeenReset=!1;var f="",m=!1,v=l,x=u,C=c,w=null,S="",k=!0,M="auto",V="start",H="auto",F="auto",G=100,W="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return f},set:function(R){f=""+R}},pauseOnExit:{enumerable:!0,get:function(){return m},set:function(R){m=!!R}},startTime:{enumerable:!0,get:function(){return v},set:function(R){if(typeof R!="number")throw new TypeError("Start time must be set to a number.");v=R,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return x},set:function(R){if(typeof R!="number")throw new TypeError("End time must be set to a number.");x=R,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return C},set:function(R){C=""+R,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return w},set:function(R){w=R,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return S},set:function(R){var Q=s(R);if(Q===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");S=Q,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return k},set:function(R){k=!!R,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return M},set:function(R){if(typeof R!="number"&&R!==r)throw new SyntaxError("Line: an invalid number or illegal string was specified.");M=R,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return V},set:function(R){var Q=a(R);Q?(V=Q,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return H},set:function(R){if(R<0||R>100)throw new Error("Position must be between 0 and 100.");H=R,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return F},set:function(R){var Q=a(R);Q?(F=Q,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return G},set:function(R){if(R<0||R>100)throw new Error("Size must be between 0 and 100.");G=R,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return W},set:function(R){var Q=a(R);if(!Q)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");W=Q,this.hasBeenReset=!0}}}),this.displayState=void 0}return o.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},vttcue=o,vttcue}var vttregion,hasRequiredVttregion;function requireVttregion(){if(hasRequiredVttregion)return vttregion;hasRequiredVttregion=1;var r={"":!0,up:!0};function e(a){if(typeof a!="string")return!1;var o=r[a.toLowerCase()];return o?a.toLowerCase():!1}function n(a){return typeof a=="number"&&a>=0&&a<=100}function s(){var a=100,o=3,l=0,u=100,c=0,f=100,m="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return a},set:function(v){if(!n(v))throw new Error("Width must be between 0 and 100.");a=v}},lines:{enumerable:!0,get:function(){return o},set:function(v){if(typeof v!="number")throw new TypeError("Lines must be set to a number.");o=v}},regionAnchorY:{enumerable:!0,get:function(){return u},set:function(v){if(!n(v))throw new Error("RegionAnchorX must be between 0 and 100.");u=v}},regionAnchorX:{enumerable:!0,get:function(){return l},set:function(v){if(!n(v))throw new Error("RegionAnchorY must be between 0 and 100.");l=v}},viewportAnchorY:{enumerable:!0,get:function(){return f},set:function(v){if(!n(v))throw new Error("ViewportAnchorY must be between 0 and 100.");f=v}},viewportAnchorX:{enumerable:!0,get:function(){return c},set:function(v){if(!n(v))throw new Error("ViewportAnchorX must be between 0 and 100.");c=v}},scroll:{enumerable:!0,get:function(){return m},set:function(v){var x=e(v);x===!1?console.warn("Scroll: an invalid or illegal string was specified."):m=x}}})}return vttregion=s,vttregion}var hasRequiredBrowserIndex;function requireBrowserIndex(){if(hasRequiredBrowserIndex)return browserIndex.exports;hasRequiredBrowserIndex=1;var r=requireWindow(),e=browserIndex.exports={WebVTT:requireVtt(),VTTCue:requireVttcue(),VTTRegion:requireVttregion()};r.vttjs=e,r.WebVTT=e.WebVTT;var n=e.VTTCue,s=e.VTTRegion,a=r.VTTCue,o=r.VTTRegion;return e.shim=function(){r.VTTCue=n,r.VTTRegion=s},e.restore=function(){r.VTTCue=a,r.VTTRegion=o},r.VTTCue||e.shim(),browserIndex.exports}var browserIndexExports=requireBrowserIndex();const vtt=getDefaultExportFromCjs(browserIndexExports);function _extends(){return _extends=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},_extends.apply(null,arguments)}var DEFAULT_LOCATION="https://example.com",resolveUrl$1=function r(e,n){if(/^[a-z]+:/i.test(n))return n;/^data:/.test(e)&&(e=window$1.location&&window$1.location.href||"");var s=/^\/\//.test(e),a=!window$1.location&&!/\/\//i.test(e);e=new window$1.URL(e,window$1.location||DEFAULT_LOCATION);var o=new URL(n,e);return a?o.href.slice(DEFAULT_LOCATION.length):s?o.href.slice(o.protocol.length):o.href},Stream=function(){function r(){this.listeners={}}var e=r.prototype;return e.on=function(s,a){this.listeners[s]||(this.listeners[s]=[]),this.listeners[s].push(a)},e.off=function(s,a){if(!this.listeners[s])return!1;var o=this.listeners[s].indexOf(a);return this.listeners[s]=this.listeners[s].slice(0),this.listeners[s].splice(o,1),o>-1},e.trigger=function(s){var a=this.listeners[s];if(a)if(arguments.length===2)for(var o=a.length,l=0;l<o;++l)a[l].call(this,arguments[1]);else for(var u=Array.prototype.slice.call(arguments,1),c=a.length,f=0;f<c;++f)a[f].apply(this,u)},e.dispose=function(){this.listeners={}},e.pipe=function(s){this.on("data",function(a){s.push(a)})},r}(),atob=function r(e){return window$1.atob?window$1.atob(e):Buffer.from(e,"base64").toString("binary")};function decodeB64ToUint8Array(r){for(var e=atob(r),n=new Uint8Array(e.length),s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n}/*! @name m3u8-parser @version 7.2.0 @license Apache-2.0 */class LineStream extends Stream{constructor(){super(),this.buffer=""}push(e){let n;for(this.buffer+=e,n=this.buffer.indexOf(`
`);n>-1;n=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,n)),this.buffer=this.buffer.substring(n+1)}}const TAB="	",parseByterange=function(r){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(r||""),n={};return e[1]&&(n.length=parseInt(e[1],10)),e[2]&&(n.offset=parseInt(e[2],10)),n},attributeSeparator=function(){const n="(?:"+"[^=]*"+")=(?:"+'"[^"]*"|[^,]*'+")";return new RegExp("(?:^|,)("+n+")")},parseAttributes$1=function(r){const e={};if(!r)return e;const n=r.split(attributeSeparator());let s=n.length,a;for(;s--;)n[s]!==""&&(a=/([^=]*)=(.*)/.exec(n[s]).slice(1),a[0]=a[0].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^['"](.*)['"]$/g,"$1"),e[a[0]]=a[1]);return e},parseResolution=r=>{const e=r.split("x"),n={};return e[0]&&(n.width=parseInt(e[0],10)),e[1]&&(n.height=parseInt(e[1],10)),n};class ParseStream extends Stream{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let n,s;if(e=e.trim(),e.length===0)return;if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}this.tagMappers.reduce((o,l)=>{const u=l(e);return u===e?o:o.concat([u])},[e]).forEach(o=>{for(let l=0;l<this.customParsers.length;l++)if(this.customParsers[l].call(this,o))return;if(o.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:o.slice(1)});return}if(o=o.replace("\r",""),n=/^#EXTM3U/.exec(o),n){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(n=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(o),n){s={type:"tag",tagType:"inf"},n[1]&&(s.duration=parseFloat(n[1])),n[2]&&(s.title=n[2]),this.trigger("data",s);return}if(n=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(o),n){s={type:"tag",tagType:"targetduration"},n[1]&&(s.duration=parseInt(n[1],10)),this.trigger("data",s);return}if(n=/^#EXT-X-VERSION:([0-9.]*)?/.exec(o),n){s={type:"tag",tagType:"version"},n[1]&&(s.version=parseInt(n[1],10)),this.trigger("data",s);return}if(n=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(o),n){s={type:"tag",tagType:"media-sequence"},n[1]&&(s.number=parseInt(n[1],10)),this.trigger("data",s);return}if(n=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(o),n){s={type:"tag",tagType:"discontinuity-sequence"},n[1]&&(s.number=parseInt(n[1],10)),this.trigger("data",s);return}if(n=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(o),n){s={type:"tag",tagType:"playlist-type"},n[1]&&(s.playlistType=n[1]),this.trigger("data",s);return}if(n=/^#EXT-X-BYTERANGE:(.*)?$/.exec(o),n){s=_extends(parseByterange(n[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",s);return}if(n=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(o),n){s={type:"tag",tagType:"allow-cache"},n[1]&&(s.allowed=!/NO/.test(n[1])),this.trigger("data",s);return}if(n=/^#EXT-X-MAP:(.*)$/.exec(o),n){if(s={type:"tag",tagType:"map"},n[1]){const l=parseAttributes$1(n[1]);l.URI&&(s.uri=l.URI),l.BYTERANGE&&(s.byterange=parseByterange(l.BYTERANGE))}this.trigger("data",s);return}if(n=/^#EXT-X-STREAM-INF:(.*)$/.exec(o),n){s={type:"tag",tagType:"stream-inf"},n[1]&&(s.attributes=parseAttributes$1(n[1]),s.attributes.RESOLUTION&&(s.attributes.RESOLUTION=parseResolution(s.attributes.RESOLUTION)),s.attributes.BANDWIDTH&&(s.attributes.BANDWIDTH=parseInt(s.attributes.BANDWIDTH,10)),s.attributes["FRAME-RATE"]&&(s.attributes["FRAME-RATE"]=parseFloat(s.attributes["FRAME-RATE"])),s.attributes["PROGRAM-ID"]&&(s.attributes["PROGRAM-ID"]=parseInt(s.attributes["PROGRAM-ID"],10))),this.trigger("data",s);return}if(n=/^#EXT-X-MEDIA:(.*)$/.exec(o),n){s={type:"tag",tagType:"media"},n[1]&&(s.attributes=parseAttributes$1(n[1])),this.trigger("data",s);return}if(n=/^#EXT-X-ENDLIST/.exec(o),n){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(n=/^#EXT-X-DISCONTINUITY/.exec(o),n){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(n=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(o),n){s={type:"tag",tagType:"program-date-time"},n[1]&&(s.dateTimeString=n[1],s.dateTimeObject=new Date(n[1])),this.trigger("data",s);return}if(n=/^#EXT-X-KEY:(.*)$/.exec(o),n){s={type:"tag",tagType:"key"},n[1]&&(s.attributes=parseAttributes$1(n[1]),s.attributes.IV&&(s.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(s.attributes.IV=s.attributes.IV.substring(2)),s.attributes.IV=s.attributes.IV.match(/.{8}/g),s.attributes.IV[0]=parseInt(s.attributes.IV[0],16),s.attributes.IV[1]=parseInt(s.attributes.IV[1],16),s.attributes.IV[2]=parseInt(s.attributes.IV[2],16),s.attributes.IV[3]=parseInt(s.attributes.IV[3],16),s.attributes.IV=new Uint32Array(s.attributes.IV))),this.trigger("data",s);return}if(n=/^#EXT-X-START:(.*)$/.exec(o),n){s={type:"tag",tagType:"start"},n[1]&&(s.attributes=parseAttributes$1(n[1]),s.attributes["TIME-OFFSET"]=parseFloat(s.attributes["TIME-OFFSET"]),s.attributes.PRECISE=/YES/.test(s.attributes.PRECISE)),this.trigger("data",s);return}if(n=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(o),n){s={type:"tag",tagType:"cue-out-cont"},n[1]?s.data=n[1]:s.data="",this.trigger("data",s);return}if(n=/^#EXT-X-CUE-OUT:(.*)?$/.exec(o),n){s={type:"tag",tagType:"cue-out"},n[1]?s.data=n[1]:s.data="",this.trigger("data",s);return}if(n=/^#EXT-X-CUE-IN:?(.*)?$/.exec(o),n){s={type:"tag",tagType:"cue-in"},n[1]?s.data=n[1]:s.data="",this.trigger("data",s);return}if(n=/^#EXT-X-SKIP:(.*)$/.exec(o),n&&n[1]){s={type:"tag",tagType:"skip"},s.attributes=parseAttributes$1(n[1]),s.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(s.attributes["SKIPPED-SEGMENTS"]=parseInt(s.attributes["SKIPPED-SEGMENTS"],10)),s.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(s.attributes["RECENTLY-REMOVED-DATERANGES"]=s.attributes["RECENTLY-REMOVED-DATERANGES"].split(TAB)),this.trigger("data",s);return}if(n=/^#EXT-X-PART:(.*)$/.exec(o),n&&n[1]){s={type:"tag",tagType:"part"},s.attributes=parseAttributes$1(n[1]),["DURATION"].forEach(function(l){s.attributes.hasOwnProperty(l)&&(s.attributes[l]=parseFloat(s.attributes[l]))}),["INDEPENDENT","GAP"].forEach(function(l){s.attributes.hasOwnProperty(l)&&(s.attributes[l]=/YES/.test(s.attributes[l]))}),s.attributes.hasOwnProperty("BYTERANGE")&&(s.attributes.byterange=parseByterange(s.attributes.BYTERANGE)),this.trigger("data",s);return}if(n=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(o),n&&n[1]){s={type:"tag",tagType:"server-control"},s.attributes=parseAttributes$1(n[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(l){s.attributes.hasOwnProperty(l)&&(s.attributes[l]=parseFloat(s.attributes[l]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(l){s.attributes.hasOwnProperty(l)&&(s.attributes[l]=/YES/.test(s.attributes[l]))}),this.trigger("data",s);return}if(n=/^#EXT-X-PART-INF:(.*)$/.exec(o),n&&n[1]){s={type:"tag",tagType:"part-inf"},s.attributes=parseAttributes$1(n[1]),["PART-TARGET"].forEach(function(l){s.attributes.hasOwnProperty(l)&&(s.attributes[l]=parseFloat(s.attributes[l]))}),this.trigger("data",s);return}if(n=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(o),n&&n[1]){s={type:"tag",tagType:"preload-hint"},s.attributes=parseAttributes$1(n[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(l){if(s.attributes.hasOwnProperty(l)){s.attributes[l]=parseInt(s.attributes[l],10);const u=l==="BYTERANGE-LENGTH"?"length":"offset";s.attributes.byterange=s.attributes.byterange||{},s.attributes.byterange[u]=s.attributes[l],delete s.attributes[l]}}),this.trigger("data",s);return}if(n=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(o),n&&n[1]){s={type:"tag",tagType:"rendition-report"},s.attributes=parseAttributes$1(n[1]),["LAST-MSN","LAST-PART"].forEach(function(l){s.attributes.hasOwnProperty(l)&&(s.attributes[l]=parseInt(s.attributes[l],10))}),this.trigger("data",s);return}if(n=/^#EXT-X-DATERANGE:(.*)$/.exec(o),n&&n[1]){s={type:"tag",tagType:"daterange"},s.attributes=parseAttributes$1(n[1]),["ID","CLASS"].forEach(function(u){s.attributes.hasOwnProperty(u)&&(s.attributes[u]=String(s.attributes[u]))}),["START-DATE","END-DATE"].forEach(function(u){s.attributes.hasOwnProperty(u)&&(s.attributes[u]=new Date(s.attributes[u]))}),["DURATION","PLANNED-DURATION"].forEach(function(u){s.attributes.hasOwnProperty(u)&&(s.attributes[u]=parseFloat(s.attributes[u]))}),["END-ON-NEXT"].forEach(function(u){s.attributes.hasOwnProperty(u)&&(s.attributes[u]=/YES/i.test(s.attributes[u]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(u){s.attributes.hasOwnProperty(u)&&(s.attributes[u]=s.attributes[u].toString(16))});const l=/^X-([A-Z]+-)+[A-Z]+$/;for(const u in s.attributes){if(!l.test(u))continue;const c=/[0-9A-Fa-f]{6}/g.test(s.attributes[u]),f=/^\d+(\.\d+)?$/.test(s.attributes[u]);s.attributes[u]=c?s.attributes[u].toString(16):f?parseFloat(s.attributes[u]):String(s.attributes[u])}this.trigger("data",s);return}if(n=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(o),n){this.trigger("data",{type:"tag",tagType:"independent-segments"});return}if(n=/^#EXT-X-I-FRAMES-ONLY/.exec(o),n){this.trigger("data",{type:"tag",tagType:"i-frames-only"});return}if(n=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(o),n){s={type:"tag",tagType:"content-steering"},s.attributes=parseAttributes$1(n[1]),this.trigger("data",s);return}if(n=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(o),n){s={type:"tag",tagType:"i-frame-playlist"},s.attributes=parseAttributes$1(n[1]),s.attributes.URI&&(s.uri=s.attributes.URI),s.attributes.BANDWIDTH&&(s.attributes.BANDWIDTH=parseInt(s.attributes.BANDWIDTH,10)),s.attributes.RESOLUTION&&(s.attributes.RESOLUTION=parseResolution(s.attributes.RESOLUTION)),s.attributes["AVERAGE-BANDWIDTH"]&&(s.attributes["AVERAGE-BANDWIDTH"]=parseInt(s.attributes["AVERAGE-BANDWIDTH"],10)),s.attributes["FRAME-RATE"]&&(s.attributes["FRAME-RATE"]=parseFloat(s.attributes["FRAME-RATE"])),this.trigger("data",s);return}if(n=/^#EXT-X-DEFINE:(.*)$/.exec(o),n){s={type:"tag",tagType:"define"},s.attributes=parseAttributes$1(n[1]),this.trigger("data",s);return}this.trigger("data",{type:"tag",data:o.slice(4)})})}addParser({expression:e,customType:n,dataParser:s,segment:a}){typeof s!="function"&&(s=o=>o),this.customParsers.push(o=>{if(e.exec(o))return this.trigger("data",{type:"custom",data:s(o),customType:n,segment:a}),!0})}addTagMapper({expression:e,map:n}){const s=a=>e.test(a)?n(a):a;this.tagMappers.push(s)}}const camelCase=r=>r.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()),camelCaseKeys=function(r){const e={};return Object.keys(r).forEach(function(n){e[camelCase(n)]=r[n]}),e},setHoldBack=function(r){const{serverControl:e,targetDuration:n,partTargetDuration:s}=r;if(!e)return;const a="#EXT-X-SERVER-CONTROL",o="holdBack",l="partHoldBack",u=n&&n*3,c=s&&s*2;n&&!e.hasOwnProperty(o)&&(e[o]=u,this.trigger("info",{message:`${a} defaulting HOLD-BACK to targetDuration * 3 (${u}).`})),u&&e[o]<u&&(this.trigger("warn",{message:`${a} clamping HOLD-BACK (${e[o]}) to targetDuration * 3 (${u})`}),e[o]=u),s&&!e.hasOwnProperty(l)&&(e[l]=s*3,this.trigger("info",{message:`${a} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[l]}).`})),s&&e[l]<c&&(this.trigger("warn",{message:`${a} clamping PART-HOLD-BACK (${e[l]}) to partTargetDuration * 2 (${c}).`}),e[l]=c)};class Parser extends Stream{constructor(e={}){super(),this.lineStream=new LineStream,this.parseStream=new ParseStream,this.lineStream.pipe(this.parseStream),this.mainDefinitions=e.mainDefinitions||{},this.params=new URL(e.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;const n=this,s=[];let a={},o,l,u=!1;const c=function(){},f={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},m="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";let v=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]};let x=0,C=0;const w={};this.on("end",()=>{a.uri||!a.parts&&!a.preloadHints||(!a.map&&o&&(a.map=o),!a.key&&l&&(a.key=l),!a.timeline&&typeof v=="number"&&(a.timeline=v),this.manifest.preloadSegment=a)}),this.parseStream.on("data",function(S){let k,M;if(n.manifest.definitions){for(const V in n.manifest.definitions)if(S.uri&&(S.uri=S.uri.replace(`{$${V}}`,n.manifest.definitions[V])),S.attributes)for(const H in S.attributes)typeof S.attributes[H]=="string"&&(S.attributes[H]=S.attributes[H].replace(`{$${V}}`,n.manifest.definitions[V]))}({tag(){({version(){S.version&&(this.manifest.version=S.version)},"allow-cache"(){this.manifest.allowCache=S.allowed,"allowed"in S||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const V={};"length"in S&&(a.byterange=V,V.length=S.length,"offset"in S||(S.offset=x)),"offset"in S&&(a.byterange=V,V.offset=S.offset),x=V.offset+V.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),S.title&&(a.title=S.title),S.duration>0&&(a.duration=S.duration),S.duration===0&&(a.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=s},key(){if(!S.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(S.attributes.METHOD==="NONE"){l=null;return}if(!S.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(S.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:S.attributes};return}if(S.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:S.attributes.URI};return}if(S.attributes.KEYFORMAT===m){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(S.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(S.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),S.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(S.attributes.KEYID&&S.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:S.attributes.KEYFORMAT,keyId:S.attributes.KEYID.substring(2)},pssh:decodeB64ToUint8Array(S.attributes.URI.split(",")[1])};return}S.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),l={method:S.attributes.METHOD||"AES-128",uri:S.attributes.URI},typeof S.attributes.IV<"u"&&(l.iv=S.attributes.IV)},"media-sequence"(){if(!isFinite(S.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+S.number});return}this.manifest.mediaSequence=S.number},"discontinuity-sequence"(){if(!isFinite(S.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+S.number});return}this.manifest.discontinuitySequence=S.number,v=S.number},"playlist-type"(){if(!/VOD|EVENT/.test(S.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+S.playlist});return}this.manifest.playlistType=S.playlistType},map(){o={},S.uri&&(o.uri=S.uri),S.byterange&&(o.byterange=S.byterange),l&&(o.key=l)},"stream-inf"(){if(this.manifest.playlists=s,this.manifest.mediaGroups=this.manifest.mediaGroups||f,!S.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}a.attributes||(a.attributes={}),_extends(a.attributes,S.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||f,!(S.attributes&&S.attributes.TYPE&&S.attributes["GROUP-ID"]&&S.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}const V=this.manifest.mediaGroups[S.attributes.TYPE];V[S.attributes["GROUP-ID"]]=V[S.attributes["GROUP-ID"]]||{},k=V[S.attributes["GROUP-ID"]],M={default:/yes/i.test(S.attributes.DEFAULT)},M.default?M.autoselect=!0:M.autoselect=/yes/i.test(S.attributes.AUTOSELECT),S.attributes.LANGUAGE&&(M.language=S.attributes.LANGUAGE),S.attributes.URI&&(M.uri=S.attributes.URI),S.attributes["INSTREAM-ID"]&&(M.instreamId=S.attributes["INSTREAM-ID"]),S.attributes.CHARACTERISTICS&&(M.characteristics=S.attributes.CHARACTERISTICS),S.attributes.FORCED&&(M.forced=/yes/i.test(S.attributes.FORCED)),k[S.attributes.NAME]=M},discontinuity(){v+=1,a.discontinuity=!0,this.manifest.discontinuityStarts.push(s.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=S.dateTimeString,this.manifest.dateTimeObject=S.dateTimeObject),a.dateTimeString=S.dateTimeString,a.dateTimeObject=S.dateTimeObject;const{lastProgramDateTime:V}=this;this.lastProgramDateTime=new Date(S.dateTimeString).getTime(),V===null&&this.manifest.segments.reduceRight((H,F)=>(F.programDateTime=H-F.duration*1e3,F.programDateTime),this.lastProgramDateTime)},targetduration(){if(!isFinite(S.duration)||S.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+S.duration});return}this.manifest.targetDuration=S.duration,setHoldBack.call(this,this.manifest)},start(){if(!S.attributes||isNaN(S.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:S.attributes["TIME-OFFSET"],precise:S.attributes.PRECISE}},"cue-out"(){a.cueOut=S.data},"cue-out-cont"(){a.cueOutCont=S.data},"cue-in"(){a.cueIn=S.data},skip(){this.manifest.skip=camelCaseKeys(S.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",S.attributes,["SKIPPED-SEGMENTS"])},part(){u=!0;const V=this.manifest.segments.length,H=camelCaseKeys(S.attributes);a.parts=a.parts||[],a.parts.push(H),H.byterange&&(H.byterange.hasOwnProperty("offset")||(H.byterange.offset=C),C=H.byterange.offset+H.byterange.length);const F=a.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${F} for segment #${V}`,S.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((G,W)=>{G.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${W} lacks required attribute(s): LAST-PART`})})},"server-control"(){const V=this.manifest.serverControl=camelCaseKeys(S.attributes);V.hasOwnProperty("canBlockReload")||(V.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),setHoldBack.call(this,this.manifest),V.canSkipDateranges&&!V.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const V=this.manifest.segments.length,H=camelCaseKeys(S.attributes),F=H.type&&H.type==="PART";a.preloadHints=a.preloadHints||[],a.preloadHints.push(H),H.byterange&&(H.byterange.hasOwnProperty("offset")||(H.byterange.offset=F?C:0,F&&(C=H.byterange.offset+H.byterange.length)));const G=a.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${G} for segment #${V}`,S.attributes,["TYPE","URI"]),!!H.type)for(let W=0;W<a.preloadHints.length-1;W++){const R=a.preloadHints[W];R.type&&R.type===H.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${G} for segment #${V} has the same TYPE ${H.type} as preload hint #${W}`})}},"rendition-report"(){const V=camelCaseKeys(S.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(V);const H=this.manifest.renditionReports.length-1,F=["LAST-MSN","URI"];u&&F.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${H}`,S.attributes,F)},"part-inf"(){this.manifest.partInf=camelCaseKeys(S.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",S.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),setHoldBack.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(camelCaseKeys(S.attributes));const V=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${V}`,S.attributes,["ID","START-DATE"]);const H=this.manifest.dateRanges[V];H.endDate&&H.startDate&&new Date(H.endDate)<new Date(H.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),H.duration&&H.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),H.plannedDuration&&H.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const F=!!H.endOnNext;if(F&&!H.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),F&&(H.duration||H.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),H.duration&&H.endDate){const W=H.startDate.getTime()+H.duration*1e3;this.manifest.dateRanges[V].endDate=new Date(W)}if(!w[H.id])w[H.id]=H;else{for(const W in w[H.id])if(H[W]&&JSON.stringify(w[H.id][W])!==JSON.stringify(H[W])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const G=this.manifest.dateRanges.findIndex(W=>W.id===H.id);this.manifest.dateRanges[G]=_extends(this.manifest.dateRanges[G],H),w[H.id]=_extends(w[H.id],H),this.manifest.dateRanges.pop()}},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=camelCaseKeys(S.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",S.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};const V=(H,F)=>{if(H in this.manifest.definitions){this.trigger("error",{message:`EXT-X-DEFINE: Duplicate name ${H}`});return}this.manifest.definitions[H]=F};if("QUERYPARAM"in S.attributes){if("NAME"in S.attributes||"IMPORT"in S.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}const H=this.params.get(S.attributes.QUERYPARAM);if(!H){this.trigger("error",{message:`EXT-X-DEFINE: No query param ${S.attributes.QUERYPARAM}`});return}V(S.attributes.QUERYPARAM,decodeURIComponent(H));return}if("NAME"in S.attributes){if("IMPORT"in S.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}if(!("VALUE"in S.attributes)||typeof S.attributes.VALUE!="string"){this.trigger("error",{message:`EXT-X-DEFINE: No value for ${S.attributes.NAME}`});return}V(S.attributes.NAME,S.attributes.VALUE);return}if("IMPORT"in S.attributes){if(!this.mainDefinitions[S.attributes.IMPORT]){this.trigger("error",{message:`EXT-X-DEFINE: No value ${S.attributes.IMPORT} to import, or IMPORT used on main playlist`});return}V(S.attributes.IMPORT,this.mainDefinitions[S.attributes.IMPORT]);return}this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:S.attributes,uri:S.uri,timeline:v}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",S.attributes,["BANDWIDTH","URI"])}}[S.tagType]||c).call(n)},uri(){a.uri=S.uri,s.push(a),this.manifest.targetDuration&&!("duration"in a)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.targetDuration),l&&(a.key=l),a.timeline=v,o&&(a.map=o),C=0,this.lastProgramDateTime!==null&&(a.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=a.duration*1e3),a={}},comment(){},custom(){S.segment?(a.custom=a.custom||{},a.custom[S.customType]=S.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[S.customType]=S.data)}})[S.type].call(n)})}requiredCompatibilityversion(e,n){(e<n||!e)&&this.trigger("warn",{message:`manifest must be at least version ${n}`})}warnOnMissingAttributes_(e,n,s){const a=[];s.forEach(function(o){n.hasOwnProperty(o)||a.push(o)}),a.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${a.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push(`
`),this.manifest.dateRanges.length&&this.lastProgramDateTime===null&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var regexs={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},mediaTypes=["video","audio","text"],upperMediaTypes=["Video","Audio","Text"],translateLegacyCodec=function r(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(n,s,a){var o=("00"+Number(s).toString(16)).slice(-2),l=("00"+Number(a).toString(16)).slice(-2);return"avc1."+o+"00"+l})},parseCodecs=function r(e){e===void 0&&(e="");var n=e.split(","),s=[];return n.forEach(function(a){a=a.trim();var o;mediaTypes.forEach(function(l){var u=regexs[l].exec(a.toLowerCase());if(!(!u||u.length<=1)){o=l;var c=a.substring(0,u[1].length),f=a.replace(c,"");s.push({type:c,details:f,mediaType:l})}}),o||s.push({type:a,details:"",mediaType:"unknown"})}),s},codecsFromDefault=function r(e,n){if(!e.mediaGroups.AUDIO||!n)return null;var s=e.mediaGroups.AUDIO[n];if(!s)return null;for(var a in s){var o=s[a];if(o.default&&o.playlists)return parseCodecs(o.playlists[0].attributes.CODECS)}return null},isAudioCodec=function r(e){return e===void 0&&(e=""),regexs.audio.test(e.trim().toLowerCase())},isTextCodec=function r(e){return e===void 0&&(e=""),regexs.text.test(e.trim().toLowerCase())},getMimeForCodec=function r(e){if(!(!e||typeof e!="string")){var n=e.toLowerCase().split(",").map(function(o){return translateLegacyCodec(o.trim())}),s="video";n.length===1&&isAudioCodec(n[0])?s="audio":n.length===1&&isTextCodec(n[0])&&(s="application");var a="mp4";return n.every(function(o){return regexs.mp4.test(o)})?a="mp4":n.every(function(o){return regexs.webm.test(o)})?a="webm":n.every(function(o){return regexs.ogg.test(o)})&&(a="ogg"),s+"/"+a+';codecs="'+e+'"'}},browserSupportsCodec=function r(e,n){return e===void 0&&(e=""),n===void 0&&(n=!1),window$1.MediaSource&&window$1.MediaSource.isTypeSupported&&window$1.MediaSource.isTypeSupported(getMimeForCodec(e))||n&&window$1.ManagedMediaSource&&window$1.ManagedMediaSource.isTypeSupported&&window$1.ManagedMediaSource.isTypeSupported(getMimeForCodec(e))||!1},muxerSupportsCodec=function r(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(n){n=n.trim();for(var s=0;s<upperMediaTypes.length;s++){var a=upperMediaTypes[s];if(regexs["muxer"+a].test(n))return!0}return!1})},DEFAULT_AUDIO_CODEC="mp4a.40.2",DEFAULT_VIDEO_CODEC="avc1.4d400d",MPEGURL_REGEX=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,DASH_REGEX=/^application\/dash\+xml/i,simpleTypeFromSourceType=function r(e){return MPEGURL_REGEX.test(e)?"hls":DASH_REGEX.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},countBits=function r(e){return e.toString(2).length},countBytes=function r(e){return Math.ceil(countBits(e)/8)},isArrayBufferView=function r(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},isTypedArray=function r(e){return isArrayBufferView(e)},toUint8=function r(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!isTypedArray(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},BigInt=window$1.BigInt||Number,BYTE_TABLE=[BigInt("0x1"),BigInt("0x100"),BigInt("0x10000"),BigInt("0x1000000"),BigInt("0x100000000"),BigInt("0x10000000000"),BigInt("0x1000000000000"),BigInt("0x100000000000000"),BigInt("0x10000000000000000")];(function(){var r=new Uint16Array([65484]),e=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var bytesToNumber=function r(e,n){var s=n===void 0?{}:n,a=s.signed,o=a===void 0?!1:a,l=s.le,u=l===void 0?!1:l;e=toUint8(e);var c=u?"reduce":"reduceRight",f=e[c]?e[c]:Array.prototype[c],m=f.call(e,function(x,C,w){var S=u?w:Math.abs(w+1-e.length);return x+BigInt(C)*BYTE_TABLE[S]},BigInt(0));if(o){var v=BYTE_TABLE[e.length]/BigInt(2)-BigInt(1);m=BigInt(m),m>v&&(m-=v,m-=v,m-=BigInt(2))}return Number(m)},numberToBytes=function r(e,n){var s={},a=s.le,o=a===void 0?!1:a;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=BigInt(e);for(var l=countBytes(e),u=new Uint8Array(new ArrayBuffer(l)),c=0;c<l;c++){var f=o?c:Math.abs(c+1-u.length);u[f]=Number(e/BYTE_TABLE[c]&BigInt(255)),e<0&&(u[f]=Math.abs(~u[f]),u[f]-=c===0?1:2)}return u},stringToBytes=function r(e,n){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;n||(e=unescape(encodeURIComponent(e)));for(var s=new Uint8Array(e.length),a=0;a<e.length;a++)s[a]=e.charCodeAt(a);return s},concatTypedArrays=function r(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];if(n=n.filter(function(u){return u&&(u.byteLength||u.length)&&typeof u!="string"}),n.length<=1)return toUint8(n[0]);var a=n.reduce(function(u,c,f){return u+(c.byteLength||c.length)},0),o=new Uint8Array(a),l=0;return n.forEach(function(u){u=toUint8(u),o.set(u,l),l+=u.byteLength}),o},bytesMatch=function r(e,n,s){var a=s===void 0?{}:s,o=a.offset,l=o===void 0?0:o,u=a.mask,c=u===void 0?[]:u;e=toUint8(e),n=toUint8(n);var f=n.every?n.every:Array.prototype.every;return n.length&&e.length-l>=n.length&&f.call(n,function(m,v){var x=c[v]?c[v]&e[l+v]:e[l+v];return m===x})},forEachMediaGroup$1=function r(e,n,s){n.forEach(function(a){for(var o in e.mediaGroups[a])for(var l in e.mediaGroups[a][o]){var u=e.mediaGroups[a][o][l];s(u,a,o,l)}})},lib={},dom={},conventions={},hasRequiredConventions;function requireConventions(){if(hasRequiredConventions)return conventions;hasRequiredConventions=1;function r(o,l,u){if(u===void 0&&(u=Array.prototype),o&&typeof u.find=="function")return u.find.call(o,l);for(var c=0;c<o.length;c++)if(Object.prototype.hasOwnProperty.call(o,c)){var f=o[c];if(l.call(void 0,f,c,o))return f}}function e(o,l){return l===void 0&&(l=Object),l&&typeof l.freeze=="function"?l.freeze(o):o}function n(o,l){if(o===null||typeof o!="object")throw new TypeError("target is not an object");for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(o[u]=l[u]);return o}var s=e({HTML:"text/html",isHTML:function(o){return o===s.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),a=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(o){return o===a.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return conventions.assign=n,conventions.find=r,conventions.freeze=e,conventions.MIME_TYPE=s,conventions.NAMESPACE=a,conventions}var hasRequiredDom;function requireDom(){if(hasRequiredDom)return dom;hasRequiredDom=1;var r=requireConventions(),e=r.find,n=r.NAMESPACE;function s(I){return I!==""}function a(I){return I?I.split(/[\t\n\f\r ]+/).filter(s):[]}function o(I,O){return I.hasOwnProperty(O)||(I[O]=!0),I}function l(I){if(!I)return[];var O=a(I);return Object.keys(O.reduce(o,{}))}function u(I){return function(O){return I&&I.indexOf(O)!==-1}}function c(I,O){for(var K in I)Object.prototype.hasOwnProperty.call(I,K)&&(O[K]=I[K])}function f(I,O){var K=I.prototype;if(!(K instanceof O)){let Te=function(){};var ie=Te;Te.prototype=O.prototype,Te=new Te,c(K,Te),I.prototype=K=Te}K.constructor!=I&&(typeof I!="function"&&console.error("unknown Class:"+I),K.constructor=I)}var m={},v=m.ELEMENT_NODE=1,x=m.ATTRIBUTE_NODE=2,C=m.TEXT_NODE=3,w=m.CDATA_SECTION_NODE=4,S=m.ENTITY_REFERENCE_NODE=5,k=m.ENTITY_NODE=6,M=m.PROCESSING_INSTRUCTION_NODE=7,V=m.COMMENT_NODE=8,H=m.DOCUMENT_NODE=9,F=m.DOCUMENT_TYPE_NODE=10,G=m.DOCUMENT_FRAGMENT_NODE=11,W=m.NOTATION_NODE=12,R={},Q={};R.INDEX_SIZE_ERR=(Q[1]="Index size error",1),R.DOMSTRING_SIZE_ERR=(Q[2]="DOMString size error",2);var A=R.HIERARCHY_REQUEST_ERR=(Q[3]="Hierarchy request error",3);R.WRONG_DOCUMENT_ERR=(Q[4]="Wrong document",4),R.INVALID_CHARACTER_ERR=(Q[5]="Invalid character",5),R.NO_DATA_ALLOWED_ERR=(Q[6]="No data allowed",6),R.NO_MODIFICATION_ALLOWED_ERR=(Q[7]="No modification allowed",7);var P=R.NOT_FOUND_ERR=(Q[8]="Not found",8);R.NOT_SUPPORTED_ERR=(Q[9]="Not supported",9);var j=R.INUSE_ATTRIBUTE_ERR=(Q[10]="Attribute in use",10);R.INVALID_STATE_ERR=(Q[11]="Invalid state",11),R.SYNTAX_ERR=(Q[12]="Syntax error",12),R.INVALID_MODIFICATION_ERR=(Q[13]="Invalid modification",13),R.NAMESPACE_ERR=(Q[14]="Invalid namespace",14),R.INVALID_ACCESS_ERR=(Q[15]="Invalid access",15);function X(I,O){if(O instanceof Error)var K=O;else K=this,Error.call(this,Q[I]),this.message=Q[I],Error.captureStackTrace&&Error.captureStackTrace(this,X);return K.code=I,O&&(this.message=this.message+": "+O),K}X.prototype=Error.prototype,c(R,X);function Z(){}Z.prototype={length:0,item:function(I){return I>=0&&I<this.length?this[I]:null},toString:function(I,O){for(var K=[],ie=0;ie<this.length;ie++)ft(this[ie],K,I,O);return K.join("")},filter:function(I){return Array.prototype.filter.call(this,I)},indexOf:function(I){return Array.prototype.indexOf.call(this,I)}};function ae(I,O){this._node=I,this._refresh=O,pe(this)}function pe(I){var O=I._node._inc||I._node.ownerDocument._inc;if(I._inc!==O){var K=I._refresh(I._node);if(qt(I,"length",K.length),!I.$$length||K.length<I.$$length)for(var ie=K.length;ie in I;ie++)Object.prototype.hasOwnProperty.call(I,ie)&&delete I[ie];c(K,I),I._inc=O}}ae.prototype.item=function(I){return pe(this),this[I]||null},f(ae,Z);function me(){}function ee(I,O){for(var K=I.length;K--;)if(I[K]===O)return K}function ne(I,O,K,ie){if(ie?O[ee(O,ie)]=K:O[O.length++]=K,I){K.ownerElement=I;var Te=I.ownerDocument;Te&&(ie&&Xe(Te,I,ie),Oe(Te,I,K))}}function oe(I,O,K){var ie=ee(O,K);if(ie>=0){for(var Te=O.length-1;ie<Te;)O[ie]=O[++ie];if(O.length=Te,I){var Le=I.ownerDocument;Le&&(Xe(Le,I,K),K.ownerElement=null)}}else throw new X(P,new Error(I.tagName+"@"+K))}me.prototype={length:0,item:Z.prototype.item,getNamedItem:function(I){for(var O=this.length;O--;){var K=this[O];if(K.nodeName==I)return K}},setNamedItem:function(I){var O=I.ownerElement;if(O&&O!=this._ownerElement)throw new X(j);var K=this.getNamedItem(I.nodeName);return ne(this._ownerElement,this,I,K),K},setNamedItemNS:function(I){var O=I.ownerElement,K;if(O&&O!=this._ownerElement)throw new X(j);return K=this.getNamedItemNS(I.namespaceURI,I.localName),ne(this._ownerElement,this,I,K),K},removeNamedItem:function(I){var O=this.getNamedItem(I);return oe(this._ownerElement,this,O),O},removeNamedItemNS:function(I,O){var K=this.getNamedItemNS(I,O);return oe(this._ownerElement,this,K),K},getNamedItemNS:function(I,O){for(var K=this.length;K--;){var ie=this[K];if(ie.localName==O&&ie.namespaceURI==I)return ie}return null}};function he(){}he.prototype={hasFeature:function(I,O){return!0},createDocument:function(I,O,K){var ie=new Be;if(ie.implementation=this,ie.childNodes=new Z,ie.doctype=K||null,K&&ie.appendChild(K),O){var Te=ie.createElementNS(I,O);ie.appendChild(Te)}return ie},createDocumentType:function(I,O,K){var ie=new He;return ie.name=I,ie.nodeName=I,ie.publicId=O||"",ie.systemId=K||"",ie}};function ge(){}ge.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(I,O){return ve(this,I,O)},replaceChild:function(I,O){ve(this,I,O,be),O&&this.removeChild(O)},removeChild:function(I){return ze(this,I)},appendChild:function(I){return this.insertBefore(I,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(I){return Ot(this.ownerDocument||this,this,I)},normalize:function(){for(var I=this.firstChild;I;){var O=I.nextSibling;O&&O.nodeType==C&&I.nodeType==C?(this.removeChild(O),I.appendData(O.data)):(I.normalize(),I=O)}},isSupported:function(I,O){return this.ownerDocument.implementation.hasFeature(I,O)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(I){for(var O=this;O;){var K=O._nsMap;if(K){for(var ie in K)if(Object.prototype.hasOwnProperty.call(K,ie)&&K[ie]===I)return ie}O=O.nodeType==x?O.ownerDocument:O.parentNode}return null},lookupNamespaceURI:function(I){for(var O=this;O;){var K=O._nsMap;if(K&&Object.prototype.hasOwnProperty.call(K,I))return K[I];O=O.nodeType==x?O.ownerDocument:O.parentNode}return null},isDefaultNamespace:function(I){var O=this.lookupPrefix(I);return O==null}};function Ie(I){return I=="<"&&"&lt;"||I==">"&&"&gt;"||I=="&"&&"&amp;"||I=='"'&&"&quot;"||"&#"+I.charCodeAt()+";"}c(m,ge),c(m,ge.prototype);function Me(I,O){if(O(I))return!0;if(I=I.firstChild)do if(Me(I,O))return!0;while(I=I.nextSibling)}function Be(){this.ownerDocument=this}function Oe(I,O,K){I&&I._inc++;var ie=K.namespaceURI;ie===n.XMLNS&&(O._nsMap[K.prefix?K.localName:""]=K.value)}function Xe(I,O,K,ie){I&&I._inc++;var Te=K.namespaceURI;Te===n.XMLNS&&delete O._nsMap[K.prefix?K.localName:""]}function Ze(I,O,K){if(I&&I._inc){I._inc++;var ie=O.childNodes;if(K)ie[ie.length++]=K;else{for(var Te=O.firstChild,Le=0;Te;)ie[Le++]=Te,Te=Te.nextSibling;ie.length=Le,delete ie[ie.length]}}}function ze(I,O){var K=O.previousSibling,ie=O.nextSibling;return K?K.nextSibling=ie:I.firstChild=ie,ie?ie.previousSibling=K:I.lastChild=K,O.parentNode=null,O.previousSibling=null,O.nextSibling=null,Ze(I.ownerDocument,I),O}function nt(I){return I&&(I.nodeType===ge.DOCUMENT_NODE||I.nodeType===ge.DOCUMENT_FRAGMENT_NODE||I.nodeType===ge.ELEMENT_NODE)}function at(I){return I&&(z(I)||Y(I)||ot(I)||I.nodeType===ge.DOCUMENT_FRAGMENT_NODE||I.nodeType===ge.COMMENT_NODE||I.nodeType===ge.PROCESSING_INSTRUCTION_NODE)}function ot(I){return I&&I.nodeType===ge.DOCUMENT_TYPE_NODE}function z(I){return I&&I.nodeType===ge.ELEMENT_NODE}function Y(I){return I&&I.nodeType===ge.TEXT_NODE}function te(I,O){var K=I.childNodes||[];if(e(K,z)||ot(O))return!1;var ie=e(K,ot);return!(O&&ie&&K.indexOf(ie)>K.indexOf(O))}function ye(I,O){var K=I.childNodes||[];function ie(Le){return z(Le)&&Le!==O}if(e(K,ie))return!1;var Te=e(K,ot);return!(O&&Te&&K.indexOf(Te)>K.indexOf(O))}function ce(I,O,K){if(!nt(I))throw new X(A,"Unexpected parent node type "+I.nodeType);if(K&&K.parentNode!==I)throw new X(P,"child not in parent");if(!at(O)||ot(O)&&I.nodeType!==ge.DOCUMENT_NODE)throw new X(A,"Unexpected node type "+O.nodeType+" for parent node type "+I.nodeType)}function _e(I,O,K){var ie=I.childNodes||[],Te=O.childNodes||[];if(O.nodeType===ge.DOCUMENT_FRAGMENT_NODE){var Le=Te.filter(z);if(Le.length>1||e(Te,Y))throw new X(A,"More than one element or text in fragment");if(Le.length===1&&!te(I,K))throw new X(A,"Element in fragment can not be inserted before doctype")}if(z(O)&&!te(I,K))throw new X(A,"Only one element can be added and only after doctype");if(ot(O)){if(e(ie,ot))throw new X(A,"Only one doctype is allowed");var xe=e(ie,z);if(K&&ie.indexOf(xe)<ie.indexOf(K))throw new X(A,"Doctype can only be inserted before an element");if(!K&&xe)throw new X(A,"Doctype can not be appended since element is present")}}function be(I,O,K){var ie=I.childNodes||[],Te=O.childNodes||[];if(O.nodeType===ge.DOCUMENT_FRAGMENT_NODE){var Le=Te.filter(z);if(Le.length>1||e(Te,Y))throw new X(A,"More than one element or text in fragment");if(Le.length===1&&!ye(I,K))throw new X(A,"Element in fragment can not be inserted before doctype")}if(z(O)&&!ye(I,K))throw new X(A,"Only one element can be added and only after doctype");if(ot(O)){let vt=function(ct){return ot(ct)&&ct!==K};var et=vt;if(e(ie,vt))throw new X(A,"Only one doctype is allowed");var xe=e(ie,z);if(K&&ie.indexOf(xe)<ie.indexOf(K))throw new X(A,"Doctype can only be inserted before an element")}}function ve(I,O,K,ie){ce(I,O,K),I.nodeType===ge.DOCUMENT_NODE&&(ie||_e)(I,O,K);var Te=O.parentNode;if(Te&&Te.removeChild(O),O.nodeType===G){var Le=O.firstChild;if(Le==null)return O;var xe=O.lastChild}else Le=xe=O;var et=K?K.previousSibling:I.lastChild;Le.previousSibling=et,xe.nextSibling=K,et?et.nextSibling=Le:I.firstChild=Le,K==null?I.lastChild=xe:K.previousSibling=xe;do Le.parentNode=I;while(Le!==xe&&(Le=Le.nextSibling));return Ze(I.ownerDocument||I,I),O.nodeType==G&&(O.firstChild=O.lastChild=null),O}function fe(I,O){return O.parentNode&&O.parentNode.removeChild(O),O.parentNode=I,O.previousSibling=I.lastChild,O.nextSibling=null,O.previousSibling?O.previousSibling.nextSibling=O:I.firstChild=O,I.lastChild=O,Ze(I.ownerDocument,I,O),O}Be.prototype={nodeName:"#document",nodeType:H,doctype:null,documentElement:null,_inc:1,insertBefore:function(I,O){if(I.nodeType==G){for(var K=I.firstChild;K;){var ie=K.nextSibling;this.insertBefore(K,O),K=ie}return I}return ve(this,I,O),I.ownerDocument=this,this.documentElement===null&&I.nodeType===v&&(this.documentElement=I),I},removeChild:function(I){return this.documentElement==I&&(this.documentElement=null),ze(this,I)},replaceChild:function(I,O){ve(this,I,O,be),I.ownerDocument=this,O&&this.removeChild(O),z(I)&&(this.documentElement=I)},importNode:function(I,O){return ti(this,I,O)},getElementById:function(I){var O=null;return Me(this.documentElement,function(K){if(K.nodeType==v&&K.getAttribute("id")==I)return O=K,!0}),O},getElementsByClassName:function(I){var O=l(I);return new ae(this,function(K){var ie=[];return O.length>0&&Me(K.documentElement,function(Te){if(Te!==K&&Te.nodeType===v){var Le=Te.getAttribute("class");if(Le){var xe=I===Le;if(!xe){var et=l(Le);xe=O.every(u(et))}xe&&ie.push(Te)}}}),ie})},createElement:function(I){var O=new ue;O.ownerDocument=this,O.nodeName=I,O.tagName=I,O.localName=I,O.childNodes=new Z;var K=O.attributes=new me;return K._ownerElement=O,O},createDocumentFragment:function(){var I=new rt;return I.ownerDocument=this,I.childNodes=new Z,I},createTextNode:function(I){var O=new De;return O.ownerDocument=this,O.appendData(I),O},createComment:function(I){var O=new Pe;return O.ownerDocument=this,O.appendData(I),O},createCDATASection:function(I){var O=new Ne;return O.ownerDocument=this,O.appendData(I),O},createProcessingInstruction:function(I,O){var K=new Fe;return K.ownerDocument=this,K.tagName=K.nodeName=K.target=I,K.nodeValue=K.data=O,K},createAttribute:function(I){var O=new we;return O.ownerDocument=this,O.name=I,O.nodeName=I,O.localName=I,O.specified=!0,O},createEntityReference:function(I){var O=new Je;return O.ownerDocument=this,O.nodeName=I,O},createElementNS:function(I,O){var K=new ue,ie=O.split(":"),Te=K.attributes=new me;return K.childNodes=new Z,K.ownerDocument=this,K.nodeName=O,K.tagName=O,K.namespaceURI=I,ie.length==2?(K.prefix=ie[0],K.localName=ie[1]):K.localName=O,Te._ownerElement=K,K},createAttributeNS:function(I,O){var K=new we,ie=O.split(":");return K.ownerDocument=this,K.nodeName=O,K.name=O,K.namespaceURI=I,K.specified=!0,ie.length==2?(K.prefix=ie[0],K.localName=ie[1]):K.localName=O,K}},f(Be,ge);function ue(){this._nsMap={}}ue.prototype={nodeType:v,hasAttribute:function(I){return this.getAttributeNode(I)!=null},getAttribute:function(I){var O=this.getAttributeNode(I);return O&&O.value||""},getAttributeNode:function(I){return this.attributes.getNamedItem(I)},setAttribute:function(I,O){var K=this.ownerDocument.createAttribute(I);K.value=K.nodeValue=""+O,this.setAttributeNode(K)},removeAttribute:function(I){var O=this.getAttributeNode(I);O&&this.removeAttributeNode(O)},appendChild:function(I){return I.nodeType===G?this.insertBefore(I,null):fe(this,I)},setAttributeNode:function(I){return this.attributes.setNamedItem(I)},setAttributeNodeNS:function(I){return this.attributes.setNamedItemNS(I)},removeAttributeNode:function(I){return this.attributes.removeNamedItem(I.nodeName)},removeAttributeNS:function(I,O){var K=this.getAttributeNodeNS(I,O);K&&this.removeAttributeNode(K)},hasAttributeNS:function(I,O){return this.getAttributeNodeNS(I,O)!=null},getAttributeNS:function(I,O){var K=this.getAttributeNodeNS(I,O);return K&&K.value||""},setAttributeNS:function(I,O,K){var ie=this.ownerDocument.createAttributeNS(I,O);ie.value=ie.nodeValue=""+K,this.setAttributeNode(ie)},getAttributeNodeNS:function(I,O){return this.attributes.getNamedItemNS(I,O)},getElementsByTagName:function(I){return new ae(this,function(O){var K=[];return Me(O,function(ie){ie!==O&&ie.nodeType==v&&(I==="*"||ie.tagName==I)&&K.push(ie)}),K})},getElementsByTagNameNS:function(I,O){return new ae(this,function(K){var ie=[];return Me(K,function(Te){Te!==K&&Te.nodeType===v&&(I==="*"||Te.namespaceURI===I)&&(O==="*"||Te.localName==O)&&ie.push(Te)}),ie})}},Be.prototype.getElementsByTagName=ue.prototype.getElementsByTagName,Be.prototype.getElementsByTagNameNS=ue.prototype.getElementsByTagNameNS,f(ue,ge);function we(){}we.prototype.nodeType=x,f(we,ge);function Se(){}Se.prototype={data:"",substringData:function(I,O){return this.data.substring(I,I+O)},appendData:function(I){I=this.data+I,this.nodeValue=this.data=I,this.length=I.length},insertData:function(I,O){this.replaceData(I,0,O)},appendChild:function(I){throw new Error(Q[A])},deleteData:function(I,O){this.replaceData(I,O,"")},replaceData:function(I,O,K){var ie=this.data.substring(0,I),Te=this.data.substring(I+O);K=ie+K+Te,this.nodeValue=this.data=K,this.length=K.length}},f(Se,ge);function De(){}De.prototype={nodeName:"#text",nodeType:C,splitText:function(I){var O=this.data,K=O.substring(I);O=O.substring(0,I),this.data=this.nodeValue=O,this.length=O.length;var ie=this.ownerDocument.createTextNode(K);return this.parentNode&&this.parentNode.insertBefore(ie,this.nextSibling),ie}},f(De,Se);function Pe(){}Pe.prototype={nodeName:"#comment",nodeType:V},f(Pe,Se);function Ne(){}Ne.prototype={nodeName:"#cdata-section",nodeType:w},f(Ne,Se);function He(){}He.prototype.nodeType=F,f(He,ge);function je(){}je.prototype.nodeType=W,f(je,ge);function it(){}it.prototype.nodeType=k,f(it,ge);function Je(){}Je.prototype.nodeType=S,f(Je,ge);function rt(){}rt.prototype.nodeName="#document-fragment",rt.prototype.nodeType=G,f(rt,ge);function Fe(){}Fe.prototype.nodeType=M,f(Fe,ge);function yt(){}yt.prototype.serializeToString=function(I,O,K){return _t.call(I,O,K)},ge.prototype.toString=_t;function _t(I,O){var K=[],ie=this.nodeType==9&&this.documentElement||this,Te=ie.prefix,Le=ie.namespaceURI;if(Le&&Te==null){var Te=ie.lookupPrefix(Le);if(Te==null)var xe=[{namespace:Le,prefix:null}]}return ft(this,K,I,O,xe),K.join("")}function st(I,O,K){var ie=I.prefix||"",Te=I.namespaceURI;if(!Te||ie==="xml"&&Te===n.XML||Te===n.XMLNS)return!1;for(var Le=K.length;Le--;){var xe=K[Le];if(xe.prefix===ie)return xe.namespace!==Te}return!0}function lt(I,O,K){I.push(" ",O,'="',K.replace(/[<>&"\t\n\r]/g,Ie),'"')}function ft(I,O,K,ie,Te){if(Te||(Te=[]),ie)if(I=ie(I),I){if(typeof I=="string"){O.push(I);return}}else return;switch(I.nodeType){case v:var Le=I.attributes,xe=Le.length,We=I.firstChild,et=I.tagName;K=n.isHTML(I.namespaceURI)||K;var vt=et;if(!K&&!I.prefix&&I.namespaceURI){for(var ct,pt=0;pt<Le.length;pt++)if(Le.item(pt).name==="xmlns"){ct=Le.item(pt).value;break}if(!ct)for(var Tt=Te.length-1;Tt>=0;Tt--){var dt=Te[Tt];if(dt.prefix===""&&dt.namespace===I.namespaceURI){ct=dt.namespace;break}}if(ct!==I.namespaceURI)for(var Tt=Te.length-1;Tt>=0;Tt--){var dt=Te[Tt];if(dt.namespace===I.namespaceURI){dt.prefix&&(vt=dt.prefix+":"+et);break}}}O.push("<",vt);for(var Ye=0;Ye<xe;Ye++){var mt=Le.item(Ye);mt.prefix=="xmlns"?Te.push({prefix:mt.localName,namespace:mt.value}):mt.nodeName=="xmlns"&&Te.push({prefix:"",namespace:mt.value})}for(var Ye=0;Ye<xe;Ye++){var mt=Le.item(Ye);if(st(mt,K,Te)){var wt=mt.prefix||"",xt=mt.namespaceURI;lt(O,wt?"xmlns:"+wt:"xmlns",xt),Te.push({prefix:wt,namespace:xt})}ft(mt,O,K,ie,Te)}if(et===vt&&st(I,K,Te)){var wt=I.prefix||"",xt=I.namespaceURI;lt(O,wt?"xmlns:"+wt:"xmlns",xt),Te.push({prefix:wt,namespace:xt})}if(We||K&&!/^(?:meta|link|img|br|hr|input)$/i.test(et)){if(O.push(">"),K&&/^script$/i.test(et))for(;We;)We.data?O.push(We.data):ft(We,O,K,ie,Te.slice()),We=We.nextSibling;else for(;We;)ft(We,O,K,ie,Te.slice()),We=We.nextSibling;O.push("</",vt,">")}else O.push("/>");return;case H:case G:for(var We=I.firstChild;We;)ft(We,O,K,ie,Te.slice()),We=We.nextSibling;return;case x:return lt(O,I.name,I.value);case C:return O.push(I.data.replace(/[<&>]/g,Ie));case w:return O.push("<![CDATA[",I.data,"]]>");case V:return O.push("<!--",I.data,"-->");case F:var Pt=I.publicId,Ve=I.systemId;if(O.push("<!DOCTYPE ",I.name),Pt)O.push(" PUBLIC ",Pt),Ve&&Ve!="."&&O.push(" ",Ve),O.push(">");else if(Ve&&Ve!=".")O.push(" SYSTEM ",Ve,">");else{var ii=I.internalSubset;ii&&O.push(" [",ii,"]"),O.push(">")}return;case M:return O.push("<?",I.target," ",I.data,"?>");case S:return O.push("&",I.nodeName,";");default:O.push("??",I.nodeName)}}function ti(I,O,K){var ie;switch(O.nodeType){case v:ie=O.cloneNode(!1),ie.ownerDocument=I;case G:break;case x:K=!0;break}if(ie||(ie=O.cloneNode(!1)),ie.ownerDocument=I,ie.parentNode=null,K)for(var Te=O.firstChild;Te;)ie.appendChild(ti(I,Te,K)),Te=Te.nextSibling;return ie}function Ot(I,O,K){var ie=new O.constructor;for(var Te in O)if(Object.prototype.hasOwnProperty.call(O,Te)){var Le=O[Te];typeof Le!="object"&&Le!=ie[Te]&&(ie[Te]=Le)}switch(O.childNodes&&(ie.childNodes=new Z),ie.ownerDocument=I,ie.nodeType){case v:var xe=O.attributes,et=ie.attributes=new me,vt=xe.length;et._ownerElement=ie;for(var ct=0;ct<vt;ct++)ie.setAttributeNode(Ot(I,xe.item(ct),!0));break;case x:K=!0}if(K)for(var pt=O.firstChild;pt;)ie.appendChild(Ot(I,pt,K)),pt=pt.nextSibling;return ie}function qt(I,O,K){I[O]=K}try{if(Object.defineProperty){let I=function(O){switch(O.nodeType){case v:case G:var K=[];for(O=O.firstChild;O;)O.nodeType!==7&&O.nodeType!==8&&K.push(I(O)),O=O.nextSibling;return K.join("");default:return O.nodeValue}};var Si=I;Object.defineProperty(ae.prototype,"length",{get:function(){return pe(this),this.$$length}}),Object.defineProperty(ge.prototype,"textContent",{get:function(){return I(this)},set:function(O){switch(this.nodeType){case v:case G:for(;this.firstChild;)this.removeChild(this.firstChild);(O||String(O))&&this.appendChild(this.ownerDocument.createTextNode(O));break;default:this.data=O,this.value=O,this.nodeValue=O}}}),qt=function(O,K,ie){O["$$"+K]=ie}}}catch{}return dom.DocumentType=He,dom.DOMException=X,dom.DOMImplementation=he,dom.Element=ue,dom.Node=ge,dom.NodeList=Z,dom.XMLSerializer=yt,dom}var domParser={},entities={},hasRequiredEntities;function requireEntities(){return hasRequiredEntities||(hasRequiredEntities=1,function(r){var e=requireConventions().freeze;r.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),r.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),r.entityMap=r.HTML_ENTITIES}(entities)),entities}var sax={},hasRequiredSax;function requireSax(){if(hasRequiredSax)return sax;hasRequiredSax=1;var r=requireConventions().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,n=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),s=new RegExp("^"+e.source+n.source+"*(?::"+e.source+n.source+"*)?$"),a=0,o=1,l=2,u=3,c=4,f=5,m=6,v=7;function x(A,P){this.message=A,this.locator=P,Error.captureStackTrace&&Error.captureStackTrace(this,x)}x.prototype=new Error,x.prototype.name=x.name;function C(){}C.prototype={parse:function(A,P,j){var X=this.domBuilder;X.startDocument(),F(P,P={}),w(A,P,j,X,this.errorHandler),X.endDocument()}};function w(A,P,j,X,Z){function ae(ue){if(ue>65535){ue-=65536;var we=55296+(ue>>10),Se=56320+(ue&1023);return String.fromCharCode(we,Se)}else return String.fromCharCode(ue)}function pe(ue){var we=ue.slice(1,-1);return Object.hasOwnProperty.call(j,we)?j[we]:we.charAt(0)==="#"?ae(parseInt(we.substr(1).replace("x","0x"))):(Z.error("entity not found:"+ue),ue)}function me(ue){if(ue>Be){var we=A.substring(Be,ue).replace(/&#?\w+;/g,pe);ge&&ee(Be),X.characters(we,0,ue-Be),Be=ue}}function ee(ue,we){for(;ue>=oe&&(we=he.exec(A));)ne=we.index,oe=ne+we[0].length,ge.lineNumber++;ge.columnNumber=ue-ne+1}for(var ne=0,oe=0,he=/.*(?:\r\n?|\n)|.*$/g,ge=X.locator,Ie=[{currentNSMap:P}],Me={},Be=0;;){try{var Oe=A.indexOf("<",Be);if(Oe<0){if(!A.substr(Be).match(/^\s*$/)){var Xe=X.doc,Ze=Xe.createTextNode(A.substr(Be));Xe.appendChild(Ze),X.currentElement=Ze}return}switch(Oe>Be&&me(Oe),A.charAt(Oe+1)){case"/":var ce=A.indexOf(">",Oe+3),ze=A.substring(Oe+2,ce).replace(/[ \t\n\r]+$/g,""),nt=Ie.pop();ce<0?(ze=A.substring(Oe+2).replace(/[\s<].*/,""),Z.error("end tag name: "+ze+" is not complete:"+nt.tagName),ce=Oe+1+ze.length):ze.match(/\s</)&&(ze=ze.replace(/[\s<].*/,""),Z.error("end tag name: "+ze+" maybe not complete"),ce=Oe+1+ze.length);var at=nt.localNSMap,ot=nt.tagName==ze,z=ot||nt.tagName&&nt.tagName.toLowerCase()==ze.toLowerCase();if(z){if(X.endElement(nt.uri,nt.localName,ze),at)for(var Y in at)Object.prototype.hasOwnProperty.call(at,Y)&&X.endPrefixMapping(Y);ot||Z.fatalError("end tag name: "+ze+" is not match the current start tagName:"+nt.tagName)}else Ie.push(nt);ce++;break;case"?":ge&&ee(Oe),ce=W(A,Oe,X);break;case"!":ge&&ee(Oe),ce=G(A,Oe,X,Z);break;default:ge&&ee(Oe);var te=new R,ye=Ie[Ie.length-1].currentNSMap,ce=k(A,Oe,te,ye,pe,Z),_e=te.length;if(!te.closed&&H(A,ce,te.tagName,Me)&&(te.closed=!0,j.nbsp||Z.warning("unclosed xml attribute")),ge&&_e){for(var be=S(ge,{}),ve=0;ve<_e;ve++){var fe=te[ve];ee(fe.offset),fe.locator=S(ge,{})}X.locator=be,M(te,X,ye)&&Ie.push(te),X.locator=ge}else M(te,X,ye)&&Ie.push(te);r.isHTML(te.uri)&&!te.closed?ce=V(A,ce,te.tagName,pe,X):ce++}}catch(ue){if(ue instanceof x)throw ue;Z.error("element parse error: "+ue),ce=-1}ce>Be?Be=ce:me(Math.max(Oe,Be)+1)}}function S(A,P){return P.lineNumber=A.lineNumber,P.columnNumber=A.columnNumber,P}function k(A,P,j,X,Z,ae){function pe(ge,Ie,Me){j.attributeNames.hasOwnProperty(ge)&&ae.fatalError("Attribute "+ge+" redefined"),j.addValue(ge,Ie.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,Z),Me)}for(var me,ee,ne=++P,oe=a;;){var he=A.charAt(ne);switch(he){case"=":if(oe===o)me=A.slice(P,ne),oe=u;else if(oe===l)oe=u;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(oe===u||oe===o)if(oe===o&&(ae.warning('attribute value must after "="'),me=A.slice(P,ne)),P=ne+1,ne=A.indexOf(he,P),ne>0)ee=A.slice(P,ne),pe(me,ee,P-1),oe=f;else throw new Error("attribute value no end '"+he+"' match");else if(oe==c)ee=A.slice(P,ne),pe(me,ee,P),ae.warning('attribute "'+me+'" missed start quot('+he+")!!"),P=ne+1,oe=f;else throw new Error('attribute value must after "="');break;case"/":switch(oe){case a:j.setTagName(A.slice(P,ne));case f:case m:case v:oe=v,j.closed=!0;case c:case o:break;case l:j.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return ae.error("unexpected end of input"),oe==a&&j.setTagName(A.slice(P,ne)),ne;case">":switch(oe){case a:j.setTagName(A.slice(P,ne));case f:case m:case v:break;case c:case o:ee=A.slice(P,ne),ee.slice(-1)==="/"&&(j.closed=!0,ee=ee.slice(0,-1));case l:oe===l&&(ee=me),oe==c?(ae.warning('attribute "'+ee+'" missed quot(")!'),pe(me,ee,P)):((!r.isHTML(X[""])||!ee.match(/^(?:disabled|checked|selected)$/i))&&ae.warning('attribute "'+ee+'" missed value!! "'+ee+'" instead!!'),pe(ee,ee,P));break;case u:throw new Error("attribute value missed!!")}return ne;case"":he=" ";default:if(he<=" ")switch(oe){case a:j.setTagName(A.slice(P,ne)),oe=m;break;case o:me=A.slice(P,ne),oe=l;break;case c:var ee=A.slice(P,ne);ae.warning('attribute "'+ee+'" missed quot(")!!'),pe(me,ee,P);case f:oe=m;break}else switch(oe){case l:j.tagName,(!r.isHTML(X[""])||!me.match(/^(?:disabled|checked|selected)$/i))&&ae.warning('attribute "'+me+'" missed value!! "'+me+'" instead2!!'),pe(me,me,P),P=ne,oe=o;break;case f:ae.warning('attribute space is required"'+me+'"!!');case m:oe=o,P=ne;break;case u:oe=c,P=ne;break;case v:throw new Error("elements closed character '/' and '>' must be connected to")}}ne++}}function M(A,P,j){for(var X=A.tagName,Z=null,he=A.length;he--;){var ae=A[he],pe=ae.qName,me=ae.value,ge=pe.indexOf(":");if(ge>0)var ee=ae.prefix=pe.slice(0,ge),ne=pe.slice(ge+1),oe=ee==="xmlns"&&ne;else ne=pe,ee=null,oe=pe==="xmlns"&&"";ae.localName=ne,oe!==!1&&(Z==null&&(Z={},F(j,j={})),j[oe]=Z[oe]=me,ae.uri=r.XMLNS,P.startPrefixMapping(oe,me))}for(var he=A.length;he--;){ae=A[he];var ee=ae.prefix;ee&&(ee==="xml"&&(ae.uri=r.XML),ee!=="xmlns"&&(ae.uri=j[ee||""]))}var ge=X.indexOf(":");ge>0?(ee=A.prefix=X.slice(0,ge),ne=A.localName=X.slice(ge+1)):(ee=null,ne=A.localName=X);var Ie=A.uri=j[ee||""];if(P.startElement(Ie,ne,X,A),A.closed){if(P.endElement(Ie,ne,X),Z)for(ee in Z)Object.prototype.hasOwnProperty.call(Z,ee)&&P.endPrefixMapping(ee)}else return A.currentNSMap=j,A.localNSMap=Z,!0}function V(A,P,j,X,Z){if(/^(?:script|textarea)$/i.test(j)){var ae=A.indexOf("</"+j+">",P),pe=A.substring(P+1,ae);if(/[&<]/.test(pe))return/^script$/i.test(j)?(Z.characters(pe,0,pe.length),ae):(pe=pe.replace(/&#?\w+;/g,X),Z.characters(pe,0,pe.length),ae)}return P+1}function H(A,P,j,X){var Z=X[j];return Z==null&&(Z=A.lastIndexOf("</"+j+">"),Z<P&&(Z=A.lastIndexOf("</"+j)),X[j]=Z),Z<P}function F(A,P){for(var j in A)Object.prototype.hasOwnProperty.call(A,j)&&(P[j]=A[j])}function G(A,P,j,X){var Z=A.charAt(P+2);switch(Z){case"-":if(A.charAt(P+3)==="-"){var ae=A.indexOf("-->",P+4);return ae>P?(j.comment(A,P+4,ae-P-4),ae+3):(X.error("Unclosed comment"),-1)}else return-1;default:if(A.substr(P+3,6)=="CDATA["){var ae=A.indexOf("]]>",P+9);return j.startCDATA(),j.characters(A,P+9,ae-P-9),j.endCDATA(),ae+3}var pe=Q(A,P),me=pe.length;if(me>1&&/!doctype/i.test(pe[0][0])){var ee=pe[1][0],ne=!1,oe=!1;me>3&&(/^public$/i.test(pe[2][0])?(ne=pe[3][0],oe=me>4&&pe[4][0]):/^system$/i.test(pe[2][0])&&(oe=pe[3][0]));var he=pe[me-1];return j.startDTD(ee,ne,oe),j.endDTD(),he.index+he[0].length}}return-1}function W(A,P,j){var X=A.indexOf("?>",P);if(X){var Z=A.substring(P,X).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return Z?(Z[0].length,j.processingInstruction(Z[1],Z[2]),X+2):-1}return-1}function R(){this.attributeNames={}}R.prototype={setTagName:function(A){if(!s.test(A))throw new Error("invalid tagName:"+A);this.tagName=A},addValue:function(A,P,j){if(!s.test(A))throw new Error("invalid attribute:"+A);this.attributeNames[A]=this.length,this[this.length++]={qName:A,value:P,offset:j}},length:0,getLocalName:function(A){return this[A].localName},getLocator:function(A){return this[A].locator},getQName:function(A){return this[A].qName},getURI:function(A){return this[A].uri},getValue:function(A){return this[A].value}};function Q(A,P){var j,X=[],Z=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(Z.lastIndex=P,Z.exec(A);j=Z.exec(A);)if(X.push(j),j[1])return X}return sax.XMLReader=C,sax.ParseError=x,sax}var hasRequiredDomParser;function requireDomParser(){if(hasRequiredDomParser)return domParser;hasRequiredDomParser=1;var r=requireConventions(),e=requireDom(),n=requireEntities(),s=requireSax(),a=e.DOMImplementation,o=r.NAMESPACE,l=s.ParseError,u=s.XMLReader;function c(k){return k.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function f(k){this.options=k||{locator:{}}}f.prototype.parseFromString=function(k,M){var V=this.options,H=new u,F=V.domBuilder||new v,G=V.errorHandler,W=V.locator,R=V.xmlns||{},Q=/\/x?html?$/.test(M),A=Q?n.HTML_ENTITIES:n.XML_ENTITIES;W&&F.setDocumentLocator(W),H.errorHandler=m(G,F,W),H.domBuilder=V.domBuilder||F,Q&&(R[""]=o.HTML),R.xml=R.xml||o.XML;var P=V.normalizeLineEndings||c;return k&&typeof k=="string"?H.parse(P(k),R,A):H.errorHandler.error("invalid doc source"),F.doc};function m(k,M,V){if(!k){if(M instanceof v)return M;k=M}var H={},F=k instanceof Function;V=V||{};function G(W){var R=k[W];!R&&F&&(R=k.length==2?function(Q){k(W,Q)}:k),H[W]=R&&function(Q){R("[xmldom "+W+"]	"+Q+C(V))}||function(){}}return G("warning"),G("error"),G("fatalError"),H}function v(){this.cdata=!1}function x(k,M){M.lineNumber=k.lineNumber,M.columnNumber=k.columnNumber}v.prototype={startDocument:function(){this.doc=new a().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(k,M,V,H){var F=this.doc,G=F.createElementNS(k,V||M),W=H.length;S(this,G),this.currentElement=G,this.locator&&x(this.locator,G);for(var R=0;R<W;R++){var k=H.getURI(R),Q=H.getValue(R),V=H.getQName(R),A=F.createAttributeNS(k,V);this.locator&&x(H.getLocator(R),A),A.value=A.nodeValue=Q,G.setAttributeNode(A)}},endElement:function(k,M,V){var H=this.currentElement;H.tagName,this.currentElement=H.parentNode},startPrefixMapping:function(k,M){},endPrefixMapping:function(k){},processingInstruction:function(k,M){var V=this.doc.createProcessingInstruction(k,M);this.locator&&x(this.locator,V),S(this,V)},ignorableWhitespace:function(k,M,V){},characters:function(k,M,V){if(k=w.apply(this,arguments),k){if(this.cdata)var H=this.doc.createCDATASection(k);else var H=this.doc.createTextNode(k);this.currentElement?this.currentElement.appendChild(H):/^\s*$/.test(k)&&this.doc.appendChild(H),this.locator&&x(this.locator,H)}},skippedEntity:function(k){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(k){(this.locator=k)&&(k.lineNumber=0)},comment:function(k,M,V){k=w.apply(this,arguments);var H=this.doc.createComment(k);this.locator&&x(this.locator,H),S(this,H)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(k,M,V){var H=this.doc.implementation;if(H&&H.createDocumentType){var F=H.createDocumentType(k,M,V);this.locator&&x(this.locator,F),S(this,F),this.doc.doctype=F}},warning:function(k){console.warn("[xmldom warning]	"+k,C(this.locator))},error:function(k){console.error("[xmldom error]	"+k,C(this.locator))},fatalError:function(k){throw new l(k,this.locator)}};function C(k){if(k)return`
@`+(k.systemId||"")+"#[line:"+k.lineNumber+",col:"+k.columnNumber+"]"}function w(k,M,V){return typeof k=="string"?k.substr(M,V):k.length>=M+V||M?new java.lang.String(k,M,V)+"":k}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(k){v.prototype[k]=function(){return null}});function S(k,M){k.currentElement?k.currentElement.appendChild(M):k.doc.appendChild(M)}return domParser.__DOMHandler=v,domParser.normalizeLineEndings=c,domParser.DOMParser=f,domParser}var hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib;hasRequiredLib=1;var r=requireDom();return lib.DOMImplementation=r.DOMImplementation,lib.XMLSerializer=r.XMLSerializer,lib.DOMParser=requireDomParser().DOMParser,lib}var libExports=requireLib();/*! @name mpd-parser @version 1.3.1 @license Apache-2.0 */const isObject$1=r=>!!r&&typeof r=="object",merge$2=(...r)=>r.reduce((e,n)=>(typeof n!="object"||Object.keys(n).forEach(s=>{Array.isArray(e[s])&&Array.isArray(n[s])?e[s]=e[s].concat(n[s]):isObject$1(e[s])&&isObject$1(n[s])?e[s]=merge$2(e[s],n[s]):e[s]=n[s]}),e),{}),values$1=r=>Object.keys(r).map(e=>r[e]),range=(r,e)=>{const n=[];for(let s=r;s<e;s++)n.push(s);return n},flatten=r=>r.reduce((e,n)=>e.concat(n),[]),from=r=>{if(!r.length)return[];const e=[];for(let n=0;n<r.length;n++)e.push(r[n]);return e},findIndexes=(r,e)=>r.reduce((n,s,a)=>(s[e]&&n.push(a),n),[]),union=(r,e)=>values$1(r.reduce((n,s)=>(s.forEach(a=>{n[e(a)]=a}),n),{}));var errors={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};const urlTypeToSegment=({baseUrl:r="",source:e="",range:n="",indexRange:s=""})=>{const a={uri:e,resolvedUri:resolveUrl$1(r||"",e)};if(n||s){const l=(n||s).split("-");let u=window$1.BigInt?window$1.BigInt(l[0]):parseInt(l[0],10),c=window$1.BigInt?window$1.BigInt(l[1]):parseInt(l[1],10);u<Number.MAX_SAFE_INTEGER&&typeof u=="bigint"&&(u=Number(u)),c<Number.MAX_SAFE_INTEGER&&typeof c=="bigint"&&(c=Number(c));let f;typeof c=="bigint"||typeof u=="bigint"?f=window$1.BigInt(c)-window$1.BigInt(u)+window$1.BigInt(1):f=c-u+1,typeof f=="bigint"&&f<Number.MAX_SAFE_INTEGER&&(f=Number(f)),a.byterange={length:f,offset:u}}return a},byteRangeToString=r=>{let e;return typeof r.offset=="bigint"||typeof r.length=="bigint"?e=window$1.BigInt(r.offset)+window$1.BigInt(r.length)-window$1.BigInt(1):e=r.offset+r.length-1,`${r.offset}-${e}`},parseEndNumber=r=>(r&&typeof r!="number"&&(r=parseInt(r,10)),isNaN(r)?null:r),segmentRange={static(r){const{duration:e,timescale:n=1,sourceDuration:s,periodDuration:a}=r,o=parseEndNumber(r.endNumber),l=e/n;return typeof o=="number"?{start:0,end:o}:typeof a=="number"?{start:0,end:a/l}:{start:0,end:s/l}},dynamic(r){const{NOW:e,clientOffset:n,availabilityStartTime:s,timescale:a=1,duration:o,periodStart:l=0,minimumUpdatePeriod:u=0,timeShiftBufferDepth:c=1/0}=r,f=parseEndNumber(r.endNumber),m=(e+n)/1e3,v=s+l,C=m+u-v,w=Math.ceil(C*a/o),S=Math.floor((m-v-c)*a/o),k=Math.floor((m-v)*a/o);return{start:Math.max(0,S),end:typeof f=="number"?f:Math.min(w,k)}}},toSegments=r=>e=>{const{duration:n,timescale:s=1,periodStart:a,startNumber:o=1}=r;return{number:o+e,duration:n/s,timeline:a,time:e*n}},parseByDuration=r=>{const{type:e,duration:n,timescale:s=1,periodDuration:a,sourceDuration:o}=r,{start:l,end:u}=segmentRange[e](r),c=range(l,u).map(toSegments(r));if(e==="static"){const f=c.length-1,m=typeof a=="number"?a:o;c[f].duration=m-n/s*f}return c},segmentsFromBase=r=>{const{baseUrl:e,initialization:n={},sourceDuration:s,indexRange:a="",periodStart:o,presentationTime:l,number:u=0,duration:c}=r;if(!e)throw new Error(errors.NO_BASE_URL);const f=urlTypeToSegment({baseUrl:e,source:n.sourceURL,range:n.range}),m=urlTypeToSegment({baseUrl:e,source:e,indexRange:a});if(m.map=f,c){const v=parseByDuration(r);v.length&&(m.duration=v[0].duration,m.timeline=v[0].timeline)}else s&&(m.duration=s,m.timeline=o);return m.presentationTime=l||o,m.number=u,[m]},addSidxSegmentsToPlaylist$1=(r,e,n)=>{const s=r.sidx.map?r.sidx.map:null,a=r.sidx.duration,o=r.timeline||0,l=r.sidx.byterange,u=l.offset+l.length,c=e.timescale,f=e.references.filter(k=>k.referenceType!==1),m=[],v=r.endList?"static":"dynamic",x=r.sidx.timeline;let C=x,w=r.mediaSequence||0,S;typeof e.firstOffset=="bigint"?S=window$1.BigInt(u)+e.firstOffset:S=u+e.firstOffset;for(let k=0;k<f.length;k++){const M=e.references[k],V=M.referencedSize,H=M.subsegmentDuration;let F;typeof S=="bigint"?F=S+window$1.BigInt(V)-window$1.BigInt(1):F=S+V-1;const G=`${S}-${F}`,R=segmentsFromBase({baseUrl:n,timescale:c,timeline:o,periodStart:x,presentationTime:C,number:w,duration:H,sourceDuration:a,indexRange:G,type:v})[0];s&&(R.map=s),m.push(R),typeof S=="bigint"?S+=window$1.BigInt(V):S+=V,C+=H/c,w++}return r.segments=m,r},SUPPORTED_MEDIA_TYPES=["AUDIO","SUBTITLES"],TIME_FUDGE=1/60,getUniqueTimelineStarts=r=>union(r,({timeline:e})=>e).sort((e,n)=>e.timeline>n.timeline?1:-1),findPlaylistWithName=(r,e)=>{for(let n=0;n<r.length;n++)if(r[n].attributes.NAME===e)return r[n];return null},getMediaGroupPlaylists=r=>{let e=[];return forEachMediaGroup$1(r,SUPPORTED_MEDIA_TYPES,(n,s,a,o)=>{e=e.concat(n.playlists||[])}),e},updateMediaSequenceForPlaylist=({playlist:r,mediaSequence:e})=>{r.mediaSequence=e,r.segments.forEach((n,s)=>{n.number=r.mediaSequence+s})},updateSequenceNumbers=({oldPlaylists:r,newPlaylists:e,timelineStarts:n})=>{e.forEach(s=>{s.discontinuitySequence=n.findIndex(function({timeline:c}){return c===s.timeline});const a=findPlaylistWithName(r,s.attributes.NAME);if(!a||s.sidx)return;const o=s.segments[0],l=a.segments.findIndex(function(c){return Math.abs(c.presentationTime-o.presentationTime)<TIME_FUDGE});if(l===-1){updateMediaSequenceForPlaylist({playlist:s,mediaSequence:a.mediaSequence+a.segments.length}),s.segments[0].discontinuity=!0,s.discontinuityStarts.unshift(0),(!a.segments.length&&s.timeline>a.timeline||a.segments.length&&s.timeline>a.segments[a.segments.length-1].timeline)&&s.discontinuitySequence--;return}a.segments[l].discontinuity&&!o.discontinuity&&(o.discontinuity=!0,s.discontinuityStarts.unshift(0),s.discontinuitySequence--),updateMediaSequenceForPlaylist({playlist:s,mediaSequence:a.segments[l].number})})},positionManifestOnTimeline=({oldManifest:r,newManifest:e})=>{const n=r.playlists.concat(getMediaGroupPlaylists(r)),s=e.playlists.concat(getMediaGroupPlaylists(e));return e.timelineStarts=getUniqueTimelineStarts([r.timelineStarts,e.timelineStarts]),updateSequenceNumbers({oldPlaylists:n,newPlaylists:s,timelineStarts:e.timelineStarts}),e},generateSidxKey=r=>r&&r.uri+"-"+byteRangeToString(r.byterange),mergeDiscontiguousPlaylists=r=>{const e=r.reduce(function(s,a){return s[a.attributes.baseUrl]||(s[a.attributes.baseUrl]=[]),s[a.attributes.baseUrl].push(a),s},{});let n=[];return Object.values(e).forEach(s=>{const a=values$1(s.reduce((o,l)=>{const u=l.attributes.id+(l.attributes.lang||"");return o[u]?(l.segments&&(l.segments[0]&&(l.segments[0].discontinuity=!0),o[u].segments.push(...l.segments)),l.attributes.contentProtection&&(o[u].attributes.contentProtection=l.attributes.contentProtection)):(o[u]=l,o[u].attributes.timelineStarts=[]),o[u].attributes.timelineStarts.push({start:l.attributes.periodStart,timeline:l.attributes.periodStart}),o},{}));n=n.concat(a)}),n.map(s=>(s.discontinuityStarts=findIndexes(s.segments||[],"discontinuity"),s))},addSidxSegmentsToPlaylist=(r,e)=>{const n=generateSidxKey(r.sidx),s=n&&e[n]&&e[n].sidx;return s&&addSidxSegmentsToPlaylist$1(r,s,r.sidx.resolvedUri),r},addSidxSegmentsToPlaylists=(r,e={})=>{if(!Object.keys(e).length)return r;for(const n in r)r[n]=addSidxSegmentsToPlaylist(r[n],e);return r},formatAudioPlaylist=({attributes:r,segments:e,sidx:n,mediaSequence:s,discontinuitySequence:a,discontinuityStarts:o},l)=>{const u={attributes:{NAME:r.id,BANDWIDTH:r.bandwidth,CODECS:r.codecs,"PROGRAM-ID":1},uri:"",endList:r.type==="static",timeline:r.periodStart,resolvedUri:r.baseUrl||"",targetDuration:r.duration,discontinuitySequence:a,discontinuityStarts:o,timelineStarts:r.timelineStarts,mediaSequence:s,segments:e};return r.contentProtection&&(u.contentProtection=r.contentProtection),r.serviceLocation&&(u.attributes.serviceLocation=r.serviceLocation),n&&(u.sidx=n),l&&(u.attributes.AUDIO="audio",u.attributes.SUBTITLES="subs"),u},formatVttPlaylist=({attributes:r,segments:e,mediaSequence:n,discontinuityStarts:s,discontinuitySequence:a})=>{typeof e>"u"&&(e=[{uri:r.baseUrl,timeline:r.periodStart,resolvedUri:r.baseUrl||"",duration:r.sourceDuration,number:0}],r.duration=r.sourceDuration);const o={NAME:r.id,BANDWIDTH:r.bandwidth,"PROGRAM-ID":1};r.codecs&&(o.CODECS=r.codecs);const l={attributes:o,uri:"",endList:r.type==="static",timeline:r.periodStart,resolvedUri:r.baseUrl||"",targetDuration:r.duration,timelineStarts:r.timelineStarts,discontinuityStarts:s,discontinuitySequence:a,mediaSequence:n,segments:e};return r.serviceLocation&&(l.attributes.serviceLocation=r.serviceLocation),l},organizeAudioPlaylists=(r,e={},n=!1)=>{let s;const a=r.reduce((o,l)=>{const u=l.attributes.role&&l.attributes.role.value||"",c=l.attributes.lang||"";let f=l.attributes.label||"main";if(c&&!l.attributes.label){const v=u?` (${u})`:"";f=`${l.attributes.lang}${v}`}o[f]||(o[f]={language:c,autoselect:!0,default:u==="main",playlists:[],uri:""});const m=addSidxSegmentsToPlaylist(formatAudioPlaylist(l,n),e);return o[f].playlists.push(m),typeof s>"u"&&u==="main"&&(s=l,s.default=!0),o},{});if(!s){const o=Object.keys(a)[0];a[o].default=!0}return a},organizeVttPlaylists=(r,e={})=>r.reduce((n,s)=>{const a=s.attributes.label||s.attributes.lang||"text",o=s.attributes.lang||"und";return n[a]||(n[a]={language:o,default:!1,autoselect:!1,playlists:[],uri:""}),n[a].playlists.push(addSidxSegmentsToPlaylist(formatVttPlaylist(s),e)),n},{}),organizeCaptionServices=r=>r.reduce((e,n)=>(n&&n.forEach(s=>{const{channel:a,language:o}=s;e[o]={autoselect:!1,default:!1,instreamId:a,language:o},s.hasOwnProperty("aspectRatio")&&(e[o].aspectRatio=s.aspectRatio),s.hasOwnProperty("easyReader")&&(e[o].easyReader=s.easyReader),s.hasOwnProperty("3D")&&(e[o]["3D"]=s["3D"])}),e),{}),formatVideoPlaylist=({attributes:r,segments:e,sidx:n,discontinuityStarts:s})=>{const a={attributes:{NAME:r.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:r.width,height:r.height},CODECS:r.codecs,BANDWIDTH:r.bandwidth,"PROGRAM-ID":1},uri:"",endList:r.type==="static",timeline:r.periodStart,resolvedUri:r.baseUrl||"",targetDuration:r.duration,discontinuityStarts:s,timelineStarts:r.timelineStarts,segments:e};return r.frameRate&&(a.attributes["FRAME-RATE"]=r.frameRate),r.contentProtection&&(a.contentProtection=r.contentProtection),r.serviceLocation&&(a.attributes.serviceLocation=r.serviceLocation),n&&(a.sidx=n),a},videoOnly=({attributes:r})=>r.mimeType==="video/mp4"||r.mimeType==="video/webm"||r.contentType==="video",audioOnly=({attributes:r})=>r.mimeType==="audio/mp4"||r.mimeType==="audio/webm"||r.contentType==="audio",vttOnly=({attributes:r})=>r.mimeType==="text/vtt"||r.contentType==="text",addMediaSequenceValues=(r,e)=>{r.forEach(n=>{n.mediaSequence=0,n.discontinuitySequence=e.findIndex(function({timeline:s}){return s===n.timeline}),n.segments&&n.segments.forEach((s,a)=>{s.number=a})})},flattenMediaGroupPlaylists=r=>r?Object.keys(r).reduce((e,n)=>{const s=r[n];return e.concat(s.playlists)},[]):[],toM3u8=({dashPlaylists:r,locations:e,contentSteering:n,sidxMapping:s={},previousManifest:a,eventStream:o})=>{if(!r.length)return{};const{sourceDuration:l,type:u,suggestedPresentationDelay:c,minimumUpdatePeriod:f}=r[0].attributes,m=mergeDiscontiguousPlaylists(r.filter(videoOnly)).map(formatVideoPlaylist),v=mergeDiscontiguousPlaylists(r.filter(audioOnly)),x=mergeDiscontiguousPlaylists(r.filter(vttOnly)),C=r.map(F=>F.attributes.captionServices).filter(Boolean),w={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:l,playlists:addSidxSegmentsToPlaylists(m,s)};f>=0&&(w.minimumUpdatePeriod=f*1e3),e&&(w.locations=e),n&&(w.contentSteering=n),u==="dynamic"&&(w.suggestedPresentationDelay=c),o&&o.length>0&&(w.eventStream=o);const S=w.playlists.length===0,k=v.length?organizeAudioPlaylists(v,s,S):null,M=x.length?organizeVttPlaylists(x,s):null,V=m.concat(flattenMediaGroupPlaylists(k),flattenMediaGroupPlaylists(M)),H=V.map(({timelineStarts:F})=>F);return w.timelineStarts=getUniqueTimelineStarts(H),addMediaSequenceValues(V,w.timelineStarts),k&&(w.mediaGroups.AUDIO.audio=k),M&&(w.mediaGroups.SUBTITLES.subs=M),C.length&&(w.mediaGroups["CLOSED-CAPTIONS"].cc=organizeCaptionServices(C)),a?positionManifestOnTimeline({oldManifest:a,newManifest:w}):w},getLiveRValue=(r,e,n)=>{const{NOW:s,clientOffset:a,availabilityStartTime:o,timescale:l=1,periodStart:u=0,minimumUpdatePeriod:c=0}=r,f=(s+a)/1e3,m=o+u,x=f+c-m;return Math.ceil((x*l-e)/n)},parseByTimeline=(r,e)=>{const{type:n,minimumUpdatePeriod:s=0,media:a="",sourceDuration:o,timescale:l=1,startNumber:u=1,periodStart:c}=r,f=[];let m=-1;for(let v=0;v<e.length;v++){const x=e[v],C=x.d,w=x.r||0,S=x.t||0;m<0&&(m=S),S&&S>m&&(m=S);let k;if(w<0){const H=v+1;H===e.length?n==="dynamic"&&s>0&&a.indexOf("$Number$")>0?k=getLiveRValue(r,m,C):k=(o*l-m)/C:k=(e[H].t-m)/C}else k=w+1;const M=u+f.length+k;let V=u+f.length;for(;V<M;)f.push({number:V,duration:C/l,time:m,timeline:c}),m+=C,V++}return f},identifierPattern=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,identifierReplacement=r=>(e,n,s,a)=>{if(e==="$$")return"$";if(typeof r[n]>"u")return e;const o=""+r[n];return n==="RepresentationID"||(s?a=parseInt(a,10):a=1,o.length>=a)?o:`${new Array(a-o.length+1).join("0")}${o}`},constructTemplateUrl=(r,e)=>r.replace(identifierPattern,identifierReplacement(e)),parseTemplateInfo=(r,e)=>!r.duration&&!e?[{number:r.startNumber||1,duration:r.sourceDuration,time:0,timeline:r.periodStart}]:r.duration?parseByDuration(r):parseByTimeline(r,e),segmentsFromTemplate=(r,e)=>{const n={RepresentationID:r.id,Bandwidth:r.bandwidth||0},{initialization:s={sourceURL:"",range:""}}=r,a=urlTypeToSegment({baseUrl:r.baseUrl,source:constructTemplateUrl(s.sourceURL,n),range:s.range});return parseTemplateInfo(r,e).map(l=>{n.Number=l.number,n.Time=l.time;const u=constructTemplateUrl(r.media||"",n),c=r.timescale||1,f=r.presentationTimeOffset||0,m=r.periodStart+(l.time-f)/c;return{uri:u,timeline:l.timeline,duration:l.duration,resolvedUri:resolveUrl$1(r.baseUrl||"",u),map:a,number:l.number,presentationTime:m}})},SegmentURLToSegmentObject=(r,e)=>{const{baseUrl:n,initialization:s={}}=r,a=urlTypeToSegment({baseUrl:n,source:s.sourceURL,range:s.range}),o=urlTypeToSegment({baseUrl:n,source:e.media,range:e.mediaRange});return o.map=a,o},segmentsFromList=(r,e)=>{const{duration:n,segmentUrls:s=[],periodStart:a}=r;if(!n&&!e||n&&e)throw new Error(errors.SEGMENT_TIME_UNSPECIFIED);const o=s.map(c=>SegmentURLToSegmentObject(r,c));let l;return n&&(l=parseByDuration(r)),e&&(l=parseByTimeline(r,e)),l.map((c,f)=>{if(o[f]){const m=o[f],v=r.timescale||1,x=r.presentationTimeOffset||0;return m.timeline=c.timeline,m.duration=c.duration,m.number=c.number,m.presentationTime=a+(c.time-x)/v,m}}).filter(c=>c)},generateSegments=({attributes:r,segmentInfo:e})=>{let n,s;e.template?(s=segmentsFromTemplate,n=merge$2(r,e.template)):e.base?(s=segmentsFromBase,n=merge$2(r,e.base)):e.list&&(s=segmentsFromList,n=merge$2(r,e.list));const a={attributes:r};if(!s)return a;const o=s(n,e.segmentTimeline);if(n.duration){const{duration:l,timescale:u=1}=n;n.duration=l/u}else o.length?n.duration=o.reduce((l,u)=>Math.max(l,Math.ceil(u.duration)),0):n.duration=0;return a.attributes=n,a.segments=o,e.base&&n.indexRange&&(a.sidx=o[0],a.segments=[]),a},toPlaylists=r=>r.map(generateSegments),findChildren=(r,e)=>from(r.childNodes).filter(({tagName:n})=>n===e),getContent=r=>r.textContent.trim(),parseDivisionValue=r=>parseFloat(r.split("/").reduce((e,n)=>e/n)),parseDuration=r=>{const u=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(r);if(!u)return 0;const[c,f,m,v,x,C]=u.slice(1);return parseFloat(c||0)*31536e3+parseFloat(f||0)*2592e3+parseFloat(m||0)*86400+parseFloat(v||0)*3600+parseFloat(x||0)*60+parseFloat(C||0)},parseDate=r=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(r)&&(r+="Z"),Date.parse(r)),parsers={mediaPresentationDuration(r){return parseDuration(r)},availabilityStartTime(r){return parseDate(r)/1e3},minimumUpdatePeriod(r){return parseDuration(r)},suggestedPresentationDelay(r){return parseDuration(r)},type(r){return r},timeShiftBufferDepth(r){return parseDuration(r)},start(r){return parseDuration(r)},width(r){return parseInt(r,10)},height(r){return parseInt(r,10)},bandwidth(r){return parseInt(r,10)},frameRate(r){return parseDivisionValue(r)},startNumber(r){return parseInt(r,10)},timescale(r){return parseInt(r,10)},presentationTimeOffset(r){return parseInt(r,10)},duration(r){const e=parseInt(r,10);return isNaN(e)?parseDuration(r):e},d(r){return parseInt(r,10)},t(r){return parseInt(r,10)},r(r){return parseInt(r,10)},presentationTime(r){return parseInt(r,10)},DEFAULT(r){return r}},parseAttributes=r=>r&&r.attributes?from(r.attributes).reduce((e,n)=>{const s=parsers[n.name]||parsers.DEFAULT;return e[n.name]=s(n.value),e},{}):{},keySystemsMap={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},buildBaseUrls=(r,e)=>e.length?flatten(r.map(function(n){return e.map(function(s){const a=getContent(s),o=resolveUrl$1(n.baseUrl,a),l=merge$2(parseAttributes(s),{baseUrl:o});return o!==a&&!l.serviceLocation&&n.serviceLocation&&(l.serviceLocation=n.serviceLocation),l})})):r,getSegmentInformation=r=>{const e=findChildren(r,"SegmentTemplate")[0],n=findChildren(r,"SegmentList")[0],s=n&&findChildren(n,"SegmentURL").map(v=>merge$2({tag:"SegmentURL"},parseAttributes(v))),a=findChildren(r,"SegmentBase")[0],o=n||e,l=o&&findChildren(o,"SegmentTimeline")[0],u=n||a||e,c=u&&findChildren(u,"Initialization")[0],f=e&&parseAttributes(e);f&&c?f.initialization=c&&parseAttributes(c):f&&f.initialization&&(f.initialization={sourceURL:f.initialization});const m={template:f,segmentTimeline:l&&findChildren(l,"S").map(v=>parseAttributes(v)),list:n&&merge$2(parseAttributes(n),{segmentUrls:s,initialization:parseAttributes(c)}),base:a&&merge$2(parseAttributes(a),{initialization:parseAttributes(c)})};return Object.keys(m).forEach(v=>{m[v]||delete m[v]}),m},inheritBaseUrls=(r,e,n)=>s=>{const a=findChildren(s,"BaseURL"),o=buildBaseUrls(e,a),l=merge$2(r,parseAttributes(s)),u=getSegmentInformation(s);return o.map(c=>({segmentInfo:merge$2(n,u),attributes:merge$2(l,c)}))},generateKeySystemInformation=r=>r.reduce((e,n)=>{const s=parseAttributes(n);s.schemeIdUri&&(s.schemeIdUri=s.schemeIdUri.toLowerCase());const a=keySystemsMap[s.schemeIdUri];if(a){e[a]={attributes:s};const o=findChildren(n,"cenc:pssh")[0];if(o){const l=getContent(o);e[a].pssh=l&&decodeB64ToUint8Array(l)}}return e},{}),parseCaptionServiceMetadata=r=>{if(r.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof r.value!="string"?[]:r.value.split(";")).map(n=>{let s,a;return a=n,/^CC\d=/.test(n)?[s,a]=n.split("="):/^CC\d$/.test(n)&&(s=n),{channel:s,language:a}});if(r.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof r.value!="string"?[]:r.value.split(";")).map(n=>{const s={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(n)){const[a,o=""]=n.split("=");s.channel=a,s.language=n,o.split(",").forEach(l=>{const[u,c]=l.split(":");u==="lang"?s.language=c:u==="er"?s.easyReader=Number(c):u==="war"?s.aspectRatio=Number(c):u==="3D"&&(s["3D"]=Number(c))})}else s.language=n;return s.channel&&(s.channel="SERVICE"+s.channel),s})},toEventStream=r=>flatten(findChildren(r.node,"EventStream").map(e=>{const n=parseAttributes(e),s=n.schemeIdUri;return findChildren(e,"Event").map(a=>{const o=parseAttributes(a),l=o.presentationTime||0,u=n.timescale||1,c=o.duration||0,f=l/u+r.attributes.start;return{schemeIdUri:s,value:n.value,id:o.id,start:f,end:f+c/u,messageData:getContent(a)||o.messageData,contentEncoding:n.contentEncoding,presentationTimeOffset:n.presentationTimeOffset||0}})})),toRepresentations=(r,e,n)=>s=>{const a=parseAttributes(s),o=buildBaseUrls(e,findChildren(s,"BaseURL")),l=findChildren(s,"Role")[0],u={role:parseAttributes(l)};let c=merge$2(r,a,u);const f=findChildren(s,"Accessibility")[0],m=parseCaptionServiceMetadata(parseAttributes(f));m&&(c=merge$2(c,{captionServices:m}));const v=findChildren(s,"Label")[0];if(v&&v.childNodes.length){const k=v.childNodes[0].nodeValue.trim();c=merge$2(c,{label:k})}const x=generateKeySystemInformation(findChildren(s,"ContentProtection"));Object.keys(x).length&&(c=merge$2(c,{contentProtection:x}));const C=getSegmentInformation(s),w=findChildren(s,"Representation"),S=merge$2(n,C);return flatten(w.map(inheritBaseUrls(c,o,S)))},toAdaptationSets=(r,e)=>(n,s)=>{const a=buildBaseUrls(e,findChildren(n.node,"BaseURL")),o=merge$2(r,{periodStart:n.attributes.start});typeof n.attributes.duration=="number"&&(o.periodDuration=n.attributes.duration);const l=findChildren(n.node,"AdaptationSet"),u=getSegmentInformation(n.node);return flatten(l.map(toRepresentations(o,a,u)))},generateContentSteeringInformation=(r,e)=>{if(r.length>1&&e({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!r.length)return null;const n=merge$2({serverURL:getContent(r[0])},parseAttributes(r[0]));return n.queryBeforeStart=n.queryBeforeStart==="true",n},getPeriodStart=({attributes:r,priorPeriodAttributes:e,mpdType:n})=>typeof r.start=="number"?r.start:e&&typeof e.start=="number"&&typeof e.duration=="number"?e.start+e.duration:!e&&n==="static"?0:null,inheritAttributes=(r,e={})=>{const{manifestUri:n="",NOW:s=Date.now(),clientOffset:a=0,eventHandler:o=function(){}}=e,l=findChildren(r,"Period");if(!l.length)throw new Error(errors.INVALID_NUMBER_OF_PERIOD);const u=findChildren(r,"Location"),c=parseAttributes(r),f=buildBaseUrls([{baseUrl:n}],findChildren(r,"BaseURL")),m=findChildren(r,"ContentSteering");c.type=c.type||"static",c.sourceDuration=c.mediaPresentationDuration||0,c.NOW=s,c.clientOffset=a,u.length&&(c.locations=u.map(getContent));const v=[];return l.forEach((x,C)=>{const w=parseAttributes(x),S=v[C-1];w.start=getPeriodStart({attributes:w,priorPeriodAttributes:S?S.attributes:null,mpdType:c.type}),v.push({node:x,attributes:w})}),{locations:c.locations,contentSteeringInfo:generateContentSteeringInformation(m,o),representationInfo:flatten(v.map(toAdaptationSets(c,f))),eventStream:flatten(v.map(toEventStream))}},stringToMpdXml=r=>{if(r==="")throw new Error(errors.DASH_EMPTY_MANIFEST);const e=new libExports.DOMParser;let n,s;try{n=e.parseFromString(r,"application/xml"),s=n&&n.documentElement.tagName==="MPD"?n.documentElement:null}catch{}if(!s||s&&s.getElementsByTagName("parsererror").length>0)throw new Error(errors.DASH_INVALID_XML);return s},parseUTCTimingScheme=r=>{const e=findChildren(r,"UTCTiming")[0];if(!e)return null;const n=parseAttributes(e);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(errors.UNSUPPORTED_UTC_TIMING_SCHEME)}return n},parse=(r,e={})=>{const n=inheritAttributes(stringToMpdXml(r),e),s=toPlaylists(n.representationInfo);return toM3u8({dashPlaylists:s,locations:n.locations,contentSteering:n.contentSteeringInfo,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest,eventStream:n.eventStream})},parseUTCTiming=r=>parseUTCTimingScheme(stringToMpdXml(r));var numbers,hasRequiredNumbers;function requireNumbers(){if(hasRequiredNumbers)return numbers;hasRequiredNumbers=1;var r=Math.pow(2,32),e=function(n){var s=new DataView(n.buffer,n.byteOffset,n.byteLength),a;return s.getBigUint64?(a=s.getBigUint64(0),a<Number.MAX_SAFE_INTEGER?Number(a):a):s.getUint32(0)*r+s.getUint32(4)};return numbers={getUint64:e,MAX_UINT32:r},numbers}var parseSidx_1,hasRequiredParseSidx;function requireParseSidx(){if(hasRequiredParseSidx)return parseSidx_1;hasRequiredParseSidx=1;var r=requireNumbers().getUint64,e=function(n){var s=new DataView(n.buffer,n.byteOffset,n.byteLength),a={version:n[0],flags:new Uint8Array(n.subarray(1,4)),references:[],referenceId:s.getUint32(4),timescale:s.getUint32(8)},o=12;a.version===0?(a.earliestPresentationTime=s.getUint32(o),a.firstOffset=s.getUint32(o+4),o+=8):(a.earliestPresentationTime=r(n.subarray(o)),a.firstOffset=r(n.subarray(o+8)),o+=16),o+=2;var l=s.getUint16(o);for(o+=2;l>0;o+=12,l--)a.references.push({referenceType:(n[o]&128)>>>7,referencedSize:s.getUint32(o)&2147483647,subsegmentDuration:s.getUint32(o+4),startsWithSap:!!(n[o+8]&128),sapType:(n[o+8]&112)>>>4,sapDeltaTime:s.getUint32(o+8)&268435455});return a};return parseSidx_1=e,parseSidx_1}var parseSidxExports=requireParseSidx();const parseSidx=getDefaultExportFromCjs(parseSidxExports);var ID3=toUint8([73,68,51]),getId3Size=function r(e,n){n===void 0&&(n=0),e=toUint8(e);var s=e[n+5],a=e[n+6]<<21|e[n+7]<<14|e[n+8]<<7|e[n+9],o=(s&16)>>4;return o?a+20:a+10},getId3Offset=function r(e,n){return n===void 0&&(n=0),e=toUint8(e),e.length-n<10||!bytesMatch(e,ID3,{offset:n})?n:(n+=getId3Size(e,n),r(e,n))},normalizePath$1=function r(e){return typeof e=="string"?stringToBytes(e):e},normalizePaths$1=function r(e){return Array.isArray(e)?e.map(function(n){return normalizePath$1(n)}):[normalizePath$1(e)]},findBox=function r(e,n,s){s===void 0&&(s=!1),n=normalizePaths$1(n),e=toUint8(e);var a=[];if(!n.length)return a;for(var o=0;o<e.length;){var l=(e[o]<<24|e[o+1]<<16|e[o+2]<<8|e[o+3])>>>0,u=e.subarray(o+4,o+8);if(l===0)break;var c=o+l;if(c>e.length){if(s)break;c=e.length}var f=e.subarray(o+8,c);bytesMatch(u,n[0])&&(n.length===1?a.push(f):a.push.apply(a,r(f,n.slice(1),s))),o=c}return a},EBML_TAGS={EBML:toUint8([26,69,223,163]),DocType:toUint8([66,130]),Segment:toUint8([24,83,128,103]),SegmentInfo:toUint8([21,73,169,102]),Tracks:toUint8([22,84,174,107]),Track:toUint8([174]),TrackNumber:toUint8([215]),DefaultDuration:toUint8([35,227,131]),TrackEntry:toUint8([174]),TrackType:toUint8([131]),FlagDefault:toUint8([136]),CodecID:toUint8([134]),CodecPrivate:toUint8([99,162]),VideoTrack:toUint8([224]),AudioTrack:toUint8([225]),Cluster:toUint8([31,67,182,117]),Timestamp:toUint8([231]),TimestampScale:toUint8([42,215,177]),BlockGroup:toUint8([160]),BlockDuration:toUint8([155]),Block:toUint8([161]),SimpleBlock:toUint8([163])},LENGTH_TABLE=[128,64,32,16,8,4,2,1],getLength=function r(e){for(var n=1,s=0;s<LENGTH_TABLE.length&&!(e&LENGTH_TABLE[s]);s++)n++;return n},getvint=function r(e,n,s,a){s===void 0&&(s=!0),a===void 0&&(a=!1);var o=getLength(e[n]),l=e.subarray(n,n+o);return s&&(l=Array.prototype.slice.call(e,n,n+o),l[0]^=LENGTH_TABLE[o-1]),{length:o,value:bytesToNumber(l,{signed:a}),bytes:l}},normalizePath=function r(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(n){return r(n)}):typeof e=="number"?numberToBytes(e):e},normalizePaths=function r(e){return Array.isArray(e)?e.map(function(n){return normalizePath(n)}):[normalizePath(e)]},getInfinityDataSize=function r(e,n,s){if(s>=n.length)return n.length;var a=getvint(n,s,!1);if(bytesMatch(e.bytes,a.bytes))return s;var o=getvint(n,s+a.length);return r(e,n,s+o.length+o.value+a.length)},findEbml=function r(e,n){n=normalizePaths(n),e=toUint8(e);var s=[];if(!n.length)return s;for(var a=0;a<e.length;){var o=getvint(e,a,!1),l=getvint(e,a+o.length),u=a+o.length+l.length;l.value===127&&(l.value=getInfinityDataSize(o,e,u),l.value!==e.length&&(l.value-=u));var c=u+l.value>e.length?e.length:u+l.value,f=e.subarray(u,c);bytesMatch(n[0],o.bytes)&&(n.length===1?s.push(f):s=s.concat(r(f,n.slice(1))));var m=o.length+l.length+f.length;a+=m}return s},NAL_TYPE_ONE=toUint8([0,0,0,1]),NAL_TYPE_TWO=toUint8([0,0,1]),EMULATION_PREVENTION=toUint8([0,0,3]),discardEmulationPreventionBytes=function r(e){for(var n=[],s=1;s<e.length-2;)bytesMatch(e.subarray(s,s+3),EMULATION_PREVENTION)&&(n.push(s+2),s++),s++;if(n.length===0)return e;var a=e.length-n.length,o=new Uint8Array(a),l=0;for(s=0;s<a;l++,s++)l===n[0]&&(l++,n.shift()),o[s]=e[l];return o},findNal=function r(e,n,s,a){e=toUint8(e),s=[].concat(s);for(var o=0,l,u=0;o<e.length&&(u<a||l);){var c=void 0;if(bytesMatch(e.subarray(o),NAL_TYPE_ONE)?c=4:bytesMatch(e.subarray(o),NAL_TYPE_TWO)&&(c=3),!c){o++;continue}if(u++,l)return discardEmulationPreventionBytes(e.subarray(l,o));var f=void 0;n==="h264"?f=e[o+c]&31:n==="h265"&&(f=e[o+c]>>1&63),s.indexOf(f)!==-1&&(l=o+c),o+=c+(n==="h264"?1:2)}return e.subarray(0,0)},findH264Nal=function r(e,n,s){return findNal(e,"h264",n,s)},findH265Nal=function r(e,n,s){return findNal(e,"h265",n,s)},CONSTANTS={webm:toUint8([119,101,98,109]),matroska:toUint8([109,97,116,114,111,115,107,97]),flac:toUint8([102,76,97,67]),ogg:toUint8([79,103,103,83]),ac3:toUint8([11,119]),riff:toUint8([82,73,70,70]),avi:toUint8([65,86,73]),wav:toUint8([87,65,86,69]),"3gp":toUint8([102,116,121,112,51,103]),mp4:toUint8([102,116,121,112]),fmp4:toUint8([115,116,121,112]),mov:toUint8([102,116,121,112,113,116]),moov:toUint8([109,111,111,118]),moof:toUint8([109,111,111,102])},_isLikely={aac:function r(e){var n=getId3Offset(e);return bytesMatch(e,[255,16],{offset:n,mask:[255,22]})},mp3:function r(e){var n=getId3Offset(e);return bytesMatch(e,[255,2],{offset:n,mask:[255,6]})},webm:function r(e){var n=findEbml(e,[EBML_TAGS.EBML,EBML_TAGS.DocType])[0];return bytesMatch(n,CONSTANTS.webm)},mkv:function r(e){var n=findEbml(e,[EBML_TAGS.EBML,EBML_TAGS.DocType])[0];return bytesMatch(n,CONSTANTS.matroska)},mp4:function r(e){if(_isLikely["3gp"](e)||_isLikely.mov(e))return!1;if(bytesMatch(e,CONSTANTS.mp4,{offset:4})||bytesMatch(e,CONSTANTS.fmp4,{offset:4})||bytesMatch(e,CONSTANTS.moof,{offset:4})||bytesMatch(e,CONSTANTS.moov,{offset:4}))return!0},mov:function r(e){return bytesMatch(e,CONSTANTS.mov,{offset:4})},"3gp":function r(e){return bytesMatch(e,CONSTANTS["3gp"],{offset:4})},ac3:function r(e){var n=getId3Offset(e);return bytesMatch(e,CONSTANTS.ac3,{offset:n})},ts:function r(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var n=0;n+188<e.length&&n<188;){if(e[n]===71&&e[n+188]===71)return!0;n+=1}return!1},flac:function r(e){var n=getId3Offset(e);return bytesMatch(e,CONSTANTS.flac,{offset:n})},ogg:function r(e){return bytesMatch(e,CONSTANTS.ogg)},avi:function r(e){return bytesMatch(e,CONSTANTS.riff)&&bytesMatch(e,CONSTANTS.avi,{offset:8})},wav:function r(e){return bytesMatch(e,CONSTANTS.riff)&&bytesMatch(e,CONSTANTS.wav,{offset:8})},h264:function r(e){return findH264Nal(e,7,3).length},h265:function r(e){return findH265Nal(e,[32,33],3).length}},isLikelyTypes=Object.keys(_isLikely).filter(function(r){return r!=="ts"&&r!=="h264"&&r!=="h265"}).concat(["ts","h264","h265"]);isLikelyTypes.forEach(function(r){var e=_isLikely[r];_isLikely[r]=function(n){return e(toUint8(n))}});var isLikely=_isLikely,detectContainerForBytes=function r(e){e=toUint8(e);for(var n=0;n<isLikelyTypes.length;n++){var s=isLikelyTypes[n];if(isLikely[s](e))return s}return""},isLikelyFmp4MediaSegment=function r(e){return findBox(e,["moof"]).length>0},clock,hasRequiredClock;function requireClock(){if(hasRequiredClock)return clock;hasRequiredClock=1;var r=9e4,e,n,s,a,o,l,u;return e=function(c){return c*r},n=function(c,f){return c*f},s=function(c){return c/r},a=function(c,f){return c/f},o=function(c,f){return e(a(c,f))},l=function(c,f){return n(s(c),f)},u=function(c,f,m){return s(m?c:c-f)},clock={ONE_SECOND_IN_TS:r,secondsToVideoTs:e,secondsToAudioTs:n,videoTsToSeconds:s,audioTsToSeconds:a,audioTsToVideoTs:o,videoTsToAudioTs:l,metadataTsToSeconds:u},clock}var clockExports=requireClock();/**
 * @license
 * Video.js 8.22.0 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var version$6="8.22.0";const hooks_={},hooks=function(r,e){return hooks_[r]=hooks_[r]||[],e&&(hooks_[r]=hooks_[r].concat(e)),hooks_[r]},hook=function(r,e){hooks(r,e)},removeHook=function(r,e){const n=hooks(r).indexOf(e);return n<=-1?!1:(hooks_[r]=hooks_[r].slice(),hooks_[r].splice(n,1),!0)},hookOnce=function(r,e){hooks(r,[].concat(e).map(n=>{const s=(...a)=>(removeHook(r,s),n(...a));return s}))},FullscreenApi={prefixed:!0},apiMap=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],specApi=apiMap[0];let browserApi;for(let r=0;r<apiMap.length;r++)if(apiMap[r][1]in document$1){browserApi=apiMap[r];break}if(browserApi){for(let r=0;r<browserApi.length;r++)FullscreenApi[specApi[r]]=browserApi[r];FullscreenApi.prefixed=browserApi[0]!==specApi[0]}let history=[];const LogByTypeFactory=(r,e,n)=>(s,a,o)=>{const l=e.levels[a],u=new RegExp(`^(${l})$`);let c=r;if(s!=="log"&&o.unshift(s.toUpperCase()+":"),n&&(c=`%c${r}`,o.unshift(n)),o.unshift(c+":"),history){history.push([].concat(o));const m=history.length-1e3;history.splice(0,m>0?m:0)}if(!window$1.console)return;let f=window$1.console[s];!f&&s==="debug"&&(f=window$1.console.info||window$1.console.log),!(!f||!l||!u.test(s))&&f[Array.isArray(o)?"apply":"call"](window$1.console,o)};function createLogger$1(r,e=":",n=""){let s="info",a;function o(...l){a("log",s,l)}return a=LogByTypeFactory(r,o,n),o.createLogger=(l,u,c)=>{const f=u!==void 0?u:e,m=c!==void 0?c:n,v=`${r} ${f} ${l}`;return createLogger$1(v,f,m)},o.createNewLogger=(l,u,c)=>createLogger$1(l,u,c),o.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:s},o.level=l=>{if(typeof l=="string"){if(!o.levels.hasOwnProperty(l))throw new Error(`"${l}" in not a valid log level`);s=l}return s},o.history=()=>history?[].concat(history):[],o.history.filter=l=>(history||[]).filter(u=>new RegExp(`.*${l}.*`).test(u[0])),o.history.clear=()=>{history&&(history.length=0)},o.history.disable=()=>{history!==null&&(history.length=0,history=null)},o.history.enable=()=>{history===null&&(history=[])},o.error=(...l)=>a("error",s,l),o.warn=(...l)=>a("warn",s,l),o.debug=(...l)=>a("debug",s,l),o}const log$1=createLogger$1("VIDEOJS"),createLogger=log$1.createLogger,toString=Object.prototype.toString,keys=function(r){return isObject(r)?Object.keys(r):[]};function each(r,e){keys(r).forEach(n=>e(r[n],n))}function reduce(r,e,n=0){return keys(r).reduce((s,a)=>e(s,r[a],a),n)}function isObject(r){return!!r&&typeof r=="object"}function isPlain(r){return isObject(r)&&toString.call(r)==="[object Object]"&&r.constructor===Object}function merge$1(...r){const e={};return r.forEach(n=>{n&&each(n,(s,a)=>{if(!isPlain(s)){e[a]=s;return}isPlain(e[a])||(e[a]={}),e[a]=merge$1(e[a],s)})}),e}function values(r={}){const e=[];for(const n in r)if(r.hasOwnProperty(n)){const s=r[n];e.push(s)}return e}function defineLazyProperty(r,e,n,s=!0){const a=l=>Object.defineProperty(r,e,{value:l,enumerable:!0,writable:!0}),o={configurable:!0,enumerable:!0,get(){const l=n();return a(l),l}};return s&&(o.set=a),Object.defineProperty(r,e,o)}var Obj=Object.freeze({__proto__:null,each,reduce,isObject,isPlain,merge:merge$1,values,defineLazyProperty});let IS_IPOD=!1,IOS_VERSION=null,IS_ANDROID=!1,ANDROID_VERSION,IS_FIREFOX=!1,IS_EDGE=!1,IS_CHROMIUM=!1,IS_CHROME=!1,CHROMIUM_VERSION=null,CHROME_VERSION=null;const IS_CHROMECAST_RECEIVER=!!(window$1.cast&&window$1.cast.framework&&window$1.cast.framework.CastReceiverContext);let IE_VERSION=null,IS_SAFARI=!1,IS_WINDOWS=!1,IS_IPAD=!1,IS_IPHONE=!1,IS_TIZEN=!1,IS_WEBOS=!1,IS_SMART_TV=!1;const TOUCH_ENABLED=!!(isReal()&&("ontouchstart"in window$1||window$1.navigator.maxTouchPoints||window$1.DocumentTouch&&window$1.document instanceof window$1.DocumentTouch)),UAD=window$1.navigator&&window$1.navigator.userAgentData;UAD&&UAD.platform&&UAD.brands&&(IS_ANDROID=UAD.platform==="Android",IS_EDGE=!!UAD.brands.find(r=>r.brand==="Microsoft Edge"),IS_CHROMIUM=!!UAD.brands.find(r=>r.brand==="Chromium"),IS_CHROME=!IS_EDGE&&IS_CHROMIUM,CHROMIUM_VERSION=CHROME_VERSION=(UAD.brands.find(r=>r.brand==="Chromium")||{}).version||null,IS_WINDOWS=UAD.platform==="Windows");if(!IS_CHROMIUM){const r=window$1.navigator&&window$1.navigator.userAgent||"";IS_IPOD=/iPod/i.test(r),IOS_VERSION=function(){const e=r.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),IS_ANDROID=/Android/i.test(r),ANDROID_VERSION=function(){const e=r.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const n=e[1]&&parseFloat(e[1]),s=e[2]&&parseFloat(e[2]);return n&&s?parseFloat(e[1]+"."+e[2]):n||null}(),IS_FIREFOX=/Firefox/i.test(r),IS_EDGE=/Edg/i.test(r),IS_CHROMIUM=/Chrome/i.test(r)||/CriOS/i.test(r),IS_CHROME=!IS_EDGE&&IS_CHROMIUM,CHROMIUM_VERSION=CHROME_VERSION=function(){const e=r.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),IE_VERSION=function(){const e=/MSIE\s(\d+)\.\d/.exec(r);let n=e&&parseFloat(e[1]);return!n&&/Trident\/7.0/i.test(r)&&/rv:11.0/.test(r)&&(n=11),n}(),IS_TIZEN=/Tizen/i.test(r),IS_WEBOS=/Web0S/i.test(r),IS_SMART_TV=IS_TIZEN||IS_WEBOS,IS_SAFARI=/Safari/i.test(r)&&!IS_CHROME&&!IS_ANDROID&&!IS_EDGE&&!IS_SMART_TV,IS_WINDOWS=/Windows/i.test(r),IS_IPAD=/iPad/i.test(r)||IS_SAFARI&&TOUCH_ENABLED&&!/iPhone/i.test(r),IS_IPHONE=/iPhone/i.test(r)&&!IS_IPAD}const IS_IOS=IS_IPHONE||IS_IPAD||IS_IPOD,IS_ANY_SAFARI=(IS_SAFARI||IS_IOS)&&!IS_CHROME;var browser=Object.freeze({__proto__:null,get IS_IPOD(){return IS_IPOD},get IOS_VERSION(){return IOS_VERSION},get IS_ANDROID(){return IS_ANDROID},get ANDROID_VERSION(){return ANDROID_VERSION},get IS_FIREFOX(){return IS_FIREFOX},get IS_EDGE(){return IS_EDGE},get IS_CHROMIUM(){return IS_CHROMIUM},get IS_CHROME(){return IS_CHROME},get CHROMIUM_VERSION(){return CHROMIUM_VERSION},get CHROME_VERSION(){return CHROME_VERSION},IS_CHROMECAST_RECEIVER,get IE_VERSION(){return IE_VERSION},get IS_SAFARI(){return IS_SAFARI},get IS_WINDOWS(){return IS_WINDOWS},get IS_IPAD(){return IS_IPAD},get IS_IPHONE(){return IS_IPHONE},get IS_TIZEN(){return IS_TIZEN},get IS_WEBOS(){return IS_WEBOS},get IS_SMART_TV(){return IS_SMART_TV},TOUCH_ENABLED,IS_IOS,IS_ANY_SAFARI});function isNonBlankString(r){return typeof r=="string"&&!!r.trim()}function throwIfWhitespace(r){if(r.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function isReal(){return document$1===window$1.document}function isEl(r){return isObject(r)&&r.nodeType===1}function isInFrame(){try{return window$1.parent!==window$1.self}catch{return!0}}function createQuerier(r){return function(e,n){if(!isNonBlankString(e))return document$1[r](null);isNonBlankString(n)&&(n=document$1.querySelector(n));const s=isEl(n)?n:document$1;return s[r]&&s[r](e)}}function createEl(r="div",e={},n={},s){const a=document$1.createElement(r);return Object.getOwnPropertyNames(e).forEach(function(o){const l=e[o];o==="textContent"?textContent(a,l):(a[o]!==l||o==="tabIndex")&&(a[o]=l)}),Object.getOwnPropertyNames(n).forEach(function(o){a.setAttribute(o,n[o])}),s&&appendContent(a,s),a}function textContent(r,e){return typeof r.textContent>"u"?r.innerText=e:r.textContent=e,r}function prependTo(r,e){e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r)}function hasClass(r,e){return throwIfWhitespace(e),r.classList.contains(e)}function addClass(r,...e){return r.classList.add(...e.reduce((n,s)=>n.concat(s.split(/\s+/)),[])),r}function removeClass(r,...e){return r?(r.classList.remove(...e.reduce((n,s)=>n.concat(s.split(/\s+/)),[])),r):(log$1.warn("removeClass was called with an element that doesn't exist"),null)}function toggleClass(r,e,n){return typeof n=="function"&&(n=n(r,e)),typeof n!="boolean"&&(n=void 0),e.split(/\s+/).forEach(s=>r.classList.toggle(s,n)),r}function setAttributes(r,e){Object.getOwnPropertyNames(e).forEach(function(n){const s=e[n];s===null||typeof s>"u"||s===!1?r.removeAttribute(n):r.setAttribute(n,s===!0?"":s)})}function getAttributes(r){const e={},n=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(r&&r.attributes&&r.attributes.length>0){const s=r.attributes;for(let a=s.length-1;a>=0;a--){const o=s[a].name;let l=s[a].value;n.includes(o)&&(l=l!==null),e[o]=l}}return e}function getAttribute(r,e){return r.getAttribute(e)}function setAttribute(r,e,n){r.setAttribute(e,n)}function removeAttribute(r,e){r.removeAttribute(e)}function blockTextSelection(){document$1.body.focus(),document$1.onselectstart=function(){return!1}}function unblockTextSelection(){document$1.onselectstart=function(){return!0}}function getBoundingClientRect(r){if(r&&r.getBoundingClientRect&&r.parentNode){const e=r.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(s=>{e[s]!==void 0&&(n[s]=e[s])}),n.height||(n.height=parseFloat(computedStyle(r,"height"))),n.width||(n.width=parseFloat(computedStyle(r,"width"))),n}}function findPosition(r){if(!r||r&&!r.offsetParent)return{left:0,top:0,width:0,height:0};const e=r.offsetWidth,n=r.offsetHeight;let s=0,a=0;for(;r.offsetParent&&r!==document$1[FullscreenApi.fullscreenElement];)s+=r.offsetLeft,a+=r.offsetTop,r=r.offsetParent;return{left:s,top:a,width:e,height:n}}function getPointerPosition(r,e){const n={x:0,y:0};if(IS_IOS){let m=r;for(;m&&m.nodeName.toLowerCase()!=="html";){const v=computedStyle(m,"transform");if(/^matrix/.test(v)){const x=v.slice(7,-1).split(/,\s/).map(Number);n.x+=x[4],n.y+=x[5]}else if(/^matrix3d/.test(v)){const x=v.slice(9,-1).split(/,\s/).map(Number);n.x+=x[12],n.y+=x[13]}if(m.assignedSlot&&m.assignedSlot.parentElement&&window$1.WebKitCSSMatrix){const x=window$1.getComputedStyle(m.assignedSlot.parentElement).transform,C=new window$1.WebKitCSSMatrix(x);n.x+=C.m41,n.y+=C.m42}m=m.parentNode||m.host}}const s={},a=findPosition(e.target),o=findPosition(r),l=o.width,u=o.height;let c=e.offsetY-(o.top-a.top),f=e.offsetX-(o.left-a.left);return e.changedTouches&&(f=e.changedTouches[0].pageX-o.left,c=e.changedTouches[0].pageY+o.top,IS_IOS&&(f-=n.x,c-=n.y)),s.y=1-Math.max(0,Math.min(1,c/u)),s.x=Math.max(0,Math.min(1,f/l)),s}function isTextNode(r){return isObject(r)&&r.nodeType===3}function emptyEl(r){for(;r.firstChild;)r.removeChild(r.firstChild);return r}function normalizeContent(r){return typeof r=="function"&&(r=r()),(Array.isArray(r)?r:[r]).map(e=>{if(typeof e=="function"&&(e=e()),isEl(e)||isTextNode(e))return e;if(typeof e=="string"&&/\S/.test(e))return document$1.createTextNode(e)}).filter(e=>e)}function appendContent(r,e){return normalizeContent(e).forEach(n=>r.appendChild(n)),r}function insertContent(r,e){return appendContent(emptyEl(r),e)}function isSingleLeftClick(r){return r.button===void 0&&r.buttons===void 0||r.button===0&&r.buttons===void 0||r.type==="mouseup"&&r.button===0&&r.buttons===0||r.type==="mousedown"&&r.button===0&&r.buttons===0?!0:!(r.button!==0||r.buttons!==1)}const $=createQuerier("querySelector"),$$=createQuerier("querySelectorAll");function computedStyle(r,e){if(!r||!e)return"";if(typeof window$1.getComputedStyle=="function"){let n;try{n=window$1.getComputedStyle(r)}catch{return""}return n?n.getPropertyValue(e)||n[e]:""}return""}function copyStyleSheetsToWindow(r){[...document$1.styleSheets].forEach(e=>{try{const n=[...e.cssRules].map(a=>a.cssText).join(""),s=document$1.createElement("style");s.textContent=n,r.document.head.appendChild(s)}catch{const s=document$1.createElement("link");s.rel="stylesheet",s.type=e.type,s.media=e.media.mediaText,s.href=e.href,r.document.head.appendChild(s)}})}var Dom=Object.freeze({__proto__:null,isReal,isEl,isInFrame,createEl,textContent,prependTo,hasClass,addClass,removeClass,toggleClass,setAttributes,getAttributes,getAttribute,setAttribute,removeAttribute,blockTextSelection,unblockTextSelection,getBoundingClientRect,findPosition,getPointerPosition,isTextNode,emptyEl,normalizeContent,appendContent,insertContent,isSingleLeftClick,$,$$,computedStyle,copyStyleSheetsToWindow});let _windowLoaded=!1,videojs$1;const autoSetup=function(){if(videojs$1.options.autoSetup===!1)return;const r=Array.prototype.slice.call(document$1.getElementsByTagName("video")),e=Array.prototype.slice.call(document$1.getElementsByTagName("audio")),n=Array.prototype.slice.call(document$1.getElementsByTagName("video-js")),s=r.concat(e,n);if(s&&s.length>0)for(let a=0,o=s.length;a<o;a++){const l=s[a];if(l&&l.getAttribute)l.player===void 0&&l.getAttribute("data-setup")!==null&&videojs$1(l);else{autoSetupTimeout(1);break}}else _windowLoaded||autoSetupTimeout(1)};function autoSetupTimeout(r,e){isReal()&&(e&&(videojs$1=e),window$1.setTimeout(autoSetup,r))}function setWindowLoaded(){_windowLoaded=!0,window$1.removeEventListener("load",setWindowLoaded)}isReal()&&(document$1.readyState==="complete"?setWindowLoaded():window$1.addEventListener("load",setWindowLoaded));const createStyleElement=function(r){const e=document$1.createElement("style");return e.className=r,e},setTextContent=function(r,e){r.styleSheet?r.styleSheet.cssText=e:r.textContent=e};var DomData=new WeakMap;const _initialGuid=3;let _guid=_initialGuid;function newGUID(){return _guid++}function _cleanUpEvents(r,e){if(!DomData.has(r))return;const n=DomData.get(r);n.handlers[e].length===0&&(delete n.handlers[e],r.removeEventListener?r.removeEventListener(e,n.dispatcher,!1):r.detachEvent&&r.detachEvent("on"+e,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),Object.getOwnPropertyNames(n).length===0&&DomData.delete(r)}function _handleMultipleEvents(r,e,n,s){n.forEach(function(a){r(e,a,s)})}function fixEvent(r){if(r.fixed_)return r;function e(){return!0}function n(){return!1}if(!r||!r.isPropagationStopped||!r.isImmediatePropagationStopped){const s=r||window$1.event;r={};const a=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(const o in s)a.includes(o)||o==="returnValue"&&s.preventDefault||(r[o]=s[o]);if(r.target||(r.target=r.srcElement||document$1),r.relatedTarget||(r.relatedTarget=r.fromElement===r.target?r.toElement:r.fromElement),r.preventDefault=function(){s.preventDefault&&s.preventDefault(),r.returnValue=!1,s.returnValue=!1,r.defaultPrevented=!0},r.defaultPrevented=!1,r.stopPropagation=function(){s.stopPropagation&&s.stopPropagation(),r.cancelBubble=!0,s.cancelBubble=!0,r.isPropagationStopped=e},r.isPropagationStopped=n,r.stopImmediatePropagation=function(){s.stopImmediatePropagation&&s.stopImmediatePropagation(),r.isImmediatePropagationStopped=e,r.stopPropagation()},r.isImmediatePropagationStopped=n,r.clientX!==null&&r.clientX!==void 0){const o=document$1.documentElement,l=document$1.body;r.pageX=r.clientX+(o&&o.scrollLeft||l&&l.scrollLeft||0)-(o&&o.clientLeft||l&&l.clientLeft||0),r.pageY=r.clientY+(o&&o.scrollTop||l&&l.scrollTop||0)-(o&&o.clientTop||l&&l.clientTop||0)}r.which=r.charCode||r.keyCode,r.button!==null&&r.button!==void 0&&(r.button=r.button&1?0:r.button&4?1:r.button&2?2:0)}return r.fixed_=!0,r}let _supportsPassive;const supportsPassive=function(){if(typeof _supportsPassive!="boolean"){_supportsPassive=!1;try{const r=Object.defineProperty({},"passive",{get(){_supportsPassive=!0}});window$1.addEventListener("test",null,r),window$1.removeEventListener("test",null,r)}catch{}}return _supportsPassive},passiveEvents=["touchstart","touchmove"];function on(r,e,n){if(Array.isArray(e))return _handleMultipleEvents(on,r,e,n);DomData.has(r)||DomData.set(r,{});const s=DomData.get(r);if(s.handlers||(s.handlers={}),s.handlers[e]||(s.handlers[e]=[]),n.guid||(n.guid=newGUID()),s.handlers[e].push(n),s.dispatcher||(s.disabled=!1,s.dispatcher=function(a,o){if(s.disabled)return;a=fixEvent(a);const l=s.handlers[a.type];if(l){const u=l.slice(0);for(let c=0,f=u.length;c<f&&!a.isImmediatePropagationStopped();c++)try{u[c].call(r,a,o)}catch(m){log$1.error(m)}}}),s.handlers[e].length===1)if(r.addEventListener){let a=!1;supportsPassive()&&passiveEvents.indexOf(e)>-1&&(a={passive:!0}),r.addEventListener(e,s.dispatcher,a)}else r.attachEvent&&r.attachEvent("on"+e,s.dispatcher)}function off(r,e,n){if(!DomData.has(r))return;const s=DomData.get(r);if(!s.handlers)return;if(Array.isArray(e))return _handleMultipleEvents(off,r,e,n);const a=function(l,u){s.handlers[u]=[],_cleanUpEvents(l,u)};if(e===void 0){for(const l in s.handlers)Object.prototype.hasOwnProperty.call(s.handlers||{},l)&&a(r,l);return}const o=s.handlers[e];if(o){if(!n){a(r,e);return}if(n.guid)for(let l=0;l<o.length;l++)o[l].guid===n.guid&&o.splice(l--,1);_cleanUpEvents(r,e)}}function trigger(r,e,n){const s=DomData.has(r)?DomData.get(r):{},a=r.parentNode||r.ownerDocument;if(typeof e=="string"?e={type:e,target:r}:e.target||(e.target=r),e=fixEvent(e),s.dispatcher&&s.dispatcher.call(r,e,n),a&&!e.isPropagationStopped()&&e.bubbles===!0)trigger.call(null,a,e,n);else if(!a&&!e.defaultPrevented&&e.target&&e.target[e.type]){DomData.has(e.target)||DomData.set(e.target,{});const o=DomData.get(e.target);e.target[e.type]&&(o.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),o.disabled=!1)}return!e.defaultPrevented}function one(r,e,n){if(Array.isArray(e))return _handleMultipleEvents(one,r,e,n);const s=function(){off(r,e,s),n.apply(this,arguments)};s.guid=n.guid=n.guid||newGUID(),on(r,e,s)}function any(r,e,n){const s=function(){off(r,e,s),n.apply(this,arguments)};s.guid=n.guid=n.guid||newGUID(),on(r,e,s)}var Events=Object.freeze({__proto__:null,fixEvent,on,off,trigger,one,any});const UPDATE_REFRESH_INTERVAL=30,bind_=function(r,e,n){e.guid||(e.guid=newGUID());const s=e.bind(r);return s.guid=n?n+"_"+e.guid:e.guid,s},throttle=function(r,e){let n=window$1.performance.now();return function(...a){const o=window$1.performance.now();o-n>=e&&(r(...a),n=o)}},debounce$1=function(r,e,n,s=window$1){let a;const o=()=>{s.clearTimeout(a),a=null},l=function(){const u=this,c=arguments;let f=function(){a=null,f=null,n||r.apply(u,c)};!a&&n&&r.apply(u,c),s.clearTimeout(a),a=s.setTimeout(f,e)};return l.cancel=o,l};var Fn=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL,bind_,throttle,debounce:debounce$1});let EVENT_MAP;class EventTarget$2{on(e,n){const s=this.addEventListener;this.addEventListener=()=>{},on(this,e,n),this.addEventListener=s}off(e,n){off(this,e,n)}one(e,n){const s=this.addEventListener;this.addEventListener=()=>{},one(this,e,n),this.addEventListener=s}any(e,n){const s=this.addEventListener;this.addEventListener=()=>{},any(this,e,n),this.addEventListener=s}trigger(e){const n=e.type||e;typeof e=="string"&&(e={type:n}),e=fixEvent(e),this.allowedEvents_[n]&&this["on"+n]&&this["on"+n](e),trigger(this,e)}queueTrigger(e){EVENT_MAP||(EVENT_MAP=new Map);const n=e.type||e;let s=EVENT_MAP.get(this);s||(s=new Map,EVENT_MAP.set(this,s));const a=s.get(n);s.delete(n),window$1.clearTimeout(a);const o=window$1.setTimeout(()=>{s.delete(n),s.size===0&&(s=null,EVENT_MAP.delete(this)),this.trigger(e)},0);s.set(n,o)}}EventTarget$2.prototype.allowedEvents_={};EventTarget$2.prototype.addEventListener=EventTarget$2.prototype.on;EventTarget$2.prototype.removeEventListener=EventTarget$2.prototype.off;EventTarget$2.prototype.dispatchEvent=EventTarget$2.prototype.trigger;const objName=r=>typeof r.name=="function"?r.name():typeof r.name=="string"?r.name:r.name_?r.name_:r.constructor&&r.constructor.name?r.constructor.name:typeof r,isEvented=r=>r instanceof EventTarget$2||!!r.eventBusEl_&&["on","one","off","trigger"].every(e=>typeof r[e]=="function"),addEventedCallback=(r,e)=>{isEvented(r)?e():(r.eventedCallbacks||(r.eventedCallbacks=[]),r.eventedCallbacks.push(e))},isValidEventType=r=>typeof r=="string"&&/\S/.test(r)||Array.isArray(r)&&!!r.length,validateTarget=(r,e,n)=>{if(!r||!r.nodeName&&!isEvented(r))throw new Error(`Invalid target for ${objName(e)}#${n}; must be a DOM node or evented object.`)},validateEventType=(r,e,n)=>{if(!isValidEventType(r))throw new Error(`Invalid event type for ${objName(e)}#${n}; must be a non-empty string or array.`)},validateListener=(r,e,n)=>{if(typeof r!="function")throw new Error(`Invalid listener for ${objName(e)}#${n}; must be a function.`)},normalizeListenArgs=(r,e,n)=>{const s=e.length<3||e[0]===r||e[0]===r.eventBusEl_;let a,o,l;return s?(a=r.eventBusEl_,e.length>=3&&e.shift(),[o,l]=e):(a=e[0],o=e[1],l=e[2]),validateTarget(a,r,n),validateEventType(o,r,n),validateListener(l,r,n),l=bind_(r,l),{isTargetingSelf:s,target:a,type:o,listener:l}},listen=(r,e,n,s)=>{validateTarget(r,r,e),r.nodeName?Events[e](r,n,s):r[e](n,s)},EventedMixin={on(...r){const{isTargetingSelf:e,target:n,type:s,listener:a}=normalizeListenArgs(this,r,"on");if(listen(n,"on",s,a),!e){const o=()=>this.off(n,s,a);o.guid=a.guid;const l=()=>this.off("dispose",o);l.guid=a.guid,listen(this,"on","dispose",o),listen(n,"on","dispose",l)}},one(...r){const{isTargetingSelf:e,target:n,type:s,listener:a}=normalizeListenArgs(this,r,"one");if(e)listen(n,"one",s,a);else{const o=(...l)=>{this.off(n,s,o),a.apply(null,l)};o.guid=a.guid,listen(n,"one",s,o)}},any(...r){const{isTargetingSelf:e,target:n,type:s,listener:a}=normalizeListenArgs(this,r,"any");if(e)listen(n,"any",s,a);else{const o=(...l)=>{this.off(n,s,o),a.apply(null,l)};o.guid=a.guid,listen(n,"any",s,o)}},off(r,e,n){if(!r||isValidEventType(r))off(this.eventBusEl_,r,e);else{const s=r,a=e;validateTarget(s,this,"off"),validateEventType(a,this,"off"),validateListener(n,this,"off"),n=bind_(this,n),this.off("dispose",n),s.nodeName?(off(s,a,n),off(s,"dispose",n)):isEvented(s)&&(s.off(a,n),s.off("dispose",n))}},trigger(r,e){validateTarget(this.eventBusEl_,this,"trigger");const n=r&&typeof r!="string"?r.type:r;if(!isValidEventType(n))throw new Error(`Invalid event type for ${objName(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return trigger(this.eventBusEl_,r,e)}};function evented(r,e={}){const{eventBusKey:n}=e;if(n){if(!r[n].nodeName)throw new Error(`The eventBusKey "${n}" does not refer to an element.`);r.eventBusEl_=r[n]}else r.eventBusEl_=createEl("span",{className:"vjs-event-bus"});return Object.assign(r,EventedMixin),r.eventedCallbacks&&r.eventedCallbacks.forEach(s=>{s()}),r.on("dispose",()=>{r.off(),[r,r.el_,r.eventBusEl_].forEach(function(s){s&&DomData.has(s)&&DomData.delete(s)}),window$1.setTimeout(()=>{r.eventBusEl_=null},0)}),r}const StatefulMixin={state:{},setState(r){typeof r=="function"&&(r=r());let e;return each(r,(n,s)=>{this.state[s]!==n&&(e=e||{},e[s]={from:this.state[s],to:n}),this.state[s]=n}),e&&isEvented(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function stateful(r,e){return Object.assign(r,StatefulMixin),r.state=Object.assign({},r.state,e),typeof r.handleStateChanged=="function"&&isEvented(r)&&r.on("statechanged",r.handleStateChanged),r}const toLowerCase=function(r){return typeof r!="string"?r:r.replace(/./,e=>e.toLowerCase())},toTitleCase$1=function(r){return typeof r!="string"?r:r.replace(/./,e=>e.toUpperCase())},titleCaseEquals=function(r,e){return toTitleCase$1(r)===toTitleCase$1(e)};var Str=Object.freeze({__proto__:null,toLowerCase,toTitleCase:toTitleCase$1,titleCaseEquals});class Component$1{constructor(e,n,s){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=merge$1({},this.options_),n=this.options_=merge$1(this.options_,n),this.id_=n.id||n.el&&n.el.id,!this.id_){const a=e&&e.id&&e.id()||"no_player";this.id_=`${a}_component_${newGUID()}`}this.name_=n.name||null,n.el?this.el_=n.el:n.createEl!==!1&&(this.el_=this.createEl()),n.className&&this.el_&&n.className.split(" ").forEach(a=>this.addClass(a)),["on","off","one","any","trigger"].forEach(a=>{this[a]=void 0}),n.evented!==!1&&(evented(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),stateful(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,n.initChildren!==!1&&this.initChildren(),this.ready(s),n.reportTouchActivity!==!1&&this.enableTouchActivity()}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let n=this.children_.length-1;n>=0;n--)this.children_[n].dispose&&this.children_[n].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(e){return e?(this.options_=merge$1(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,n,s){return createEl(e,n,s)}localize(e,n,s=e){const a=this.player_.language&&this.player_.language(),o=this.player_.languages&&this.player_.languages(),l=o&&o[a],u=a&&a.split("-")[0],c=o&&o[u];let f=s;return l&&l[e]?f=l[e]:c&&c[e]&&(f=c[e]),n&&(f=f.replace(/\{(\d+)\}/g,function(m,v){const x=n[v-1];let C=x;return typeof x>"u"&&(C=m),C})),f}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((s,a)=>s.concat(a),[]);let n=this;for(let s=0;s<e.length;s++)if(n=n.getChild(e[s]),!n||!n.getChild)return;return n}setIcon(e,n=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const s="http://www.w3.org/2000/svg",a=createEl("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),o=document$1.createElementNS(s,"svg");o.setAttributeNS(null,"viewBox","0 0 512 512");const l=document$1.createElementNS(s,"use");return o.appendChild(l),l.setAttributeNS(null,"href",`#vjs-icon-${e}`),a.appendChild(o),this.iconIsSet_?n.replaceChild(a,n.querySelector(".vjs-icon-placeholder")):n.appendChild(a),this.iconIsSet_=!0,a}addChild(e,n={},s=this.children_.length){let a,o;if(typeof e=="string"){o=toTitleCase$1(e);const l=n.componentClass||o;n.name=o;const u=Component$1.getComponent(l);if(!u)throw new Error(`Component ${l} does not exist`);if(typeof u!="function")return null;a=new u(this.player_||this,n)}else a=e;if(a.parentComponent_&&a.parentComponent_.removeChild(a),this.children_.splice(s,0,a),a.parentComponent_=this,typeof a.id=="function"&&(this.childIndex_[a.id()]=a),o=o||a.name&&toTitleCase$1(a.name()),o&&(this.childNameIndex_[o]=a,this.childNameIndex_[toLowerCase(o)]=a),typeof a.el=="function"&&a.el()){let l=null;this.children_[s+1]&&(this.children_[s+1].el_?l=this.children_[s+1].el_:isEl(this.children_[s+1])&&(l=this.children_[s+1])),this.contentEl().insertBefore(a.el(),l)}return a}removeChild(e){if(typeof e=="string"&&(e=this.getChild(e)),!e||!this.children_)return;let n=!1;for(let a=this.children_.length-1;a>=0;a--)if(this.children_[a]===e){n=!0,this.children_.splice(a,1);break}if(!n)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[toTitleCase$1(e.name())]=null,this.childNameIndex_[toLowerCase(e.name())]=null;const s=e.el();s&&s.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const n=this.options_,s=l=>{const u=l.name;let c=l.opts;if(n[u]!==void 0&&(c=n[u]),c===!1)return;c===!0&&(c={}),c.playerOptions=this.options_.playerOptions;const f=this.addChild(u,c);f&&(this[u]=f)};let a;const o=Component$1.getComponent("Tech");Array.isArray(e)?a=e:a=Object.keys(e),a.concat(Object.keys(this.options_).filter(function(l){return!a.some(function(u){return typeof u=="string"?l===u:l===u.name})})).map(l=>{let u,c;return typeof l=="string"?(u=l,c=e[u]||this.options_[u]||{}):(u=l.name,c=l),{name:u,opts:c}}).filter(l=>{const u=Component$1.getComponent(l.opts.componentClass||toTitleCase$1(l.name));return u&&!o.isTech(u)}).forEach(s)}}buildCSSClass(){return""}ready(e,n=!1){if(e){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e);return}n?e.call(this):this.setTimeout(e,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(n){n.call(this)},this),this.trigger("ready")},1)}$(e,n){return $(e,n||this.contentEl())}$$(e,n){return $$(e,n||this.contentEl())}hasClass(e){return hasClass(this.el_,e)}addClass(...e){addClass(this.el_,...e)}removeClass(...e){removeClass(this.el_,...e)}toggleClass(e,n){toggleClass(this.el_,e,n)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return getAttribute(this.el_,e)}setAttribute(e,n){setAttribute(this.el_,e,n)}removeAttribute(e){removeAttribute(this.el_,e)}width(e,n){return this.dimension("width",e,n)}height(e,n){return this.dimension("height",e,n)}dimensions(e,n){this.width(e,!0),this.height(n)}dimension(e,n,s){if(n!==void 0){(n===null||n!==n)&&(n=0),(""+n).indexOf("%")!==-1||(""+n).indexOf("px")!==-1?this.el_.style[e]=n:n==="auto"?this.el_.style[e]="":this.el_.style[e]=n+"px",s||this.trigger("componentresize");return}if(!this.el_)return 0;const a=this.el_.style[e],o=a.indexOf("px");return parseInt(o!==-1?a.slice(0,o):this.el_["offset"+toTitleCase$1(e)],10)}currentDimension(e){let n=0;if(e!=="width"&&e!=="height")throw new Error("currentDimension only accepts width or height value");if(n=computedStyle(this.el_,e),n=parseFloat(n),n===0||isNaN(n)){const s=`offset${toTitleCase$1(e)}`;n=this.el_[s]}return n}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){const e=this.el_.getBoundingClientRect(),n={x:e.x,y:e.y,width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left},s={x:e.left+e.width/2,y:e.top+e.height/2,width:0,height:0,top:e.top+e.height/2,right:e.left+e.width/2,bottom:e.top+e.height/2,left:e.left+e.width/2};return{boundingClientRect:n,center:s}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(e.key!=="Tab"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)&&e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e=0,n=null;const s=10,a=200;let o;this.on("touchstart",function(u){u.touches.length===1&&(n={pageX:u.touches[0].pageX,pageY:u.touches[0].pageY},e=window$1.performance.now(),o=!0)}),this.on("touchmove",function(u){if(u.touches.length>1)o=!1;else if(n){const c=u.touches[0].pageX-n.pageX,f=u.touches[0].pageY-n.pageY;Math.sqrt(c*c+f*f)>s&&(o=!1)}});const l=function(){o=!1};this.on("touchleave",l),this.on("touchcancel",l),this.on("touchend",function(u){n=null,o===!0&&window$1.performance.now()-e<a&&(u.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=bind_(this.player(),this.player().reportUserActivity);let n;this.on("touchstart",function(){e(),this.clearInterval(n),n=this.setInterval(e,250)});const s=function(a){e(),this.clearInterval(n)};this.on("touchmove",e),this.on("touchend",s),this.on("touchcancel",s)}setTimeout(e,n){var s;return e=bind_(this,e),this.clearTimersOnDispose_(),s=window$1.setTimeout(()=>{this.setTimeoutIds_.has(s)&&this.setTimeoutIds_.delete(s),e()},n),this.setTimeoutIds_.add(s),s}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),window$1.clearTimeout(e)),e}setInterval(e,n){e=bind_(this,e),this.clearTimersOnDispose_();const s=window$1.setInterval(e,n);return this.setIntervalIds_.add(s),s}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),window$1.clearInterval(e)),e}requestAnimationFrame(e){this.clearTimersOnDispose_();var n;return e=bind_(this,e),n=window$1.requestAnimationFrame(()=>{this.rafIds_.has(n)&&this.rafIds_.delete(n),e()}),this.rafIds_.add(n),n}requestNamedAnimationFrame(e,n){this.namedRafs_.has(e)&&this.cancelNamedAnimationFrame(e),this.clearTimersOnDispose_(),n=bind_(this,n);const s=this.requestAnimationFrame(()=>{n(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,s),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),window$1.cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,n])=>{this[e].forEach((s,a)=>this[n](a))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return!!this.el_.disabled}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(e){return(e||this.el_).tabIndex>=0&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(e){function n(o){const l=window$1.getComputedStyle(o,null),u=l.getPropertyValue("visibility");return l.getPropertyValue("display")!=="none"&&!["hidden","collapse"].includes(u)}function s(o){return!(!n(o.parentElement)||!n(o)||o.style.opacity==="0"||window$1.getComputedStyle(o).height==="0px"||window$1.getComputedStyle(o).width==="0px")}function a(o){if(o.offsetWidth+o.offsetHeight+o.getBoundingClientRect().height+o.getBoundingClientRect().width===0)return!1;const l={x:o.getBoundingClientRect().left+o.offsetWidth/2,y:o.getBoundingClientRect().top+o.offsetHeight/2};if(l.x<0||l.x>(document$1.documentElement.clientWidth||window$1.innerWidth)||l.y<0||l.y>(document$1.documentElement.clientHeight||window$1.innerHeight))return!1;let u=document$1.elementFromPoint(l.x,l.y);for(;u;){if(u===o)return!0;if(u.parentNode)u=u.parentNode;else return!1}}return e||(e=this.el()),!!(a(e)&&s(e)&&(!e.parentElement||e.tabIndex>=0))}static registerComponent(e,n){if(typeof e!="string"||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const s=Component$1.getComponent("Tech"),a=s&&s.isTech(n),o=Component$1===n||Component$1.prototype.isPrototypeOf(n.prototype);if(a||!o){let u;throw a?u="techs must be registered using Tech.registerTech()":u="must be a Component subclass",new Error(`Illegal component, "${e}"; ${u}.`)}e=toTitleCase$1(e),Component$1.components_||(Component$1.components_={});const l=Component$1.getComponent("Player");if(e==="Player"&&l&&l.players){const u=l.players,c=Object.keys(u);if(u&&c.length>0){for(let f=0;f<c.length;f++)if(u[c[f]]!==null)throw new Error("Can not register Player component after player has been created.")}}return Component$1.components_[e]=n,Component$1.components_[toLowerCase(e)]=n,n}static getComponent(e){if(!(!e||!Component$1.components_))return Component$1.components_[e]}}Component$1.registerComponent("Component",Component$1);function rangeCheck(r,e,n){if(typeof e!="number"||e<0||e>n)throw new Error(`Failed to execute '${r}' on 'TimeRanges': The index provided (${e}) is non-numeric or out of bounds (0-${n}).`)}function getRange(r,e,n,s){return rangeCheck(r,s,n.length-1),n[s][e]}function createTimeRangesObj(r){let e;return r===void 0||r.length===0?e={length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:e={length:r.length,start:getRange.bind(null,"start",0,r),end:getRange.bind(null,"end",1,r)},window$1.Symbol&&window$1.Symbol.iterator&&(e[window$1.Symbol.iterator]=()=>(r||[]).values()),e}function createTimeRanges$1(r,e){return Array.isArray(r)?createTimeRangesObj(r):r===void 0||e===void 0?createTimeRangesObj():createTimeRangesObj([[r,e]])}const defaultImplementation=function(r,e){r=r<0?0:r;let n=Math.floor(r%60),s=Math.floor(r/60%60),a=Math.floor(r/3600);const o=Math.floor(e/60%60),l=Math.floor(e/3600);return(isNaN(r)||r===1/0)&&(a=s=n="-"),a=a>0||l>0?a+":":"",s=((a||o>=10)&&s<10?"0"+s:s)+":",n=n<10?"0"+n:n,a+s+n};let implementation=defaultImplementation;function setFormatTime(r){implementation=r}function resetFormatTime(){implementation=defaultImplementation}function formatTime(r,e=r){return implementation(r,e)}var Time=Object.freeze({__proto__:null,createTimeRanges:createTimeRanges$1,createTimeRange:createTimeRanges$1,setFormatTime,resetFormatTime,formatTime});function bufferedPercent(r,e){let n=0,s,a;if(!e)return 0;(!r||!r.length)&&(r=createTimeRanges$1(0,0));for(let o=0;o<r.length;o++)s=r.start(o),a=r.end(o),a>e&&(a=e),n+=a-s;return n/e}function MediaError(r){if(r instanceof MediaError)return r;typeof r=="number"?this.code=r:typeof r=="string"?this.message=r:isObject(r)&&(typeof r.code=="number"&&(this.code=r.code),Object.assign(this,r)),this.message||(this.message=MediaError.defaultMessages[this.code]||"")}MediaError.prototype.code=0;MediaError.prototype.message="";MediaError.prototype.status=null;MediaError.prototype.metadata=null;MediaError.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];MediaError.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};MediaError.MEDIA_ERR_CUSTOM=0;MediaError.prototype.MEDIA_ERR_CUSTOM=0;MediaError.MEDIA_ERR_ABORTED=1;MediaError.prototype.MEDIA_ERR_ABORTED=1;MediaError.MEDIA_ERR_NETWORK=2;MediaError.prototype.MEDIA_ERR_NETWORK=2;MediaError.MEDIA_ERR_DECODE=3;MediaError.prototype.MEDIA_ERR_DECODE=3;MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED=4;MediaError.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4;MediaError.MEDIA_ERR_ENCRYPTED=5;MediaError.prototype.MEDIA_ERR_ENCRYPTED=5;function isPromise(r){return r!=null&&typeof r.then=="function"}function silencePromise(r){isPromise(r)&&r.then(null,e=>{})}const trackToJson_=function(r){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((n,s,a)=>(r[s]&&(n[s]=r[s]),n),{cues:r.cues&&Array.prototype.map.call(r.cues,function(n){return{startTime:n.startTime,endTime:n.endTime,text:n.text,id:n.id}})})},textTracksToJson=function(r){const e=r.$$("track"),n=Array.prototype.map.call(e,a=>a.track);return Array.prototype.map.call(e,function(a){const o=trackToJson_(a.track);return a.src&&(o.src=a.src),o}).concat(Array.prototype.filter.call(r.textTracks(),function(a){return n.indexOf(a)===-1}).map(trackToJson_))},jsonToTextTracks=function(r,e){return r.forEach(function(n){const s=e.addRemoteTextTrack(n).track;!n.src&&n.cues&&n.cues.forEach(a=>s.addCue(a))}),e.textTracks()};var textTrackConverter={textTracksToJson,jsonToTextTracks,trackToJson_};const MODAL_CLASS_NAME="vjs-modal-dialog";class ModalDialog extends Component$1{constructor(e,n){super(e,n),this.handleKeyDown_=s=>this.handleKeyDown(s),this.close_=s=>this.close(s),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=createEl("div",{className:`${MODAL_CLASS_NAME}-content`},{role:"document"}),this.descEl_=createEl("p",{className:`${MODAL_CLASS_NAME}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),textContent(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${MODAL_CLASS_NAME} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(this.opened_){this.options_.fillAlways&&this.fill();return}const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}opened(e){return typeof e=="boolean"&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if(typeof e=="boolean"){const n=this.closeable_=!!e;let s=this.getChild("closeButton");if(n&&!s){const a=this.contentEl_;this.contentEl_=this.el_,s=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=a,this.on(s,"close",this.close_)}!n&&s&&(this.off(s,"close",this.close_),this.removeChild(s),s.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const n=this.contentEl(),s=n.parentNode,a=n.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,s.removeChild(n),this.empty(),insertContent(n,e),this.trigger("modalfill"),a?s.insertBefore(n,a):s.appendChild(n);const o=this.getChild("closeButton");o&&s.appendChild(o.el_),this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty"),emptyEl(this.contentEl()),this.trigger("modalempty")}content(e){return typeof e<"u"&&(this.content_=e),this.content_}conditionalFocus_(){const e=document$1.activeElement,n=this.player_.el_;this.previouslyActiveEl_=null,(n.contains(e)||n===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(this.trigger({type:"modalKeydown",originalEvent:e,target:this,bubbles:!0}),e.stopPropagation(),e.key==="Escape"&&this.closeable()){e.preventDefault(),this.close();return}if(e.key!=="Tab")return;const n=this.focusableEls_(),s=this.el_.querySelector(":focus");let a;for(let o=0;o<n.length;o++)if(s===n[o]){a=o;break}document$1.activeElement===this.el_&&(a=0),e.shiftKey&&a===0?(n[n.length-1].focus(),e.preventDefault()):!e.shiftKey&&a===n.length-1&&(n[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,n=>(n instanceof window$1.HTMLAnchorElement||n instanceof window$1.HTMLAreaElement)&&n.hasAttribute("href")||(n instanceof window$1.HTMLInputElement||n instanceof window$1.HTMLSelectElement||n instanceof window$1.HTMLTextAreaElement||n instanceof window$1.HTMLButtonElement)&&!n.hasAttribute("disabled")||n instanceof window$1.HTMLIFrameElement||n instanceof window$1.HTMLObjectElement||n instanceof window$1.HTMLEmbedElement||n.hasAttribute("tabindex")&&n.getAttribute("tabindex")!==-1||n.hasAttribute("contenteditable"))}}ModalDialog.prototype.options_={pauseOnOpen:!0,temporary:!0};Component$1.registerComponent("ModalDialog",ModalDialog);class TrackList extends EventTarget$2{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let n=0;n<e.length;n++)this.addTrack(e[n])}addTrack(e){const n=this.tracks_.length;""+n in this||Object.defineProperty(this,n,{get(){return this.tracks_[n]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},isEvented(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let n;for(let s=0,a=this.length;s<a;s++)if(this[s]===e){n=this[s],n.off&&n.off(),this.tracks_.splice(s,1);break}n&&this.trigger({track:n,type:"removetrack",target:this})}getTrackById(e){let n=null;for(let s=0,a=this.length;s<a;s++){const o=this[s];if(o.id===e){n=o;break}}return n}}TrackList.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const r in TrackList.prototype.allowedEvents_)TrackList.prototype["on"+r]=null;const disableOthers$1=function(r,e){for(let n=0;n<r.length;n++)!Object.keys(r[n]).length||e.id===r[n].id||(r[n].enabled=!1)};class AudioTrackList extends TrackList{constructor(e=[]){for(let n=e.length-1;n>=0;n--)if(e[n].enabled){disableOthers$1(e,e[n]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&disableOthers$1(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,disableOthers$1(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}}const disableOthers=function(r,e){for(let n=0;n<r.length;n++)!Object.keys(r[n]).length||e.id===r[n].id||(r[n].selected=!1)};class VideoTrackList extends TrackList{constructor(e=[]){for(let n=e.length-1;n>=0;n--)if(e[n].selected){disableOthers(e,e[n]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let n=0;n<this.length;n++)if(this[n].selected)return n;return-1},set(){}})}addTrack(e){e.selected&&disableOthers(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,disableOthers(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}}class TextTrackList extends TrackList{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(e.kind)===-1&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class HtmlTrackElementList{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let n=0,s=e.length;n<s;n++)this.addTrackElement_(e[n])}addTrackElement_(e){const n=this.trackElements_.length;""+n in this||Object.defineProperty(this,n,{get(){return this.trackElements_[n]}}),this.trackElements_.indexOf(e)===-1&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let n;for(let s=0,a=this.trackElements_.length;s<a;s++)if(e===this.trackElements_[s].track){n=this.trackElements_[s];break}return n}removeTrackElement_(e){for(let n=0,s=this.trackElements_.length;n<s;n++)if(e===this.trackElements_[n]){this.trackElements_[n].track&&typeof this.trackElements_[n].track.off=="function"&&this.trackElements_[n].track.off(),typeof this.trackElements_[n].off=="function"&&this.trackElements_[n].off(),this.trackElements_.splice(n,1);break}}}class TextTrackCueList{constructor(e){TextTrackCueList.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const n=this.length||0;let s=0;const a=e.length;this.cues_=e,this.length_=e.length;const o=function(l){""+l in this||Object.defineProperty(this,""+l,{get(){return this.cues_[l]}})};if(n<a)for(s=n;s<a;s++)o.call(this,s)}getCueById(e){let n=null;for(let s=0,a=this.length;s<a;s++){const o=this[s];if(o.id===e){n=o;break}}return n}}const VideoTrackKind={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},AudioTrackKind={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},TextTrackKind={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},TextTrackMode={disabled:"disabled",hidden:"hidden",showing:"showing"};class Track extends EventTarget$2{constructor(e={}){super();const n={id:e.id||"vjs_track_"+newGUID(),kind:e.kind||"",language:e.language||""};let s=e.label||"";for(const a in n)Object.defineProperty(this,a,{get(){return n[a]},set(){}});Object.defineProperty(this,"label",{get(){return s},set(a){a!==s&&(s=a,this.trigger("labelchange"))}})}}const parseUrl=function(r){return new URL(r,document$1.baseURI)},getAbsoluteURL=function(r){return new URL(r,document$1.baseURI).href},getFileExtension=function(r){if(typeof r=="string"){const n=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(r);if(n)return n.pop().toLowerCase()}return""},isCrossOrigin=function(r,e=window$1.location){return parseUrl(r).origin!==e.origin};var Url=Object.freeze({__proto__:null,parseUrl,getAbsoluteURL,getFileExtension,isCrossOrigin});const parseCues=function(r,e){const n=new window$1.WebVTT.Parser(window$1,window$1.vttjs,window$1.WebVTT.StringDecoder()),s=[];n.oncue=function(a){e.addCue(a)},n.onparsingerror=function(a){s.push(a)},n.onflush=function(){e.trigger({type:"loadeddata",target:e})},n.parse(r),s.length>0&&(window$1.console&&window$1.console.groupCollapsed&&window$1.console.groupCollapsed(`Text Track parsing errors for ${e.src}`),s.forEach(a=>log$1.error(a)),window$1.console&&window$1.console.groupEnd&&window$1.console.groupEnd()),n.flush()},loadTrack=function(r,e){const n={uri:r},s=isCrossOrigin(r);s&&(n.cors=s);const a=e.tech_.crossOrigin()==="use-credentials";a&&(n.withCredentials=a),XHR(n,bind_(this,function(o,l,u){if(o)return log$1.error(o,l);e.loaded_=!0,typeof window$1.WebVTT!="function"?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],c=>{if(c.type==="vttjserror"){log$1.error(`vttjs failed to load, stopping trying to process ${e.src}`);return}return parseCues(u,e)}):parseCues(u,e)}))};class TextTrack extends Track{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const n=merge$1(e,{kind:TextTrackKind[e.kind]||"subtitles",language:e.language||e.srclang||""});let s=TextTrackMode[n.mode]||"disabled";const a=n.default;(n.kind==="metadata"||n.kind==="chapters")&&(s="hidden"),super(n),this.tech_=n.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;const o=new TextTrackCueList(this.cues_),l=new TextTrackCueList(this.activeCues_);let u=!1;this.timeupdateHandler=bind_(this,function(f={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){f.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,u&&(this.trigger("cuechange"),u=!1),f.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});const c=()=>{this.stopTracking()};this.tech_.one("dispose",c),s!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return a},set(){}},mode:{get(){return s},set(f){TextTrackMode[f]&&s!==f&&(s=f,!this.preload_&&s!=="disabled"&&this.cues.length===0&&loadTrack(this.src,this),this.stopTracking(),s!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?o:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return l;const f=this.tech_.currentTime(),m=[];for(let v=0,x=this.cues.length;v<x;v++){const C=this.cues[v];C.startTime<=f&&C.endTime>=f&&m.push(C)}if(u=!1,m.length!==this.activeCues_.length)u=!0;else for(let v=0;v<m.length;v++)this.activeCues_.indexOf(m[v])===-1&&(u=!0);return this.activeCues_=m,l.setCues_(this.activeCues_),l},set(){}}}),n.src?(this.src=n.src,this.preload_||(this.loaded_=!0),(this.preload_||n.kind!=="subtitles"&&n.kind!=="captions")&&loadTrack(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let n=e;if(!("getCueAsHTML"in n)){n=new window$1.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(const a in e)a in n||(n[a]=e[a]);n.id=e.id,n.originalCue_=e}const s=this.tech_.textTracks();for(let a=0;a<s.length;a++)s[a]!==this&&s[a].removeCue(n);this.cues_.push(n),this.cues.setCues_(this.cues_)}removeCue(e){let n=this.cues_.length;for(;n--;){const s=this.cues_[n];if(s===e||s.originalCue_&&s.originalCue_===e){this.cues_.splice(n,1),this.cues.setCues_(this.cues_);break}}}}TextTrack.prototype.allowedEvents_={cuechange:"cuechange"};class AudioTrack extends Track{constructor(e={}){const n=merge$1(e,{kind:AudioTrackKind[e.kind]||""});super(n);let s=!1;Object.defineProperty(this,"enabled",{get(){return s},set(a){typeof a!="boolean"||a===s||(s=a,this.trigger("enabledchange"))}}),n.enabled&&(this.enabled=n.enabled),this.loaded_=!0}}class VideoTrack extends Track{constructor(e={}){const n=merge$1(e,{kind:VideoTrackKind[e.kind]||""});super(n);let s=!1;Object.defineProperty(this,"selected",{get(){return s},set(a){typeof a!="boolean"||a===s||(s=a,this.trigger("selectedchange"))}}),n.selected&&(this.selected=n.selected)}}class HTMLTrackElement extends EventTarget$2{constructor(e={}){super();let n;const s=new TextTrack(e);this.kind=s.kind,this.src=s.src,this.srclang=s.language,this.label=s.label,this.default=s.default,Object.defineProperties(this,{readyState:{get(){return n}},track:{get(){return s}}}),n=HTMLTrackElement.NONE,s.addEventListener("loadeddata",()=>{n=HTMLTrackElement.LOADED,this.trigger({type:"load",target:this})})}}HTMLTrackElement.prototype.allowedEvents_={load:"load"};HTMLTrackElement.NONE=0;HTMLTrackElement.LOADING=1;HTMLTrackElement.LOADED=2;HTMLTrackElement.ERROR=3;const NORMAL={audio:{ListClass:AudioTrackList,TrackClass:AudioTrack,capitalName:"Audio"},video:{ListClass:VideoTrackList,TrackClass:VideoTrack,capitalName:"Video"},text:{ListClass:TextTrackList,TrackClass:TextTrack,capitalName:"Text"}};Object.keys(NORMAL).forEach(function(r){NORMAL[r].getterName=`${r}Tracks`,NORMAL[r].privateName=`${r}Tracks_`});const REMOTE={remoteText:{ListClass:TextTrackList,TrackClass:TextTrack,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:HtmlTrackElementList,TrackClass:HTMLTrackElement,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},ALL=Object.assign({},NORMAL,REMOTE);REMOTE.names=Object.keys(REMOTE);NORMAL.names=Object.keys(NORMAL);ALL.names=[].concat(REMOTE.names).concat(NORMAL.names);function createTrackHelper(r,e,n,s,a={}){const o=r.textTracks();a.kind=e,n&&(a.label=n),s&&(a.language=s),a.tech=r;const l=new ALL.text.TrackClass(a);return o.addTrack(l),l}class Tech extends Component$1{constructor(e={},n=function(){}){e.reportTouchActivity=!1,super(null,e,n),this.onDurationChange_=s=>this.onDurationChange(s),this.trackProgress_=s=>this.trackProgress(s),this.trackCurrentTime_=s=>this.trackCurrentTime(s),this.stopTrackingCurrentTime_=s=>this.stopTrackingCurrentTime(s),this.disposeSourceHandler_=s=>this.disposeSourceHandler(s),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),ALL.names.forEach(s=>{const a=ALL[s];e&&e[a.getterName]&&(this[a.privateName]=e[a.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(s=>{e[`native${s}Tracks`]===!1&&(this[`featuresNative${s}Tracks`]=!1)}),e.nativeCaptions===!1||e.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:(e.nativeCaptions===!0||e.nativeTextTracks===!0)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=e.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new ALL.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(bind_(this,function(){const n=this.bufferedPercent();this.bufferedPercent_!==n&&this.trigger("progress"),this.bufferedPercent_=n,n===1&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return createTimeRanges$1(0,0)}bufferedPercent(){return bufferedPercent(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(NORMAL.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){e=[].concat(e),e.forEach(n=>{const s=this[`${n}Tracks`]()||[];let a=s.length;for(;a--;){const o=s[a];n==="text"&&this.removeRemoteTextTrack(o),s.removeTrack(o)}})}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let n=e.length;for(;n--;){const s=e[n];this.removeRemoteTextTrack(s)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return e!==void 0&&(this.error_=new MediaError(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?createTimeRanges$1(0,0):createTimeRanges$1()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){NORMAL.names.forEach(e=>{const n=NORMAL[e],s=()=>{this.trigger(`${e}trackchange`)},a=this[n.getterName]();a.addEventListener("removetrack",s),a.addEventListener("addtrack",s),this.on("dispose",()=>{a.removeEventListener("removetrack",s),a.removeEventListener("addtrack",s)})})}addWebVttScript_(){if(!window$1.WebVTT)if(document$1.body.contains(this.el())){if(!this.options_["vtt.js"]&&isPlain(vtt)&&Object.keys(vtt).length>0){this.trigger("vttjsloaded");return}const e=document$1.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),window$1.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),n=this.remoteTextTracks(),s=u=>e.addTrack(u.track),a=u=>e.removeTrack(u.track);n.on("addtrack",s),n.on("removetrack",a),this.addWebVttScript_();const o=()=>this.trigger("texttrackchange"),l=()=>{o();for(let u=0;u<e.length;u++){const c=e[u];c.removeEventListener("cuechange",o),c.mode==="showing"&&c.addEventListener("cuechange",o)}};l(),e.addEventListener("change",l),e.addEventListener("addtrack",l),e.addEventListener("removetrack",l),this.on("dispose",function(){n.off("addtrack",s),n.off("removetrack",a),e.removeEventListener("change",l),e.removeEventListener("addtrack",l),e.removeEventListener("removetrack",l);for(let u=0;u<e.length;u++)e[u].removeEventListener("cuechange",o)})}addTextTrack(e,n,s){if(!e)throw new Error("TextTrack kind is required but was not provided");return createTrackHelper(this,e,n,s)}createRemoteTextTrack(e){const n=merge$1(e,{tech:this});return new REMOTE.remoteTextEl.TrackClass(n)}addRemoteTextTrack(e={},n){const s=this.createRemoteTextTrack(e);return typeof n!="boolean"&&(n=!1),this.remoteTextTrackEls().addTrackElement_(s),this.remoteTextTracks().addTrack(s.track),n===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(s.track)),s}removeRemoteTextTrack(e){const n=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(n),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const n=newGUID();return!this.isReady_||this.paused()?(this.queuedHanders_.add(n),this.one("playing",()=>{this.queuedHanders_.has(n)&&(this.queuedHanders_.delete(n),e())})):this.requestNamedAnimationFrame(n,e),n}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,n){return Tech.canPlayType(e.type)}static isTech(e){return e.prototype instanceof Tech||e instanceof Tech||e===Tech}static registerTech(e,n){if(Tech.techs_||(Tech.techs_={}),!Tech.isTech(n))throw new Error(`Tech ${e} must be a Tech`);if(!Tech.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!Tech.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=toTitleCase$1(e),Tech.techs_[e]=n,Tech.techs_[toLowerCase(e)]=n,e!=="Tech"&&Tech.defaultTechOrder_.push(e),n}static getTech(e){if(e){if(Tech.techs_&&Tech.techs_[e])return Tech.techs_[e];if(e=toTitleCase$1(e),window$1&&window$1.videojs&&window$1.videojs[e])return log$1.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),window$1.videojs[e]}}}ALL.names.forEach(function(r){const e=ALL[r];Tech.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});Tech.prototype.featuresVolumeControl=!0;Tech.prototype.featuresMuteControl=!0;Tech.prototype.featuresFullscreenResize=!1;Tech.prototype.featuresPlaybackRate=!1;Tech.prototype.featuresProgressEvents=!1;Tech.prototype.featuresSourceset=!1;Tech.prototype.featuresTimeupdateEvents=!1;Tech.prototype.featuresNativeTextTracks=!1;Tech.prototype.featuresVideoFrameCallback=!1;Tech.withSourceHandlers=function(r){r.registerSourceHandler=function(n,s){let a=r.sourceHandlers;a||(a=r.sourceHandlers=[]),s===void 0&&(s=a.length),a.splice(s,0,n)},r.canPlayType=function(n){const s=r.sourceHandlers||[];let a;for(let o=0;o<s.length;o++)if(a=s[o].canPlayType(n),a)return a;return""},r.selectSourceHandler=function(n,s){const a=r.sourceHandlers||[];let o;for(let l=0;l<a.length;l++)if(o=a[l].canHandleSource(n,s),o)return a[l];return null},r.canPlaySource=function(n,s){const a=r.selectSourceHandler(n,s);return a?a.canHandleSource(n,s):""},["seekable","seeking","duration"].forEach(function(n){const s=this[n];typeof s=="function"&&(this[n]=function(){return this.sourceHandler_&&this.sourceHandler_[n]?this.sourceHandler_[n].apply(this.sourceHandler_,arguments):s.apply(this,arguments)})},r.prototype),r.prototype.setSource=function(n){let s=r.selectSourceHandler(n,this.options_);s||(r.nativeSourceHandler?s=r.nativeSourceHandler:log$1.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),s!==r.nativeSourceHandler&&(this.currentSource_=n),this.sourceHandler_=s.handleSource(n,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},r.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};Component$1.registerComponent("Tech",Tech);Tech.registerTech("Tech",Tech);Tech.defaultTechOrder_=[];const middlewares={},middlewareInstances={},TERMINATOR={};function use(r,e){middlewares[r]=middlewares[r]||[],middlewares[r].push(e)}function setSource(r,e,n){r.setTimeout(()=>setSourceHelper(e,middlewares[e.type],n,r),1)}function setTech(r,e){r.forEach(n=>n.setTech&&n.setTech(e))}function get(r,e,n){return r.reduceRight(middlewareIterator(n),e[n]())}function set(r,e,n,s){return e[n](r.reduce(middlewareIterator(n),s))}function mediate(r,e,n,s=null){const a="call"+toTitleCase$1(n),o=r.reduce(middlewareIterator(a),s),l=o===TERMINATOR,u=l?null:e[n](o);return executeRight(r,n,u,l),u}const allowedGetters={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},allowedSetters={setCurrentTime:1,setMuted:1,setVolume:1},allowedMediators={play:1,pause:1};function middlewareIterator(r){return(e,n)=>e===TERMINATOR?TERMINATOR:n[r]?n[r](e):e}function executeRight(r,e,n,s){for(let a=r.length-1;a>=0;a--){const o=r[a];o[e]&&o[e](s,n)}}function clearCacheForPlayer(r){middlewareInstances.hasOwnProperty(r.id())&&delete middlewareInstances[r.id()]}function getOrCreateFactory(r,e){const n=middlewareInstances[r.id()];let s=null;if(n==null)return s=e(r),middlewareInstances[r.id()]=[[e,s]],s;for(let a=0;a<n.length;a++){const[o,l]=n[a];o===e&&(s=l)}return s===null&&(s=e(r),n.push([e,s])),s}function setSourceHelper(r={},e=[],n,s,a=[],o=!1){const[l,...u]=e;if(typeof l=="string")setSourceHelper(r,middlewares[l],n,s,a,o);else if(l){const c=getOrCreateFactory(s,l);if(!c.setSource)return a.push(c),setSourceHelper(r,u,n,s,a,o);c.setSource(Object.assign({},r),function(f,m){if(f)return setSourceHelper(r,u,n,s,a,o);a.push(c),setSourceHelper(m,r.type===m.type?u:middlewares[m.type],n,s,a,o)})}else u.length?setSourceHelper(r,u,n,s,a,o):o?n(r,a):setSourceHelper(r,middlewares["*"],n,s,a,!0)}const MimetypesKind={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},getMimetype=function(r=""){const e=getFileExtension(r);return MimetypesKind[e.toLowerCase()]||""},findMimetype=(r,e)=>{if(!e)return"";if(r.cache_.source.src===e&&r.cache_.source.type)return r.cache_.source.type;const n=r.cache_.sources.filter(a=>a.src===e);if(n.length)return n[0].type;const s=r.$$("source");for(let a=0;a<s.length;a++){const o=s[a];if(o.type&&o.src&&o.src===e)return o.type}return getMimetype(e)},filterSource=function(r){if(Array.isArray(r)){let e=[];r.forEach(function(n){n=filterSource(n),Array.isArray(n)?e=e.concat(n):isObject(n)&&e.push(n)}),r=e}else typeof r=="string"&&r.trim()?r=[fixSource({src:r})]:isObject(r)&&typeof r.src=="string"&&r.src&&r.src.trim()?r=[fixSource(r)]:r=[];return r};function fixSource(r){if(!r.type){const e=getMimetype(r.src);e&&(r.type=e)}return r}var icons=`<svg xmlns="http://www.w3.org/2000/svg">
  <defs>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play">
      <path d="M16 10v28l22-14z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">
      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">
      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">
      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">
      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">
      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">
      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">
      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">
      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">
      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">
      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">
      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">
      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>
    </symbol>
    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">
      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">
      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>
    </symbol>
    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">
      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">
      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">
      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">
      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-share">
      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">
      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-square">
      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">
      <circle cx="24" cy="24" r="20"></circle>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">
      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">
      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">
      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">
      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">
      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">
      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">
      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">
      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">
      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>
    </symbol>
    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">
      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">
      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">
      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">
      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">
      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">
      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>
    </symbol>
    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">
      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>
      <path fill="none" d="M-1-3h24v24H-1z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">
      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">
      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>
    </symbol>
    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">
      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">
      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">
      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>
    </symbol>
  </defs>
</svg>`;const backKeyCode=IS_TIZEN?10009:IS_WEBOS?461:8,SpatialNavKeyCodes={codes:{play:415,pause:19,ff:417,rw:412,back:backKeyCode},names:{415:"play",19:"pause",417:"ff",412:"rw",[backKeyCode]:"back"},isEventKey(r,e){return e=e.toLowerCase(),!!(this.names[r.keyCode]&&this.names[r.keyCode]===e)},getEventName(r){if(this.names[r.keyCode])return this.names[r.keyCode];if(this.codes[r.code]){const e=this.codes[r.code];return this.names[e]}return null}},STEP_SECONDS=5;class SpatialNavigation extends EventTarget$2{constructor(e){super(),this.player_=e,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay&&this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents(),this.focusableComponents.length&&(this.focusableComponents.length>1?this.focusableComponents[1].focus():this.focusableComponents[0].focus())}))}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(e){const n=e.originalEvent?e.originalEvent:e;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(n.key)){if(this.isPaused_)return;n.preventDefault();const s=n.key.substring(5).toLowerCase();this.move(s)}else if(SpatialNavKeyCodes.isEventKey(n,"play")||SpatialNavKeyCodes.isEventKey(n,"pause")||SpatialNavKeyCodes.isEventKey(n,"ff")||SpatialNavKeyCodes.isEventKey(n,"rw")){n.preventDefault();const s=SpatialNavKeyCodes.getEventName(n);this.performMediaAction_(s)}else SpatialNavKeyCodes.isEventKey(n,"Back")&&e.target&&typeof e.target.closeable=="function"&&e.target.closeable()&&(n.preventDefault(),e.target.close())}performMediaAction_(e){if(this.player_)switch(e){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+STEP_SECONDS);break;case"rw":this.userSeek_(this.player_.currentTime()-STEP_SECONDS);break}}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(e){const n=e.relatedTarget;let s=null;const a=this.getCurrentComponent(e.target);n&&(s=!!n.closest(".video-js"),n.classList.contains("vjs-text-track-settings")&&!this.isPaused_&&this.searchForTrackSelect_()),(!e.currentTarget.contains(e.relatedTarget)&&!s||!n)&&(a&&a.name()==="CloseButton"?this.refocusComponent():(this.pause(),a&&a.el()&&(this.lastFocusedComponent_=a)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){const e=this.player_,n=[];function s(a){for(const o of a)o.hasOwnProperty("el_")&&o.getIsFocusable()&&o.getIsAvailableToBeFocused(o.el())&&n.push(o),o.hasOwnProperty("children_")&&o.children_.length>0&&s(o.children_)}return e.children_.forEach(a=>{if(a.hasOwnProperty("el_"))if(a.getIsFocusable&&a.getIsAvailableToBeFocused&&a.getIsFocusable()&&a.getIsAvailableToBeFocused(a.el())){n.push(a);return}else a.hasOwnProperty("children_")&&a.children_.length>0?s(a.children_):a.hasOwnProperty("items")&&a.items.length>0?s(a.items):this.findSuitableDOMChild(a)&&n.push(a);if(a.name_==="ErrorDisplay"&&a.opened_){const o=a.el_.querySelector(".vjs-errors-ok-button-container");o&&o.querySelectorAll("button").forEach((u,c)=>{n.push({name:()=>"ModalButton"+(c+1),el:()=>u,getPositions:()=>{const f=u.getBoundingClientRect(),m={x:f.x,y:f.y,width:f.width,height:f.height,top:f.top,right:f.right,bottom:f.bottom,left:f.left},v={x:f.left+f.width/2,y:f.top+f.height/2,width:0,height:0,top:f.top+f.height/2,right:f.left+f.width/2,bottom:f.top+f.height/2,left:f.left+f.width/2};return{boundingClientRect:m,center:v}},getIsAvailableToBeFocused:()=>!0,getIsFocusable:f=>!0,focus:()=>u.focus()})})}}),this.focusableComponents=n,this.focusableComponents}findSuitableDOMChild(e){function n(s){if(e.getIsFocusable(s)&&e.getIsAvailableToBeFocused(s))return s;for(let a=0;a<s.children.length;a++){const o=s.children[a],l=n(o);if(l)return l}return null}return e.el()?n(e.el()):null}getCurrentComponent(e){this.updateFocusableComponents();const n=e||document.activeElement;if(this.focusableComponents.length){for(const s of this.focusableComponents)if(s.el()===n)return s}}add(e){const n=[...this.focusableComponents];e.hasOwnProperty("el_")&&e.getIsFocusable()&&e.getIsAvailableToBeFocused(e.el())&&n.push(e),this.focusableComponents=n,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(e){for(let n=0;n<this.focusableComponents.length;n++)if(this.focusableComponents[n].name()===e.name()){this.focusableComponents.splice(n,1),this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents});return}}clear(){this.focusableComponents.length>0&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(e){const n=this.getCurrentComponent();if(!n)return;const s=n.getPositions(),a=this.focusableComponents.filter(l=>l!==n&&this.isInDirection_(s.boundingClientRect,l.getPositions().boundingClientRect,e)),o=this.findBestCandidate_(s.center,a,e);o?this.focus(o):this.trigger({type:"endOfFocusableComponents",direction:e,focusedComponent:n})}findBestCandidate_(e,n,s){let a=1/0,o=null;for(const l of n){const u=l.getPositions().center,c=this.calculateDistance_(e,u,s);c<a&&(a=c,o=l)}return o}isInDirection_(e,n,s){switch(s){case"right":return n.left>=e.right;case"left":return n.right<=e.left;case"down":return n.top>=e.bottom;case"up":return n.bottom<=e.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let e=0;e<this.focusableComponents.length;e++)if(this.focusableComponents[e].name()===this.lastFocusedComponent_.name()){this.focus(this.focusableComponents[e]);return}}else this.focus(this.updateFocusableComponents()[0])}focus(e){typeof e=="object"&&(e.getIsAvailableToBeFocused(e.el())?e.focus():this.findSuitableDOMChild(e)&&this.findSuitableDOMChild(e).focus())}calculateDistance_(e,n,s){const a=Math.abs(e.x-n.x),o=Math.abs(e.y-n.y);let l;switch(s){case"right":case"left":l=a+o*100;break;case"up":l=o*2+a*.5;break;case"down":l=o*5+a;break;default:l=a+o}return l}searchForTrackSelect_(){const e=this;for(const n of e.updateFocusableComponents())if(n.constructor.name==="TextTrackSelect"){e.focus(n);break}}}class MediaLoader extends Component$1{constructor(e,n,s){const a=merge$1({createEl:!1},n);if(super(e,a,s),!n.playerOptions.sources||n.playerOptions.sources.length===0)for(let o=0,l=n.playerOptions.techOrder;o<l.length;o++){const u=toTitleCase$1(l[o]);let c=Tech.getTech(u);if(u||(c=Component$1.getComponent(u)),c&&c.isSupported()){e.loadTech_(u);break}}else e.src(n.playerOptions.sources)}}Component$1.registerComponent("MediaLoader",MediaLoader);class ClickableComponent extends Component$1{constructor(e,n){super(e,n),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=s=>this.handleMouseOver(s),this.handleMouseOut_=s=>this.handleMouseOut(s),this.handleClick_=s=>this.handleClick(s),this.handleKeyDown_=s=>this.handleKeyDown(s),this.emitTapEvents(),this.enable()}createEl(e="div",n={},s={}){n=Object.assign({className:this.buildCSSClass(),tabIndex:0},n),e==="button"&&log$1.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),s=Object.assign({role:"button"},s),this.tabIndex_=n.tabIndex;const a=createEl(e,n,s);return this.player_.options_.experimentalSvgIcons||a.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(a),a}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=createEl("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,n=this.el()){if(e===void 0)return this.controlText_||"Need Text";const s=this.localize(e);this.controlText_=e,textContent(this.controlTextEl_,s),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&n.setAttribute("title",s)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){e.key===" "||e.key==="Enter"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}Component$1.registerComponent("ClickableComponent",ClickableComponent);class PosterImage extends ClickableComponent{constructor(e,n){super(e,n),this.update(),this.update_=s=>this.update(s),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return createEl("div",{className:"vjs-poster"})}crossOrigin(e){if(typeof e>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.$("img")&&(this.$("img").crossOrigin=e)}update(e){const n=this.player().poster();this.setSrc(n),n?this.show():this.hide()}setSrc(e){if(!e){this.el_.textContent="";return}this.$("img")||this.el_.appendChild(createEl("picture",{className:"vjs-poster",tabIndex:-1},{},createEl("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?silencePromise(this.player_.play()):this.player_.pause())}}PosterImage.prototype.crossorigin=PosterImage.prototype.crossOrigin;Component$1.registerComponent("PosterImage",PosterImage);const darkGray="#222",lightGray="#ccc",fontMap={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function constructColor(r,e){let n;if(r.length===4)n=r[1]+r[1]+r[2]+r[2]+r[3]+r[3];else if(r.length===7)n=r.slice(1);else throw new Error("Invalid color code provided, "+r+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+e+")"}function tryUpdateStyle(r,e,n){try{r.style[e]=n}catch{return}}function getCSSPositionValue(r){return r?`${r}px`:""}class TextTrackDisplay extends Component$1{constructor(e,n,s){super(e,n,s);const a=l=>this.updateDisplay(l),o=l=>{this.updateDisplayOverlay(),this.updateDisplay(l)};e.on("loadstart",l=>this.toggleDisplay(l)),e.on("texttrackchange",a),e.on("loadedmetadata",l=>{this.updateDisplayOverlay(),this.preselectTrack(l)}),e.ready(bind_(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks){this.hide();return}e.on("fullscreenchange",o),e.on("playerresize",o);const l=window$1.screen.orientation||window$1,u=window$1.screen.orientation?"change":"orientationchange";l.addEventListener(u,o),e.on("dispose",()=>l.removeEventListener(u,o));const c=this.options_.playerOptions.tracks||[];for(let f=0;f<c.length;f++)this.player_.addRemoteTextTrack(c[f],!0);this.preselectTrack()}))}preselectTrack(){const e={captions:1,subtitles:1},n=this.player_.textTracks(),s=this.player_.cache_.selectedLanguage;let a,o,l;for(let u=0;u<n.length;u++){const c=n[u];s&&s.enabled&&s.language&&s.language===c.language&&c.kind in e?c.kind===s.kind?l=c:l||(l=c):s&&!s.enabled?(l=null,a=null,o=null):c.default&&(c.kind==="descriptions"&&!a?a=c:c.kind in e&&!o&&(o=c))}l?l.mode="showing":o?o.mode="showing":a&&(a.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof window$1.WebVTT=="function"&&window$1.WebVTT.processCues(window$1,[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),n=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),n){const l=[];for(let u=0;u<e.length;++u){const c=e[u];c.mode==="showing"&&l.push(c)}this.updateForTrack(l);return}let s=null,a=null,o=e.length;for(;o--;){const l=e[o];l.mode==="showing"&&(l.kind==="descriptions"?s=l:a=l)}if(a?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(a)):s&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(s)),!window$1.CSS.supports("inset","10px")){const l=this.el_,u=l.querySelectorAll(".vjs-text-track-cue"),c=this.player_.controlBar.el_.getBoundingClientRect().height,f=this.player_.el_.getBoundingClientRect().height;l.style="",tryUpdateStyle(l,"position","relative"),tryUpdateStyle(l,"height",f-c+"px"),tryUpdateStyle(l,"top","unset"),IS_SMART_TV?tryUpdateStyle(l,"bottom",f+"px"):tryUpdateStyle(l,"bottom","0px"),u.length>0&&u.forEach(m=>{if(m.style.inset){const v=m.style.inset.split(" ");v.length===3&&Object.assign(m.style,{top:v[0],right:v[1],bottom:v[2],left:"unset"})}})}}updateDisplayOverlay(){if(!this.player_.videoHeight()||!window$1.CSS.supports("inset-inline: 10px"))return;const e=this.player_.currentWidth(),n=this.player_.currentHeight(),s=e/n,a=this.player_.videoWidth()/this.player_.videoHeight();let o=0,l=0;Math.abs(s-a)>.1&&(s>a?o=Math.round((e-n*a)/2):l=Math.round((n-e/a)/2)),tryUpdateStyle(this.el_,"insetInline",getCSSPositionValue(o)),tryUpdateStyle(this.el_,"insetBlock",getCSSPositionValue(l))}updateDisplayState(e){const n=this.player_.textTrackSettings.getValues(),s=e.activeCues;let a=s.length;for(;a--;){const o=s[a];if(!o)continue;const l=o.displayState;if(n.color&&(l.firstChild.style.color=n.color),n.textOpacity&&tryUpdateStyle(l.firstChild,"color",constructColor(n.color||"#fff",n.textOpacity)),n.backgroundColor&&(l.firstChild.style.backgroundColor=n.backgroundColor),n.backgroundOpacity&&tryUpdateStyle(l.firstChild,"backgroundColor",constructColor(n.backgroundColor||"#000",n.backgroundOpacity)),n.windowColor&&(n.windowOpacity?tryUpdateStyle(l,"backgroundColor",constructColor(n.windowColor,n.windowOpacity)):l.style.backgroundColor=n.windowColor),n.edgeStyle&&(n.edgeStyle==="dropshadow"?l.firstChild.style.textShadow=`2px 2px 3px ${darkGray}, 2px 2px 4px ${darkGray}, 2px 2px 5px ${darkGray}`:n.edgeStyle==="raised"?l.firstChild.style.textShadow=`1px 1px ${darkGray}, 2px 2px ${darkGray}, 3px 3px ${darkGray}`:n.edgeStyle==="depressed"?l.firstChild.style.textShadow=`1px 1px ${lightGray}, 0 1px ${lightGray}, -1px -1px ${darkGray}, 0 -1px ${darkGray}`:n.edgeStyle==="uniform"&&(l.firstChild.style.textShadow=`0 0 4px ${darkGray}, 0 0 4px ${darkGray}, 0 0 4px ${darkGray}, 0 0 4px ${darkGray}`)),n.fontPercent&&n.fontPercent!==1){const u=window$1.parseFloat(l.style.fontSize);l.style.fontSize=u*n.fontPercent+"px",l.style.height="auto",l.style.top="auto"}n.fontFamily&&n.fontFamily!=="default"&&(n.fontFamily==="small-caps"?l.firstChild.style.fontVariant="small-caps":l.firstChild.style.fontFamily=fontMap[n.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),typeof window$1.WebVTT!="function"||e.every(s=>!s.activeCues))return;const n=[];for(let s=0;s<e.length;++s){const a=e[s];for(let o=0;o<a.activeCues.length;++o)n.push(a.activeCues[o])}window$1.WebVTT.processCues(window$1,n,this.el_);for(let s=0;s<e.length;++s){const a=e[s];for(let o=0;o<a.activeCues.length;++o){const l=a.activeCues[o].displayState;addClass(l,"vjs-text-track-cue","vjs-text-track-cue-"+(a.language?a.language:s)),a.language&&setAttribute(l,"lang",a.language)}this.player_.textTrackSettings&&this.updateDisplayState(a)}}}Component$1.registerComponent("TextTrackDisplay",TextTrackDisplay);class LoadingSpinner extends Component$1{createEl(){const e=this.player_.isAudio(),n=this.localize(e?"Audio Player":"Video Player"),s=createEl("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[n])}),a=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return a.appendChild(s),a}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}}Component$1.registerComponent("LoadingSpinner",LoadingSpinner);class Button extends ClickableComponent{createEl(e,n={},s={}){e="button",n=Object.assign({className:this.buildCSSClass()},n),s=Object.assign({type:"button"},s);const a=createEl(e,n,s);return this.player_.options_.experimentalSvgIcons||a.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(a),a}addChild(e,n={}){const s=this.constructor.name;return log$1.warn(`Adding an actionable (user controllable) child to a Button (${s}) is not supported; use a ClickableComponent instead.`),Component$1.prototype.addChild.call(this,e,n)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){if(e.key===" "||e.key==="Enter"){e.stopPropagation();return}super.handleKeyDown(e)}}Component$1.registerComponent("Button",Button);class BigPlayButton extends Button{constructor(e,n){super(e,n),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",s=>this.handleMouseDown(s))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const n=this.player_.play();if(this.mouseused_&&"clientX"in e&&"clientY"in e){silencePromise(n),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}const s=this.player_.getChild("controlBar"),a=s&&s.getChild("playToggle");if(!a){this.player_.tech(!0).focus();return}const o=()=>a.focus();isPromise(n)?n.then(o,()=>{}):this.setTimeout(o,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}BigPlayButton.prototype.controlText_="Play Video";Component$1.registerComponent("BigPlayButton",BigPlayButton);class CloseButton extends Button{constructor(e,n){super(e,n),this.setIcon("cancel"),this.controlText(n&&n.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){e.key==="Escape"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}Component$1.registerComponent("CloseButton",CloseButton);class PlayToggle extends Button{constructor(e,n={}){super(e,n),n.replay=n.replay===void 0||n.replay,this.setIcon("play"),this.on(e,"play",s=>this.handlePlay(s)),this.on(e,"pause",s=>this.handlePause(s)),n.replay&&this.on(e,"ended",s=>this.handleEnded(s))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?silencePromise(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",n=>this.handleSeeked(n))}}PlayToggle.prototype.controlText_="Play";Component$1.registerComponent("PlayToggle",PlayToggle);class TimeDisplay extends Component$1{constructor(e,n){super(e,n),this.on(e,["timeupdate","ended","seeking"],s=>this.update(s)),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),n=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),s=createEl("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)} `},{role:"presentation"});return n.appendChild(s),this.contentEl_=createEl("span",{className:`${e}-display`},{role:"presentation"}),n.appendChild(this.contentEl_),n}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(e){!this.player_.options_.enableSmoothSeeking&&e.type==="seeking"||this.updateContent(e)}updateTextNode_(e=0){e=formatTime(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let n=this.textNode_;n&&this.contentEl_.firstChild!==n&&(n=null,log$1.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=document$1.createTextNode(this.formattedTime_),this.textNode_&&(n?this.contentEl_.replaceChild(this.textNode_,n):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}}TimeDisplay.prototype.labelText_="Time";TimeDisplay.prototype.controlText_="Time";Component$1.registerComponent("TimeDisplay",TimeDisplay);class CurrentTimeDisplay extends TimeDisplay{buildCSSClass(){return"vjs-current-time"}updateContent(e){let n;this.player_.ended()?n=this.player_.duration():n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(n)}}CurrentTimeDisplay.prototype.labelText_="Current Time";CurrentTimeDisplay.prototype.controlText_="Current Time";Component$1.registerComponent("CurrentTimeDisplay",CurrentTimeDisplay);class DurationDisplay extends TimeDisplay{constructor(e,n){super(e,n);const s=a=>this.updateContent(a);this.on(e,"durationchange",s),this.on(e,"loadstart",s),this.on(e,"loadedmetadata",s)}buildCSSClass(){return"vjs-duration"}updateContent(e){const n=this.player_.duration();this.updateTextNode_(n)}}DurationDisplay.prototype.labelText_="Duration";DurationDisplay.prototype.controlText_="Duration";Component$1.registerComponent("DurationDisplay",DurationDisplay);class TimeDivider extends Component$1{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),n=super.createEl("div"),s=super.createEl("span",{textContent:"/"});return n.appendChild(s),e.appendChild(n),e}}Component$1.registerComponent("TimeDivider",TimeDivider);class RemainingTimeDisplay extends TimeDisplay{constructor(e,n){super(e,n),this.on(e,"durationchange",s=>this.updateContent(s))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return this.options_.displayNegative!==!1&&e.insertBefore(createEl("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if(typeof this.player_.duration()!="number")return;let n;this.player_.ended()?n=0:this.player_.remainingTimeDisplay?n=this.player_.remainingTimeDisplay():n=this.player_.remainingTime(),this.updateTextNode_(n)}}RemainingTimeDisplay.prototype.labelText_="Remaining Time";RemainingTimeDisplay.prototype.controlText_="Remaining Time";Component$1.registerComponent("RemainingTimeDisplay",RemainingTimeDisplay);class LiveDisplay extends Component$1{constructor(e,n){super(e,n),this.updateShowing(),this.on(this.player(),"durationchange",s=>this.updateShowing(s))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=createEl("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(createEl("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")} `})),this.contentEl_.appendChild(document$1.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}}Component$1.registerComponent("LiveDisplay",LiveDisplay);class SeekToLive extends Button{constructor(e,n){super(e,n),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=s=>this.updateLiveEdgeStatus(s),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",e),this.textEl_=createEl("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}SeekToLive.prototype.controlText_="Seek to live, currently playing live";Component$1.registerComponent("SeekToLive",SeekToLive);function clamp(r,e,n){return r=Number(r),Math.min(n,Math.max(e,isNaN(r)?e:r))}var Num=Object.freeze({__proto__:null,clamp});class Slider extends Component$1{constructor(e,n){super(e,n),this.handleMouseDown_=s=>this.handleMouseDown(s),this.handleMouseUp_=s=>this.handleMouseUp(s),this.handleKeyDown_=s=>this.handleKeyDown(s),this.handleClick_=s=>this.handleClick(s),this.handleMouseMove_=s=>this.handleMouseMove(s),this.update_=s=>this.update(s),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,n={},s={}){return n.className=n.className+" vjs-slider",n=Object.assign({tabIndex:0},n),s=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},s),super.createEl(e,n,s)}handleMouseDown(e){const n=this.bar.el_.ownerDocument;e.type==="mousedown"&&e.preventDefault(),e.type==="touchstart"&&!IS_CHROME&&e.preventDefault(),blockTextSelection(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(n,"mousemove",this.handleMouseMove_),this.on(n,"mouseup",this.handleMouseUp_),this.on(n,"touchmove",this.handleMouseMove_),this.on(n,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){const n=this.bar.el_.ownerDocument;unblockTextSelection(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(n,"mousemove",this.handleMouseMove_),this.off(n,"mouseup",this.handleMouseUp_),this.off(n,"touchmove",this.handleMouseMove_),this.off(n,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const n=this.vertical()?"height":"width";this.bar.el().style[n]=(e*100).toFixed(2)+"%"})),e}getProgress(){return Number(clamp(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const n=getPointerPosition(this.el_,e);return this.vertical()?n.y:n.x}handleKeyDown(e){const n=this.options_.playerOptions.spatialNavigation,s=n&&n.enabled,a=n&&n.horizontalSeek;s?a&&e.key==="ArrowLeft"||!a&&e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):a&&e.key==="ArrowRight"||!a&&e.key==="ArrowUp"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e):e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):e.key==="ArrowUp"||e.key==="ArrowRight"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(e===void 0)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}Component$1.registerComponent("Slider",Slider);const percentify=(r,e)=>clamp(r/e*100,0,100).toFixed(2)+"%";class LoadProgressBar extends Component$1{constructor(e,n){super(e,n),this.partEls_=[],this.on(e,"progress",s=>this.update(s))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),n=createEl("span",{className:"vjs-control-text"}),s=createEl("span",{textContent:this.localize("Loaded")}),a=document$1.createTextNode(": ");return this.percentageEl_=createEl("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(n),n.appendChild(s),n.appendChild(a),n.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const n=this.player_.liveTracker,s=this.player_.buffered(),a=n&&n.isLive()?n.seekableEnd():this.player_.duration(),o=this.player_.bufferedEnd(),l=this.partEls_,u=percentify(o,a);this.percent_!==u&&(this.el_.style.width=u,textContent(this.percentageEl_,u),this.percent_=u);for(let c=0;c<s.length;c++){const f=s.start(c),m=s.end(c);let v=l[c];v||(v=this.el_.appendChild(createEl()),l[c]=v),!(v.dataset.start===f&&v.dataset.end===m)&&(v.dataset.start=f,v.dataset.end=m,v.style.left=percentify(f,o),v.style.width=percentify(m-f,o))}for(let c=l.length;c>s.length;c--)this.el_.removeChild(l[c-1]);l.length=s.length})}}Component$1.registerComponent("LoadProgressBar",LoadProgressBar);class TimeTooltip extends Component$1{constructor(e,n){super(e,n),this.update=throttle(bind_(this,this.update),UPDATE_REFRESH_INTERVAL)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,n,s){const a=findPosition(this.el_),o=getBoundingClientRect(this.player_.el()),l=e.width*n;if(!o||!a)return;let u=e.left-o.left+l,c=e.width-l+(o.right-e.right);c||(c=e.width-l,u=l);let f=a.width/2;u<f?f+=f-u:c<f&&(f=c),f<0?f=0:f>a.width&&(f=a.width),f=Math.round(f),this.el_.style.right=`-${f}px`,this.write(s)}write(e){textContent(this.el_,e)}updateTime(e,n,s,a){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let o;const l=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const u=this.player_.liveTracker.liveWindow(),c=u-n*u;o=(c<1?"":"-")+formatTime(c,u)}else o=formatTime(s,l);this.update(e,n,o),a&&a()})}}Component$1.registerComponent("TimeTooltip",TimeTooltip);class PlayProgressBar extends Component$1{constructor(e,n){super(e,n),this.setIcon("circle"),this.update=throttle(bind_(this,this.update),UPDATE_REFRESH_INTERVAL)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,n){const s=this.getChild("timeTooltip");if(!s)return;const a=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();s.updateTime(e,n,a)}}PlayProgressBar.prototype.options_={children:[]};!IS_IOS&&!IS_ANDROID&&PlayProgressBar.prototype.options_.children.push("timeTooltip");Component$1.registerComponent("PlayProgressBar",PlayProgressBar);class MouseTimeDisplay extends Component$1{constructor(e,n){super(e,n),this.update=throttle(bind_(this,this.update),UPDATE_REFRESH_INTERVAL)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,n){const s=n*this.player_.duration();this.getChild("timeTooltip").updateTime(e,n,s,()=>{this.el_.style.left=`${e.width*n}px`})}}MouseTimeDisplay.prototype.options_={children:["timeTooltip"]};Component$1.registerComponent("MouseTimeDisplay",MouseTimeDisplay);class SeekBar extends Slider{constructor(e,n){n=merge$1(SeekBar.prototype.options_,n),n.children=[...n.children];const s=e.options_.disableSeekWhileScrubbingOnMobile&&(IS_IOS||IS_ANDROID);(!IS_IOS&&!IS_ANDROID||s)&&n.children.splice(1,0,"mouseTimeDisplay"),super(e,n),this.shouldDisableSeekWhileScrubbingOnMobile_=s,this.pendingSeekTime_=null,this.setEventHandlers_()}setEventHandlers_(){this.update_=bind_(this,this.update),this.update=throttle(this.update_,UPDATE_REFRESH_INTERVAL),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in document$1&&"visibilityState"in document$1&&this.on(document$1,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){document$1.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,UPDATE_REFRESH_INTERVAL))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&e.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if(document$1.visibilityState==="hidden")return;const n=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const s=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),a=this.player_.liveTracker;let o=this.player_.duration();a&&a.isLive()&&(o=this.player_.liveTracker.liveCurrentTime()),this.percent_!==n&&(this.el_.setAttribute("aria-valuenow",(n*100).toFixed(2)),this.percent_=n),(this.currentTime_!==s||this.duration_!==o)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[formatTime(s,o),formatTime(o,o)],"{1} of {2}")),this.currentTime_=s,this.duration_=o),this.bar&&this.bar.update(getBoundingClientRect(this.el()),this.getProgress())}),n}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){if(this.pendingSeekTime_)return this.pendingSeekTime_/this.player_.duration();const e=this.getCurrentTime_();let n;const s=this.player_.liveTracker;return s&&s.isLive()?(n=(e-s.seekableStart())/s.liveWindow(),s.atLiveEdge()&&(n=1)):n=e/this.player_.duration(),n}handleMouseDown(e){isSingleLeftClick(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.shouldDisableSeekWhileScrubbingOnMobile_||this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,n=!1){if(!isSingleLeftClick(e)||isNaN(this.player_.duration()))return;!n&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);let s;const a=this.calculateDistance(e),o=this.player_.liveTracker;if(!o||!o.isLive())s=a*this.player_.duration(),s===this.player_.duration()&&(s=s-.1);else{if(a>=.99){o.seekToLiveEdge();return}const l=o.seekableStart(),u=o.liveCurrentTime();if(s=l+a*o.liveWindow(),s>=u&&(s=u),s<=l&&(s=l+.1),s===1/0)return}this.shouldDisableSeekWhileScrubbingOnMobile_?this.pendingSeekTime_=s:this.userSeek_(s),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.pendingSeekTime_&&(this.userSeek_(this.pendingSeekTime_),this.pendingSeekTime_=null),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?silencePromise(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+this.options().stepSeconds)}stepBack(){this.userSeek_(this.player_.currentTime()-this.options().stepSeconds)}handleAction(e){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const n=this.player_.liveTracker;if(e.key===" "||e.key==="Enter")e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(e.key==="Home")e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(e.key==="End")e.preventDefault(),e.stopPropagation(),n&&n.isLive()?this.userSeek_(n.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(e.key)){e.preventDefault(),e.stopPropagation();const s=parseInt(e.key,10)*.1;n&&n.isLive()?this.userSeek_(n.seekableStart()+n.liveWindow()*s):this.userSeek_(this.player_.duration()*s)}else e.key==="PageDown"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-this.options().stepSeconds*this.options().pageMultiplier)):e.key==="PageUp"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+this.options().stepSeconds*this.options().pageMultiplier)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in document$1&&"visibilityState"in document$1&&this.off(document$1,"visibilitychange",this.toggleVisibility_),super.dispose()}}SeekBar.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar",stepSeconds:5,pageMultiplier:12};Component$1.registerComponent("SeekBar",SeekBar);class ProgressControl extends Component$1{constructor(e,n){super(e,n),this.handleMouseMove=throttle(bind_(this,this.handleMouseMove),UPDATE_REFRESH_INTERVAL),this.throttledHandleMouseSeek=throttle(bind_(this,this.handleMouseSeek),UPDATE_REFRESH_INTERVAL),this.handleMouseUpHandler_=s=>this.handleMouseUp(s),this.handleMouseDownHandler_=s=>this.handleMouseDown(s),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const n=this.getChild("seekBar");if(!n)return;const s=n.getChild("playProgressBar"),a=n.getChild("mouseTimeDisplay");if(!s&&!a)return;const o=n.el(),l=findPosition(o);let u=getPointerPosition(o,e).x;u=clamp(u,0,1),a&&a.update(l,u),s&&s.update(l,n.getProgress())}handleMouseSeek(e){const n=this.getChild("seekBar");n&&n.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&silencePromise(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const n=this.el_.ownerDocument,s=this.getChild("seekBar");s&&s.handleMouseDown(e),this.on(n,"mousemove",this.throttledHandleMouseSeek),this.on(n,"touchmove",this.throttledHandleMouseSeek),this.on(n,"mouseup",this.handleMouseUpHandler_),this.on(n,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const n=this.getChild("seekBar");n&&n.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}ProgressControl.prototype.options_={children:["seekBar"]};Component$1.registerComponent("ProgressControl",ProgressControl);class PictureInPictureToggle extends Button{constructor(e,n){super(e,n),this.setIcon("picture-in-picture-enter"),this.on(e,["enterpictureinpicture","leavepictureinpicture"],s=>this.handlePictureInPictureChange(s)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],s=>this.handlePictureInPictureEnabledChange(s)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){if(!(this.player_.currentType().substring(0,5)==="audio"||this.player_.audioPosterMode()||this.player_.audioOnlyMode())){this.show();return}this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()}handlePictureInPictureEnabledChange(){document$1.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in window$1?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){typeof document$1.exitPictureInPicture=="function"&&super.show()}}PictureInPictureToggle.prototype.controlText_="Picture-in-Picture";Component$1.registerComponent("PictureInPictureToggle",PictureInPictureToggle);class FullscreenToggle extends Button{constructor(e,n){super(e,n),this.setIcon("fullscreen-enter"),this.on(e,"fullscreenchange",s=>this.handleFullscreenChange(s)),document$1[e.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}FullscreenToggle.prototype.controlText_="Fullscreen";Component$1.registerComponent("FullscreenToggle",FullscreenToggle);const checkVolumeSupport=function(r,e){e.tech_&&!e.tech_.featuresVolumeControl&&r.addClass("vjs-hidden"),r.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?r.removeClass("vjs-hidden"):r.addClass("vjs-hidden")})};class VolumeLevel extends Component$1{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",e),e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}}Component$1.registerComponent("VolumeLevel",VolumeLevel);class VolumeLevelTooltip extends Component$1{constructor(e,n){super(e,n),this.update=throttle(bind_(this,this.update),UPDATE_REFRESH_INTERVAL)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,n,s,a){if(!s){const o=getBoundingClientRect(this.el_),l=getBoundingClientRect(this.player_.el()),u=e.width*n;if(!l||!o)return;const c=e.left-l.left+u,f=e.width-u+(l.right-e.right);let m=o.width/2;c<m?m+=m-c:f<m&&(m=f),m<0?m=0:m>o.width&&(m=o.width),this.el_.style.right=`-${m}px`}this.write(`${a}%`)}write(e){textContent(this.el_,e)}updateVolume(e,n,s,a,o){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,n,s,a.toFixed(0)),o&&o()})}}Component$1.registerComponent("VolumeLevelTooltip",VolumeLevelTooltip);class MouseVolumeLevelDisplay extends Component$1{constructor(e,n){super(e,n),this.update=throttle(bind_(this,this.update),UPDATE_REFRESH_INTERVAL)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,n,s){const a=100*n;this.getChild("volumeLevelTooltip").updateVolume(e,n,s,a,()=>{s?this.el_.style.bottom=`${e.height*n}px`:this.el_.style.left=`${e.width*n}px`})}}MouseVolumeLevelDisplay.prototype.options_={children:["volumeLevelTooltip"]};Component$1.registerComponent("MouseVolumeLevelDisplay",MouseVolumeLevelDisplay);class VolumeBar extends Slider{constructor(e,n){super(e,n),this.on("slideractive",s=>this.updateLastVolume_(s)),this.on(e,"volumechange",s=>this.updateARIAAttributes(s)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){isSingleLeftClick(e)&&super.handleMouseDown(e)}handleMouseMove(e){const n=this.getChild("mouseVolumeLevelDisplay");if(n){const s=this.el(),a=getBoundingClientRect(s),o=this.vertical();let l=getPointerPosition(s,e);l=o?l.y:l.x,l=clamp(l,0,1),n.update(a,l,o)}isSingleLeftClick(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const n=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",n),this.el_.setAttribute("aria-valuetext",n+"%")}volumeAsPercentage_(){return Math.round(this.player_.volume()*100)}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(e)})}}VolumeBar.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!IS_IOS&&!IS_ANDROID&&VolumeBar.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");VolumeBar.prototype.playerEvent="volumechange";Component$1.registerComponent("VolumeBar",VolumeBar);class VolumeControl extends Component$1{constructor(e,n={}){n.vertical=n.vertical||!1,(typeof n.volumeBar>"u"||isPlain(n.volumeBar))&&(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical),super(e,n),checkVolumeSupport(this,e),this.throttledHandleMouseMove=throttle(bind_(this,this.handleMouseMove),UPDATE_REFRESH_INTERVAL),this.handleMouseUpHandler_=s=>this.handleMouseUp(s),this.on("mousedown",s=>this.handleMouseDown(s)),this.on("touchstart",s=>this.handleMouseDown(s)),this.on("mousemove",s=>this.handleMouseMove(s)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const n=this.el_.ownerDocument;this.on(n,"mousemove",this.throttledHandleMouseMove),this.on(n,"touchmove",this.throttledHandleMouseMove),this.on(n,"mouseup",this.handleMouseUpHandler_),this.on(n,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const n=this.el_.ownerDocument;this.off(n,"mousemove",this.throttledHandleMouseMove),this.off(n,"touchmove",this.throttledHandleMouseMove),this.off(n,"mouseup",this.handleMouseUpHandler_),this.off(n,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}VolumeControl.prototype.options_={children:["volumeBar"]};Component$1.registerComponent("VolumeControl",VolumeControl);const checkMuteSupport=function(r,e){e.tech_&&!e.tech_.featuresMuteControl&&r.addClass("vjs-hidden"),r.on(e,"loadstart",function(){e.tech_.featuresMuteControl?r.removeClass("vjs-hidden"):r.addClass("vjs-hidden")})};class MuteToggle extends Button{constructor(e,n){super(e,n),checkMuteSupport(this,e),this.on(e,["loadstart","volumechange"],s=>this.update(s))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const n=this.player_.volume(),s=this.player_.lastVolume_();if(n===0){const a=s<.1?.1:s;this.player_.volume(a),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let n=3;this.setIcon("volume-high"),IS_IOS&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),e===0||this.player_.muted()?(this.setIcon("volume-mute"),n=0):e<.33?(this.setIcon("volume-low"),n=1):e<.67&&(this.setIcon("volume-medium"),n=2),removeClass(this.el_,[0,1,2,3].reduce((s,a)=>s+`${a?" ":""}vjs-vol-${a}`,"")),addClass(this.el_,`vjs-vol-${n}`)}updateControlText_(){const n=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==n&&this.controlText(n)}}MuteToggle.prototype.controlText_="Mute";Component$1.registerComponent("MuteToggle",MuteToggle);class VolumePanel extends Component$1{constructor(e,n={}){typeof n.inline<"u"?n.inline=n.inline:n.inline=!0,(typeof n.volumeControl>"u"||isPlain(n.volumeControl))&&(n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline),super(e,n),this.handleKeyPressHandler_=s=>this.handleKeyPress(s),this.on(e,["loadstart"],s=>this.volumePanelState_(s)),this.on(this.muteToggle,"keyup",s=>this.handleKeyPress(s)),this.on(this.volumeControl,"keyup",s=>this.handleVolumeControlKeyUp(s)),this.on("keydown",s=>this.handleKeyPress(s)),this.on("mouseover",s=>this.handleMouseOver(s)),this.on("mouseout",s=>this.handleMouseOut(s)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){e.key==="Escape"&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),on(document$1,"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),off(document$1,"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){e.key==="Escape"&&this.handleMouseOut()}}VolumePanel.prototype.options_={children:["muteToggle","volumeControl"]};Component$1.registerComponent("VolumePanel",VolumePanel);class SkipForward extends Button{constructor(e,n){super(e,n),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipForwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(e){if(isNaN(this.player_.duration()))return;const n=this.player_.currentTime(),s=this.player_.liveTracker,a=s&&s.isLive()?s.seekableEnd():this.player_.duration();let o;n+this.skipTime<=a?o=n+this.skipTime:o=a,this.player_.currentTime(o)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}SkipForward.prototype.controlText_="Skip Forward";Component$1.registerComponent("SkipForward",SkipForward);class SkipBackward extends Button{constructor(e,n){super(e,n),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipBackwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(e){const n=this.player_.currentTime(),s=this.player_.liveTracker,a=s&&s.isLive()&&s.seekableStart();let o;a&&n-this.skipTime<=a?o=a:n>=this.skipTime?o=n-this.skipTime:o=0,this.player_.currentTime(o)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}SkipBackward.prototype.controlText_="Skip Backward";Component$1.registerComponent("SkipBackward",SkipBackward);class Menu extends Component$1{constructor(e,n){super(e,n),n&&(this.menuButton_=n.menuButton),this.focusedChild_=-1,this.on("keydown",s=>this.handleKeyDown(s)),this.boundHandleBlur_=s=>this.handleBlur(s),this.boundHandleTapClick_=s=>this.handleTapClick(s)}addEventListenerForItem(e){e instanceof Component$1&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof Component$1&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){typeof e=="string"&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const n=this.addChild(e);n&&this.addEventListenerForItem(n)}createEl(){const e=this.options_.contentElType||"ul";this.contentEl_=createEl(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const n=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),on(n,"click",function(s){s.preventDefault(),s.stopImmediatePropagation()}),n}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const n=e.relatedTarget||document$1.activeElement;if(!this.children().some(s=>s.el()===n)){const s=this.menuButton_;s&&s.buttonPressed_&&n!==s.el().firstChild&&s.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const n=this.children();if(!Array.isArray(n))return;const s=n.filter(a=>a.el()===e.target)[0];if(!s)return;s.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(e){e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(e.key==="ArrowRight"||e.key==="ArrowUp")&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const n=this.children().slice();n.length&&n[0].hasClass("vjs-menu-title")&&n.shift(),n.length>0&&(e<0?e=0:e>=n.length&&(e=n.length-1),this.focusedChild_=e,n[e].el_.focus())}}Component$1.registerComponent("Menu",Menu);class MenuButton extends Component$1{constructor(e,n={}){super(e,n),this.menuButton_=new Button(e,n),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const s=Button.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+s,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const a=o=>this.handleClick(o);this.handleMenuKeyUp_=o=>this.handleMenuKeyUp(o),this.on(this.menuButton_,"tap",a),this.on(this.menuButton_,"click",a),this.on(this.menuButton_,"keydown",o=>this.handleKeyDown(o)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),on(document$1,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",o=>this.handleMouseLeave(o)),this.on("keydown",o=>this.handleSubmenuKeyDown(o))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new Menu(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const n=createEl("li",{className:"vjs-menu-title",textContent:toTitleCase$1(this.options_.title),tabIndex:-1}),s=new Component$1(this.player_,{el:n});e.addItem(s)}if(this.items=this.createItems(),this.items)for(let n=0;n<this.items.length;n++)e.addItem(this.items[n]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(e){super.setIcon(e,this.menuButton_.el_)}buildWrapperCSSClass(){let e="vjs-menu-button";this.options_.inline===!0?e+="-inline":e+="-popup";const n=Button.prototype.buildCSSClass();return`vjs-menu-button ${e} ${n} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return this.options_.inline===!0?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,n=this.menuButton_.el()){return this.menuButton_.controlText(e,n)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),off(document$1,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){e.key==="Escape"||e.key==="Tab"?(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus())):(e.key==="Up"||e.key==="Down"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(e.key==="Escape"||e.key==="Tab")&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(e.key==="Escape"||e.key==="Tab")&&(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),IS_IOS&&isInFrame())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}Component$1.registerComponent("MenuButton",MenuButton);class TrackButton extends MenuButton{constructor(e,n){const s=n.tracks;if(super(e,n),this.items.length<=1&&this.hide(),!s)return;const a=bind_(this,this.update);s.addEventListener("removetrack",a),s.addEventListener("addtrack",a),s.addEventListener("labelchange",a),this.player_.on("ready",a),this.player_.on("dispose",function(){s.removeEventListener("removetrack",a),s.removeEventListener("addtrack",a),s.removeEventListener("labelchange",a)})}}Component$1.registerComponent("TrackButton",TrackButton);class MenuItem extends ClickableComponent{constructor(e,n){super(e,n),this.selectable=n.selectable,this.isSelected_=n.selected||!1,this.multiSelectable=n.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,n,s){this.nonIconControl=!0;const a=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},n),s),o=createEl("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?a.appendChild(o):a.replaceChild(o,a.querySelector(".vjs-icon-placeholder")),a}handleKeyDown(e){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(e.key)||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}Component$1.registerComponent("MenuItem",MenuItem);class TextTrackMenuItem extends MenuItem{constructor(e,n){const s=n.track,a=e.textTracks();n.label=s.label||s.language||"Unknown",n.selected=s.mode==="showing",super(e,n),this.track=s,this.kinds=(n.kinds||[n.kind||this.track.kind]).filter(Boolean);const o=(...u)=>{this.handleTracksChange.apply(this,u)},l=(...u)=>{this.handleSelectedLanguageChange.apply(this,u)};if(e.on(["loadstart","texttrackchange"],o),a.addEventListener("change",o),a.addEventListener("selectedlanguagechange",l),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],o),a.removeEventListener("change",o),a.removeEventListener("selectedlanguagechange",l)}),a.onchange===void 0){let u;this.on(["tap","click"],function(){if(typeof window$1.Event!="object")try{u=new window$1.Event("change")}catch{}u||(u=document$1.createEvent("Event"),u.initEvent("change",!0,!0)),a.dispatchEvent(u)})}this.handleTracksChange()}handleClick(e){const n=this.track,s=this.player_.textTracks();if(super.handleClick(e),!!s)for(let a=0;a<s.length;a++){const o=s[a];this.kinds.indexOf(o.kind)!==-1&&(o===n?o.mode!=="showing"&&(o.mode="showing"):o.mode!=="disabled"&&(o.mode="disabled"))}}handleTracksChange(e){const n=this.track.mode==="showing";n!==this.isSelected_&&this.selected(n)}handleSelectedLanguageChange(e){if(this.track.mode==="showing"){const n=this.player_.cache_.selectedLanguage;if(n&&n.enabled&&n.language===this.track.language&&n.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}Component$1.registerComponent("TextTrackMenuItem",TextTrackMenuItem);class OffTextTrackMenuItem extends TextTrackMenuItem{constructor(e,n){n.track={player:e,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"},n.kinds||(n.kinds=[n.kind]),n.label?n.track.label=n.label:n.track.label=n.kinds.join(" and ")+" off",n.selectable=!0,n.multiSelectable=!1,super(e,n)}handleTracksChange(e){const n=this.player().textTracks();let s=!0;for(let a=0,o=n.length;a<o;a++){const l=n[a];if(this.options_.kinds.indexOf(l.kind)>-1&&l.mode==="showing"){s=!1;break}}s!==this.isSelected_&&this.selected(s)}handleSelectedLanguageChange(e){const n=this.player().textTracks();let s=!0;for(let a=0,o=n.length;a<o;a++){const l=n[a];if(["captions","descriptions","subtitles"].indexOf(l.kind)>-1&&l.mode==="showing"){s=!1;break}}s&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}Component$1.registerComponent("OffTextTrackMenuItem",OffTextTrackMenuItem);class TextTrackButton extends TrackButton{constructor(e,n={}){n.tracks=e.textTracks(),super(e,n)}createItems(e=[],n=TextTrackMenuItem){let s;this.label_&&(s=`${this.label_} off`),e.push(new OffTextTrackMenuItem(this.player_,{kinds:this.kinds_,kind:this.kind_,label:s})),this.hideThreshold_+=1;const a=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let o=0;o<a.length;o++){const l=a[o];if(this.kinds_.indexOf(l.kind)>-1){const u=new n(this.player_,{track:l,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});u.addClass(`vjs-${l.kind}-menu-item`),e.push(u)}}return e}}Component$1.registerComponent("TextTrackButton",TextTrackButton);class ChaptersTrackMenuItem extends MenuItem{constructor(e,n){const s=n.track,a=n.cue,o=e.currentTime();n.selectable=!0,n.multiSelectable=!1,n.label=a.text,n.selected=a.startTime<=o&&o<a.endTime,super(e,n),this.track=s,this.cue=a}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}Component$1.registerComponent("ChaptersTrackMenuItem",ChaptersTrackMenuItem);class ChaptersButton extends TextTrackButton{constructor(e,n,s){super(e,n,s),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(a=>{a.selected(this.track_.activeCues[0]===a.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&e.track.kind!=="chapters")return;const n=this.findChaptersTrack();n!==this.track_?(this.setTrack(n),super.update()):(!this.items||n&&n.cues&&n.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let n=e.length-1;n>=0;n--){const s=e[n];if(s.kind===this.kind_)return s}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(toTitleCase$1(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const n=this.track_.cues;if(!n)return e;for(let s=0,a=n.length;s<a;s++){const o=n[s],l=new ChaptersTrackMenuItem(this.player_,{track:this.track_,cue:o});e.push(l)}return e}}ChaptersButton.prototype.kind_="chapters";ChaptersButton.prototype.controlText_="Chapters";Component$1.registerComponent("ChaptersButton",ChaptersButton);class DescriptionsButton extends TextTrackButton{constructor(e,n,s){super(e,n,s),this.setIcon("audio-description");const a=e.textTracks(),o=bind_(this,this.handleTracksChange);a.addEventListener("change",o),this.on("dispose",function(){a.removeEventListener("change",o)})}handleTracksChange(e){const n=this.player().textTracks();let s=!1;for(let a=0,o=n.length;a<o;a++){const l=n[a];if(l.kind!==this.kind_&&l.mode==="showing"){s=!0;break}}s?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}DescriptionsButton.prototype.kind_="descriptions";DescriptionsButton.prototype.controlText_="Descriptions";Component$1.registerComponent("DescriptionsButton",DescriptionsButton);class SubtitlesButton extends TextTrackButton{constructor(e,n,s){super(e,n,s),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}SubtitlesButton.prototype.kind_="subtitles";SubtitlesButton.prototype.controlText_="Subtitles";Component$1.registerComponent("SubtitlesButton",SubtitlesButton);class CaptionSettingsMenuItem extends TextTrackMenuItem{constructor(e,n){n.track={player:e,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1,n.name="CaptionSettingsMenuItem",super(e,n),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+n.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}Component$1.registerComponent("CaptionSettingsMenuItem",CaptionSettingsMenuItem);class CaptionsButton extends TextTrackButton{constructor(e,n,s){super(e,n,s),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new CaptionSettingsMenuItem(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}CaptionsButton.prototype.kind_="captions";CaptionsButton.prototype.controlText_="Captions";Component$1.registerComponent("CaptionsButton",CaptionsButton);class SubsCapsMenuItem extends TextTrackMenuItem{createEl(e,n,s){const a=super.createEl(e,n,s),o=a.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",a):o.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),o.appendChild(createEl("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),a}}Component$1.registerComponent("SubsCapsMenuItem",SubsCapsMenuItem);class SubsCapsButton extends TextTrackButton{constructor(e,n={}){super(e,n),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(toTitleCase$1(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new CaptionSettingsMenuItem(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,SubsCapsMenuItem),e}}SubsCapsButton.prototype.kinds_=["captions","subtitles"];SubsCapsButton.prototype.controlText_="Subtitles";Component$1.registerComponent("SubsCapsButton",SubsCapsButton);class AudioTrackMenuItem extends MenuItem{constructor(e,n){const s=n.track,a=e.audioTracks();n.label=s.label||s.language||"Unknown",n.selected=s.enabled,super(e,n),this.track=s,this.addClass(`vjs-${s.kind}-menu-item`);const o=(...l)=>{this.handleTracksChange.apply(this,l)};a.addEventListener("change",o),this.on("dispose",()=>{a.removeEventListener("change",o)})}createEl(e,n,s){const a=super.createEl(e,n,s),o=a.querySelector(".vjs-menu-item-text");return["main-desc","descriptions"].indexOf(this.options_.track.kind)>=0&&(o.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),o.appendChild(createEl("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),a}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const n=this.player_.audioTracks();for(let s=0;s<n.length;s++){const a=n[s];a!==this.track&&(a.enabled=a===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}Component$1.registerComponent("AudioTrackMenuItem",AudioTrackMenuItem);class AudioTrackButton extends TrackButton{constructor(e,n={}){n.tracks=e.audioTracks(),super(e,n),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const n=this.player_.audioTracks();for(let s=0;s<n.length;s++){const a=n[s];e.push(new AudioTrackMenuItem(this.player_,{track:a,selectable:!0,multiSelectable:!1}))}return e}}AudioTrackButton.prototype.controlText_="Audio Track";Component$1.registerComponent("AudioTrackButton",AudioTrackButton);class PlaybackRateMenuItem extends MenuItem{constructor(e,n){const s=n.rate,a=parseFloat(s,10);n.label=s,n.selected=a===e.playbackRate(),n.selectable=!0,n.multiSelectable=!1,super(e,n),this.label=s,this.rate=a,this.on(e,"ratechange",o=>this.update(o))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}PlaybackRateMenuItem.prototype.contentElType="button";Component$1.registerComponent("PlaybackRateMenuItem",PlaybackRateMenuItem);class PlaybackRateMenuButton extends MenuButton{constructor(e,n){super(e,n),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",s=>this.updateVisibility(s)),this.on(e,"ratechange",s=>this.updateLabel(s)),this.on(e,"playbackrateschange",s=>this.handlePlaybackRateschange(s))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=createEl("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),n=[];for(let s=e.length-1;s>=0;s--)n.push(new PlaybackRateMenuItem(this.player(),{rate:e[s]+"x"}));return n}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}PlaybackRateMenuButton.prototype.controlText_="Playback Rate";Component$1.registerComponent("PlaybackRateMenuButton",PlaybackRateMenuButton);class Spacer extends Component$1{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",n={},s={}){return n.className||(n.className=this.buildCSSClass()),super.createEl(e,n,s)}}Component$1.registerComponent("Spacer",Spacer);class CustomControlSpacer extends Spacer{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:" "})}}Component$1.registerComponent("CustomControlSpacer",CustomControlSpacer);class ControlBar extends Component$1{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}ControlBar.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]};Component$1.registerComponent("ControlBar",ControlBar);class ErrorDisplay extends ModalDialog{constructor(e,n){super(e,n),this.on(e,"error",s=>{this.open(s)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}}ErrorDisplay.prototype.options_=Object.assign({},ModalDialog.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});Component$1.registerComponent("ErrorDisplay",ErrorDisplay);class TextTrackSelect extends Component$1{constructor(e,n={}){super(e,n),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){return this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim(),createEl("select",{id:this.options_.id},{},this.options_.SelectOptions.map(n=>{const s=(this.options_.labelId?this.options_.labelId:`vjs-track-option-${newGUID()}`)+"-"+n[1].replace(/\W+/g,""),a=createEl("option",{id:s,value:this.localize(n[0]),textContent:this.localize(n[1])});return a.setAttribute("aria-labelledby",`${this.selectLabelledbyIds} ${s}`),a}))}}Component$1.registerComponent("TextTrackSelect",TextTrackSelect);class TextTrackFieldset extends Component$1{constructor(e,n={}){super(e,n);const s=createEl("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId});this.el().appendChild(s);const a=this.options_.selects;for(const o of a){const l=this.options_.selectConfigs[o],u=l.className,c=l.id.replace("%s",this.options_.id_);let f=null;const m=`vjs_select_${newGUID()}`;if(this.options_.type==="colors"){f=createEl("span",{className:u});const x=createEl("label",{id:c,className:"vjs-label",textContent:this.localize(l.label)});x.setAttribute("for",m),f.appendChild(x)}const v=new TextTrackSelect(e,{SelectOptions:l.options,legendId:this.options_.legendId,id:m,labelId:c});this.addChild(v),this.options_.type==="colors"&&(f.appendChild(v.el()),this.el().appendChild(f))}}createEl(){return createEl("fieldset",{className:this.options_.className})}}Component$1.registerComponent("TextTrackFieldset",TextTrackFieldset);class TextTrackSettingsColors extends Component$1{constructor(e,n={}){super(e,n);const s=this.options_.textTrackComponentid,a=new TextTrackFieldset(e,{id_:s,legendId:`captions-text-legend-${s}`,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(a);const o=new TextTrackFieldset(e,{id_:s,legendId:`captions-background-${s}`,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(o);const l=new TextTrackFieldset(e,{id_:s,legendId:`captions-window-${s}`,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(l)}createEl(){return createEl("div",{className:"vjs-track-settings-colors"})}}Component$1.registerComponent("TextTrackSettingsColors",TextTrackSettingsColors);class TextTrackSettingsFont extends Component$1{constructor(e,n={}){super(e,n);const s=this.options_.textTrackComponentid,a=new TextTrackFieldset(e,{id_:s,legendId:`captions-font-size-${s}`,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(a);const o=new TextTrackFieldset(e,{id_:s,legendId:`captions-edge-style-${s}`,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(o);const l=new TextTrackFieldset(e,{id_:s,legendId:`captions-font-family-${s}`,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(l)}createEl(){return createEl("div",{className:"vjs-track-settings-font"})}}Component$1.registerComponent("TextTrackSettingsFont",TextTrackSettingsFont);class TrackSettingsControls extends Component$1{constructor(e,n={}){super(e,n);const s=this.localize("restore all settings to the default values"),a=new Button(e,{controlText:s,className:"vjs-default-button"});a.el().classList.remove("vjs-control","vjs-button"),a.el().textContent=this.localize("Reset"),this.addChild(a);const o=new Button(e,{controlText:s,className:"vjs-done-button"});o.el().classList.remove("vjs-control","vjs-button"),o.el().textContent=this.localize("Done"),this.addChild(o)}createEl(){return createEl("div",{className:"vjs-track-settings-controls"})}}Component$1.registerComponent("TrackSettingsControls",TrackSettingsControls);const LOCAL_STORAGE_KEY$1="vjs-text-track-settings",COLOR_BLACK=["#000","Black"],COLOR_BLUE=["#00F","Blue"],COLOR_CYAN=["#0FF","Cyan"],COLOR_GREEN=["#0F0","Green"],COLOR_MAGENTA=["#F0F","Magenta"],COLOR_RED=["#F00","Red"],COLOR_WHITE=["#FFF","White"],COLOR_YELLOW=["#FF0","Yellow"],OPACITY_OPAQUE=["1","Opaque"],OPACITY_SEMI=["0.5","Semi-Transparent"],OPACITY_TRANS=["0","Transparent"],selectConfigs={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[COLOR_BLACK,COLOR_WHITE,COLOR_RED,COLOR_GREEN,COLOR_BLUE,COLOR_YELLOW,COLOR_MAGENTA,COLOR_CYAN],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[OPACITY_OPAQUE,OPACITY_SEMI,OPACITY_TRANS],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[COLOR_WHITE,COLOR_BLACK,COLOR_RED,COLOR_GREEN,COLOR_BLUE,COLOR_YELLOW,COLOR_MAGENTA,COLOR_CYAN],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:r=>r==="1.00"?null:Number(r)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[OPACITY_OPAQUE,OPACITY_SEMI],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[OPACITY_TRANS,OPACITY_SEMI,OPACITY_OPAQUE],className:"vjs-window-opacity vjs-opacity"}};selectConfigs.windowColor.options=selectConfigs.backgroundColor.options;function parseOptionValue(r,e){if(e&&(r=e(r)),r&&r!=="none")return r}function getSelectedOptionValue(r,e){const n=r.options[r.options.selectedIndex].value;return parseOptionValue(n,e)}function setSelectedOption(r,e,n){if(e){for(let s=0;s<r.options.length;s++)if(parseOptionValue(r.options[s].value,n)===e){r.selectedIndex=s;break}}}class TextTrackSettings extends ModalDialog{constructor(e,n){n.temporary=!1,super(e,n),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(e),this.endDialog=createEl("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),n.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(e){const n=new TextTrackSettingsColors(e,{textTrackComponentid:this.id_,selectConfigs,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(n);const s=new TextTrackSettingsFont(e,{textTrackComponentid:this.id_,selectConfigs,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]});this.addChild(s);const a=new TrackSettingsControls(e);this.addChild(a)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),["click","tap"],()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults(),this.updateDisplay()}),each(selectConfigs,e=>{this.on(this.$(e.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return reduce(selectConfigs,(e,n,s)=>{const a=getSelectedOptionValue(this.$(n.selector),n.parser);return a!==void 0&&(e[s]=a),e},{})}setValues(e){each(selectConfigs,(n,s)=>{setSelectedOption(this.$(n.selector),e[s],n.parser)})}setDefaults(){each(selectConfigs,e=>{const n=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=n})}restoreSettings(){let e;try{e=JSON.parse(window$1.localStorage.getItem(LOCAL_STORAGE_KEY$1))}catch(n){log$1.warn(n)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?window$1.localStorage.setItem(LOCAL_STORAGE_KEY$1,JSON.stringify(e)):window$1.localStorage.removeItem(LOCAL_STORAGE_KEY$1)}catch(n){log$1.warn(n)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}}Component$1.registerComponent("TextTrackSettings",TextTrackSettings);class ResizeManager extends Component$1{constructor(e,n){let s=n.ResizeObserver||window$1.ResizeObserver;n.ResizeObserver===null&&(s=!1);const a=merge$1({createEl:!s,reportTouchActivity:!1},n);super(e,a),this.ResizeObserver=n.ResizeObserver||window$1.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=debounce$1(()=>{this.resizeHandler()},100,!1,this),s?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const o=this.debouncedHandler_;let l=this.unloadListener_=function(){off(this,"resize",o),off(this,"unload",l),l=null};on(this.el_.contentWindow,"unload",l),on(this.el_.contentWindow,"resize",o)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}}Component$1.registerComponent("ResizeManager",ResizeManager);const defaults$1={trackingThreshold:20,liveTolerance:15};class LiveTracker extends Component$1{constructor(e,n){const s=merge$1(defaults$1,n,{createEl:!1});super(e,s),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=a=>this.handlePlay(a),this.handleFirstTimeupdate_=a=>this.handleFirstTimeupdate(a),this.handleSeeked_=a=>this.handleSeeked(a),this.seekToLiveEdge_=a=>this.seekToLiveEdge(a),this.reset_(),this.on(this.player_,"durationchange",a=>this.handleDurationchange(a)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const n=Number(window$1.performance.now().toFixed(4)),s=this.lastTime_===-1?0:(n-this.lastTime_)/1e3;this.lastTime_=n,this.pastSeekEnd_=this.pastSeekEnd()+s;const a=this.liveCurrentTime(),o=this.player_.currentTime();let l=this.player_.paused()||this.seekedBehindLive_||Math.abs(a-o)>this.options_.liveTolerance;(!this.timeupdateSeen_||a===1/0)&&(l=!1),l!==this.behindLiveEdge_&&(this.behindLiveEdge_=l,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,UPDATE_REFRESH_INTERVAL),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),n=[];let s=e?e.length:0;for(;s--;)n.push(e.end(s));return n.length?n.sort()[n.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),n=[];let s=e?e.length:0;for(;s--;)n.push(e.start(s));return n.length?n.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return this.lastSeekEnd_!==-1&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}Component$1.registerComponent("LiveTracker",LiveTracker);class TitleBar extends Component$1{constructor(e,n){super(e,n),this.on("statechanged",s=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:createEl("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${newGUID()}`}),description:createEl("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${newGUID()}`})},createEl("div",{className:"vjs-title-bar"},{},values(this.els))}updateDom_(){const e=this.player_.tech_,n=e&&e.el_,s={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(a=>{const o=this.state[a],l=this.els[a],u=s[a];emptyEl(l),o&&textContent(l,o),n&&(n.removeAttribute(u),o&&n.setAttribute(u,l.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,n=e&&e.el_;n&&(n.removeAttribute("aria-labelledby"),n.removeAttribute("aria-describedby")),super.dispose(),this.els=null}}Component$1.registerComponent("TitleBar",TitleBar);const defaults={initialDisplay:4e3,position:[],takeFocus:!1};class TransientButton extends Button{constructor(e,n){n=merge$1(defaults,n),super(e,n),this.controlText(n.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],s=>{this.removeClass("force-display")})}buildCSSClass(){return`vjs-transient-button focus-visible ${this.options_.position.map(e=>`vjs-${e}`).join(" ")}`}createEl(){const e=createEl("button",{},{type:"button",class:this.buildCSSClass()},createEl("span"));return this.controlTextEl_=e.querySelector("span"),e}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}}Component$1.registerComponent("TransientButton",TransientButton);const sourcesetLoad=r=>{const e=r.el();if(e.hasAttribute("src"))return r.triggerSourceset(e.src),!0;const n=r.$$("source"),s=[];let a="";if(!n.length)return!1;for(let o=0;o<n.length;o++){const l=n[o].src;l&&s.indexOf(l)===-1&&s.push(l)}return s.length?(s.length===1&&(a=s[0]),r.triggerSourceset(a),!0):!1},innerHTMLDescriptorPolyfill=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(r){const e=document$1.createElement(this.nodeName.toLowerCase());e.innerHTML=r;const n=document$1.createDocumentFragment();for(;e.childNodes.length;)n.appendChild(e.childNodes[0]);return this.innerText="",window$1.Element.prototype.appendChild.call(this,n),this.innerHTML}}),getDescriptor=(r,e)=>{let n={};for(let s=0;s<r.length&&(n=Object.getOwnPropertyDescriptor(r[s],e),!(n&&n.set&&n.get));s++);return n.enumerable=!0,n.configurable=!0,n},getInnerHTMLDescriptor=r=>getDescriptor([r.el(),window$1.HTMLMediaElement.prototype,window$1.Element.prototype,innerHTMLDescriptorPolyfill],"innerHTML"),firstSourceWatch=function(r){const e=r.el();if(e.resetSourceWatch_)return;const n={},s=getInnerHTMLDescriptor(r),a=o=>(...l)=>{const u=o.apply(e,l);return sourcesetLoad(r),u};["append","appendChild","insertAdjacentHTML"].forEach(o=>{e[o]&&(n[o]=e[o],e[o]=a(n[o]))}),Object.defineProperty(e,"innerHTML",merge$1(s,{set:a(s.set)})),e.resetSourceWatch_=()=>{e.resetSourceWatch_=null,Object.keys(n).forEach(o=>{e[o]=n[o]}),Object.defineProperty(e,"innerHTML",s)},r.one("sourceset",e.resetSourceWatch_)},srcDescriptorPolyfill=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?getAbsoluteURL(window$1.Element.prototype.getAttribute.call(this,"src")):""},set(r){return window$1.Element.prototype.setAttribute.call(this,"src",r),r}}),getSrcDescriptor=r=>getDescriptor([r.el(),window$1.HTMLMediaElement.prototype,srcDescriptorPolyfill],"src"),setupSourceset=function(r){if(!r.featuresSourceset)return;const e=r.el();if(e.resetSourceset_)return;const n=getSrcDescriptor(r),s=e.setAttribute,a=e.load;Object.defineProperty(e,"src",merge$1(n,{set:o=>{const l=n.set.call(e,o);return r.triggerSourceset(e.src),l}})),e.setAttribute=(o,l)=>{const u=s.call(e,o,l);return/src/i.test(o)&&r.triggerSourceset(e.src),u},e.load=()=>{const o=a.call(e);return sourcesetLoad(r)||(r.triggerSourceset(""),firstSourceWatch(r)),o},e.currentSrc?r.triggerSourceset(e.currentSrc):sourcesetLoad(r)||firstSourceWatch(r),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=a,e.setAttribute=s,Object.defineProperty(e,"src",n),e.resetSourceWatch_&&e.resetSourceWatch_()}};class Html5 extends Tech{constructor(e,n){super(e,n);const s=e.source;let a=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",s&&(this.el_.currentSrc!==s.src||e.tag&&e.tag.initNetworkState_===3)?this.setSource(s):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const o=this.el_.childNodes;let l=o.length;const u=[];for(;l--;){const c=o[l];c.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(c),this.remoteTextTracks().addTrack(c.track),this.textTracks().addTrack(c.track),!a&&!this.el_.hasAttribute("crossorigin")&&isCrossOrigin(c.src)&&(a=!0)):u.push(c))}for(let c=0;c<u.length;c++)this.el_.removeChild(u[c])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&a&&log$1.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(TOUCH_ENABLED||IS_IPHONE)&&e.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),Html5.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){setupSourceset(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let n;const s=()=>{n=[];for(let o=0;o<e.length;o++){const l=e[o];l.kind==="metadata"&&n.push({track:l,storedMode:l.mode})}};s(),e.addEventListener("change",s),this.on("dispose",()=>e.removeEventListener("change",s));const a=()=>{for(let o=0;o<n.length;o++){const l=n[o];l.track.mode==="disabled"&&l.track.mode!==l.storedMode&&(l.track.mode=l.storedMode)}e.removeEventListener("change",a)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",s),e.removeEventListener("change",a),e.addEventListener("change",a)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",s),e.addEventListener("change",s),e.removeEventListener("change",a)})}overrideNative_(e,n){if(n!==this[`featuresNative${e}Tracks`])return;const s=e.toLowerCase();this[`${s}TracksListeners_`]&&Object.keys(this[`${s}TracksListeners_`]).forEach(a=>{this.el()[`${s}Tracks`].removeEventListener(a,this[`${s}TracksListeners_`][a])}),this[`featuresNative${e}Tracks`]=!n,this[`${s}TracksListeners_`]=null,this.proxyNativeTracksForType_(s)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const n=NORMAL[e],s=this.el()[n.getterName],a=this[n.getterName]();if(!this[`featuresNative${n.capitalName}Tracks`]||!s||!s.addEventListener)return;const o={change:u=>{const c={type:"change",target:a,currentTarget:a,srcElement:a};a.trigger(c),e==="text"&&this[REMOTE.remoteText.getterName]().trigger(c)},addtrack(u){a.addTrack(u.track)},removetrack(u){a.removeTrack(u.track)}},l=function(){const u=[];for(let c=0;c<a.length;c++){let f=!1;for(let m=0;m<s.length;m++)if(s[m]===a[c]){f=!0;break}f||u.push(a[c])}for(;u.length;)a.removeTrack(u.shift())};this[n.getterName+"Listeners_"]=o,Object.keys(o).forEach(u=>{const c=o[u];s.addEventListener(u,c),this.on("dispose",f=>s.removeEventListener(u,c))}),this.on("loadstart",l),this.on("dispose",u=>this.off("loadstart",l))}proxyNativeTracks_(){NORMAL.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){const s=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(s,e),Html5.disposeMediaElement(e),e=s}else{e=document$1.createElement("video");const s=this.options_.tag&&getAttributes(this.options_.tag),a=merge$1({},s);(!TOUCH_ENABLED||this.options_.nativeControlsForTouch!==!0)&&delete a.controls,setAttributes(e,Object.assign(a,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&setAttribute(e,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const n=["loop","muted","playsinline","autoplay"];for(let s=0;s<n.length;s++){const a=n[s],o=this.options_[a];typeof o<"u"&&(o?setAttribute(e,a,a):removeAttribute(e,a),e[a]=o)}return e}handleLateInit_(e){if(e.networkState===0||e.networkState===3)return;if(e.readyState===0){let s=!1;const a=function(){s=!0};this.on("loadstart",a);const o=function(){s||this.trigger("loadstart")};this.on("loadedmetadata",o),this.ready(function(){this.off("loadstart",a),this.off("loadedmetadata",o),s||this.trigger("loadstart")});return}const n=["loadstart"];n.push("loadedmetadata"),e.readyState>=2&&n.push("loadeddata"),e.readyState>=3&&n.push("canplay"),e.readyState>=4&&n.push("canplaythrough"),this.ready(function(){n.forEach(function(s){this.trigger(s)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&IS_ANY_SAFARI?this.el_.fastSeek(e):this.el_.currentTime=e}catch(n){log$1(n,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&IS_ANDROID&&IS_CHROME&&this.el_.currentTime===0){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},n=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",()=>{this.off("webkitbeginfullscreen",n),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)silencePromise(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(n){this.trigger("fullscreenerror",n)}},0);else try{e.webkitEnterFullScreen()}catch(n){this.trigger("fullscreenerror",n)}}exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(e===void 0)return this.el_.src;this.setSrc(e)}addSourceElement(e,n){if(!e)return log$1.error("Invalid source URL."),!1;const s={src:e};n&&(s.type=n);const a=createEl("source",{},s);return this.el_.appendChild(a),!0}removeSourceElement(e){if(!e)return log$1.error("Source URL is required to remove the source element."),!1;const n=this.el_.querySelectorAll("source");for(const s of n)if(s.src===e)return this.el_.removeChild(s),!0;return log$1.warn(`No matching source element found with src: ${e}`),!1}reset(){Html5.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,n,s){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,n,s):super.addTextTrack(e,n,s)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const n=document$1.createElement("track");return e.kind&&(n.kind=e.kind),e.label&&(n.label=e.label),(e.language||e.srclang)&&(n.srclang=e.language||e.srclang),e.default&&(n.default=e.default),e.id&&(n.id=e.id),e.src&&(n.src=e.src),n}addRemoteTextTrack(e,n){const s=super.addRemoteTextTrack(e,n);return this.featuresNativeTextTracks&&this.el().appendChild(s),s}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const n=this.$$("track");let s=n.length;for(;s--;)(e===n[s]||e===n[s].track)&&this.el().removeChild(n[s])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();const e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),window$1.performance&&(e.creationTime=window$1.performance.now()),e}}defineLazyProperty(Html5,"TEST_VID",function(){if(!isReal())return;const r=document$1.createElement("video"),e=document$1.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",r.appendChild(e),r});Html5.isSupported=function(){try{Html5.TEST_VID.volume=.5}catch{return!1}return!!(Html5.TEST_VID&&Html5.TEST_VID.canPlayType)};Html5.canPlayType=function(r){return Html5.TEST_VID.canPlayType(r)};Html5.canPlaySource=function(r,e){return Html5.canPlayType(r.type)};Html5.canControlVolume=function(){try{const r=Html5.TEST_VID.volume;Html5.TEST_VID.volume=r/2+.1;const e=r!==Html5.TEST_VID.volume;return e&&IS_IOS?(window$1.setTimeout(()=>{Html5&&Html5.prototype&&(Html5.prototype.featuresVolumeControl=r!==Html5.TEST_VID.volume)}),!1):e}catch{return!1}};Html5.canMuteVolume=function(){try{const r=Html5.TEST_VID.muted;return Html5.TEST_VID.muted=!r,Html5.TEST_VID.muted?setAttribute(Html5.TEST_VID,"muted","muted"):removeAttribute(Html5.TEST_VID,"muted","muted"),r!==Html5.TEST_VID.muted}catch{return!1}};Html5.canControlPlaybackRate=function(){if(IS_ANDROID&&IS_CHROME&&CHROME_VERSION<58)return!1;try{const r=Html5.TEST_VID.playbackRate;return Html5.TEST_VID.playbackRate=r/2+.1,r!==Html5.TEST_VID.playbackRate}catch{return!1}};Html5.canOverrideAttributes=function(){try{const r=()=>{};Object.defineProperty(document$1.createElement("video"),"src",{get:r,set:r}),Object.defineProperty(document$1.createElement("audio"),"src",{get:r,set:r}),Object.defineProperty(document$1.createElement("video"),"innerHTML",{get:r,set:r}),Object.defineProperty(document$1.createElement("audio"),"innerHTML",{get:r,set:r})}catch{return!1}return!0};Html5.supportsNativeTextTracks=function(){return IS_ANY_SAFARI||IS_IOS&&IS_CHROME};Html5.supportsNativeVideoTracks=function(){return!!(Html5.TEST_VID&&Html5.TEST_VID.videoTracks)};Html5.supportsNativeAudioTracks=function(){return!!(Html5.TEST_VID&&Html5.TEST_VID.audioTracks)};Html5.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([r,e]){defineLazyProperty(Html5.prototype,r,()=>Html5[e](),!0)});Html5.prototype.featuresVolumeControl=Html5.canControlVolume();Html5.prototype.movingMediaElementInDOM=!IS_IOS;Html5.prototype.featuresFullscreenResize=!0;Html5.prototype.featuresProgressEvents=!0;Html5.prototype.featuresTimeupdateEvents=!0;Html5.prototype.featuresVideoFrameCallback=!!(Html5.TEST_VID&&Html5.TEST_VID.requestVideoFrameCallback);Html5.disposeMediaElement=function(r){if(r){for(r.parentNode&&r.parentNode.removeChild(r);r.hasChildNodes();)r.removeChild(r.firstChild);r.removeAttribute("src"),typeof r.load=="function"&&function(){try{r.load()}catch{}}()}};Html5.resetMediaElement=function(r){if(!r)return;const e=r.querySelectorAll("source");let n=e.length;for(;n--;)r.removeChild(e[n]);r.removeAttribute("src"),typeof r.load=="function"&&function(){try{r.load()}catch{}}()};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(r){Html5.prototype[r]=function(){return this.el_[r]||this.el_.hasAttribute(r)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(r){Html5.prototype["set"+toTitleCase$1(r)]=function(e){this.el_[r]=e,e?this.el_.setAttribute(r,r):this.el_.removeAttribute(r)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(r){Html5.prototype[r]=function(){return this.el_[r]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(r){Html5.prototype["set"+toTitleCase$1(r)]=function(e){this.el_[r]=e}});["pause","load","play"].forEach(function(r){Html5.prototype[r]=function(){return this.el_[r]()}});Tech.withSourceHandlers(Html5);Html5.nativeSourceHandler={};Html5.nativeSourceHandler.canPlayType=function(r){try{return Html5.TEST_VID.canPlayType(r)}catch{return""}};Html5.nativeSourceHandler.canHandleSource=function(r,e){if(r.type)return Html5.nativeSourceHandler.canPlayType(r.type);if(r.src){const n=getFileExtension(r.src);return Html5.nativeSourceHandler.canPlayType(`video/${n}`)}return""};Html5.nativeSourceHandler.handleSource=function(r,e,n){e.setSrc(r.src)};Html5.nativeSourceHandler.dispose=function(){};Html5.registerSourceHandler(Html5.nativeSourceHandler);Tech.registerTech("Html5",Html5);const TECH_EVENTS_RETRIGGER=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],TECH_EVENTS_QUEUE={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},BREAKPOINT_ORDER=["tiny","xsmall","small","medium","large","xlarge","huge"],BREAKPOINT_CLASSES={};BREAKPOINT_ORDER.forEach(r=>{const e=r.charAt(0)==="x"?`x-${r.substring(1)}`:r;BREAKPOINT_CLASSES[r]=`vjs-layout-${e}`});const DEFAULT_BREAKPOINTS={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class Player extends Component$1{constructor(e,n,s){if(e.id=e.id||n.id||`vjs_video_${newGUID()}`,n=Object.assign(Player.getTagSettings(e),n),n.initChildren=!1,n.createEl=!1,n.evented=!1,n.reportTouchActivity=!1,!n.language){const l=e.closest("[lang]");l&&(n.language=l.getAttribute("lang"))}if(super(null,n,s),this.boundDocumentFullscreenChange_=l=>this.documentFullscreenChange_(l),this.boundFullWindowOnEscKey_=l=>this.fullWindowOnEscKey(l),this.boundUpdateStyleEl_=l=>this.updateStyleEl_(l),this.boundApplyInitTime_=l=>this.applyInitTime_(l),this.boundUpdateCurrentBreakpoint_=l=>this.updateCurrentBreakpoint_(l),this.boundHandleTechClick_=l=>this.handleTechClick_(l),this.boundHandleTechDoubleClick_=l=>this.handleTechDoubleClick_(l),this.boundHandleTechTouchStart_=l=>this.handleTechTouchStart_(l),this.boundHandleTechTouchMove_=l=>this.handleTechTouchMove_(l),this.boundHandleTechTouchEnd_=l=>this.handleTechTouchEnd_(l),this.boundHandleTechTap_=l=>this.handleTechTap_(l),this.boundUpdatePlayerHeightOnAudioOnlyMode_=l=>this.updatePlayerHeightOnAudioOnlyMode_(l),this.isFullscreen_=!1,this.log=createLogger(this.id_),this.fsApi_=FullscreenApi,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&getAttributes(e),this.language(this.options_.language),n.languages){const l={};Object.getOwnPropertyNames(n.languages).forEach(function(u){l[u.toLowerCase()]=n.languages[u]}),this.languages_=l}else this.languages_=Player.prototype.options_.languages;this.resetCache_(),this.poster_=n.poster||"",this.controls_=!!n.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),n.plugins&&Object.keys(n.plugins).forEach(l=>{if(typeof this[l]!="function")throw new Error(`plugin "${l}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),evented(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(on(document$1,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const a=merge$1(this.options_);if(n.plugins&&Object.keys(n.plugins).forEach(l=>{this[l](n.plugins[l])}),n.debug&&this.debug(!0),this.options_.playerOptions=a,this.middleware_=[],this.playbackRates(n.playbackRates),n.experimentalSvgIcons){const u=new window$1.DOMParser().parseFromString(icons,"image/svg+xml");if(u.querySelector("parsererror"))log$1.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const f=u.documentElement;f.style.display="none",this.el_.appendChild(f),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio(e.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),n.spatialNavigation&&n.spatialNavigation.enabled&&(this.spatialNavigation=new SpatialNavigation(this),this.addClass("vjs-spatial-navigation-enabled")),TOUCH_ENABLED&&this.addClass("vjs-touch-enabled"),IS_IOS||this.addClass("vjs-workinghover"),Player.players[this.id_]=this;const o=version$6.split(".")[0];this.addClass(`vjs-v${o}`),this.userActive(!0),this.reportUserActivity(),this.one("play",l=>this.listenForUserActivity_(l)),this.on("keydown",l=>this.handleKeyDown(l)),this.on("languagechange",l=>this.handleLanguagechange(l)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),off(document$1,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),off(document$1,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),Player.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),clearCacheForPlayer(this),ALL.names.forEach(e=>{const n=ALL[e],s=this[n.getterName]();s&&s.off&&s.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e=this.tag,n,s=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");const a=this.tag.tagName.toLowerCase()==="video-js";s?n=this.el_=e.parentNode:a||(n=this.el_=super.createEl("div"));const o=getAttributes(e);if(a){for(n=this.el_=e,e=this.tag=document$1.createElement("video");n.children.length;)e.appendChild(n.firstChild);hasClass(n,"video-js")||addClass(n,"video-js"),n.appendChild(e),s=this.playerElIngest_=n,Object.keys(n).forEach(c=>{try{e[c]=n[c]}catch{}})}e.setAttribute("tabindex","-1"),o.tabindex="-1",IS_CHROME&&IS_WINDOWS&&(e.setAttribute("role","application"),o.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in o&&delete o.width,"height"in o&&delete o.height,Object.getOwnPropertyNames(o).forEach(function(c){a&&c==="class"||n.setAttribute(c,o[c]),a&&e.setAttribute(c,o[c])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=n.player=this,this.addClass("vjs-paused");const l=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(c=>browser[c]).map(c=>"vjs-device-"+c.substring(3).toLowerCase().replace(/\_/g,"-"));if(this.addClass(...l),window$1.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=createStyleElement("vjs-styles-dimensions");const c=$(".vjs-styles-defaults"),f=$("head");f.insertBefore(this.styleEl_,c?c.nextSibling:f.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const u=e.getElementsByTagName("a");for(let c=0;c<u.length;c++){const f=u.item(c);addClass(f,"vjs-hidden"),f.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!s&&e.parentNode.insertBefore(n,e),prependTo(e,n),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=n,n}crossOrigin(e){if(typeof e>"u")return this.techGet_("crossOrigin");if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){log$1.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,n){const s=e+"_";if(n===void 0)return this[s]||0;if(n===""||n==="auto"){this[s]=void 0,this.updateStyleEl_();return}const a=parseFloat(n);if(isNaN(a)){log$1.error(`Improper value "${n}" supplied for for ${e}`);return}this[s]=a,this.updateStyleEl_()}fluid(e){if(e===void 0)return!!this.fluid_;this.fluid_=!!e,isEvented(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),addEventedCallback(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(e===void 0)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(e===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(window$1.VIDEOJS_NO_DYNAMIC_STYLE===!0){const u=typeof this.width_=="number"?this.width_:this.options_.width,c=typeof this.height_=="number"?this.height_:this.options_.height,f=this.tech_&&this.tech_.el();f&&(u>=0&&(f.width=u),c>=0&&(f.height=c));return}let e,n,s,a;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?s=this.aspectRatio_:this.videoWidth()>0?s=this.videoWidth()+":"+this.videoHeight():s="16:9";const o=s.split(":"),l=o[1]/o[0];this.width_!==void 0?e=this.width_:this.height_!==void 0?e=this.height_/l:e=this.videoWidth()||300,this.height_!==void 0?n=this.height_:n=e*l,/^[^a-zA-Z]/.test(this.id())?a="dimensions-"+this.id():a=this.id()+"-dimensions",this.addClass(a),setTextContent(this.styleEl_,`
      .${a} {
        width: ${e}px;
        height: ${n}px;
      }

      .${a}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${l*100}%;
      }
    `)}loadTech_(e,n){this.tech_&&this.unloadTech_();const s=toTitleCase$1(e),a=e.charAt(0).toLowerCase()+e.slice(1);s!=="Html5"&&this.tag&&(Tech.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=s,this.isReady_=!1;let o=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(o=!1);const l={source:n,autoplay:o,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${a}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};ALL.names.forEach(c=>{const f=ALL[c];l[f.getterName]=this[f.privateName]}),Object.assign(l,this.options_[s]),Object.assign(l,this.options_[a]),Object.assign(l,this.options_[e.toLowerCase()]),this.tag&&(l.tag=this.tag),n&&n.src===this.cache_.src&&this.cache_.currentTime>0&&(l.startTime=this.cache_.currentTime);const u=Tech.getTech(e);if(!u)throw new Error(`No Tech named '${s}' exists! '${s}' should be registered using videojs.registerTech()'`);this.tech_=new u(l),this.tech_.ready(bind_(this,this.handleTechReady_),!0),textTrackConverter.jsonToTextTracks(this.textTracksJson_||[],this.tech_),TECH_EVENTS_RETRIGGER.forEach(c=>{this.on(this.tech_,c,f=>this[`handleTech${toTitleCase$1(c)}_`](f))}),Object.keys(TECH_EVENTS_QUEUE).forEach(c=>{this.on(this.tech_,c,f=>{if(this.tech_.playbackRate()===0&&this.tech_.seeking()){this.queuedCallbacks_.push({callback:this[`handleTech${TECH_EVENTS_QUEUE[c]}_`].bind(this),event:f});return}this[`handleTech${TECH_EVENTS_QUEUE[c]}_`](f)})}),this.on(this.tech_,"loadstart",c=>this.handleTechLoadStart_(c)),this.on(this.tech_,"sourceset",c=>this.handleTechSourceset_(c)),this.on(this.tech_,"waiting",c=>this.handleTechWaiting_(c)),this.on(this.tech_,"ended",c=>this.handleTechEnded_(c)),this.on(this.tech_,"seeking",c=>this.handleTechSeeking_(c)),this.on(this.tech_,"play",c=>this.handleTechPlay_(c)),this.on(this.tech_,"pause",c=>this.handleTechPause_(c)),this.on(this.tech_,"durationchange",c=>this.handleTechDurationChange_(c)),this.on(this.tech_,"fullscreenchange",(c,f)=>this.handleTechFullscreenChange_(c,f)),this.on(this.tech_,"fullscreenerror",(c,f)=>this.handleTechFullscreenError_(c,f)),this.on(this.tech_,"enterpictureinpicture",c=>this.handleTechEnterPictureInPicture_(c)),this.on(this.tech_,"leavepictureinpicture",c=>this.handleTechLeavePictureInPicture_(c)),this.on(this.tech_,"error",c=>this.handleTechError_(c)),this.on(this.tech_,"posterchange",c=>this.handleTechPosterChange_(c)),this.on(this.tech_,"textdata",c=>this.handleTechTextData_(c)),this.on(this.tech_,"ratechange",c=>this.handleTechRateChange_(c)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(s!=="Html5"||!this.tag)&&prependTo(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){ALL.names.forEach(e=>{const n=ALL[e];this[n.privateName]=this[n.getterName]()}),this.textTracksJson_=textTrackConverter.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return e===void 0&&log$1.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}version(){return{"video.js":version$6}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||typeof e!="string")return;const n=()=>{const a=this.muted();this.muted(!0);const o=()=>{this.muted(a)};this.playTerminatedQueue_.push(o);const l=this.play();if(isPromise(l))return l.catch(u=>{throw o(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${u||""}`)})};let s;if(e==="any"&&!this.muted()?(s=this.play(),isPromise(s)&&(s=s.catch(n))):e==="muted"&&!this.muted()?s=n():s=this.play(),!!isPromise(s))return s.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})})}updateSourceCaches_(e=""){let n=e,s="";typeof n!="string"&&(n=e.src,s=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],n&&!s&&(s=findMimetype(this,n)),this.cache_.source=merge$1({},e,{src:n,type:s});const a=this.cache_.sources.filter(c=>c.src&&c.src===n),o=[],l=this.$$("source"),u=[];for(let c=0;c<l.length;c++){const f=getAttributes(l[c]);o.push(f),f.src&&f.src===n&&u.push(f.src)}u.length&&!a.length?this.cache_.sources=o:a.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=n}handleTechSourceset_(e){if(!this.changingSrc_){let n=o=>this.updateSourceCaches_(o);const s=this.currentSource().src,a=e.src;s&&!/^blob:/.test(s)&&/^blob:/.test(a)&&(!this.lastSource_||this.lastSource_.tech!==a&&this.lastSource_.player!==s)&&(n=()=>{}),n(a),e.src||this.tech_.any(["sourceset","loadstart"],o=>{if(o.type==="sourceset")return;const l=this.techGet_("currentSrc");this.lastSource_.tech=l,this.updateSourceCaches_(l)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(e===void 0)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),n=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",n))};this.on("timeupdate",n)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,e):this.paused()?silencePromise(this.play()):this.pause())}handleTechDoubleClick_(e){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),s=>s.contains(e.target))||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,e):this.isInPictureInPicture()&&!document$1.pictureInPictureElement?this.exitPictureInPicture():this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const n=e.target.player;if(n&&n!==this)return;const s=this.el();let a=document$1[this.fsApi_.fullscreenElement]===s;!a&&s.matches&&(a=s.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(a)}handleTechFullscreenChange_(e,n){n&&(n.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(n.isFullscreen))}handleTechFullscreenError_(e,n){this.trigger("fullscreenerror",n)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();e&&this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,n){this.ready(function(){if(e in allowedSetters)return set(this.middleware_,this.tech_,e,n);if(e in allowedMediators)return mediate(this.middleware_,this.tech_,e,n);try{this.tech_&&this.tech_[e](n)}catch(s){throw log$1(s),s}},!0)}techGet_(e){if(!(!this.tech_||!this.tech_.isReady_)){if(e in allowedGetters)return get(this.middleware_,this.tech_,e);if(e in allowedMediators)return mediate(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(n){throw this.tech_[e]===void 0?(log$1(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,n),n):n.name==="TypeError"?(log$1(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,n),this.tech_.isReady_=!1,n):(log$1(n),n)}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=silencePromise){this.playCallbacks_.push(e);const n=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),s=!!(IS_ANY_SAFARI||IS_IOS);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!n){this.waitToPlay_=l=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!n&&s&&this.load();return}const a=this.techGet_("play");s&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),a===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(a)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(n){n()})}runPlayCallbacks_(e){const n=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],n.forEach(function(s){s(e)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||createTimeRanges$1(0,0)}scrubbing(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){if(e===void 0)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;if(e<0&&(e=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",e),this.cache_.initTime=0,isFinite(e)&&(this.cache_.currentTime=Number(e))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(e===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return(!e||!e.length)&&(e=createTimeRanges$1(0,0)),e}seekable(){let e=this.techGet_("seekable");return(!e||!e.length)&&(e=createTimeRanges$1(0,0)),e}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return bufferedPercent(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),n=this.duration();let s=e.end(e.length-1);return s>n&&(s=n),s}volume(e){let n;if(e!==void 0){n=Math.max(0,Math.min(1,e)),this.cache_.volume=n,this.techCall_("setVolume",n),n>0&&this.lastVolume_(n);return}return n=parseFloat(this.techGet_("volume")),isNaN(n)?1:n}muted(e){if(e!==void 0){this.techCall_("setMuted",e);return}return this.techGet_("muted")||!1}defaultMuted(e){return e!==void 0&&this.techCall_("setDefaultMuted",e),this.techGet_("defaultMuted")||!1}lastVolume_(e){if(e!==void 0&&e!==0){this.cache_.lastVolume=e;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(e!==void 0){const n=this.isFullscreen_;this.isFullscreen_=!!e,this.isFullscreen_!==n&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const n=this;return new Promise((s,a)=>{function o(){n.off("fullscreenerror",u),n.off("fullscreenchange",l)}function l(){o(),s()}function u(f,m){o(),a(m)}n.one("fullscreenchange",l),n.one("fullscreenerror",u);const c=n.requestFullscreenHelper_(e);c&&(c.then(o,o),c.then(s,a))})}requestFullscreenHelper_(e){let n;if(this.fsApi_.prefixed||(n=this.options_.fullscreen&&this.options_.fullscreen.options||{},e!==void 0&&(n=e)),this.fsApi_.requestFullscreen){const s=this.el_[this.fsApi_.requestFullscreen](n);return s&&s.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),s}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise((n,s)=>{function a(){e.off("fullscreenerror",l),e.off("fullscreenchange",o)}function o(){a(),n()}function l(c,f){a(),s(f)}e.one("fullscreenchange",o),e.one("fullscreenerror",l);const u=e.exitFullscreenHelper_();u&&(u.then(a,a),u.then(n,s))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=document$1[this.fsApi_.exitFullscreen]();return e&&silencePromise(e.then(()=>this.isFullscreen(!1))),e}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=document$1.documentElement.style.overflow,on(document$1,"keydown",this.boundFullWindowOnEscKey_),document$1.documentElement.style.overflow="hidden",addClass(document$1.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){e.key==="Escape"&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,off(document$1,"keydown",this.boundFullWindowOnEscKey_),document$1.documentElement.style.overflow=this.docOrigOverflow,removeClass(document$1.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(e===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){if(e!==void 0){this.isInPictureInPicture_=!!e,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&window$1.documentPictureInPicture){const e=document$1.createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(createEl("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),window$1.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(n=>(copyStyleSheetsToWindow(n),this.el_.parentNode.insertBefore(e,this.el_),n.document.body.appendChild(this.el_),n.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:n}),n.addEventListener("pagehide",s=>{const a=s.target.querySelector(".video-js");e.parentNode.replaceChild(a,e),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),n))}return"pictureInPictureEnabled"in document$1&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){if(window$1.documentPictureInPicture&&window$1.documentPictureInPicture.window)return window$1.documentPictureInPicture.window.close(),Promise.resolve();if("pictureInPictureEnabled"in document$1)return document$1.exitPictureInPicture()}handleKeyDown(e){const{userActions:n}=this.options_;!n||!n.hotkeys||(a=>{const o=a.tagName.toLowerCase();if(a.isContentEditable)return!0;const l=["button","checkbox","hidden","radio","reset","submit"];return o==="input"?l.indexOf(a.type)===-1:["textarea"].indexOf(o)!==-1})(this.el_.ownerDocument.activeElement)||(typeof n.hotkeys=="function"?n.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const n=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:s=l=>e.key.toLowerCase()==="f",muteKey:a=l=>e.key.toLowerCase()==="m",playPauseKey:o=l=>e.key.toLowerCase()==="k"||e.key.toLowerCase()===" "}=n;if(s.call(this,e)){e.preventDefault(),e.stopPropagation();const l=Component$1.getComponent("FullscreenToggle");document$1[this.fsApi_.fullscreenEnabled]!==!1&&l.prototype.handleClick.call(this,e)}else a.call(this,e)?(e.preventDefault(),e.stopPropagation(),Component$1.getComponent("MuteToggle").prototype.handleClick.call(this,e)):o.call(this,e)&&(e.preventDefault(),e.stopPropagation(),Component$1.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let n;for(let s=0,a=this.options_.techOrder;s<a.length;s++){const o=a[s];let l=Tech.getTech(o);if(l||(l=Component$1.getComponent(o)),!l){log$1.error(`The "${o}" tech is undefined. Skipped browser support check for that tech.`);continue}if(l.isSupported()&&(n=l.canPlayType(e),n))return n}return""}selectSource(e){const n=this.options_.techOrder.map(u=>[u,Tech.getTech(u)]).filter(([u,c])=>c?c.isSupported():(log$1.error(`The "${u}" tech is undefined. Skipped browser support check for that tech.`),!1)),s=function(u,c,f){let m;return u.some(v=>c.some(x=>{if(m=f(v,x),m)return!0})),m};let a;const o=u=>(c,f)=>u(f,c),l=([u,c],f)=>{if(c.canPlaySource(f,this.options_[u.toLowerCase()]))return{source:f,tech:u}};return this.options_.sourceOrder?a=s(e,n,o(l)):a=s(n,e,l),a||!1}handleSrc_(e,n){if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const s=filterSource(e);if(!s.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,n||(this.cache_.sources=s),this.updateSourceCaches_(s[0]),setSource(this,s[0],(a,o)=>{if(this.middleware_=o,n||(this.cache_.sources=s),this.updateSourceCaches_(a),this.src_(a)){if(s.length>1)return this.handleSrc_(s.slice(1));this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),this.triggerReady();return}setTech(o,this.tech_)}),s.length>1){const a=()=>{this.error(null),this.handleSrc_(s.slice(1),!0)},o=()=>{this.off("error",a)};this.one("error",a),this.one("playing",o),this.resetRetryOnError_=()=>{this.off("error",a),this.off("playing",o)}}}src(e){return this.handleSrc_(e,!1)}src_(e){const n=this.selectSource([e]);return n?titleCaseEquals(n.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(n.tech,n.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1):!0}addSourceElement(e,n){return this.tech_?this.tech_.addSourceElement(e,n):!1}removeSourceElement(e){return this.tech_?this.tech_.removeSourceElement(e):!1}load(){if(this.tech_&&this.tech_.vhs){this.src(this.currentSource());return}this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{const e=this.play();silencePromise(e.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),isEvented(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:e,durationDisplay:n,progressControl:s,remainingTimeDisplay:a}=this.controlBar||{},{seekBar:o}=s||{};e&&e.updateContent(),n&&n.updateContent(),a&&a.updateContent(),o&&(o.update(),o.loadProgressBar&&o.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),n=[];return Object.keys(e).length!==0&&n.push(e),this.cache_.sources||n}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){if(e!==void 0){this.techCall_("setPreload",e),this.options_.preload=e;return}return this.techGet_("preload")}autoplay(e){if(e===void 0)return this.options_.autoplay||!1;let n;typeof e=="string"&&/(any|play|muted)/.test(e)||e===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_(typeof e=="string"?e:"play"),n=!1):e?this.options_.autoplay=!0:this.options_.autoplay=!1,n=typeof n>"u"?this.options_.autoplay:n,this.tech_&&this.techCall_("setAutoplay",n)}playsinline(e){return e!==void 0&&(this.techCall_("setPlaysinline",e),this.options_.playsinline=e),this.techGet_("playsinline")}loop(e){if(e!==void 0){this.techCall_("setLoop",e),this.options_.loop=e;return}return this.techGet_("loop")}poster(e){if(e===void 0)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(e===void 0)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(e===void 0)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(e===void 0)return this.error_||null;if(hooks("beforeerror").forEach(n=>{const s=n(this,e);if(!(isObject(s)&&!Array.isArray(s)||typeof s=="string"||typeof s=="number"||s===null)){this.log.error("please return a value that MediaError expects in beforeerror hooks");return}e=s}),this.options_.suppressNotSupportedError&&e&&e.code===4){const n=function(){this.error(e)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],n),this.one("loadstart",function(){this.off(["click","touchstart"],n)});return}if(e===null){this.error_=null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new MediaError(e),this.addClass("vjs-error"),log$1.error(`(CODE:${this.error_.code} ${MediaError.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),hooks("error").forEach(n=>n(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(e===void 0)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(n){n.stopPropagation(),n.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,n,s;const a=bind_(this,this.reportUserActivity),o=function(v){(v.screenX!==n||v.screenY!==s)&&(n=v.screenX,s=v.screenY,a())},l=function(){a(),this.clearInterval(e),e=this.setInterval(a,250)},u=function(v){a(),this.clearInterval(e)};this.on("mousedown",l),this.on("mousemove",o),this.on("mouseup",u),this.on("mouseleave",u);const c=this.getChild("controlBar");c&&!IS_IOS&&!IS_ANDROID&&(c.on("mouseenter",function(v){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),c.on("mouseleave",function(v){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",a),this.on("keyup",a);let f;const m=function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(f);const v=this.options_.inactivityTimeout;v<=0||(f=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},v))};this.setInterval(m,250)}playbackRate(e){if(e!==void 0){this.techCall_("setPlaybackRate",e);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(e){return e!==void 0?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(e!==void 0){this.isAudio_=!!e;return}return!!this.isAudio_}updatePlayerHeightOnAudioOnlyMode_(){const e=this.getChild("ControlBar");!e||this.audioOnlyCache_.controlBarHeight===e.currentHeight()||(this.audioOnlyCache_.controlBarHeight=e.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),n=this.getChild("ControlBar"),s=n&&n.currentHeight();e.forEach(a=>{a!==n&&a.el_&&!a.hasClass("vjs-hidden")&&(a.hide(),this.audioOnlyCache_.hiddenChildren.push(a))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=s,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(s),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if(typeof e!="boolean"||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const n=[];return this.isInPictureInPicture()&&n.push(this.exitPictureInPicture()),this.isFullscreen()&&n.push(this.exitFullscreen()),this.audioPosterMode()&&n.push(this.audioPosterMode(!1)),Promise.all(n).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return typeof e!="boolean"||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(e,n,s){if(this.tech_)return this.tech_.addTextTrack(e,n,s)}addRemoteTextTrack(e,n){if(this.tech_)return this.tech_.addRemoteTextTrack(e,n)}removeRemoteTextTrack(e={}){let{track:n}=e;if(n||(n=e),this.tech_)return this.tech_.removeRemoteTextTrack(n)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(e===void 0)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),isEvented(this)&&this.trigger("languagechange"))}languages(){return merge$1(Player.prototype.options_.languages,this.languages_)}toJSON(){const e=merge$1(this.options_),n=e.tracks;e.tracks=[];for(let s=0;s<n.length;s++){let a=n[s];a=merge$1(a),a.player=void 0,e.tracks[s]=a}return e}createModal(e,n){n=n||{},n.content=e||"";const s=new ModalDialog(this,n);return this.addChild(s),s.on("dispose",()=>{this.removeChild(s)}),s.open(),s}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),n=this.currentWidth();for(let s=0;s<BREAKPOINT_ORDER.length;s++){const a=BREAKPOINT_ORDER[s],o=this.breakpoints_[a];if(n<=o){if(e===a)return;e&&this.removeClass(BREAKPOINT_CLASSES[e]),this.addClass(BREAKPOINT_CLASSES[a]),this.breakpoint_=a;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return e===void 0?Object.assign(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Object.assign({},DEFAULT_BREAKPOINTS,e),this.updateCurrentBreakpoint_(),Object.assign(this.breakpoints_))}responsive(e){if(e===void 0)return this.responsive_;e=!!e;const n=this.responsive_;if(e!==n)return this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return BREAKPOINT_CLASSES[this.breakpoint_]||""}loadMedia(e,n){if(!e||typeof e!="object")return;const s=this.crossOrigin();this.reset(),this.cache_.media=merge$1(e);const{artist:a,artwork:o,description:l,poster:u,src:c,textTracks:f,title:m}=this.cache_.media;!o&&u&&(this.cache_.media.artwork=[{src:u,type:getMimetype(u)}]),s&&this.crossOrigin(s),c&&this.src(c),u&&this.poster(u),Array.isArray(f)&&f.forEach(v=>this.addRemoteTextTrack(v,!1)),this.titleBar&&this.titleBar.update({title:m,description:l||a||""}),this.ready(n)}getMedia(){if(!this.cache_.media){const e=this.poster(),n=this.currentSources(),s=Array.prototype.map.call(this.remoteTextTracks(),o=>({kind:o.kind,label:o.label,language:o.language,src:o.src})),a={src:n,textTracks:s};return e&&(a.poster=e,a.artwork=[{src:a.poster,type:getMimetype(a.poster)}]),a}return merge$1(this.cache_.media)}static getTagSettings(e){const n={sources:[],tracks:[]},s=getAttributes(e),a=s["data-setup"];if(hasClass(e,"vjs-fill")&&(s.fill=!0),hasClass(e,"vjs-fluid")&&(s.fluid=!0),a!==null)try{Object.assign(s,JSON.parse(a||"{}"))}catch(o){log$1.error("data-setup",o)}if(Object.assign(n,s),e.hasChildNodes()){const o=e.childNodes;for(let l=0,u=o.length;l<u;l++){const c=o[l],f=c.nodeName.toLowerCase();f==="source"?n.sources.push(getAttributes(c)):f==="track"&&n.tracks.push(getAttributes(c))}}return n}debug(e){if(e===void 0)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(e===void 0)return this.cache_.playbackRates;Array.isArray(e)&&e.every(n=>typeof n=="number")&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}ALL.names.forEach(function(r){const e=ALL[r];Player.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});Player.prototype.crossorigin=Player.prototype.crossOrigin;Player.players={};const navigator$1=window$1.navigator;Player.prototype.options_={techOrder:Tech.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:navigator$1&&(navigator$1.languages&&navigator$1.languages[0]||navigator$1.userLanguage||navigator$1.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1,disableSeekWhileScrubbingOnMobile:!1};TECH_EVENTS_RETRIGGER.forEach(function(r){Player.prototype[`handleTech${toTitleCase$1(r)}_`]=function(){return this.trigger(r)}});Component$1.registerComponent("Player",Player);const BASE_PLUGIN_NAME="plugin",PLUGIN_CACHE_KEY="activePlugins_",pluginStorage={},pluginExists=r=>pluginStorage.hasOwnProperty(r),getPlugin=r=>pluginExists(r)?pluginStorage[r]:void 0,markPluginAsActive=(r,e)=>{r[PLUGIN_CACHE_KEY]=r[PLUGIN_CACHE_KEY]||{},r[PLUGIN_CACHE_KEY][e]=!0},triggerSetupEvent=(r,e,n)=>{const s=(n?"before":"")+"pluginsetup";r.trigger(s,e),r.trigger(s+":"+e.name,e)},createBasicPlugin=function(r,e){const n=function(){triggerSetupEvent(this,{name:r,plugin:e,instance:null},!0);const s=e.apply(this,arguments);return markPluginAsActive(this,r),triggerSetupEvent(this,{name:r,plugin:e,instance:s}),s};return Object.keys(e).forEach(function(s){n[s]=e[s]}),n},createPluginFactory=(r,e)=>(e.prototype.name=r,function(...n){triggerSetupEvent(this,{name:r,plugin:e,instance:null},!0);const s=new e(this,...n);return this[r]=()=>s,triggerSetupEvent(this,s.getEventHash()),s});class Plugin{constructor(e){if(this.constructor===Plugin)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),evented(this),delete this.trigger,stateful(this,this.constructor.defaultState),markPluginAsActive(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,n={}){return trigger(this.eventBusEl_,e,this.getEventHash(n))}handleStateChanged(e){}dispose(){const{name:e,player:n}=this;this.trigger("dispose"),this.off(),n.off("dispose",this.dispose),n[PLUGIN_CACHE_KEY][e]=!1,this.player=this.state=null,n[e]=createPluginFactory(e,pluginStorage[e])}static isBasic(e){const n=typeof e=="string"?getPlugin(e):e;return typeof n=="function"&&!Plugin.prototype.isPrototypeOf(n.prototype)}static registerPlugin(e,n){if(typeof e!="string")throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if(pluginExists(e))log$1.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if(Player.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if(typeof n!="function")throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof n}.`);return pluginStorage[e]=n,e!==BASE_PLUGIN_NAME&&(Plugin.isBasic(n)?Player.prototype[e]=createBasicPlugin(e,n):Player.prototype[e]=createPluginFactory(e,n)),n}static deregisterPlugin(e){if(e===BASE_PLUGIN_NAME)throw new Error("Cannot de-register base plugin.");pluginExists(e)&&(delete pluginStorage[e],delete Player.prototype[e])}static getPlugins(e=Object.keys(pluginStorage)){let n;return e.forEach(s=>{const a=getPlugin(s);a&&(n=n||{},n[s]=a)}),n}static getPluginVersion(e){const n=getPlugin(e);return n&&n.VERSION||""}}Plugin.getPlugin=getPlugin;Plugin.BASE_PLUGIN_NAME=BASE_PLUGIN_NAME;Plugin.registerPlugin(BASE_PLUGIN_NAME,Plugin);Player.prototype.usingPlugin=function(r){return!!this[PLUGIN_CACHE_KEY]&&this[PLUGIN_CACHE_KEY][r]===!0};Player.prototype.hasPlugin=function(r){return!!pluginExists(r)};function deprecate(r,e){let n=!1;return function(...s){return n||log$1.warn(r),n=!0,e.apply(this,s)}}function deprecateForMajor(r,e,n,s){return deprecate(`${e} is deprecated and will be removed in ${r}.0; please use ${n} instead.`,s)}var VjsErrors={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"};const normalizeId=r=>r.indexOf("#")===0?r.slice(1):r;function videojs(r,e,n){let s=videojs.getPlayer(r);if(s)return e&&log$1.warn(`Player "${r}" is already initialised. Options will not be applied.`),n&&s.ready(n),s;const a=typeof r=="string"?$("#"+normalizeId(r)):r;if(!isEl(a))throw new TypeError("The element or ID supplied is not valid. (videojs)");const l=("getRootNode"in a?a.getRootNode()instanceof window$1.ShadowRoot:!1)?a.getRootNode():a.ownerDocument.body;(!a.ownerDocument.defaultView||!l.contains(a))&&log$1.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(a.parentNode&&a.parentNode.hasAttribute&&a.parentNode.hasAttribute("data-vjs-player")?a.parentNode:a).cloneNode(!0)),hooks("beforesetup").forEach(c=>{const f=c(a,merge$1(e));if(!isObject(f)||Array.isArray(f)){log$1.error("please return an object in beforesetup hooks");return}e=merge$1(e,f)});const u=Component$1.getComponent("Player");return s=new u(a,e,n),hooks("setup").forEach(c=>c(s)),s}videojs.hooks_=hooks_;videojs.hooks=hooks;videojs.hook=hook;videojs.hookOnce=hookOnce;videojs.removeHook=removeHook;if(window$1.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&isReal()){let r=$(".vjs-styles-defaults");if(!r){r=createStyleElement("vjs-styles-defaults");const e=$("head");e&&e.insertBefore(r,e.firstChild),setTextContent(r,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}autoSetupTimeout(1,videojs);videojs.VERSION=version$6;videojs.options=Player.prototype.options_;videojs.getPlayers=()=>Player.players;videojs.getPlayer=r=>{const e=Player.players;let n;if(typeof r=="string"){const s=normalizeId(r),a=e[s];if(a)return a;n=$("#"+s)}else n=r;if(isEl(n)){const{player:s,playerId:a}=n;if(s||e[a])return s||e[a]}};videojs.getAllPlayers=()=>Object.keys(Player.players).map(r=>Player.players[r]).filter(Boolean);videojs.players=Player.players;videojs.getComponent=Component$1.getComponent;videojs.registerComponent=(r,e)=>(Tech.isTech(e)&&log$1.warn(`The ${r} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),Component$1.registerComponent.call(Component$1,r,e));videojs.getTech=Tech.getTech;videojs.registerTech=Tech.registerTech;videojs.use=use;Object.defineProperty(videojs,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(videojs.middleware,"TERMINATOR",{value:TERMINATOR,writeable:!1,enumerable:!0});videojs.browser=browser;videojs.obj=Obj;videojs.mergeOptions=deprecateForMajor(9,"videojs.mergeOptions","videojs.obj.merge",merge$1);videojs.defineLazyProperty=deprecateForMajor(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",defineLazyProperty);videojs.bind=deprecateForMajor(9,"videojs.bind","native Function.prototype.bind",bind_);videojs.registerPlugin=Plugin.registerPlugin;videojs.deregisterPlugin=Plugin.deregisterPlugin;videojs.plugin=(r,e)=>(log$1.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Plugin.registerPlugin(r,e));videojs.getPlugins=Plugin.getPlugins;videojs.getPlugin=Plugin.getPlugin;videojs.getPluginVersion=Plugin.getPluginVersion;videojs.addLanguage=function(r,e){return r=(""+r).toLowerCase(),videojs.options.languages=merge$1(videojs.options.languages,{[r]:e}),videojs.options.languages[r]};videojs.log=log$1;videojs.createLogger=createLogger;videojs.time=Time;videojs.createTimeRange=deprecateForMajor(9,"videojs.createTimeRange","videojs.time.createTimeRanges",createTimeRanges$1);videojs.createTimeRanges=deprecateForMajor(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",createTimeRanges$1);videojs.formatTime=deprecateForMajor(9,"videojs.formatTime","videojs.time.formatTime",formatTime);videojs.setFormatTime=deprecateForMajor(9,"videojs.setFormatTime","videojs.time.setFormatTime",setFormatTime);videojs.resetFormatTime=deprecateForMajor(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",resetFormatTime);videojs.parseUrl=deprecateForMajor(9,"videojs.parseUrl","videojs.url.parseUrl",parseUrl);videojs.isCrossOrigin=deprecateForMajor(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",isCrossOrigin);videojs.EventTarget=EventTarget$2;videojs.any=any;videojs.on=on;videojs.one=one;videojs.off=off;videojs.trigger=trigger;videojs.xhr=XHR;videojs.TextTrack=TextTrack;videojs.AudioTrack=AudioTrack;videojs.VideoTrack=VideoTrack;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(r=>{videojs[r]=function(){return log$1.warn(`videojs.${r}() is deprecated; use videojs.dom.${r}() instead`),Dom[r].apply(null,arguments)}});videojs.computedStyle=deprecateForMajor(9,"videojs.computedStyle","videojs.dom.computedStyle",computedStyle);videojs.dom=Dom;videojs.fn=Fn;videojs.num=Num;videojs.str=Str;videojs.url=Url;videojs.Error=VjsErrors;/*! @name videojs-contrib-quality-levels @version 4.1.0 @license Apache-2.0 */class QualityLevel{constructor(e){let n=this;return n.id=e.id,n.label=n.id,n.width=e.width,n.height=e.height,n.bitrate=e.bandwidth,n.frameRate=e.frameRate,n.enabled_=e.enabled,Object.defineProperty(n,"enabled",{get(){return n.enabled_()},set(s){n.enabled_(s)}}),n}}class QualityLevelList extends videojs.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get(){return e.levels_.length}}),e[Symbol.iterator]=()=>e.levels_.values(),e}addQualityLevel(e){let n=this.getQualityLevelById(e.id);if(n)return n;const s=this.levels_.length;return n=new QualityLevel(e),""+s in this||Object.defineProperty(this,s,{get(){return this.levels_[s]}}),this.levels_.push(n),this.trigger({qualityLevel:n,type:"addqualitylevel"}),n}removeQualityLevel(e){let n=null;for(let s=0,a=this.length;s<a;s++)if(this[s]===e){n=this.levels_.splice(s,1)[0],this.selectedIndex_===s?this.selectedIndex_=-1:this.selectedIndex_>s&&this.selectedIndex_--;break}return n&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),n}getQualityLevelById(e){for(let n=0,s=this.length;n<s;n++){const a=this[n];if(a.id===e)return a}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}QualityLevelList.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const r in QualityLevelList.prototype.allowedEvents_)QualityLevelList.prototype["on"+r]=null;var version$5="4.1.0";const initPlugin$1=function(r,e){const n=r.qualityLevels,s=new QualityLevelList,a=function(){s.dispose(),r.qualityLevels=n,r.off("dispose",a)};return r.on("dispose",a),r.qualityLevels=()=>s,r.qualityLevels.VERSION=version$5,s},qualityLevels=function(r){return initPlugin$1(this,videojs.obj.merge({},r))};videojs.registerPlugin("qualityLevels",qualityLevels);qualityLevels.VERSION=version$5;/*! @name @videojs/http-streaming @version 3.17.0 @license Apache-2.0 */const resolveUrl=resolveUrl$1,resolveManifestRedirect=(r,e)=>e&&e.responseURL&&r!==e.responseURL?e.responseURL:r,logger=r=>videojs.log.debug?videojs.log.debug.bind(videojs,"VHS:",`${r} >`):function(){};function merge(...r){const e=videojs.obj||videojs;return(e.merge||e.mergeOptions).apply(e,r)}function createTimeRanges(...r){const e=videojs.time||videojs;return(e.createTimeRanges||e.createTimeRanges).apply(e,r)}function bufferedRangesToString(r){if(r.length===0)return"Buffered Ranges are empty";let e=`Buffered Ranges: 
`;for(let n=0;n<r.length;n++){const s=r.start(n),a=r.end(n);e+=`${s} --> ${a}. Duration (${a-s})
`}return e}const TIME_FUDGE_FACTOR=1/30,SAFE_TIME_DELTA=TIME_FUDGE_FACTOR*3,filterRanges=function(r,e){const n=[];let s;if(r&&r.length)for(s=0;s<r.length;s++)e(r.start(s),r.end(s))&&n.push([r.start(s),r.end(s)]);return createTimeRanges(n)},findRange=function(r,e){return filterRanges(r,function(n,s){return n-SAFE_TIME_DELTA<=e&&s+SAFE_TIME_DELTA>=e})},findNextRange=function(r,e){return filterRanges(r,function(n){return n-TIME_FUDGE_FACTOR>=e})},findGaps=function(r){if(r.length<2)return createTimeRanges();const e=[];for(let n=1;n<r.length;n++){const s=r.end(n-1),a=r.start(n);e.push([s,a])}return createTimeRanges(e)},bufferIntersection=function(r,e){let n=null,s=null,a=0;const o=[],l=[];if(!r||!r.length||!e||!e.length)return createTimeRanges();let u=r.length;for(;u--;)o.push({time:r.start(u),type:"start"}),o.push({time:r.end(u),type:"end"});for(u=e.length;u--;)o.push({time:e.start(u),type:"start"}),o.push({time:e.end(u),type:"end"});for(o.sort(function(c,f){return c.time-f.time}),u=0;u<o.length;u++)o[u].type==="start"?(a++,a===2&&(n=o[u].time)):o[u].type==="end"&&(a--,a===1&&(s=o[u].time)),n!==null&&s!==null&&(l.push([n,s]),n=null,s=null);return createTimeRanges(l)},printableRange=r=>{const e=[];if(!r||!r.length)return"";for(let n=0;n<r.length;n++)e.push(r.start(n)+" => "+r.end(n));return e.join(", ")},timeUntilRebuffer=function(r,e,n=1){return((r.length?r.end(r.length-1):0)-e)/n},timeRangesToArray=r=>{const e=[];for(let n=0;n<r.length;n++)e.push({start:r.start(n),end:r.end(n)});return e},isRangeDifferent=function(r,e){if(r===e)return!1;if(!r&&e||!e&&r||r.length!==e.length)return!0;for(let n=0;n<r.length;n++)if(r.start(n)!==e.start(n)||r.end(n)!==e.end(n))return!0;return!1},lastBufferedEnd=function(r){if(!(!r||!r.length||!r.end))return r.end(r.length-1)},timeAheadOf=function(r,e){let n=0;if(!r||!r.length)return n;for(let s=0;s<r.length;s++){const a=r.start(s),o=r.end(s);if(!(e>o)){if(e>a&&e<=o){n+=o-e;continue}n+=o-a}}return n},segmentDurationWithParts=(r,e)=>{if(!e.preload)return e.duration;let n=0;return(e.parts||[]).forEach(function(s){n+=s.duration}),(e.preloadHints||[]).forEach(function(s){s.type==="PART"&&(n+=r.partTargetDuration)}),n},getPartsAndSegments=r=>(r.segments||[]).reduce((e,n,s)=>(n.parts?n.parts.forEach(function(a,o){e.push({duration:a.duration,segmentIndex:s,partIndex:o,part:a,segment:n})}):e.push({duration:n.duration,segmentIndex:s,partIndex:null,segment:n,part:null}),e),[]),getLastParts=r=>{const e=r.segments&&r.segments.length&&r.segments[r.segments.length-1];return e&&e.parts||[]},getKnownPartCount=({preloadSegment:r})=>{if(!r)return;const{parts:e,preloadHints:n}=r;let s=(n||[]).reduce((a,o)=>a+(o.type==="PART"?1:0),0);return s+=e&&e.length?e.length:0,s},liveEdgeDelay=(r,e)=>{if(e.endList)return 0;if(r&&r.suggestedPresentationDelay)return r.suggestedPresentationDelay;const n=getLastParts(e).length>0;return n&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:n&&e.partTargetDuration?e.partTargetDuration*3:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?e.targetDuration*3:0},backwardDuration=function(r,e){let n=0,s=e-r.mediaSequence,a=r.segments[s];if(a){if(typeof a.start<"u")return{result:a.start,precise:!0};if(typeof a.end<"u")return{result:a.end-a.duration,precise:!0}}for(;s--;){if(a=r.segments[s],typeof a.end<"u")return{result:n+a.end,precise:!0};if(n+=segmentDurationWithParts(r,a),typeof a.start<"u")return{result:n+a.start,precise:!0}}return{result:n,precise:!1}},forwardDuration=function(r,e){let n=0,s,a=e-r.mediaSequence;for(;a<r.segments.length;a++){if(s=r.segments[a],typeof s.start<"u")return{result:s.start-n,precise:!0};if(n+=segmentDurationWithParts(r,s),typeof s.end<"u")return{result:s.end-n,precise:!0}}return{result:-1,precise:!1}},intervalDuration=function(r,e,n){if(typeof e>"u"&&(e=r.mediaSequence+r.segments.length),e<r.mediaSequence)return 0;const s=backwardDuration(r,e);if(s.precise)return s.result;const a=forwardDuration(r,e);return a.precise?a.result:s.result+n},duration=function(r,e,n){if(!r)return 0;if(typeof n!="number"&&(n=0),typeof e>"u"){if(r.totalDuration)return r.totalDuration;if(!r.endList)return window$1.Infinity}return intervalDuration(r,e,n)},sumDurations=function({defaultDuration:r,durationList:e,startIndex:n,endIndex:s}){let a=0;if(n>s&&([n,s]=[s,n]),n<0){for(let o=n;o<Math.min(0,s);o++)a+=r;n=0}for(let o=n;o<s;o++)a+=e[o].duration;return a},playlistEnd=function(r,e,n,s){if(!r||!r.segments)return null;if(r.endList)return duration(r);if(e===null)return null;e=e||0;let a=intervalDuration(r,r.mediaSequence+r.segments.length,e);return n&&(s=typeof s=="number"?s:liveEdgeDelay(null,r),a-=s),Math.max(0,a)},seekable=function(r,e,n){const a=e||0;let o=playlistEnd(r,e,!0,n);return o===null?createTimeRanges():(o<a&&(o=a),createTimeRanges(a,o))},getMediaInfoForTime=function({playlist:r,currentTime:e,startingSegmentIndex:n,startingPartIndex:s,startTime:a,exactManifestTimings:o}){let l=e-a;const u=getPartsAndSegments(r);let c=0;for(let f=0;f<u.length;f++){const m=u[f];if(n===m.segmentIndex&&!(typeof s=="number"&&typeof m.partIndex=="number"&&s!==m.partIndex)){c=f;break}}if(l<0){if(c>0)for(let f=c-1;f>=0;f--){const m=u[f];if(l+=m.duration,o){if(l<0)continue}else if(l+TIME_FUDGE_FACTOR<=0)continue;return{partIndex:m.partIndex,segmentIndex:m.segmentIndex,startTime:a-sumDurations({defaultDuration:r.targetDuration,durationList:u,startIndex:c,endIndex:f})}}return{partIndex:u[0]&&u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:e}}if(c<0){for(let f=c;f<0;f++)if(l-=r.targetDuration,l<0)return{partIndex:u[0]&&u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:e};c=0}for(let f=c;f<u.length;f++){const m=u[f];l-=m.duration;const v=m.duration>TIME_FUDGE_FACTOR,x=l===0,C=v&&l+TIME_FUDGE_FACTOR>=0;if(!((x||C)&&f!==u.length-1)){if(o){if(l>0)continue}else if(l-TIME_FUDGE_FACTOR>=0)continue;return{partIndex:m.partIndex,segmentIndex:m.segmentIndex,startTime:a+sumDurations({defaultDuration:r.targetDuration,durationList:u,startIndex:c,endIndex:f})}}}return{segmentIndex:u[u.length-1].segmentIndex,partIndex:u[u.length-1].partIndex,startTime:e}},isExcluded=function(r){return r.excludeUntil&&r.excludeUntil>Date.now()},isIncompatible=function(r){return r.excludeUntil&&r.excludeUntil===1/0},isEnabled=function(r){const e=isExcluded(r);return!r.disabled&&!e},isDisabled=function(r){return r.disabled},isAes=function(r){for(let e=0;e<r.segments.length;e++)if(r.segments[e].key)return!0;return!1},hasAttribute=function(r,e){return e.attributes&&e.attributes[r]},estimateSegmentRequestTime=function(r,e,n,s=0){return hasAttribute("BANDWIDTH",n)?(r*n.attributes.BANDWIDTH-s*8)/e:NaN},isLowestEnabledRendition=(r,e)=>{if(r.playlists.length===1)return!0;const n=e.attributes.BANDWIDTH||Number.MAX_VALUE;return r.playlists.filter(s=>isEnabled(s)?(s.attributes.BANDWIDTH||0)<n:!1).length===0},playlistMatch=(r,e)=>!r&&!e||!r&&e||r&&!e?!1:!!(r===e||r.id&&e.id&&r.id===e.id||r.resolvedUri&&e.resolvedUri&&r.resolvedUri===e.resolvedUri||r.uri&&e.uri&&r.uri===e.uri),someAudioVariant=function(r,e){const n=r&&r.mediaGroups&&r.mediaGroups.AUDIO||{};let s=!1;for(const a in n){for(const o in n[a])if(s=e(n[a][o]),s)break;if(s)break}return!!s},isAudioOnly=r=>{if(!r||!r.playlists||!r.playlists.length)return someAudioVariant(r,n=>n.playlists&&n.playlists.length||n.uri);for(let e=0;e<r.playlists.length;e++){const n=r.playlists[e],s=n.attributes&&n.attributes.CODECS;if(!(s&&s.split(",").every(o=>isAudioCodec(o))||someAudioVariant(r,o=>playlistMatch(n,o))))return!1}return!0};var Playlist={liveEdgeDelay,duration,seekable,getMediaInfoForTime,isEnabled,isDisabled,isExcluded,isIncompatible,playlistEnd,isAes,hasAttribute,estimateSegmentRequestTime,isLowestEnabledRendition,isAudioOnly,playlistMatch,segmentDurationWithParts};const{log}=videojs,createPlaylistID=(r,e)=>`${r}-${e}`,groupID=(r,e,n)=>`placeholder-uri-${r}-${e}-${n}`,parseManifest=({onwarn:r,oninfo:e,manifestString:n,customTagParsers:s=[],customTagMappers:a=[],llhls:o})=>{const l=new Parser;r&&l.on("warn",r),e&&l.on("info",e),s.forEach(f=>l.addParser(f)),a.forEach(f=>l.addTagMapper(f)),l.push(n),l.end();const u=l.manifest;if(o||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(f){u.hasOwnProperty(f)&&delete u[f]}),u.segments&&u.segments.forEach(function(f){["parts","preloadHints"].forEach(function(m){f.hasOwnProperty(m)&&delete f[m]})})),!u.targetDuration){let f=10;u.segments&&u.segments.length&&(f=u.segments.reduce((m,v)=>Math.max(m,v.duration),0)),r&&r({message:`manifest has no targetDuration defaulting to ${f}`}),u.targetDuration=f}const c=getLastParts(u);if(c.length&&!u.partTargetDuration){const f=c.reduce((m,v)=>Math.max(m,v.duration),0);r&&(r({message:`manifest has no partTargetDuration defaulting to ${f}`}),log.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),u.partTargetDuration=f}return u},forEachMediaGroup=(r,e)=>{r.mediaGroups&&["AUDIO","SUBTITLES"].forEach(n=>{if(r.mediaGroups[n])for(const s in r.mediaGroups[n])for(const a in r.mediaGroups[n][s]){const o=r.mediaGroups[n][s][a];e(o,n,s,a)}})},setupMediaPlaylist=({playlist:r,uri:e,id:n})=>{r.id=n,r.playlistErrors_=0,e&&(r.uri=e),r.attributes=r.attributes||{}},setupMediaPlaylists=r=>{let e=r.playlists.length;for(;e--;){const n=r.playlists[e];setupMediaPlaylist({playlist:n,id:createPlaylistID(e,n.uri)}),n.resolvedUri=resolveUrl(r.uri,n.uri),r.playlists[n.id]=n,r.playlists[n.uri]=n,n.attributes.BANDWIDTH||log.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},resolveMediaGroupUris=r=>{forEachMediaGroup(r,e=>{e.uri&&(e.resolvedUri=resolveUrl(r.uri,e.uri))})},mainForMedia=(r,e)=>{const n=createPlaylistID(0,e),s={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:window$1.location.href,resolvedUri:window$1.location.href,playlists:[{uri:e,id:n,resolvedUri:e,attributes:{}}]};return s.playlists[n]=s.playlists[0],s.playlists[e]=s.playlists[0],s},addPropertiesToMain=(r,e,n=groupID)=>{r.uri=e;for(let a=0;a<r.playlists.length;a++)if(!r.playlists[a].uri){const o=`placeholder-uri-${a}`;r.playlists[a].uri=o}const s=isAudioOnly(r);forEachMediaGroup(r,(a,o,l,u)=>{if(!a.playlists||!a.playlists.length){if(s&&o==="AUDIO"&&!a.uri)for(let c=0;c<r.playlists.length;c++){const f=r.playlists[c];if(f.attributes&&f.attributes.AUDIO&&f.attributes.AUDIO===l)return}a.playlists=[_extends({},a)]}a.playlists.forEach(function(c,f){const m=n(o,l,u,c),v=createPlaylistID(f,m);c.uri?c.resolvedUri=c.resolvedUri||resolveUrl(r.uri,c.uri):(c.uri=f===0?m:v,c.resolvedUri=c.uri),c.id=c.id||v,c.attributes=c.attributes||{},r.playlists[c.id]=c,r.playlists[c.uri]=c})}),setupMediaPlaylists(r),resolveMediaGroupUris(r)};class DateRangesStorage{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e=[]){if(this.offset_!==null||!e.length)return;const[n]=e;n.programDateTime!==void 0&&(this.offset_=n.programDateTime/1e3)}setPendingDateRanges(e=[]){if(!e.length)return;const[n]=e,s=n.startDate.getTime();this.trimProcessedDateRanges_(s),this.pendingDateRanges_=e.reduce((a,o)=>(a.set(o.id,o),a),new Map)}processDateRange(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}getDateRangesToProcess(){if(this.offset_===null)return[];const e={},n=[];this.pendingDateRanges_.forEach((s,a)=>{if(!this.processedDateRanges_.has(a)&&(s.startTime=s.startDate.getTime()/1e3-this.offset_,s.processDateRange=()=>this.processDateRange(s),n.push(s),!!s.class))if(e[s.class]){const o=e[s.class].push(s);s.classListIndex=o-1}else e[s.class]=[s],s.classListIndex=0});for(const s of n){const a=e[s.class]||[];s.endDate?s.endTime=s.endDate.getTime()/1e3-this.offset_:s.endOnNext&&a[s.classListIndex+1]?s.endTime=a[s.classListIndex+1].startTime:s.duration?s.endTime=s.startTime+s.duration:s.plannedDuration?s.endTime=s.startTime+s.plannedDuration:s.endTime=s.startTime}return n}trimProcessedDateRanges_(e){new Map(this.processedDateRanges_).forEach((s,a)=>{s.startDate.getTime()<e&&this.processedDateRanges_.delete(a)})}}const QUOTA_EXCEEDED_ERR=22,getStreamingNetworkErrorMetadata=({requestType:r,request:e,error:n,parseFailure:s})=>{const a=e.status<200||e.status>299,o=e.status>=400&&e.status<=499,l={uri:e.uri,requestType:r},u=a&&!o||s;if(n&&o)l.error=_extends({},n),l.errorType=videojs.Error.NetworkRequestFailed;else if(e.aborted)l.errorType=videojs.Error.NetworkRequestAborted;else if(e.timedout)l.erroType=videojs.Error.NetworkRequestTimeout;else if(u){const c=s?videojs.Error.NetworkBodyParserFailed:videojs.Error.NetworkBadStatus;l.errorType=c,l.status=e.status,l.headers=e.headers}return l},logFn$1=logger("CodecUtils"),getCodecs=function(r){const e=r.attributes||{};if(e.CODECS)return parseCodecs(e.CODECS)},isMaat=(r,e)=>{const n=e.attributes||{};return r&&r.mediaGroups&&r.mediaGroups.AUDIO&&n.AUDIO&&r.mediaGroups.AUDIO[n.AUDIO]},isMuxed=(r,e)=>{if(!isMaat(r,e))return!0;const n=e.attributes||{},s=r.mediaGroups.AUDIO[n.AUDIO];for(const a in s)if(!s[a].uri&&!s[a].playlists)return!0;return!1},unwrapCodecList=function(r){const e={};return r.forEach(({mediaType:n,type:s,details:a})=>{e[n]=e[n]||[],e[n].push(translateLegacyCodec(`${s}${a}`))}),Object.keys(e).forEach(function(n){if(e[n].length>1){logFn$1(`multiple ${n} codecs found as attributes: ${e[n].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),e[n]=null;return}e[n]=e[n][0]}),e},codecCount=function(r){let e=0;return r.audio&&e++,r.video&&e++,e},codecsForPlaylist=function(r,e){const n=e.attributes||{},s=unwrapCodecList(getCodecs(e)||[]);if(isMaat(r,e)&&!s.audio&&!isMuxed(r,e)){const a=unwrapCodecList(codecsFromDefault(r,n.AUDIO)||[]);a.audio&&(s.audio=a.audio)}return s},{EventTarget:EventTarget$1}=videojs,addLLHLSQueryDirectives=(r,e)=>{if(e.endList||!e.serverControl)return r;const n={};if(e.serverControl.canBlockReload){const{preloadSegment:s}=e;let a=e.mediaSequence+e.segments.length;if(s){const o=s.parts||[],l=getKnownPartCount(e)-1;l>-1&&l!==o.length-1&&(n._HLS_part=l),(l>-1||o.length)&&a--}n._HLS_msn=a}if(e.serverControl&&e.serverControl.canSkipUntil&&(n._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){const s=new window$1.URL(r);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(a){n.hasOwnProperty(a)&&s.searchParams.set(a,n[a])}),r=s.toString()}return r},updateSegment=(r,e)=>{if(!r)return e;const n=merge(r,e);if(r.preloadHints&&!e.preloadHints&&delete n.preloadHints,r.parts&&!e.parts)delete n.parts;else if(r.parts&&e.parts)for(let s=0;s<e.parts.length;s++)r.parts&&r.parts[s]&&(n.parts[s]=merge(r.parts[s],e.parts[s]));return!r.skipped&&e.skipped&&(n.skipped=!1),r.preload&&!e.preload&&(n.preload=!1),n},updateSegments=(r,e,n)=>{const s=r.slice(),a=e.slice();n=n||0;const o=[];let l;for(let u=0;u<a.length;u++){const c=s[u+n],f=a[u];c?(l=c.map||l,o.push(updateSegment(c,f))):(l&&!f.map&&(f.map=l),o.push(f))}return o},resolveSegmentUris=(r,e)=>{!r.resolvedUri&&r.uri&&(r.resolvedUri=resolveUrl(e,r.uri)),r.key&&!r.key.resolvedUri&&(r.key.resolvedUri=resolveUrl(e,r.key.uri)),r.map&&!r.map.resolvedUri&&(r.map.resolvedUri=resolveUrl(e,r.map.uri)),r.map&&r.map.key&&!r.map.key.resolvedUri&&(r.map.key.resolvedUri=resolveUrl(e,r.map.key.uri)),r.parts&&r.parts.length&&r.parts.forEach(n=>{n.resolvedUri||(n.resolvedUri=resolveUrl(e,n.uri))}),r.preloadHints&&r.preloadHints.length&&r.preloadHints.forEach(n=>{n.resolvedUri||(n.resolvedUri=resolveUrl(e,n.uri))})},getAllSegments=function(r){const e=r.segments||[],n=r.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints){for(let s=0;s<n.preloadHints.length;s++)if(n.preloadHints[s].type==="MAP")return e}n.duration=r.targetDuration,n.preload=!0,e.push(n)}return e},isPlaylistUnchanged=(r,e)=>r===e||r.segments&&e.segments&&r.segments.length===e.segments.length&&r.endList===e.endList&&r.mediaSequence===e.mediaSequence&&r.preloadSegment===e.preloadSegment,updateMain$1=(r,e,n=isPlaylistUnchanged)=>{const s=merge(r,{}),a=s.playlists[e.id];if(!a||n(a,e))return null;e.segments=getAllSegments(e);const o=merge(a,e);if(o.preloadSegment&&!e.preloadSegment&&delete o.preloadSegment,a.segments){if(e.skip){e.segments=e.segments||[];for(let l=0;l<e.skip.skippedSegments;l++)e.segments.unshift({skipped:!0})}o.segments=updateSegments(a.segments,e.segments,e.mediaSequence-a.mediaSequence)}o.segments.forEach(l=>{resolveSegmentUris(l,o.resolvedUri)});for(let l=0;l<s.playlists.length;l++)s.playlists[l].id===e.id&&(s.playlists[l]=o);return s.playlists[e.id]=o,s.playlists[e.uri]=o,forEachMediaGroup(r,(l,u,c,f)=>{if(l.playlists)for(let m=0;m<l.playlists.length;m++)e.id===l.playlists[m].id&&(l.playlists[m]=o)}),s},refreshDelay=(r,e)=>{const n=r.segments||[],s=n[n.length-1],a=s&&s.parts&&s.parts[s.parts.length-1],o=a&&a.duration||s&&s.duration;return e&&o?o*1e3:(r.partTargetDuration||r.targetDuration||10)*500},playlistMetadataPayload=(r,e,n)=>{if(!r)return;const s=[];return r.forEach(a=>{if(!a.attributes)return;const{BANDWIDTH:o,RESOLUTION:l,CODECS:u}=a.attributes;s.push({id:a.id,bandwidth:o,resolution:l,codecs:u})}),{type:e,isLive:n,renditions:s}};class PlaylistLoader extends EventTarget$1{constructor(e,n,s={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=logger("PlaylistLoader");const{withCredentials:a=!1}=s;this.src=e,this.vhs_=n,this.withCredentials=a,this.addDateRangesToTextTrack_=s.addDateRangesToTextTrack;const o=n.options_;this.customTagParsers=o&&o.customTagParsers||[],this.customTagMappers=o&&o.customTagMappers||[],this.llhls=o&&o.llhls,this.dateRangesStorage_=new DateRangesStorage,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const e=this.media();if(!e)return;this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);const n=this.dateRangesStorage_.getDateRangesToProcess();!n.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(n)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const e=this.media();let n=resolveUrl(this.main.uri,e.uri);this.llhls&&(n=addLLHLSQueryDirectives(n,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:n,withCredentials:this.withCredentials,requestType:"hls-playlist"},(s,a)=>{if(this.request){if(s)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,n,s){const{uri:a,id:o}=n;this.request=null,s&&(this.state=s),this.error={playlist:this.main.playlists[o],status:e.status,message:`HLS playlist request error at URL: ${a}.`,responseText:e.responseText,code:e.status>=500?4:2,metadata:getStreamingNetworkErrorMetadata({requestType:e.requestType,request:e,error:e.error})},this.trigger("error")}parseManifest_({url:e,manifestString:n}){try{const s=parseManifest({onwarn:({message:a})=>this.logger_(`m3u8-parser warn for ${e}: ${a}`),oninfo:({message:a})=>this.logger_(`m3u8-parser info for ${e}: ${a}`),manifestString:n,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls});return!s.playlists||!s.playlists.length||this.excludeAudioOnlyVariants(s.playlists),s}catch(s){this.error=s,this.error.metadata={errorType:videojs.Error.StreamingHlsPlaylistParserError,error:s}}}excludeAudioOnlyVariants(e){const n=s=>{const a=s.attributes||{},{width:o,height:l}=a.RESOLUTION||{};if(o&&l)return!0;const u=getCodecs(s)||[];return!!unwrapCodecList(u).video};e.some(n)&&e.forEach(s=>{n(s)||(s.excludeUntil=1/0)})}haveMetadata({playlistString:e,playlistObject:n,url:s,id:a}){this.request=null,this.state="HAVE_METADATA";const o={playlistInfo:{type:"media",uri:s}};this.trigger({type:"playlistparsestart",metadata:o});const l=n||this.parseManifest_({url:s,manifestString:e});l.lastRequest=Date.now(),setupMediaPlaylist({playlist:l,uri:s,id:a});const u=updateMain$1(this.main,l);this.targetDuration=l.partTargetDuration||l.targetDuration,this.pendingMedia_=null,u?(this.main=u,this.media_=this.main.playlists[a]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(refreshDelay(this.media(),!!u)),o.parsedPlaylist=playlistMetadataPayload(this.main.playlists,o.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:o}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),window$1.clearTimeout(this.mediaUpdateTimeout),window$1.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new DateRangesStorage,this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,n){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(window$1.clearTimeout(this.finalRenditionTimeout),n){const u=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=window$1.setTimeout(this.media.bind(this,e,!1),u);return}const s=this.state,a=!this.media_||e.id!==this.media_.id,o=this.main.playlists[e.id];if(o&&o.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,a&&(this.trigger("mediachanging"),s==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(refreshDelay(e,!0)),!a)return;if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e;const l={playlistInfo:{type:"media",uri:e.uri}};this.trigger({type:"playlistrequeststart",metadata:l}),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(u,c)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=resolveManifestRedirect(e.resolvedUri,c),u)return this.playlistRequestError(this.request,e,s);this.trigger({type:"playlistrequestcomplete",metadata:l}),this.haveMetadata({playlistString:c.responseText,url:e.uri,id:e.id}),s==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&(window$1.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(window$1.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const n=this.media();if(e){const s=n?(n.partTargetDuration||n.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=window$1.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},s);return}if(!this.started){this.start();return}n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(window$1.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=window$1.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=window$1.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}const e={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:e}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(n,s)=>{if(!this.request)return;if(this.request=null,n)return this.error={status:s.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:s.responseText,code:2,metadata:getStreamingNetworkErrorMetadata({requestType:s.requestType,request:s,error:n})},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:e}),this.src=resolveManifestRedirect(this.src,s),this.trigger({type:"playlistparsestart",metadata:e});const a=this.parseManifest_({manifestString:s.responseText,url:this.src});e.parsedPlaylist=playlistMetadataPayload(a.playlists,e.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:e}),this.setupInitialPlaylist(a)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists){this.main=e,addPropertiesToMain(this.main,this.srcUri()),e.playlists.forEach(s=>{s.segments=getAllSegments(s),s.segments.forEach(a=>{resolveSegmentUris(a,s.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}const n=this.srcUri()||window$1.location.href;this.main=mainForMedia(e,n),this.haveMetadata({playlistObject:e,url:n,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(e,n){const s=this.main,a=e.ID;let o=s.playlists.length;for(;o--;){const l=s.playlists[o];if(l.attributes["PATHWAY-ID"]===a){const u=l.resolvedUri,c=l.id;if(n){const f=this.createCloneURI_(l.resolvedUri,e),m=createPlaylistID(a,f),v=this.createCloneAttributes_(a,l.attributes),x=this.createClonePlaylist_(l,m,e,v);s.playlists[o]=x,s.playlists[m]=x,s.playlists[f]=x}else s.playlists.splice(o,1);delete s.playlists[c],delete s.playlists[u]}}this.updateOrDeleteCloneMedia(e,n)}updateOrDeleteCloneMedia(e,n){const s=this.main,a=e.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(o=>{if(!(!s.mediaGroups[o]||!s.mediaGroups[o][a])){for(const l in s.mediaGroups[o])if(l===a){for(const u in s.mediaGroups[o][l])s.mediaGroups[o][l][u].playlists.forEach((f,m)=>{const v=s.playlists[f.id],x=v.id,C=v.resolvedUri;delete s.playlists[x],delete s.playlists[C]});delete s.mediaGroups[o][l]}}}),n&&this.createClonedMediaGroups_(e)}addClonePathway(e,n={}){const s=this.main,a=s.playlists.length,o=this.createCloneURI_(n.resolvedUri,e),l=createPlaylistID(e.ID,o),u=this.createCloneAttributes_(e.ID,n.attributes),c=this.createClonePlaylist_(n,l,e,u);s.playlists[a]=c,s.playlists[l]=c,s.playlists[o]=c,this.createClonedMediaGroups_(e)}createClonedMediaGroups_(e){const n=e.ID,s=e["BASE-ID"],a=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(o=>{if(!(!a.mediaGroups[o]||a.mediaGroups[o][n]))for(const l in a.mediaGroups[o]){if(l===s)a.mediaGroups[o][n]={};else continue;for(const u in a.mediaGroups[o][l]){const c=a.mediaGroups[o][l][u];a.mediaGroups[o][n][u]=_extends({},c);const f=a.mediaGroups[o][n][u],m=this.createCloneURI_(c.resolvedUri,e);f.resolvedUri=m,f.uri=m,f.playlists=[],c.playlists.forEach((v,x)=>{const C=a.playlists[v.id],w=groupID(o,n,u),S=createPlaylistID(n,w);if(C&&!a.playlists[S]){const k=this.createClonePlaylist_(C,S,e),M=k.resolvedUri;a.playlists[S]=k,a.playlists[M]=k}f.playlists[x]=this.createClonePlaylist_(v,S,e)})}}})}createClonePlaylist_(e,n,s,a){const o=this.createCloneURI_(e.resolvedUri,s),l={resolvedUri:o,uri:o,id:n};return e.segments&&(l.segments=[]),a&&(l.attributes=a),merge(e,l)}createCloneURI_(e,n){const s=new URL(e);s.hostname=n["URI-REPLACEMENT"].HOST;const a=n["URI-REPLACEMENT"].PARAMS;for(const o of Object.keys(a))s.searchParams.set(o,a[o]);return s.href}createCloneAttributes_(e,n){const s={"PATHWAY-ID":e};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(a=>{n[a]&&(s[a]=e)}),s}getKeyIdSet(e){if(e.contentProtection){const n=new Set;for(const s in e.contentProtection){const a=e.contentProtection[s].attributes.keyId;a&&n.add(a.toLowerCase())}return n}}}const callbackWrapper=function(r,e,n,s){const a=r.responseType==="arraybuffer"?r.response:r.responseText;!e&&a&&(r.responseTime=Date.now(),r.roundTripTime=r.responseTime-r.requestTime,r.bytesReceived=a.byteLength||a.length,r.bandwidth||(r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3))),n.headers&&(r.responseHeaders=n.headers),e&&e.code==="ETIMEDOUT"&&(r.timedout=!0),!e&&!r.aborted&&n.statusCode!==200&&n.statusCode!==206&&n.statusCode!==0&&(e=new Error("XHR Failed with a response of: "+(r&&(a||r.responseText)))),s(e,r)},callAllRequestHooks=(r,e)=>{if(!r||!r.size)return;let n=e;return r.forEach(s=>{n=s(n)}),n},callAllResponseHooks=(r,e,n,s)=>{!r||!r.size||r.forEach(a=>{a(e,n,s)})},xhrFactory=function(){const r=function e(n,s){n=merge({timeout:45e3},n);const a=e.beforeRequest||videojs.Vhs.xhr.beforeRequest,o=e._requestCallbackSet||videojs.Vhs.xhr._requestCallbackSet||new Set,l=e._responseCallbackSet||videojs.Vhs.xhr._responseCallbackSet;a&&typeof a=="function"&&(videojs.log.warn("beforeRequest is deprecated, use onRequest instead."),o.add(a));const u=videojs.Vhs.xhr.original===!0?videojs.xhr:videojs.Vhs.xhr,c=callAllRequestHooks(o,n);o.delete(a);const f=u(c||n,function(v,x){return callAllResponseHooks(l,f,v,x),callbackWrapper(f,v,x,s)}),m=f.abort;return f.abort=function(){return f.aborted=!0,m.apply(f,arguments)},f.uri=n.uri,f.requestType=n.requestType,f.requestTime=Date.now(),f};return r.original=!0,r},byterangeStr=function(r){let e;const n=r.offset;return typeof r.offset=="bigint"||typeof r.length=="bigint"?e=window$1.BigInt(r.offset)+window$1.BigInt(r.length)-window$1.BigInt(1):e=r.offset+r.length-1,"bytes="+n+"-"+e},segmentXhrHeaders=function(r){const e={};return r.byterange&&(e.Range=byterangeStr(r.byterange)),e},textRange=function(r,e){return r.start(e)+"-"+r.end(e)},formatHexString=function(r,e){const n=r.toString(16);return"00".substring(0,2-n.length)+n+(e%2?" ":"")},formatAsciiString=function(r){return r>=32&&r<126?String.fromCharCode(r):"."},createTransferableMessage=function(r){const e={};return Object.keys(r).forEach(n=>{const s=r[n];isArrayBufferView(s)?e[n]={bytes:s.buffer,byteOffset:s.byteOffset,byteLength:s.byteLength}:e[n]=s}),e},initSegmentId=function(r){const e=r.byterange||{length:1/0,offset:0};return[e.length,e.offset,r.resolvedUri].join(",")},segmentKeyId=function(r){return r.resolvedUri},hexDump=r=>{const e=Array.prototype.slice.call(r),n=16;let s="",a,o;for(let l=0;l<e.length/n;l++)a=e.slice(l*n,l*n+n).map(formatHexString).join(""),o=e.slice(l*n,l*n+n).map(formatAsciiString).join(""),s+=a+" "+o+`
`;return s},tagDump=({bytes:r})=>hexDump(r),textRanges=r=>{let e="",n;for(n=0;n<r.length;n++)e+=textRange(r,n)+" ";return e};var utils=Object.freeze({__proto__:null,createTransferableMessage,initSegmentId,segmentKeyId,hexDump,tagDump,textRanges});const SEGMENT_END_FUDGE_PERCENT=.25,playerTimeToProgramTime=(r,e)=>{if(!e.dateTimeObject)return null;const n=e.videoTimingInfo.transmuxerPrependedSeconds,a=e.videoTimingInfo.transmuxedPresentationStart+n,o=r-a;return new Date(e.dateTimeObject.getTime()+o*1e3)},originalSegmentVideoDuration=r=>r.transmuxedPresentationEnd-r.transmuxedPresentationStart-r.transmuxerPrependedSeconds,findSegmentForProgramTime=(r,e)=>{let n;try{n=new Date(r)}catch{return null}if(!e||!e.segments||e.segments.length===0)return null;let s=e.segments[0];if(n<new Date(s.dateTimeObject))return null;for(let c=0;c<e.segments.length-1;c++){s=e.segments[c];const f=new Date(e.segments[c+1].dateTimeObject);if(n<f)break}const a=e.segments[e.segments.length-1],o=a.dateTimeObject,l=a.videoTimingInfo?originalSegmentVideoDuration(a.videoTimingInfo):a.duration+a.duration*SEGMENT_END_FUDGE_PERCENT,u=new Date(o.getTime()+l*1e3);return n>u?null:(n>new Date(o)&&(s=a),{segment:s,estimatedStart:s.videoTimingInfo?s.videoTimingInfo.transmuxedPresentationStart:Playlist.duration(e,e.mediaSequence+e.segments.indexOf(s)),type:s.videoTimingInfo?"accurate":"estimate"})},findSegmentForPlayerTime=(r,e)=>{if(!e||!e.segments||e.segments.length===0)return null;let n=0,s;for(let o=0;o<e.segments.length&&(s=e.segments[o],n=s.videoTimingInfo?s.videoTimingInfo.transmuxedPresentationEnd:n+s.duration,!(r<=n));o++);const a=e.segments[e.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<r)return null;if(r>n){if(r>n+a.duration*SEGMENT_END_FUDGE_PERCENT)return null;s=a}return{segment:s,estimatedStart:s.videoTimingInfo?s.videoTimingInfo.transmuxedPresentationStart:n-s.duration,type:s.videoTimingInfo?"accurate":"estimate"}},getOffsetFromTimestamp=(r,e)=>{let n,s;try{n=new Date(r),s=new Date(e)}catch{}const a=n.getTime();return(s.getTime()-a)/1e3},verifyProgramDateTimeTags=r=>{if(!r.segments||r.segments.length===0)return!1;for(let e=0;e<r.segments.length;e++)if(!r.segments[e].dateTimeObject)return!1;return!0},getProgramTime=({playlist:r,time:e=void 0,callback:n})=>{if(!n)throw new Error("getProgramTime: callback must be provided");if(!r||e===void 0)return n({message:"getProgramTime: playlist and time must be provided"});const s=findSegmentForPlayerTime(e,r);if(!s)return n({message:"valid programTime was not found"});if(s.type==="estimate")return n({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:s.estimatedStart});const a={mediaSeconds:e},o=playerTimeToProgramTime(e,s.segment);return o&&(a.programDateTime=o.toISOString()),n(null,a)},seekToProgramTime=({programTime:r,playlist:e,retryCount:n=2,seekTo:s,pauseAfterSeek:a=!0,tech:o,callback:l})=>{if(!l)throw new Error("seekToProgramTime: callback must be provided");if(typeof r>"u"||!e||!s)return l({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!o.hasStarted_)return l({message:"player must be playing a live stream to start buffering"});if(!verifyProgramDateTimeTags(e))return l({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const u=findSegmentForProgramTime(r,e);if(!u)return l({message:`${r} was not found in the stream`});const c=u.segment,f=getOffsetFromTimestamp(c.dateTimeObject,r);if(u.type==="estimate"){if(n===0)return l({message:`${r} is not buffered yet. Try again`});s(u.estimatedStart+f),o.one("seeked",()=>{seekToProgramTime({programTime:r,playlist:e,retryCount:n-1,seekTo:s,pauseAfterSeek:a,tech:o,callback:l})});return}const m=c.start+f,v=()=>l(null,o.currentTime());o.one("seeked",v),a&&o.pause(),s(m)},callbackOnCompleted=(r,e)=>{if(r.readyState===4)return e()},containerRequest=(r,e,n,s)=>{let a=[],o,l=!1;const u=function(v,x,C,w){return x.abort(),l=!0,n(v,x,C,w)},c=function(v,x){if(l)return;if(v)return v.metadata=getStreamingNetworkErrorMetadata({requestType:s,request:x,error:v}),u(v,x,"",a);const C=x.responseText.substring(a&&a.byteLength||0,x.responseText.length);if(a=concatTypedArrays(a,stringToBytes(C,!0)),o=o||getId3Offset(a),a.length<10||o&&a.length<o+2)return callbackOnCompleted(x,()=>u(v,x,"",a));const w=detectContainerForBytes(a);return w==="ts"&&a.length<188?callbackOnCompleted(x,()=>u(v,x,"",a)):!w&&a.length<376?callbackOnCompleted(x,()=>u(v,x,"",a)):u(null,x,w,a)},m=e({uri:r,beforeSend(v){v.overrideMimeType("text/plain; charset=x-user-defined"),v.addEventListener("progress",function({total:x,loaded:C}){return callbackWrapper(v,null,{statusCode:v.status},c)})}},function(v,x){return callbackWrapper(m,v,x,c)});return m},{EventTarget}=videojs,dashPlaylistUnchanged=function(r,e){if(!isPlaylistUnchanged(r,e)||r.sidx&&e.sidx&&(r.sidx.offset!==e.sidx.offset||r.sidx.length!==e.sidx.length))return!1;if(!r.sidx&&e.sidx||r.sidx&&!e.sidx||r.segments&&!e.segments||!r.segments&&e.segments)return!1;if(!r.segments&&!e.segments)return!0;for(let n=0;n<r.segments.length;n++){const s=r.segments[n],a=e.segments[n];if(s.uri!==a.uri)return!1;if(!s.byterange&&!a.byterange)continue;const o=s.byterange,l=a.byterange;if(o&&!l||!o&&l||o.offset!==l.offset||o.length!==l.length)return!1}return!0},dashGroupId=(r,e,n,s)=>{const a=s.attributes.NAME||n;return`placeholder-uri-${r}-${e}-${a}`},parseMainXml=({mainXml:r,srcUrl:e,clientOffset:n,sidxMapping:s,previousManifest:a})=>{const o=parse(r,{manifestUri:e,clientOffset:n,sidxMapping:s,previousManifest:a});return addPropertiesToMain(o,e,dashGroupId),o},removeOldMediaGroupLabels=(r,e)=>{forEachMediaGroup(r,(n,s,a,o)=>{(!e.mediaGroups[s][a]||!(o in e.mediaGroups[s][a]))&&delete r.mediaGroups[s][a][o]})},updateMain=(r,e,n)=>{let s=!0,a=merge(r,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let o=0;o<e.playlists.length;o++){const l=e.playlists[o];if(l.sidx){const c=generateSidxKey(l.sidx);n&&n[c]&&n[c].sidx&&addSidxSegmentsToPlaylist$1(l,n[c].sidx,l.sidx.resolvedUri)}const u=updateMain$1(a,l,dashPlaylistUnchanged);u&&(a=u,s=!1)}return forEachMediaGroup(e,(o,l,u,c)=>{if(o.playlists&&o.playlists.length){const f=o.playlists[0].id,m=updateMain$1(a,o.playlists[0],dashPlaylistUnchanged);m&&(a=m,c in a.mediaGroups[l][u]||(a.mediaGroups[l][u][c]=o),a.mediaGroups[l][u][c].playlists[0]=a.playlists[f],s=!1)}}),removeOldMediaGroupLabels(a,e),e.minimumUpdatePeriod!==r.minimumUpdatePeriod&&(s=!1),s?null:a},equivalentSidx=(r,e)=>(!r.map&&!e.map||!!(r.map&&e.map&&r.map.byterange.offset===e.map.byterange.offset&&r.map.byterange.length===e.map.byterange.length))&&r.uri===e.uri&&r.byterange.offset===e.byterange.offset&&r.byterange.length===e.byterange.length,compareSidxEntry=(r,e)=>{const n={};for(const s in r){const o=r[s].sidx;if(o){const l=generateSidxKey(o);if(!e[l])break;const u=e[l].sidxInfo;equivalentSidx(u,o)&&(n[l]=e[l])}}return n},filterChangedSidxMappings=(r,e)=>{let s=compareSidxEntry(r.playlists,e);return forEachMediaGroup(r,(a,o,l,u)=>{if(a.playlists&&a.playlists.length){const c=a.playlists;s=merge(s,compareSidxEntry(c,e))}}),s};class DashPlaylistLoader extends EventTarget{constructor(e,n,s={},a){super(),this.isPaused_=!0,this.mainPlaylistLoader_=a||this,a||(this.isMain_=!0);const{withCredentials:o=!1}=s;if(this.vhs_=n,this.withCredentials=o,this.addMetadataToTextTrack=s.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=logger("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}get isPaused(){return this.isPaused_}requestErrored_(e,n,s){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:n.status,message:"DASH request error at URL: "+n.uri,response:n.response,code:2,metadata:e.metadata},s&&(this.state=s),this.trigger("error"),!0}addSidxSegments_(e,n,s){const a=e.sidx&&generateSidxKey(e.sidx);if(!e.sidx||!a||this.mainPlaylistLoader_.sidxMapping_[a]){window$1.clearTimeout(this.mediaRequest_),this.mediaRequest_=window$1.setTimeout(()=>s(!1),0);return}const o=resolveManifestRedirect(e.sidx.resolvedUri),l=(c,f)=>{if(this.requestErrored_(c,f,n))return;const m=this.mainPlaylistLoader_.sidxMapping_,{requestType:v}=f;let x;try{x=parseSidx(toUint8(f.response).subarray(8))}catch(C){C.metadata=getStreamingNetworkErrorMetadata({requestType:v,request:f,parseFailure:!0}),this.requestErrored_(C,f,n);return}return m[a]={sidxInfo:e.sidx,sidx:x},addSidxSegmentsToPlaylist$1(e,x,e.sidx.resolvedUri),s(!0)},u="dash-sidx";this.request=containerRequest(o,this.vhs_.xhr,(c,f,m,v)=>{if(c)return l(c,f);if(!m||m!=="mp4"){const w=m||"unknown";return l({status:f.status,message:`Unsupported ${w} container type for sidx segment at URL: ${o}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},f)}const{offset:x,length:C}=e.sidx.byterange;if(v.length>=C+x)return l(c,{response:v.subarray(x,x+C),status:f.status,uri:f.uri});this.request=this.vhs_.xhr({uri:o,responseType:"arraybuffer",requestType:"dash-sidx",headers:segmentXhrHeaders({byterange:e.sidx.byterange})},l)},u)}dispose(){this.isPaused_=!0,this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},window$1.clearTimeout(this.minimumUpdatePeriodTimeout_),window$1.clearTimeout(this.mediaRequest_),window$1.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const n=this.state;if(typeof e=="string"){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const s=!this.media_||e.id!==this.media_.id;if(s&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,s&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}s&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,n,a=>{this.haveMetadata({startingState:n,playlist:e})}))}haveMetadata({startingState:e,playlist:n}){this.state="HAVE_METADATA",this.loadedPlaylists_[n.id]=n,window$1.clearTimeout(this.mediaRequest_),this.mediaRequest_=null,this.refreshMedia_(n.id),e==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.isPaused_=!0,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),window$1.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(window$1.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(e){this.isPaused_=!1,window$1.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const n=this.media();if(e){const s=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=window$1.setTimeout(()=>this.load(),s);return}if(!this.started){this.start();return}n&&!n.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){window$1.clearTimeout(this.mediaRequest_),this.mediaRequest_=window$1.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((e,n)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(e){const n={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:n}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(s,a)=>{if(s){const{requestType:l}=a;s.metadata=getStreamingNetworkErrorMetadata({requestType:l,request:a,error:s})}if(this.requestErrored_(s,a)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}this.trigger({type:"manifestrequestcomplete",metadata:n});const o=a.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=a.responseText,a.responseHeaders&&a.responseHeaders.date?this.mainLoaded_=Date.parse(a.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=resolveManifestRedirect(this.mainPlaylistLoader_.srcUrl,a),o){this.handleMain_(),this.syncClientServerClock_(()=>e(a,o));return}return e(a,o)})}syncClientServerClock_(e){const n=parseUTCTiming(this.mainPlaylistLoader_.mainXml_);if(n===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();if(n.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=n.value-Date.now(),e();this.request=this.vhs_.xhr({uri:resolveUrl(this.mainPlaylistLoader_.srcUrl,n.value),method:n.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(s,a)=>{if(!this.request)return;if(s){const{requestType:l}=a;return this.error.metadata=getStreamingNetworkErrorMetadata({requestType:l,request:a,error:s}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()}let o;n.method==="HEAD"?!a.responseHeaders||!a.responseHeaders.date?o=this.mainLoaded_:o=Date.parse(a.responseHeaders.date):o=Date.parse(a.responseText),this.mainPlaylistLoader_.clientOffset_=o-Date.now(),e()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){window$1.clearTimeout(this.mediaRequest_),this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main,n={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestparsestart",metadata:n});let s;try{s=parseMainXml({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e})}catch(o){this.error=o,this.error.metadata={errorType:videojs.Error.StreamingDashManifestParserError,error:o},this.trigger("error")}e&&(s=updateMain(e,s,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=s||e;const a=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(a&&a!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=a),(!e||s&&s.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(s),s){const{duration:o,endList:l}=s,u=[];s.playlists.forEach(f=>{u.push({id:f.id,bandwidth:f.attributes.BANDWIDTH,resolution:f.attributes.RESOLUTION,codecs:f.attributes.CODECS})});const c={duration:o,isLive:!l,renditions:u};n.parsedManifest=c,this.trigger({type:"manifestparsecomplete",metadata:n})}return!!s}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(window$1.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let n=e.main&&e.main.minimumUpdatePeriod;if(n===0&&(e.media()?n=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof n!="number"||n<=0){n<0&&this.logger_(`found invalid minimumUpdatePeriod of ${n}, not setting a timeout`);return}this.createMUPTimeout_(n)}createMUPTimeout_(e){const n=this.mainPlaylistLoader_;n.minimumUpdatePeriodTimeout_=window$1.setTimeout(()=>{n.minimumUpdatePeriodTimeout_=null,n.trigger("minimumUpdatePeriod"),n.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,n)=>{n&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=filterChangedSidxMappings(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,s=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const n=this.mainPlaylistLoader_.main.playlists,s=!this.media_||this.media_!==n[e];if(s?this.media_=n[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const a=()=>{this.media().endList||(this.mediaUpdateTimeout=window$1.setTimeout(()=>{this.trigger("mediaupdatetimeout"),a()},refreshDelay(this.media(),!!s)))};a()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){const n=this.mainPlaylistLoader_.main.eventStream.map(s=>({cueTime:s.start,frames:[{data:s.messageData}]}));this.addMetadataToTextTrack("EventStream",n,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(e){if(e.contentProtection){const n=new Set;for(const s in e.contentProtection){const a=e.contentProtection[s].attributes["cenc:default_KID"];a&&n.add(a.replace(/-/g,"").toLowerCase())}return n}}}var Config={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const stringToArrayBuffer=r=>{const e=new Uint8Array(new ArrayBuffer(r.length));for(let n=0;n<r.length;n++)e[n]=r.charCodeAt(n);return e.buffer},browserWorkerPolyFill=function(r){return r.on=r.addEventListener,r.off=r.removeEventListener,r},createObjectURL=function(r){try{return URL.createObjectURL(new Blob([r],{type:"application/javascript"}))}catch{const n=new BlobBuilder;return n.append(r),URL.createObjectURL(n.getBlob())}},factory=function(r){return function(){const e=createObjectURL(r),n=browserWorkerPolyFill(new Worker(e));n.objURL=e;const s=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(e),s.call(this)},n}},transform=function(r){return`var browserWorkerPolyFill = ${browserWorkerPolyFill.toString()};
browserWorkerPolyFill(self);
`+r},getWorkerString=function(r){return r.toString().replace(/^function.+?{/,"").slice(0,-1)},workerCode$1=transform(getWorkerString(function(){var r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=function(){this.init=function(){var d={};this.on=function(g,_){d[g]||(d[g]=[]),d[g]=d[g].concat(_)},this.off=function(g,_){var y;return d[g]?(y=d[g].indexOf(_),d[g]=d[g].slice(),d[g].splice(y,1),y>-1):!1},this.trigger=function(g){var _,y,T,E;if(_=d[g],!!_)if(arguments.length===2)for(T=_.length,y=0;y<T;++y)_[y].call(this,arguments[1]);else{for(E=[],y=arguments.length,y=1;y<arguments.length;++y)E.push(arguments[y]);for(T=_.length,y=0;y<T;++y)_[y].apply(this,E)}},this.dispose=function(){d={}}}};e.prototype.pipe=function(d){return this.on("data",function(g){d.push(g)}),this.on("done",function(g){d.flush(g)}),this.on("partialdone",function(g){d.partialFlush(g)}),this.on("endedtimeline",function(g){d.endTimeline(g)}),this.on("reset",function(g){d.reset(g)}),d},e.prototype.push=function(d){this.trigger("data",d)},e.prototype.flush=function(d){this.trigger("done",d)},e.prototype.partialFlush=function(d){this.trigger("partialdone",d)},e.prototype.endTimeline=function(d){this.trigger("endedtimeline",d)},e.prototype.reset=function(d){this.trigger("reset",d)};var n=e,s=Math.pow(2,32),a=function(d){var g=new DataView(d.buffer,d.byteOffset,d.byteLength),_;return g.getBigUint64?(_=g.getBigUint64(0),_<Number.MAX_SAFE_INTEGER?Number(_):_):g.getUint32(0)*s+g.getUint32(4)},o={getUint64:a,MAX_UINT32:s},l=o.MAX_UINT32,u,c,f,m,v,x,C,w,S,k,M,V,H,F,G,W,R,Q,A,P,j,X,Z,ae,pe,me,ee,ne,oe,he,ge,Ie,Me,Be,Oe,Xe;(function(){var d;if(Z={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(d in Z)Z.hasOwnProperty(d)&&(Z[d]=[d.charCodeAt(0),d.charCodeAt(1),d.charCodeAt(2),d.charCodeAt(3)]);ae=new Uint8Array([105,115,111,109]),me=new Uint8Array([97,118,99,49]),pe=new Uint8Array([0,0,0,1]),ee=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),ne=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),oe={video:ee,audio:ne},Ie=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),ge=new Uint8Array([0,0,0,0,0,0,0,0]),Me=new Uint8Array([0,0,0,0,0,0,0,0]),Be=Me,Oe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Xe=Me,he=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),u=function(d){var g=[],_=0,y,T,E;for(y=1;y<arguments.length;y++)g.push(arguments[y]);for(y=g.length;y--;)_+=g[y].byteLength;for(T=new Uint8Array(_+8),E=new DataView(T.buffer,T.byteOffset,T.byteLength),E.setUint32(0,T.byteLength),T.set(d,4),y=0,_=8;y<g.length;y++)T.set(g[y],_),_+=g[y].byteLength;return T},c=function(){return u(Z.dinf,u(Z.dref,Ie))},f=function(d){return u(Z.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,d.audioobjecttype<<3|d.samplingfrequencyindex>>>1,d.samplingfrequencyindex<<7|d.channelcount<<3,6,1,2]))},m=function(){return u(Z.ftyp,ae,pe,ae,me)},W=function(d){return u(Z.hdlr,oe[d])},v=function(d){return u(Z.mdat,d)},G=function(d){var g=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,d.duration>>>24&255,d.duration>>>16&255,d.duration>>>8&255,d.duration&255,85,196,0,0]);return d.samplerate&&(g[12]=d.samplerate>>>24&255,g[13]=d.samplerate>>>16&255,g[14]=d.samplerate>>>8&255,g[15]=d.samplerate&255),u(Z.mdhd,g)},F=function(d){return u(Z.mdia,G(d),W(d.type),C(d))},x=function(d){return u(Z.mfhd,new Uint8Array([0,0,0,0,(d&4278190080)>>24,(d&16711680)>>16,(d&65280)>>8,d&255]))},C=function(d){return u(Z.minf,d.type==="video"?u(Z.vmhd,he):u(Z.smhd,ge),c(),Q(d))},w=function(d,g){for(var _=[],y=g.length;y--;)_[y]=P(g[y]);return u.apply(null,[Z.moof,x(d)].concat(_))},S=function(d){for(var g=d.length,_=[];g--;)_[g]=V(d[g]);return u.apply(null,[Z.moov,M(4294967295)].concat(_).concat(k(d)))},k=function(d){for(var g=d.length,_=[];g--;)_[g]=j(d[g]);return u.apply(null,[Z.mvex].concat(_))},M=function(d){var g=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(d&4278190080)>>24,(d&16711680)>>16,(d&65280)>>8,d&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return u(Z.mvhd,g)},R=function(d){var g=d.samples||[],_=new Uint8Array(4+g.length),y,T;for(T=0;T<g.length;T++)y=g[T].flags,_[T+4]=y.dependsOn<<4|y.isDependedOn<<2|y.hasRedundancy;return u(Z.sdtp,_)},Q=function(d){return u(Z.stbl,A(d),u(Z.stts,Xe),u(Z.stsc,Be),u(Z.stsz,Oe),u(Z.stco,Me))},function(){var d,g;A=function(_){return u(Z.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),_.type==="video"?d(_):g(_))},d=function(_){var y=_.sps||[],T=_.pps||[],E=[],L=[],N,U;for(N=0;N<y.length;N++)E.push((y[N].byteLength&65280)>>>8),E.push(y[N].byteLength&255),E=E.concat(Array.prototype.slice.call(y[N]));for(N=0;N<T.length;N++)L.push((T[N].byteLength&65280)>>>8),L.push(T[N].byteLength&255),L=L.concat(Array.prototype.slice.call(T[N]));if(U=[Z.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(_.width&65280)>>8,_.width&255,(_.height&65280)>>8,_.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),u(Z.avcC,new Uint8Array([1,_.profileIdc,_.profileCompatibility,_.levelIdc,255].concat([y.length],E,[T.length],L))),u(Z.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],_.sarRatio){var q=_.sarRatio[0],J=_.sarRatio[1];U.push(u(Z.pasp,new Uint8Array([(q&4278190080)>>24,(q&16711680)>>16,(q&65280)>>8,q&255,(J&4278190080)>>24,(J&16711680)>>16,(J&65280)>>8,J&255])))}return u.apply(null,U)},g=function(_){return u(Z.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(_.channelcount&65280)>>8,_.channelcount&255,(_.samplesize&65280)>>8,_.samplesize&255,0,0,0,0,(_.samplerate&65280)>>8,_.samplerate&255,0,0]),f(_))}}(),H=function(d){var g=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,0,(d.duration&4278190080)>>24,(d.duration&16711680)>>16,(d.duration&65280)>>8,d.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(d.width&65280)>>8,d.width&255,0,0,(d.height&65280)>>8,d.height&255,0,0]);return u(Z.tkhd,g)},P=function(d){var g,_,y,T,E,L,N;return g=u(Z.tfhd,new Uint8Array([0,0,0,58,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),L=Math.floor(d.baseMediaDecodeTime/l),N=Math.floor(d.baseMediaDecodeTime%l),_=u(Z.tfdt,new Uint8Array([1,0,0,0,L>>>24&255,L>>>16&255,L>>>8&255,L&255,N>>>24&255,N>>>16&255,N>>>8&255,N&255])),E=92,d.type==="audio"?(y=X(d,E),u(Z.traf,g,_,y)):(T=R(d),y=X(d,T.length+E),u(Z.traf,g,_,y,T))},V=function(d){return d.duration=d.duration||4294967295,u(Z.trak,H(d),F(d))},j=function(d){var g=new Uint8Array([0,0,0,0,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return d.type!=="video"&&(g[g.length-1]=0),u(Z.trex,g)},function(){var d,g,_;_=function(y,T){var E=0,L=0,N=0,U=0;return y.length&&(y[0].duration!==void 0&&(E=1),y[0].size!==void 0&&(L=2),y[0].flags!==void 0&&(N=4),y[0].compositionTimeOffset!==void 0&&(U=8)),[0,0,E|L|N|U,1,(y.length&4278190080)>>>24,(y.length&16711680)>>>16,(y.length&65280)>>>8,y.length&255,(T&4278190080)>>>24,(T&16711680)>>>16,(T&65280)>>>8,T&255]},g=function(y,T){var E,L,N,U,q,J;for(U=y.samples||[],T+=20+16*U.length,N=_(U,T),L=new Uint8Array(N.length+U.length*16),L.set(N),E=N.length,J=0;J<U.length;J++)q=U[J],L[E++]=(q.duration&4278190080)>>>24,L[E++]=(q.duration&16711680)>>>16,L[E++]=(q.duration&65280)>>>8,L[E++]=q.duration&255,L[E++]=(q.size&4278190080)>>>24,L[E++]=(q.size&16711680)>>>16,L[E++]=(q.size&65280)>>>8,L[E++]=q.size&255,L[E++]=q.flags.isLeading<<2|q.flags.dependsOn,L[E++]=q.flags.isDependedOn<<6|q.flags.hasRedundancy<<4|q.flags.paddingValue<<1|q.flags.isNonSyncSample,L[E++]=q.flags.degradationPriority&61440,L[E++]=q.flags.degradationPriority&15,L[E++]=(q.compositionTimeOffset&4278190080)>>>24,L[E++]=(q.compositionTimeOffset&16711680)>>>16,L[E++]=(q.compositionTimeOffset&65280)>>>8,L[E++]=q.compositionTimeOffset&255;return u(Z.trun,L)},d=function(y,T){var E,L,N,U,q,J;for(U=y.samples||[],T+=20+8*U.length,N=_(U,T),E=new Uint8Array(N.length+U.length*8),E.set(N),L=N.length,J=0;J<U.length;J++)q=U[J],E[L++]=(q.duration&4278190080)>>>24,E[L++]=(q.duration&16711680)>>>16,E[L++]=(q.duration&65280)>>>8,E[L++]=q.duration&255,E[L++]=(q.size&4278190080)>>>24,E[L++]=(q.size&16711680)>>>16,E[L++]=(q.size&65280)>>>8,E[L++]=q.size&255;return u(Z.trun,E)},X=function(y,T){return y.type==="audio"?d(y,T):g(y,T)}}();var Ze={ftyp:m,mdat:v,moof:w,moov:S,initSegment:function(d){var g=m(),_=S(d),y;return y=new Uint8Array(g.byteLength+_.byteLength),y.set(g),y.set(_,g.byteLength),y}},ze=function(d){var g,_,y=[],T=[];for(T.byteLength=0,T.nalCount=0,T.duration=0,y.byteLength=0,g=0;g<d.length;g++)_=d[g],_.nalUnitType==="access_unit_delimiter_rbsp"?(y.length&&(y.duration=_.dts-y.dts,T.byteLength+=y.byteLength,T.nalCount+=y.length,T.duration+=y.duration,T.push(y)),y=[_],y.byteLength=_.data.byteLength,y.pts=_.pts,y.dts=_.dts):(_.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(y.keyFrame=!0),y.duration=_.dts-y.dts,y.byteLength+=_.data.byteLength,y.push(_));return T.length&&(!y.duration||y.duration<=0)&&(y.duration=T[T.length-1].duration),T.byteLength+=y.byteLength,T.nalCount+=y.length,T.duration+=y.duration,T.push(y),T},nt=function(d){var g,_,y=[],T=[];for(y.byteLength=0,y.nalCount=0,y.duration=0,y.pts=d[0].pts,y.dts=d[0].dts,T.byteLength=0,T.nalCount=0,T.duration=0,T.pts=d[0].pts,T.dts=d[0].dts,g=0;g<d.length;g++)_=d[g],_.keyFrame?(y.length&&(T.push(y),T.byteLength+=y.byteLength,T.nalCount+=y.nalCount,T.duration+=y.duration),y=[_],y.nalCount=_.length,y.byteLength=_.byteLength,y.pts=_.pts,y.dts=_.dts,y.duration=_.duration):(y.duration+=_.duration,y.nalCount+=_.length,y.byteLength+=_.byteLength,y.push(_));return T.length&&y.duration<=0&&(y.duration=T[T.length-1].duration),T.byteLength+=y.byteLength,T.nalCount+=y.nalCount,T.duration+=y.duration,T.push(y),T},at=function(d){var g;return!d[0][0].keyFrame&&d.length>1&&(g=d.shift(),d.byteLength-=g.byteLength,d.nalCount-=g.nalCount,d[0][0].dts=g.dts,d[0][0].pts=g.pts,d[0][0].duration+=g.duration),d},ot=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},z=function(d,g){var _=ot();return _.dataOffset=g,_.compositionTimeOffset=d.pts-d.dts,_.duration=d.duration,_.size=4*d.length,_.size+=d.byteLength,d.keyFrame&&(_.flags.dependsOn=2,_.flags.isNonSyncSample=0),_},Y=function(d,g){var _,y,T,E,L,N=g||0,U=[];for(_=0;_<d.length;_++)for(E=d[_],y=0;y<E.length;y++)L=E[y],T=z(L,N),N+=T.size,U.push(T);return U},te=function(d){var g,_,y,T,E,L,N=0,U=d.byteLength,q=d.nalCount,J=U+4*q,se=new Uint8Array(J),Ee=new DataView(se.buffer);for(g=0;g<d.length;g++)for(T=d[g],_=0;_<T.length;_++)for(E=T[_],y=0;y<E.length;y++)L=E[y],Ee.setUint32(N,L.data.byteLength),N+=4,se.set(L.data,N),N+=L.data.byteLength;return se},ye=function(d,g){var _,y=g||0,T=[];return _=z(d,y),T.push(_),T},ce=function(d){var g,_,y=0,T=d.byteLength,E=d.length,L=T+4*E,N=new Uint8Array(L),U=new DataView(N.buffer);for(g=0;g<d.length;g++)_=d[g],U.setUint32(y,_.data.byteLength),y+=4,N.set(_.data,y),y+=_.data.byteLength;return N},_e={groupNalsIntoFrames:ze,groupFramesIntoGops:nt,extendFirstKeyFrame:at,generateSampleTable:Y,concatenateNalData:te,generateSampleTableForFrame:ye,concatenateNalDataForFrame:ce},be=[33,16,5,32,164,27],ve=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],fe=function(d){for(var g=[];d--;)g.push(0);return g},ue=function(d){return Object.keys(d).reduce(function(g,_){return g[_]=new Uint8Array(d[_].reduce(function(y,T){return y.concat(T)},[])),g},{})},we,Se=function(){if(!we){var d={96e3:[be,[227,64],fe(154),[56]],88200:[be,[231],fe(170),[56]],64e3:[be,[248,192],fe(240),[56]],48e3:[be,[255,192],fe(268),[55,148,128],fe(54),[112]],44100:[be,[255,192],fe(268),[55,163,128],fe(84),[112]],32e3:[be,[255,192],fe(268),[55,234],fe(226),[112]],24e3:[be,[255,192],fe(268),[55,255,128],fe(268),[111,112],fe(126),[224]],16e3:[be,[255,192],fe(268),[55,255,128],fe(268),[111,255],fe(269),[223,108],fe(195),[1,192]],12e3:[ve,fe(268),[3,127,248],fe(268),[6,255,240],fe(268),[13,255,224],fe(268),[27,253,128],fe(259),[56]],11025:[ve,fe(268),[3,127,248],fe(268),[6,255,240],fe(268),[13,255,224],fe(268),[27,255,192],fe(268),[55,175,128],fe(108),[112]],8e3:[ve,fe(268),[3,121,16],fe(47),[7]]};we=ue(d)}return we},De=9e4,Pe,Ne,He,je,it,Je,rt;Pe=function(d){return d*De},Ne=function(d,g){return d*g},He=function(d){return d/De},je=function(d,g){return d/g},it=function(d,g){return Pe(je(d,g))},Je=function(d,g){return Ne(He(d),g)},rt=function(d,g,_){return He(_?d:d-g)};var Fe={ONE_SECOND_IN_TS:De,secondsToVideoTs:Pe,secondsToAudioTs:Ne,videoTsToSeconds:He,audioTsToSeconds:je,audioTsToVideoTs:it,videoTsToAudioTs:Je,metadataTsToSeconds:rt},yt=Se,_t=Fe,st=function(d){var g,_,y=0;for(g=0;g<d.length;g++)_=d[g],y+=_.data.byteLength;return y},lt=function(d,g,_,y){var T,E=0,L=0,N=0,U=0,q,J,se;if(g.length&&(T=_t.audioTsToVideoTs(d.baseMediaDecodeTime,d.samplerate),E=Math.ceil(_t.ONE_SECOND_IN_TS/(d.samplerate/1024)),_&&y&&(L=T-Math.max(_,y),N=Math.floor(L/E),U=N*E),!(N<1||U>_t.ONE_SECOND_IN_TS/2))){for(q=yt()[d.samplerate],q||(q=g[0].data),J=0;J<N;J++)se=g[0],g.splice(0,0,{data:q,dts:se.dts-E,pts:se.pts-E});return d.baseMediaDecodeTime-=Math.floor(_t.videoTsToAudioTs(U,d.samplerate)),U}},ft=function(d,g,_){return g.minSegmentDts>=_?d:(g.minSegmentDts=1/0,d.filter(function(y){return y.dts>=_?(g.minSegmentDts=Math.min(g.minSegmentDts,y.dts),g.minSegmentPts=g.minSegmentDts,!0):!1}))},ti=function(d){var g,_,y=[];for(g=0;g<d.length;g++)_=d[g],y.push({size:_.data.byteLength,duration:1024});return y},Ot=function(d){var g,_,y=0,T=new Uint8Array(st(d));for(g=0;g<d.length;g++)_=d[g],T.set(_.data,y),y+=_.data.byteLength;return T},qt={prefixWithSilence:lt,trimAdtsFramesByEarliestDts:ft,generateSampleTable:ti,concatenateFrameData:Ot},Si=Fe.ONE_SECOND_IN_TS,I=function(d,g){typeof g.pts=="number"&&(d.timelineStartInfo.pts===void 0&&(d.timelineStartInfo.pts=g.pts),d.minSegmentPts===void 0?d.minSegmentPts=g.pts:d.minSegmentPts=Math.min(d.minSegmentPts,g.pts),d.maxSegmentPts===void 0?d.maxSegmentPts=g.pts:d.maxSegmentPts=Math.max(d.maxSegmentPts,g.pts)),typeof g.dts=="number"&&(d.timelineStartInfo.dts===void 0&&(d.timelineStartInfo.dts=g.dts),d.minSegmentDts===void 0?d.minSegmentDts=g.dts:d.minSegmentDts=Math.min(d.minSegmentDts,g.dts),d.maxSegmentDts===void 0?d.maxSegmentDts=g.dts:d.maxSegmentDts=Math.max(d.maxSegmentDts,g.dts))},O=function(d){delete d.minSegmentDts,delete d.maxSegmentDts,delete d.minSegmentPts,delete d.maxSegmentPts},K=function(d,g){var _,y,T=d.minSegmentDts;return g||(T-=d.timelineStartInfo.dts),_=d.timelineStartInfo.baseMediaDecodeTime,_+=T,_=Math.max(0,_),d.type==="audio"&&(y=d.samplerate/Si,_*=y,_=Math.floor(_)),_},ie={clearDtsInfo:O,calculateTrackBaseMediaDecodeTime:K,collectDtsInfo:I},Te=4,Le=128,xe=function(d){for(var g=0,_={payloadType:-1,payloadSize:0},y=0,T=0;g<d.byteLength&&d[g]!==Le;){for(;d[g]===255;)y+=255,g++;for(y+=d[g++];d[g]===255;)T+=255,g++;if(T+=d[g++],!_.payload&&y===Te){var E=String.fromCharCode(d[g+3],d[g+4],d[g+5],d[g+6]);if(E==="GA94"){_.payloadType=y,_.payloadSize=T,_.payload=d.subarray(g,g+T);break}else _.payload=void 0}g+=T,y=0,T=0}return _},et=function(d){return d.payload[0]!==181||(d.payload[1]<<8|d.payload[2])!==49||String.fromCharCode(d.payload[3],d.payload[4],d.payload[5],d.payload[6])!=="GA94"||d.payload[7]!==3?null:d.payload.subarray(8,d.payload.length-1)},vt=function(d,g){var _=[],y,T,E,L;if(!(g[0]&64))return _;for(T=g[0]&31,y=0;y<T;y++)E=y*3,L={type:g[E+2]&3,pts:d},g[E+2]&4&&(L.ccData=g[E+3]<<8|g[E+4],_.push(L));return _},ct=function(d){for(var g=d.byteLength,_=[],y=1,T,E;y<g-2;)d[y]===0&&d[y+1]===0&&d[y+2]===3?(_.push(y+2),y+=2):y++;if(_.length===0)return d;T=g-_.length,E=new Uint8Array(T);var L=0;for(y=0;y<T;L++,y++)L===_[0]&&(L++,_.shift()),E[y]=d[L];return E},pt={parseSei:xe,parseUserData:et,parseCaptionPackets:vt,discardEmulationPreventionBytes:ct,USER_DATA_REGISTERED_ITU_T_T35:Te},Tt=n,dt=pt,Ye=function(d){d=d||{},Ye.prototype.init.call(this),this.parse708captions_=typeof d.parse708captions=="boolean"?d.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new Ke(0,0),new Ke(0,1),new Ke(1,0),new Ke(1,1)],this.parse708captions_&&(this.cc708Stream_=new Ve({captionServices:d.captionServices})),this.reset(),this.ccStreams_.forEach(function(g){g.on("data",this.trigger.bind(this,"data")),g.on("partialdone",this.trigger.bind(this,"partialdone")),g.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Ye.prototype=new Tt,Ye.prototype.push=function(d){var g,_,y;if(d.nalUnitType==="sei_rbsp"&&(g=dt.parseSei(d.escapedRBSP),!!g.payload&&g.payloadType===dt.USER_DATA_REGISTERED_ITU_T_T35&&(_=dt.parseUserData(g),!!_))){if(d.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(d.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}y=dt.parseCaptionPackets(d.pts,_),this.captionPackets_=this.captionPackets_.concat(y),this.latestDts_!==d.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=d.dts}},Ye.prototype.flushCCStreams=function(d){this.ccStreams_.forEach(function(g){return d==="flush"?g.flush():g.partialFlush()},this)},Ye.prototype.flushStream=function(d){if(!this.captionPackets_.length){this.flushCCStreams(d);return}this.captionPackets_.forEach(function(g,_){g.presortIndex=_}),this.captionPackets_.sort(function(g,_){return g.pts===_.pts?g.presortIndex-_.presortIndex:g.pts-_.pts}),this.captionPackets_.forEach(function(g){g.type<2?this.dispatchCea608Packet(g):this.dispatchCea708Packet(g)},this),this.captionPackets_.length=0,this.flushCCStreams(d)},Ye.prototype.flush=function(){return this.flushStream("flush")},Ye.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Ye.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(d){d.reset()})},Ye.prototype.dispatchCea608Packet=function(d){this.setsTextOrXDSActive(d)?this.activeCea608Channel_[d.type]=null:this.setsChannel1Active(d)?this.activeCea608Channel_[d.type]=0:this.setsChannel2Active(d)&&(this.activeCea608Channel_[d.type]=1),this.activeCea608Channel_[d.type]!==null&&this.ccStreams_[(d.type<<1)+this.activeCea608Channel_[d.type]].push(d)},Ye.prototype.setsChannel1Active=function(d){return(d.ccData&30720)===4096},Ye.prototype.setsChannel2Active=function(d){return(d.ccData&30720)===6144},Ye.prototype.setsTextOrXDSActive=function(d){return(d.ccData&28928)===256||(d.ccData&30974)===4138||(d.ccData&30974)===6186},Ye.prototype.dispatchCea708Packet=function(d){this.parse708captions_&&this.cc708Stream_.push(d)};var mt={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},wt=function(d){var g=mt[d]||d;return d&4096&&d===g?"":String.fromCharCode(g)},xt=function(d){return 32<=d&&d<=127||160<=d&&d<=255},We=function(d){this.windowNum=d,this.reset()};We.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},We.prototype.getText=function(){return this.rows.join(`
`)},We.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},We.prototype.newLine=function(d){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(d),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},We.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},We.prototype.addText=function(d){this.rows[this.rowIdx]+=d},We.prototype.backspace=function(){if(!this.isEmpty()){var d=this.rows[this.rowIdx];this.rows[this.rowIdx]=d.substr(0,d.length-1)}};var Pt=function(d,g,_){this.serviceNum=d,this.text="",this.currentWindow=new We(-1),this.windows=[],this.stream=_,typeof g=="string"&&this.createTextDecoder(g)};Pt.prototype.init=function(d,g){this.startPts=d;for(var _=0;_<8;_++)this.windows[_]=new We(_),typeof g=="function"&&(this.windows[_].beforeRowOverflow=g)},Pt.prototype.setCurrentWindow=function(d){this.currentWindow=this.windows[d]},Pt.prototype.createTextDecoder=function(d){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(d)}catch(g){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+d+" encoding. "+g})}};var Ve=function(d){d=d||{},Ve.prototype.init.call(this);var g=this,_=d.captionServices||{},y={},T;Object.keys(_).forEach(E=>{T=_[E],/^SERVICE/.test(E)&&(y[E]=T.encoding)}),this.serviceEncodings=y,this.current708Packet=null,this.services={},this.push=function(E){E.type===3?(g.new708Packet(),g.add708Bytes(E)):(g.current708Packet===null&&g.new708Packet(),g.add708Bytes(E))}};Ve.prototype=new Tt,Ve.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Ve.prototype.add708Bytes=function(d){var g=d.ccData,_=g>>>8,y=g&255;this.current708Packet.ptsVals.push(d.pts),this.current708Packet.data.push(_),this.current708Packet.data.push(y)},Ve.prototype.push708Packet=function(){var d=this.current708Packet,g=d.data,_=null,y=null,T=0,E=g[T++];for(d.seq=E>>6,d.sizeCode=E&63;T<g.length;T++)E=g[T++],_=E>>5,y=E&31,_===7&&y>0&&(E=g[T++],_=E),this.pushServiceBlock(_,T,y),y>0&&(T+=y-1)},Ve.prototype.pushServiceBlock=function(d,g,_){var y,T=g,E=this.current708Packet.data,L=this.services[d];for(L||(L=this.initService(d,T));T<g+_&&T<E.length;T++)y=E[T],xt(y)?T=this.handleText(T,L):y===24?T=this.multiByteCharacter(T,L):y===16?T=this.extendedCommands(T,L):128<=y&&y<=135?T=this.setCurrentWindow(T,L):152<=y&&y<=159?T=this.defineWindow(T,L):y===136?T=this.clearWindows(T,L):y===140?T=this.deleteWindows(T,L):y===137?T=this.displayWindows(T,L):y===138?T=this.hideWindows(T,L):y===139?T=this.toggleWindows(T,L):y===151?T=this.setWindowAttributes(T,L):y===144?T=this.setPenAttributes(T,L):y===145?T=this.setPenColor(T,L):y===146?T=this.setPenLocation(T,L):y===143?L=this.reset(T,L):y===8?L.currentWindow.backspace():y===12?L.currentWindow.clearText():y===13?L.currentWindow.pendingNewLine=!0:y===14?L.currentWindow.clearText():y===141&&T++},Ve.prototype.extendedCommands=function(d,g){var _=this.current708Packet.data,y=_[++d];return xt(y)&&(d=this.handleText(d,g,{isExtended:!0})),d},Ve.prototype.getPts=function(d){return this.current708Packet.ptsVals[Math.floor(d/2)]},Ve.prototype.initService=function(d,g){var y="SERVICE"+d,_=this,y,T;return y in this.serviceEncodings&&(T=this.serviceEncodings[y]),this.services[d]=new Pt(d,T,_),this.services[d].init(this.getPts(g),function(E){_.flushDisplayed(E,_.services[d])}),this.services[d]},Ve.prototype.handleText=function(d,g,_){var y=_&&_.isExtended,T=_&&_.isMultiByte,E=this.current708Packet.data,L=y?4096:0,N=E[d],U=E[d+1],q=g.currentWindow,J,se;function Ee(de){return de.map(Re=>("0"+(Re&255).toString(16)).slice(-2)).join("")}if(T?(se=[N,U],d++):se=[N],g.textDecoder_&&!y)J=g.textDecoder_.decode(new Uint8Array(se));else if(T){const de=Ee(se);J=String.fromCharCode(parseInt(de,16))}else J=wt(L|N);return q.pendingNewLine&&!q.isEmpty()&&q.newLine(this.getPts(d)),q.pendingNewLine=!1,q.addText(J),d},Ve.prototype.multiByteCharacter=function(d,g){var _=this.current708Packet.data,y=_[d+1],T=_[d+2];return xt(y)&&xt(T)&&(d=this.handleText(++d,g,{isMultiByte:!0})),d},Ve.prototype.setCurrentWindow=function(d,g){var _=this.current708Packet.data,y=_[d],T=y&7;return g.setCurrentWindow(T),d},Ve.prototype.defineWindow=function(d,g){var _=this.current708Packet.data,y=_[d],T=y&7;g.setCurrentWindow(T);var E=g.currentWindow;return y=_[++d],E.visible=(y&32)>>5,E.rowLock=(y&16)>>4,E.columnLock=(y&8)>>3,E.priority=y&7,y=_[++d],E.relativePositioning=(y&128)>>7,E.anchorVertical=y&127,y=_[++d],E.anchorHorizontal=y,y=_[++d],E.anchorPoint=(y&240)>>4,E.rowCount=y&15,y=_[++d],E.columnCount=y&63,y=_[++d],E.windowStyle=(y&56)>>3,E.penStyle=y&7,E.virtualRowCount=E.rowCount+1,d},Ve.prototype.setWindowAttributes=function(d,g){var _=this.current708Packet.data,y=_[d],T=g.currentWindow.winAttr;return y=_[++d],T.fillOpacity=(y&192)>>6,T.fillRed=(y&48)>>4,T.fillGreen=(y&12)>>2,T.fillBlue=y&3,y=_[++d],T.borderType=(y&192)>>6,T.borderRed=(y&48)>>4,T.borderGreen=(y&12)>>2,T.borderBlue=y&3,y=_[++d],T.borderType+=(y&128)>>5,T.wordWrap=(y&64)>>6,T.printDirection=(y&48)>>4,T.scrollDirection=(y&12)>>2,T.justify=y&3,y=_[++d],T.effectSpeed=(y&240)>>4,T.effectDirection=(y&12)>>2,T.displayEffect=y&3,d},Ve.prototype.flushDisplayed=function(d,g){for(var _=[],y=0;y<8;y++)g.windows[y].visible&&!g.windows[y].isEmpty()&&_.push(g.windows[y].getText());g.endPts=d,g.text=_.join(`

`),this.pushCaption(g),g.startPts=d},Ve.prototype.pushCaption=function(d){d.text!==""&&(this.trigger("data",{startPts:d.startPts,endPts:d.endPts,text:d.text,stream:"cc708_"+d.serviceNum}),d.text="",d.startPts=d.endPts)},Ve.prototype.displayWindows=function(d,g){var _=this.current708Packet.data,y=_[++d],T=this.getPts(d);this.flushDisplayed(T,g);for(var E=0;E<8;E++)y&1<<E&&(g.windows[E].visible=1);return d},Ve.prototype.hideWindows=function(d,g){var _=this.current708Packet.data,y=_[++d],T=this.getPts(d);this.flushDisplayed(T,g);for(var E=0;E<8;E++)y&1<<E&&(g.windows[E].visible=0);return d},Ve.prototype.toggleWindows=function(d,g){var _=this.current708Packet.data,y=_[++d],T=this.getPts(d);this.flushDisplayed(T,g);for(var E=0;E<8;E++)y&1<<E&&(g.windows[E].visible^=1);return d},Ve.prototype.clearWindows=function(d,g){var _=this.current708Packet.data,y=_[++d],T=this.getPts(d);this.flushDisplayed(T,g);for(var E=0;E<8;E++)y&1<<E&&g.windows[E].clearText();return d},Ve.prototype.deleteWindows=function(d,g){var _=this.current708Packet.data,y=_[++d],T=this.getPts(d);this.flushDisplayed(T,g);for(var E=0;E<8;E++)y&1<<E&&g.windows[E].reset();return d},Ve.prototype.setPenAttributes=function(d,g){var _=this.current708Packet.data,y=_[d],T=g.currentWindow.penAttr;return y=_[++d],T.textTag=(y&240)>>4,T.offset=(y&12)>>2,T.penSize=y&3,y=_[++d],T.italics=(y&128)>>7,T.underline=(y&64)>>6,T.edgeType=(y&56)>>3,T.fontStyle=y&7,d},Ve.prototype.setPenColor=function(d,g){var _=this.current708Packet.data,y=_[d],T=g.currentWindow.penColor;return y=_[++d],T.fgOpacity=(y&192)>>6,T.fgRed=(y&48)>>4,T.fgGreen=(y&12)>>2,T.fgBlue=y&3,y=_[++d],T.bgOpacity=(y&192)>>6,T.bgRed=(y&48)>>4,T.bgGreen=(y&12)>>2,T.bgBlue=y&3,y=_[++d],T.edgeRed=(y&48)>>4,T.edgeGreen=(y&12)>>2,T.edgeBlue=y&3,d},Ve.prototype.setPenLocation=function(d,g){var _=this.current708Packet.data,y=_[d],T=g.currentWindow.penLoc;return g.currentWindow.pendingNewLine=!0,y=_[++d],T.row=y&15,y=_[++d],T.column=y&63,d},Ve.prototype.reset=function(d,g){var _=this.getPts(d);return this.flushDisplayed(_,g),this.initService(g.serviceNum,d)};var ii={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Lt=function(d){return d===null?"":(d=ii[d]||d,String.fromCharCode(d))},Mt=14,An=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Rt=function(){for(var d=[],g=Mt+1;g--;)d.push({text:"",indent:0,offset:0});return d},Ke=function(d,g){Ke.prototype.init.call(this),this.field_=d||0,this.dataChannel_=g||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(_){var y,T,E,L,N;if(y=_.ccData&32639,y===this.lastControlCode_){this.lastControlCode_=null;return}if((y&61440)===4096?this.lastControlCode_=y:y!==this.PADDING_&&(this.lastControlCode_=null),E=y>>>8,L=y&255,y!==this.PADDING_)if(y===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(y===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(_.pts),this.flushDisplayed(_.pts),T=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=T,this.startPts_=_.pts;else if(y===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(_.pts);else if(y===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(_.pts);else if(y===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(_.pts);else if(y===this.CARRIAGE_RETURN_)this.clearFormatting(_.pts),this.flushDisplayed(_.pts),this.shiftRowsUp_(),this.startPts_=_.pts;else if(y===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(y===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(_.pts),this.displayed_=Rt();else if(y===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Rt();else if(y===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(_.pts),this.displayed_=Rt()),this.mode_="paintOn",this.startPts_=_.pts;else if(this.isSpecialCharacter(E,L))E=(E&3)<<8,N=Lt(E|L),this[this.mode_](_.pts,N),this.column_++;else if(this.isExtCharacter(E,L))this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),E=(E&3)<<8,N=Lt(E|L),this[this.mode_](_.pts,N),this.column_++;else if(this.isMidRowCode(E,L))this.clearFormatting(_.pts),this[this.mode_](_.pts," "),this.column_++,(L&14)===14&&this.addFormatting(_.pts,["i"]),(L&1)===1&&this.addFormatting(_.pts,["u"]);else if(this.isOffsetControlCode(E,L)){const q=L&3;this.nonDisplayed_[this.row_].offset=q,this.column_+=q}else if(this.isPAC(E,L)){var U=An.indexOf(y&7968);if(this.mode_==="rollUp"&&(U-this.rollUpRows_+1<0&&(U=this.rollUpRows_-1),this.setRollUp(_.pts,U)),U!==this.row_&&U>=0&&U<=14&&(this.clearFormatting(_.pts),this.row_=U),L&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(_.pts,["u"]),(y&16)===16){const q=(y&14)>>1;this.column_=q*4,this.nonDisplayed_[this.row_].indent+=q}this.isColorPAC(L)&&(L&14)===14&&this.addFormatting(_.pts,["i"])}else this.isNormalChar(E)&&(L===0&&(L=null),N=Lt(E),N+=Lt(L),this[this.mode_](_.pts,N),this.column_+=N.length)}};Ke.prototype=new Tt,Ke.prototype.flushDisplayed=function(d){const g=y=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+y+"."})},_=[];this.displayed_.forEach((y,T)=>{if(y&&y.text&&y.text.length){try{y.text=y.text.trim()}catch{g(T)}y.text.length&&_.push({text:y.text,line:T+1,position:10+Math.min(70,y.indent*10)+y.offset*2.5})}else y==null&&g(T)}),_.length&&this.trigger("data",{startPts:this.startPts_,endPts:d,content:_,stream:this.name_})},Ke.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Rt(),this.nonDisplayed_=Rt(),this.lastControlCode_=null,this.column_=0,this.row_=Mt,this.rollUpRows_=2,this.formatting_=[]},Ke.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},Ke.prototype.isSpecialCharacter=function(d,g){return d===this.EXT_&&g>=48&&g<=63},Ke.prototype.isExtCharacter=function(d,g){return(d===this.EXT_+1||d===this.EXT_+2)&&g>=32&&g<=63},Ke.prototype.isMidRowCode=function(d,g){return d===this.EXT_&&g>=32&&g<=47},Ke.prototype.isOffsetControlCode=function(d,g){return d===this.OFFSET_&&g>=33&&g<=35},Ke.prototype.isPAC=function(d,g){return d>=this.BASE_&&d<this.BASE_+8&&g>=64&&g<=127},Ke.prototype.isColorPAC=function(d){return d>=64&&d<=79||d>=96&&d<=127},Ke.prototype.isNormalChar=function(d){return d>=32&&d<=127},Ke.prototype.setRollUp=function(d,g){if(this.mode_!=="rollUp"&&(this.row_=Mt,this.mode_="rollUp",this.flushDisplayed(d),this.nonDisplayed_=Rt(),this.displayed_=Rt()),g!==void 0&&g!==this.row_)for(var _=0;_<this.rollUpRows_;_++)this.displayed_[g-_]=this.displayed_[this.row_-_],this.displayed_[this.row_-_]={text:"",indent:0,offset:0};g===void 0&&(g=this.row_),this.topRow_=g-this.rollUpRows_+1},Ke.prototype.addFormatting=function(d,g){this.formatting_=this.formatting_.concat(g);var _=g.reduce(function(y,T){return y+"<"+T+">"},"");this[this.mode_](d,_)},Ke.prototype.clearFormatting=function(d){if(this.formatting_.length){var g=this.formatting_.reverse().reduce(function(_,y){return _+"</"+y+">"},"");this.formatting_=[],this[this.mode_](d,g)}},Ke.prototype.popOn=function(d,g){var _=this.nonDisplayed_[this.row_].text;_+=g,this.nonDisplayed_[this.row_].text=_},Ke.prototype.rollUp=function(d,g){var _=this.displayed_[this.row_].text;_+=g,this.displayed_[this.row_].text=_},Ke.prototype.shiftRowsUp_=function(){var d;for(d=0;d<this.topRow_;d++)this.displayed_[d]={text:"",indent:0,offset:0};for(d=this.row_+1;d<Mt+1;d++)this.displayed_[d]={text:"",indent:0,offset:0};for(d=this.topRow_;d<this.row_;d++)this.displayed_[d]=this.displayed_[d+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},Ke.prototype.paintOn=function(d,g){var _=this.displayed_[this.row_].text;_+=g,this.displayed_[this.row_].text=_};var xi={CaptionStream:Ye,Cea608Stream:Ke,Cea708Stream:Ve},ni={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Gi=n,Dn=8589934592,In=4294967296,Wi="shared",Ei=function(d,g){var _=1;for(d>g&&(_=-1);Math.abs(g-d)>In;)d+=_*Dn;return d},Ci=function(d){var g,_;Ci.prototype.init.call(this),this.type_=d||Wi,this.push=function(y){if(y.type==="metadata"){this.trigger("data",y);return}this.type_!==Wi&&y.type!==this.type_||(_===void 0&&(_=y.dts),y.dts=Ei(y.dts,_),y.pts=Ei(y.pts,_),g=y.dts,this.trigger("data",y))},this.flush=function(){_=g,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){_=void 0,g=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Ci.prototype=new Gi;var Ki={TimestampRolloverStream:Ci,handleRollover:Ei},kn=(d,g,_)=>{if(!d)return-1;for(var y=_;y<d.length;y++)if(d[y]===g)return y;return-1},Pn={typedArrayIndexOf:kn},ri=Pn.typedArrayIndexOf,zt={Utf8:3},wi=function(d,g,_){var y,T="";for(y=g;y<_;y++)T+="%"+("00"+d[y].toString(16)).slice(-2);return T},Gt=function(d,g,_){return decodeURIComponent(wi(d,g,_))},Nt=function(d,g,_){return unescape(wi(d,g,_))},Bt=function(d){return d[0]<<21|d[1]<<14|d[2]<<7|d[3]},Wt={APIC:function(d){var g=1,_,y,T="-->";d.data[0]===zt.Utf8&&(_=ri(d.data,0,g),!(_<0)&&(d.mimeType=Nt(d.data,g,_),g=_+1,d.pictureType=d.data[g],g++,y=ri(d.data,0,g),!(y<0)&&(d.description=Gt(d.data,g,y),g=y+1,d.mimeType===T?d.url=Nt(d.data,g,d.data.length):d.pictureData=d.data.subarray(g,d.data.length))))},"T*":function(d){d.data[0]===zt.Utf8&&(d.value=Gt(d.data,1,d.data.length).replace(/\0*$/,""),d.values=d.value.split("\0"))},TXXX:function(d){var g;d.data[0]===zt.Utf8&&(g=ri(d.data,0,1),g!==-1&&(d.description=Gt(d.data,1,g),d.value=Gt(d.data,g+1,d.data.length).replace(/\0*$/,""),d.data=d.value))},"W*":function(d){d.url=Nt(d.data,0,d.data.length).replace(/\0.*$/,"")},WXXX:function(d){var g;d.data[0]===zt.Utf8&&(g=ri(d.data,0,1),g!==-1&&(d.description=Gt(d.data,1,g),d.url=Nt(d.data,g+1,d.data.length).replace(/\0.*$/,"")))},PRIV:function(d){var g;for(g=0;g<d.data.length;g++)if(d.data[g]===0){d.owner=Nt(d.data,0,g);break}d.privateData=d.data.subarray(g+1),d.data=d.privateData}},Rn=function(d){var g,_,y=10,T=0,E=[];if(!(d.length<10||d[0]!==73||d[1]!==68||d[2]!==51)){T=Bt(d.subarray(6,10)),T+=10;var L=d[5]&64;L&&(y+=4,y+=Bt(d.subarray(10,14)),T-=Bt(d.subarray(16,20)));do{if(g=Bt(d.subarray(y+4,y+8)),g<1)break;_=String.fromCharCode(d[y],d[y+1],d[y+2],d[y+3]);var N={id:_,data:d.subarray(y+10,y+g+10)};N.key=N.id,Wt[N.id]?Wt[N.id](N):N.id[0]==="T"?Wt["T*"](N):N.id[0]==="W"&&Wt["W*"](N),E.push(N),y+=10,y+=g}while(y<T);return E}},Xi={parseId3Frames:Rn,parseSyncSafeInteger:Bt,frameParsers:Wt},On=n,Ln=ni,Dt=Xi,si;si=function(d){var g={descriptor:d&&d.descriptor},_=0,y=[],T=0,E;if(si.prototype.init.call(this),this.dispatchType=Ln.METADATA_STREAM_TYPE.toString(16),g.descriptor)for(E=0;E<g.descriptor.length;E++)this.dispatchType+=("00"+g.descriptor[E].toString(16)).slice(-2);this.push=function(L){var N,U,q,J,se,Ee;if(L.type==="timed-metadata"){if(L.dataAlignmentIndicator&&(T=0,y.length=0),y.length===0&&(L.data.length<10||L.data[0]!==73||L.data[1]!==68||L.data[2]!==51)){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(y.push(L),T+=L.data.byteLength,y.length===1&&(_=Dt.parseSyncSafeInteger(L.data.subarray(6,10)),_+=10),!(T<_)){for(N={data:new Uint8Array(_),frames:[],pts:y[0].pts,dts:y[0].dts},se=0;se<_;)N.data.set(y[0].data.subarray(0,_-se),se),se+=y[0].data.byteLength,T-=y[0].data.byteLength,y.shift();U=10,N.data[5]&64&&(U+=4,U+=Dt.parseSyncSafeInteger(N.data.subarray(10,14)),_-=Dt.parseSyncSafeInteger(N.data.subarray(16,20)));do{if(q=Dt.parseSyncSafeInteger(N.data.subarray(U+4,U+8)),q<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(Ee=String.fromCharCode(N.data[U],N.data[U+1],N.data[U+2],N.data[U+3]),J={id:Ee,data:N.data.subarray(U+10,U+q+10)},J.key=J.id,Dt.frameParsers[J.id]?Dt.frameParsers[J.id](J):J.id[0]==="T"?Dt.frameParsers["T*"](J):J.id[0]==="W"&&Dt.frameParsers["W*"](J),J.owner==="com.apple.streaming.transportStreamTimestamp"){var de=J.data,Re=(de[3]&1)<<30|de[4]<<22|de[5]<<14|de[6]<<6|de[7]>>>2;Re*=4,Re+=de[7]&3,J.timeStamp=Re,N.pts===void 0&&N.dts===void 0&&(N.pts=J.timeStamp,N.dts=J.timeStamp),this.trigger("timestamp",J)}N.frames.push(J),U+=10,U+=q}while(U<_);this.trigger("data",N)}}}},si.prototype=new On;var Yi=si,Ai=n,Di=xi,gt=ni,Mn=Ki.TimestampRolloverStream,ai,Ft,oi,$t=188,Ii=71;ai=function(){var d=new Uint8Array($t),g=0;ai.prototype.init.call(this),this.push=function(_){var y=0,T=$t,E;for(g?(E=new Uint8Array(_.byteLength+g),E.set(d.subarray(0,g)),E.set(_,g),g=0):E=_;T<E.byteLength;){if(E[y]===Ii&&E[T]===Ii){this.trigger("data",E.subarray(y,T)),y+=$t,T+=$t;continue}y++,T++}y<E.byteLength&&(d.set(E.subarray(y),0),g=E.byteLength-y)},this.flush=function(){g===$t&&d[0]===Ii&&(this.trigger("data",d),g=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){g=0,this.trigger("reset")}},ai.prototype=new Ai,Ft=function(){var d,g,_,y;Ft.prototype.init.call(this),y=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,d=function(T,E){var L=0;E.payloadUnitStartIndicator&&(L+=T[L]+1),E.type==="pat"?g(T.subarray(L),E):_(T.subarray(L),E)},g=function(T,E){E.section_number=T[7],E.last_section_number=T[8],y.pmtPid=(T[10]&31)<<8|T[11],E.pmtPid=y.pmtPid},_=function(T,E){var L,N,U,q;if(T[5]&1){for(y.programMapTable={video:null,audio:null,"timed-metadata":{}},L=(T[1]&15)<<8|T[2],N=3+L-4,U=(T[10]&15)<<8|T[11],q=12+U;q<N;){var J=T[q],se=(T[q+1]&31)<<8|T[q+2];J===gt.H264_STREAM_TYPE&&y.programMapTable.video===null?y.programMapTable.video=se:J===gt.ADTS_STREAM_TYPE&&y.programMapTable.audio===null?y.programMapTable.audio=se:J===gt.METADATA_STREAM_TYPE&&(y.programMapTable["timed-metadata"][se]=J),q+=((T[q+3]&15)<<8|T[q+4])+5}E.programMapTable=y.programMapTable}},this.push=function(T){var E={},L=4;if(E.payloadUnitStartIndicator=!!(T[1]&64),E.pid=T[1]&31,E.pid<<=8,E.pid|=T[2],(T[3]&48)>>>4>1&&(L+=T[L]+1),E.pid===0)E.type="pat",d(T.subarray(L),E),this.trigger("data",E);else if(E.pid===this.pmtPid)for(E.type="pmt",d(T.subarray(L),E),this.trigger("data",E);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([T,L,E]):this.processPes_(T,L,E)},this.processPes_=function(T,E,L){L.pid===this.programMapTable.video?L.streamType=gt.H264_STREAM_TYPE:L.pid===this.programMapTable.audio?L.streamType=gt.ADTS_STREAM_TYPE:L.streamType=this.programMapTable["timed-metadata"][L.pid],L.type="pes",L.data=T.subarray(E),this.trigger("data",L)}},Ft.prototype=new Ai,Ft.STREAM_TYPES={h264:27,adts:15},oi=function(){var d=this,g=!1,_={data:[],size:0},y={data:[],size:0},T={data:[],size:0},E,L=function(U,q){var J;const se=U[0]<<16|U[1]<<8|U[2];q.data=new Uint8Array,se===1&&(q.packetLength=6+(U[4]<<8|U[5]),q.dataAlignmentIndicator=(U[6]&4)!==0,J=U[7],J&192&&(q.pts=(U[9]&14)<<27|(U[10]&255)<<20|(U[11]&254)<<12|(U[12]&255)<<5|(U[13]&254)>>>3,q.pts*=4,q.pts+=(U[13]&6)>>>1,q.dts=q.pts,J&64&&(q.dts=(U[14]&14)<<27|(U[15]&255)<<20|(U[16]&254)<<12|(U[17]&255)<<5|(U[18]&254)>>>3,q.dts*=4,q.dts+=(U[18]&6)>>>1)),q.data=U.subarray(9+U[8]))},N=function(U,q,J){var se=new Uint8Array(U.size),Ee={type:q},de=0,Re=0,Ue=!1,ut;if(!(!U.data.length||U.size<9)){for(Ee.trackId=U.data[0].pid,de=0;de<U.data.length;de++)ut=U.data[de],se.set(ut.data,Re),Re+=ut.data.byteLength;L(se,Ee),Ue=q==="video"||Ee.packetLength<=U.size,(J||Ue)&&(U.size=0,U.data.length=0),Ue&&d.trigger("data",Ee)}};oi.prototype.init.call(this),this.push=function(U){({pat:function(){},pes:function(){var q,J;switch(U.streamType){case gt.H264_STREAM_TYPE:q=_,J="video";break;case gt.ADTS_STREAM_TYPE:q=y,J="audio";break;case gt.METADATA_STREAM_TYPE:q=T,J="timed-metadata";break;default:return}U.payloadUnitStartIndicator&&N(q,J,!0),q.data.push(U),q.size+=U.data.byteLength},pmt:function(){var q={type:"metadata",tracks:[]};E=U.programMapTable,E.video!==null&&q.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+E.video,codec:"avc",type:"video"}),E.audio!==null&&q.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+E.audio,codec:"adts",type:"audio"}),g=!0,d.trigger("data",q)}})[U.type]()},this.reset=function(){_.size=0,_.data.length=0,y.size=0,y.data.length=0,this.trigger("reset")},this.flushStreams_=function(){N(_,"video"),N(y,"audio"),N(T,"timed-metadata")},this.flush=function(){if(!g&&E){var U={type:"metadata",tracks:[]};E.video!==null&&U.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+E.video,codec:"avc",type:"video"}),E.audio!==null&&U.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+E.audio,codec:"adts",type:"audio"}),d.trigger("data",U)}g=!1,this.flushStreams_(),this.trigger("done")}},oi.prototype=new Ai;var Qi={PAT_PID:0,MP2T_PACKET_LENGTH:$t,TransportPacketStream:ai,TransportParseStream:Ft,ElementaryStream:oi,TimestampRolloverStream:Mn,CaptionStream:Di.CaptionStream,Cea608Stream:Di.Cea608Stream,Cea708Stream:Di.Cea708Stream,MetadataStream:Yi};for(var ki in gt)gt.hasOwnProperty(ki)&&(Qi[ki]=gt[ki]);var Nn=Qi,Bn=n,$n=Fe.ONE_SECOND_IN_TS,li,Ji=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];li=function(d){var g,_=0;li.prototype.init.call(this),this.skipWarn_=function(y,T){this.trigger("log",{level:"warn",message:`adts skiping bytes ${y} to ${T} in frame ${_} outside syncword`})},this.push=function(y){var T=0,E,L,N,U,q;if(d||(_=0),y.type==="audio"){g&&g.length?(N=g,g=new Uint8Array(N.byteLength+y.data.byteLength),g.set(N),g.set(y.data,N.byteLength)):g=y.data;for(var J;T+7<g.length;){if(g[T]!==255||(g[T+1]&246)!==240){typeof J!="number"&&(J=T),T++;continue}if(typeof J=="number"&&(this.skipWarn_(J,T),J=null),L=(~g[T+1]&1)*2,E=(g[T+3]&3)<<11|g[T+4]<<3|(g[T+5]&224)>>5,U=((g[T+6]&3)+1)*1024,q=U*$n/Ji[(g[T+2]&60)>>>2],g.byteLength-T<E)break;this.trigger("data",{pts:y.pts+_*q,dts:y.dts+_*q,sampleCount:U,audioobjecttype:(g[T+2]>>>6&3)+1,channelcount:(g[T+2]&1)<<2|(g[T+3]&192)>>>6,samplerate:Ji[(g[T+2]&60)>>>2],samplingfrequencyindex:(g[T+2]&60)>>>2,samplesize:16,data:g.subarray(T+7+L,T+E)}),_++,T+=E}typeof J=="number"&&(this.skipWarn_(J,T),J=null),g=g.subarray(T)}},this.flush=function(){_=0,this.trigger("done")},this.reset=function(){g=void 0,this.trigger("reset")},this.endTimeline=function(){g=void 0,this.trigger("endedtimeline")}},li.prototype=new Bn;var Un=li,Zi;Zi=function(d){var g=d.byteLength,_=0,y=0;this.length=function(){return 8*g},this.bitsAvailable=function(){return 8*g+y},this.loadWord=function(){var T=d.byteLength-g,E=new Uint8Array(4),L=Math.min(4,g);if(L===0)throw new Error("no bytes available");E.set(d.subarray(T,T+L)),_=new DataView(E.buffer).getUint32(0),y=L*8,g-=L},this.skipBits=function(T){var E;y>T?(_<<=T,y-=T):(T-=y,E=Math.floor(T/8),T-=E*8,g-=E,this.loadWord(),_<<=T,y-=T)},this.readBits=function(T){var E=Math.min(y,T),L=_>>>32-E;return y-=E,y>0?_<<=E:g>0&&this.loadWord(),E=T-E,E>0?L<<E|this.readBits(E):L},this.skipLeadingZeros=function(){var T;for(T=0;T<y;++T)if((_&2147483648>>>T)!==0)return _<<=T,y-=T,T;return this.loadWord(),T+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var T=this.skipLeadingZeros();return this.readBits(T+1)-1},this.readExpGolomb=function(){var T=this.readUnsignedExpGolomb();return 1&T?1+T>>>1:-1*(T>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var Hn=Zi,en=n,jn=Hn,Ut,ui,tn;ui=function(){var d=0,g,_;ui.prototype.init.call(this),this.push=function(y){var T;_?(T=new Uint8Array(_.byteLength+y.data.byteLength),T.set(_),T.set(y.data,_.byteLength),_=T):_=y.data;for(var E=_.byteLength;d<E-3;d++)if(_[d+2]===1){g=d+5;break}for(;g<E;)switch(_[g]){case 0:if(_[g-1]!==0){g+=2;break}else if(_[g-2]!==0){g++;break}d+3!==g-2&&this.trigger("data",_.subarray(d+3,g-2));do g++;while(_[g]!==1&&g<E);d=g-2,g+=3;break;case 1:if(_[g-1]!==0||_[g-2]!==0){g+=3;break}this.trigger("data",_.subarray(d+3,g-2)),d=g-2,g+=3;break;default:g+=3;break}_=_.subarray(d),g-=d,d=0},this.reset=function(){_=null,d=0,this.trigger("reset")},this.flush=function(){_&&_.byteLength>3&&this.trigger("data",_.subarray(d+3)),_=null,d=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},ui.prototype=new en,tn={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Ut=function(){var d=new ui,g,_,y,T,E,L,N;Ut.prototype.init.call(this),g=this,this.push=function(U){U.type==="video"&&(_=U.trackId,y=U.pts,T=U.dts,d.push(U))},d.on("data",function(U){var q={trackId:_,pts:y,dts:T,data:U,nalUnitTypeCode:U[0]&31};switch(q.nalUnitTypeCode){case 5:q.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:q.nalUnitType="sei_rbsp",q.escapedRBSP=E(U.subarray(1));break;case 7:q.nalUnitType="seq_parameter_set_rbsp",q.escapedRBSP=E(U.subarray(1)),q.config=L(q.escapedRBSP);break;case 8:q.nalUnitType="pic_parameter_set_rbsp";break;case 9:q.nalUnitType="access_unit_delimiter_rbsp";break}g.trigger("data",q)}),d.on("done",function(){g.trigger("done")}),d.on("partialdone",function(){g.trigger("partialdone")}),d.on("reset",function(){g.trigger("reset")}),d.on("endedtimeline",function(){g.trigger("endedtimeline")}),this.flush=function(){d.flush()},this.partialFlush=function(){d.partialFlush()},this.reset=function(){d.reset()},this.endTimeline=function(){d.endTimeline()},N=function(U,q){var J=8,se=8,Ee,de;for(Ee=0;Ee<U;Ee++)se!==0&&(de=q.readExpGolomb(),se=(J+de+256)%256),J=se===0?J:se},E=function(U){for(var q=U.byteLength,J=[],se=1,Ee,de;se<q-2;)U[se]===0&&U[se+1]===0&&U[se+2]===3?(J.push(se+2),se+=2):se++;if(J.length===0)return U;Ee=q-J.length,de=new Uint8Array(Ee);var Re=0;for(se=0;se<Ee;Re++,se++)Re===J[0]&&(Re++,J.shift()),de[se]=U[Re];return de},L=function(U){var q=0,J=0,se=0,Ee=0,de,Re,Ue,ut,St,Vt,Hi,ji,Vi,qi,wn,Qe=[1,1],zi,At;if(de=new jn(U),Re=de.readUnsignedByte(),ut=de.readUnsignedByte(),Ue=de.readUnsignedByte(),de.skipUnsignedExpGolomb(),tn[Re]&&(St=de.readUnsignedExpGolomb(),St===3&&de.skipBits(1),de.skipUnsignedExpGolomb(),de.skipUnsignedExpGolomb(),de.skipBits(1),de.readBoolean()))for(wn=St!==3?8:12,At=0;At<wn;At++)de.readBoolean()&&(At<6?N(16,de):N(64,de));if(de.skipUnsignedExpGolomb(),Vt=de.readUnsignedExpGolomb(),Vt===0)de.readUnsignedExpGolomb();else if(Vt===1)for(de.skipBits(1),de.skipExpGolomb(),de.skipExpGolomb(),Hi=de.readUnsignedExpGolomb(),At=0;At<Hi;At++)de.skipExpGolomb();if(de.skipUnsignedExpGolomb(),de.skipBits(1),ji=de.readUnsignedExpGolomb(),Vi=de.readUnsignedExpGolomb(),qi=de.readBits(1),qi===0&&de.skipBits(1),de.skipBits(1),de.readBoolean()&&(q=de.readUnsignedExpGolomb(),J=de.readUnsignedExpGolomb(),se=de.readUnsignedExpGolomb(),Ee=de.readUnsignedExpGolomb()),de.readBoolean()&&de.readBoolean()){switch(zi=de.readUnsignedByte(),zi){case 1:Qe=[1,1];break;case 2:Qe=[12,11];break;case 3:Qe=[10,11];break;case 4:Qe=[16,11];break;case 5:Qe=[40,33];break;case 6:Qe=[24,11];break;case 7:Qe=[20,11];break;case 8:Qe=[32,11];break;case 9:Qe=[80,33];break;case 10:Qe=[18,11];break;case 11:Qe=[15,11];break;case 12:Qe=[64,33];break;case 13:Qe=[160,99];break;case 14:Qe=[4,3];break;case 15:Qe=[3,2];break;case 16:Qe=[2,1];break;case 255:{Qe=[de.readUnsignedByte()<<8|de.readUnsignedByte(),de.readUnsignedByte()<<8|de.readUnsignedByte()];break}}Qe&&Qe[0]/Qe[1]}return{profileIdc:Re,levelIdc:Ue,profileCompatibility:ut,width:(ji+1)*16-q*2-J*2,height:(2-qi)*(Vi+1)*16-se*2-Ee*2,sarRatio:Qe}}},Ut.prototype=new en;var Vn={H264Stream:Ut},qn=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],nn=function(d,g){var _=d[g+6]<<21|d[g+7]<<14|d[g+8]<<7|d[g+9],y=d[g+5],T=(y&16)>>4;return _=_>=0?_:0,T?_+20:_+10},rn=function(d,g){return d.length-g<10||d[g]!==73||d[g+1]!==68||d[g+2]!==51?g:(g+=nn(d,g),rn(d,g))},ci=function(d){var g=rn(d,0);return d.length>=g+2&&(d[g]&255)===255&&(d[g+1]&240)===240&&(d[g+1]&22)===16},Pi=function(d){return d[0]<<21|d[1]<<14|d[2]<<7|d[3]},zn=function(d,g,_){var y,T="";for(y=g;y<_;y++)T+="%"+("00"+d[y].toString(16)).slice(-2);return T},Gn=function(d,g,_){return unescape(zn(d,g,_))},sn=function(d,g){var _=(d[g+5]&224)>>5,y=d[g+4]<<3,T=d[g+3]&6144;return T|y|_},Wn=function(d,g){return d[g]===73&&d[g+1]===68&&d[g+2]===51?"timed-metadata":d[g]&!0&&(d[g+1]&240)===240?"audio":null},Kn=function(d){for(var g=0;g+5<d.length;){if(d[g]!==255||(d[g+1]&246)!==240){g++;continue}return qn[(d[g+2]&60)>>>2]}return null},an=function(d){var g,_,y,T;g=10,d[5]&64&&(g+=4,g+=Pi(d.subarray(10,14)));do{if(_=Pi(d.subarray(g+4,g+8)),_<1)return null;if(T=String.fromCharCode(d[g],d[g+1],d[g+2],d[g+3]),T==="PRIV"){y=d.subarray(g+10,g+_+10);for(var E=0;E<y.byteLength;E++)if(y[E]===0){var L=Gn(y,0,E);if(L==="com.apple.streaming.transportStreamTimestamp"){var N=y.subarray(E+1),U=(N[3]&1)<<30|N[4]<<22|N[5]<<14|N[6]<<6|N[7]>>>2;return U*=4,U+=N[7]&3,U}break}}g+=10,g+=_}while(g<d.byteLength);return null},Ri={isLikelyAacData:ci,parseId3TagSize:nn,parseAdtsSize:sn,parseType:Wn,parseSampleRate:Kn,parseAacTimestamp:an},Xn=n,Oi=Ri,di;di=function(){var d=new Uint8Array,g=0;di.prototype.init.call(this),this.setTimestamp=function(_){g=_},this.push=function(_){var y=0,T=0,E,L,N,U;for(d.length?(U=d.length,d=new Uint8Array(_.byteLength+U),d.set(d.subarray(0,U)),d.set(_,U)):d=_;d.length-T>=3;){if(d[T]===73&&d[T+1]===68&&d[T+2]===51){if(d.length-T<10||(y=Oi.parseId3TagSize(d,T),T+y>d.length))break;L={type:"timed-metadata",data:d.subarray(T,T+y)},this.trigger("data",L),T+=y;continue}else if((d[T]&255)===255&&(d[T+1]&240)===240){if(d.length-T<7||(y=Oi.parseAdtsSize(d,T),T+y>d.length))break;N={type:"audio",data:d.subarray(T,T+y),pts:g,dts:g},this.trigger("data",N),T+=y;continue}T++}E=d.length-T,E>0?d=d.subarray(T):d=new Uint8Array},this.reset=function(){d=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){d=new Uint8Array,this.trigger("endedtimeline")}},di.prototype=new Xn;var Yn=di,ln=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Qn=ln,Jn=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],un=Jn,hi=n,Kt=Ze,Ht=_e,fi=qt,bt=ie,Et=Nn,pi=Fe,cn=Un,dn=Vn.H264Stream,Zn=Yn,er=Ri.isLikelyAacData,hn=Fe.ONE_SECOND_IN_TS,fn=Qn,pn=un,Xt,Yt,mi,It,tr=function(d,g){g.stream=d,this.trigger("log",g)},mn=function(d,g){for(var _=Object.keys(g),y=0;y<_.length;y++){var T=_[y];T==="headOfPipeline"||!g[T].on||g[T].on("log",tr.bind(d,T))}},Li=function(d,g){var _;if(d.length!==g.length)return!1;for(_=0;_<d.length;_++)if(d[_]!==g[_])return!1;return!0},gn=function(d,g,_,y,T,E){var L=_-g,N=y-g,U=T-_;return{start:{dts:d,pts:d+L},end:{dts:d+N,pts:d+U},prependedContentDuration:E,baseMediaDecodeTime:d}};Yt=function(d,g){var _=[],y,T=0,E=0,L=1/0;g=g||{},y=g.firstSequenceNumber||0,Yt.prototype.init.call(this),this.push=function(N){bt.collectDtsInfo(d,N),d&&fn.forEach(function(U){d[U]=N[U]}),_.push(N)},this.setEarliestDts=function(N){T=N},this.setVideoBaseMediaDecodeTime=function(N){L=N},this.setAudioAppendStart=function(N){E=N},this.flush=function(){var N,U,q,J,se,Ee,de;if(_.length===0){this.trigger("done","AudioSegmentStream");return}N=fi.trimAdtsFramesByEarliestDts(_,d,T),d.baseMediaDecodeTime=bt.calculateTrackBaseMediaDecodeTime(d,g.keepOriginalTimestamps),de=fi.prefixWithSilence(d,N,E,L),d.samples=fi.generateSampleTable(N),q=Kt.mdat(fi.concatenateFrameData(N)),_=[],U=Kt.moof(y,[d]),J=new Uint8Array(U.byteLength+q.byteLength),y++,J.set(U),J.set(q,U.byteLength),bt.clearDtsInfo(d),se=Math.ceil(hn*1024/d.samplerate),N.length&&(Ee=N.length*se,this.trigger("segmentTimingInfo",gn(pi.audioTsToVideoTs(d.baseMediaDecodeTime,d.samplerate),N[0].dts,N[0].pts,N[0].dts+Ee,N[0].pts+Ee,de||0)),this.trigger("timingInfo",{start:N[0].pts,end:N[0].pts+Ee})),this.trigger("data",{track:d,boxes:J}),this.trigger("done","AudioSegmentStream")},this.reset=function(){bt.clearDtsInfo(d),_=[],this.trigger("reset")}},Yt.prototype=new hi,Xt=function(d,g){var _,y=[],T=[],E,L;g=g||{},_=g.firstSequenceNumber||0,Xt.prototype.init.call(this),delete d.minPTS,this.gopCache_=[],this.push=function(N){bt.collectDtsInfo(d,N),N.nalUnitType==="seq_parameter_set_rbsp"&&!E&&(E=N.config,d.sps=[N.data],pn.forEach(function(U){d[U]=E[U]},this)),N.nalUnitType==="pic_parameter_set_rbsp"&&!L&&(L=N.data,d.pps=[N.data]),y.push(N)},this.flush=function(){for(var N,U,q,J,se,Ee,de=0,Re,Ue;y.length&&y[0].nalUnitType!=="access_unit_delimiter_rbsp";)y.shift();if(y.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(N=Ht.groupNalsIntoFrames(y),q=Ht.groupFramesIntoGops(N),q[0][0].keyFrame||(U=this.getGopForFusion_(y[0],d),U?(de=U.duration,q.unshift(U),q.byteLength+=U.byteLength,q.nalCount+=U.nalCount,q.pts=U.pts,q.dts=U.dts,q.duration+=U.duration):q=Ht.extendFirstKeyFrame(q)),T.length){var ut;if(g.alignGopsAtEnd?ut=this.alignGopsAtEnd_(q):ut=this.alignGopsAtStart_(q),!ut){this.gopCache_.unshift({gop:q.pop(),pps:d.pps,sps:d.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),y=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}bt.clearDtsInfo(d),q=ut}bt.collectDtsInfo(d,q),d.samples=Ht.generateSampleTable(q),se=Kt.mdat(Ht.concatenateNalData(q)),d.baseMediaDecodeTime=bt.calculateTrackBaseMediaDecodeTime(d,g.keepOriginalTimestamps),this.trigger("processedGopsInfo",q.map(function(St){return{pts:St.pts,dts:St.dts,byteLength:St.byteLength}})),Re=q[0],Ue=q[q.length-1],this.trigger("segmentTimingInfo",gn(d.baseMediaDecodeTime,Re.dts,Re.pts,Ue.dts+Ue.duration,Ue.pts+Ue.duration,de)),this.trigger("timingInfo",{start:q[0].pts,end:q[q.length-1].pts+q[q.length-1].duration}),this.gopCache_.unshift({gop:q.pop(),pps:d.pps,sps:d.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),y=[],this.trigger("baseMediaDecodeTime",d.baseMediaDecodeTime),this.trigger("timelineStartInfo",d.timelineStartInfo),J=Kt.moof(_,[d]),Ee=new Uint8Array(J.byteLength+se.byteLength),_++,Ee.set(J),Ee.set(se,J.byteLength),this.trigger("data",{track:d,boxes:Ee}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),y=[],this.gopCache_.length=0,T.length=0,this.trigger("reset")},this.resetStream_=function(){bt.clearDtsInfo(d),E=void 0,L=void 0},this.getGopForFusion_=function(N){var U=45e3,q=1/0,J,se,Ee,de,Re;for(Re=0;Re<this.gopCache_.length;Re++)de=this.gopCache_[Re],Ee=de.gop,!(!(d.pps&&Li(d.pps[0],de.pps[0]))||!(d.sps&&Li(d.sps[0],de.sps[0])))&&(Ee.dts<d.timelineStartInfo.dts||(J=N.dts-Ee.dts-Ee.duration,J>=-1e4&&J<=U&&(!se||q>J)&&(se=de,q=J)));return se?se.gop:null},this.alignGopsAtStart_=function(N){var U,q,J,se,Ee,de,Re,Ue;for(Ee=N.byteLength,de=N.nalCount,Re=N.duration,U=q=0;U<T.length&&q<N.length&&(J=T[U],se=N[q],J.pts!==se.pts);){if(se.pts>J.pts){U++;continue}q++,Ee-=se.byteLength,de-=se.nalCount,Re-=se.duration}return q===0?N:q===N.length?null:(Ue=N.slice(q),Ue.byteLength=Ee,Ue.duration=Re,Ue.nalCount=de,Ue.pts=Ue[0].pts,Ue.dts=Ue[0].dts,Ue)},this.alignGopsAtEnd_=function(N){var U,q,J,se,Ee,de;for(U=T.length-1,q=N.length-1,Ee=null,de=!1;U>=0&&q>=0;){if(J=T[U],se=N[q],J.pts===se.pts){de=!0;break}if(J.pts>se.pts){U--;continue}U===T.length-1&&(Ee=q),q--}if(!de&&Ee===null)return null;var Re;if(de?Re=q:Re=Ee,Re===0)return N;var Ue=N.slice(Re),ut=Ue.reduce(function(St,Vt){return St.byteLength+=Vt.byteLength,St.duration+=Vt.duration,St.nalCount+=Vt.nalCount,St},{byteLength:0,duration:0,nalCount:0});return Ue.byteLength=ut.byteLength,Ue.duration=ut.duration,Ue.nalCount=ut.nalCount,Ue.pts=Ue[0].pts,Ue.dts=Ue[0].dts,Ue},this.alignGopsWith=function(N){T=N}},Xt.prototype=new hi,It=function(d,g){this.numberOfTracks=0,this.metadataStream=g,d=d||{},typeof d.remux<"u"?this.remuxTracks=!!d.remux:this.remuxTracks=!0,typeof d.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=d.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,It.prototype.init.call(this),this.push=function(_){if(_.content||_.text)return this.pendingCaptions.push(_);if(_.frames)return this.pendingMetadata.push(_);this.pendingTracks.push(_.track),this.pendingBytes+=_.boxes.byteLength,_.track.type==="video"&&(this.videoTrack=_.track,this.pendingBoxes.push(_.boxes)),_.track.type==="audio"&&(this.audioTrack=_.track,this.pendingBoxes.unshift(_.boxes))}},It.prototype=new hi,It.prototype.flush=function(d){var g=0,_={captions:[],captionStreams:{},metadata:[],info:{}},y,T,E,L=0,N;if(this.pendingTracks.length<this.numberOfTracks){if(d!=="VideoSegmentStream"&&d!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(L=this.videoTrack.timelineStartInfo.pts,pn.forEach(function(U){_.info[U]=this.videoTrack[U]},this)):this.audioTrack&&(L=this.audioTrack.timelineStartInfo.pts,fn.forEach(function(U){_.info[U]=this.audioTrack[U]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?_.type=this.pendingTracks[0].type:_.type="combined",this.emittedTracks+=this.pendingTracks.length,E=Kt.initSegment(this.pendingTracks),_.initSegment=new Uint8Array(E.byteLength),_.initSegment.set(E),_.data=new Uint8Array(this.pendingBytes),N=0;N<this.pendingBoxes.length;N++)_.data.set(this.pendingBoxes[N],g),g+=this.pendingBoxes[N].byteLength;for(N=0;N<this.pendingCaptions.length;N++)y=this.pendingCaptions[N],y.startTime=pi.metadataTsToSeconds(y.startPts,L,this.keepOriginalTimestamps),y.endTime=pi.metadataTsToSeconds(y.endPts,L,this.keepOriginalTimestamps),_.captionStreams[y.stream]=!0,_.captions.push(y);for(N=0;N<this.pendingMetadata.length;N++)T=this.pendingMetadata[N],T.cueTime=pi.metadataTsToSeconds(T.pts,L,this.keepOriginalTimestamps),_.metadata.push(T);for(_.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",_),N=0;N<_.captions.length;N++)y=_.captions[N],this.trigger("caption",y);for(N=0;N<_.metadata.length;N++)T=_.metadata[N],this.trigger("id3Frame",T)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},It.prototype.setRemux=function(d){this.remuxTracks=d},mi=function(d){var g=this,_=!0,y,T;mi.prototype.init.call(this),d=d||{},this.baseMediaDecodeTime=d.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var E={};this.transmuxPipeline_=E,E.type="aac",E.metadataStream=new Et.MetadataStream,E.aacStream=new Zn,E.audioTimestampRolloverStream=new Et.TimestampRolloverStream("audio"),E.timedMetadataTimestampRolloverStream=new Et.TimestampRolloverStream("timed-metadata"),E.adtsStream=new cn,E.coalesceStream=new It(d,E.metadataStream),E.headOfPipeline=E.aacStream,E.aacStream.pipe(E.audioTimestampRolloverStream).pipe(E.adtsStream),E.aacStream.pipe(E.timedMetadataTimestampRolloverStream).pipe(E.metadataStream).pipe(E.coalesceStream),E.metadataStream.on("timestamp",function(L){E.aacStream.setTimestamp(L.timeStamp)}),E.aacStream.on("data",function(L){L.type!=="timed-metadata"&&L.type!=="audio"||E.audioSegmentStream||(T=T||{timelineStartInfo:{baseMediaDecodeTime:g.baseMediaDecodeTime},codec:"adts",type:"audio"},E.coalesceStream.numberOfTracks++,E.audioSegmentStream=new Yt(T,d),E.audioSegmentStream.on("log",g.getLogTrigger_("audioSegmentStream")),E.audioSegmentStream.on("timingInfo",g.trigger.bind(g,"audioTimingInfo")),E.adtsStream.pipe(E.audioSegmentStream).pipe(E.coalesceStream),g.trigger("trackinfo",{hasAudio:!!T,hasVideo:!!y}))}),E.coalesceStream.on("data",this.trigger.bind(this,"data")),E.coalesceStream.on("done",this.trigger.bind(this,"done")),mn(this,E)},this.setupTsPipeline=function(){var E={};this.transmuxPipeline_=E,E.type="ts",E.metadataStream=new Et.MetadataStream,E.packetStream=new Et.TransportPacketStream,E.parseStream=new Et.TransportParseStream,E.elementaryStream=new Et.ElementaryStream,E.timestampRolloverStream=new Et.TimestampRolloverStream,E.adtsStream=new cn,E.h264Stream=new dn,E.captionStream=new Et.CaptionStream(d),E.coalesceStream=new It(d,E.metadataStream),E.headOfPipeline=E.packetStream,E.packetStream.pipe(E.parseStream).pipe(E.elementaryStream).pipe(E.timestampRolloverStream),E.timestampRolloverStream.pipe(E.h264Stream),E.timestampRolloverStream.pipe(E.adtsStream),E.timestampRolloverStream.pipe(E.metadataStream).pipe(E.coalesceStream),E.h264Stream.pipe(E.captionStream).pipe(E.coalesceStream),E.elementaryStream.on("data",function(L){var N;if(L.type==="metadata"){for(N=L.tracks.length;N--;)!y&&L.tracks[N].type==="video"?(y=L.tracks[N],y.timelineStartInfo.baseMediaDecodeTime=g.baseMediaDecodeTime):!T&&L.tracks[N].type==="audio"&&(T=L.tracks[N],T.timelineStartInfo.baseMediaDecodeTime=g.baseMediaDecodeTime);y&&!E.videoSegmentStream&&(E.coalesceStream.numberOfTracks++,E.videoSegmentStream=new Xt(y,d),E.videoSegmentStream.on("log",g.getLogTrigger_("videoSegmentStream")),E.videoSegmentStream.on("timelineStartInfo",function(U){T&&!d.keepOriginalTimestamps&&(T.timelineStartInfo=U,E.audioSegmentStream.setEarliestDts(U.dts-g.baseMediaDecodeTime))}),E.videoSegmentStream.on("processedGopsInfo",g.trigger.bind(g,"gopInfo")),E.videoSegmentStream.on("segmentTimingInfo",g.trigger.bind(g,"videoSegmentTimingInfo")),E.videoSegmentStream.on("baseMediaDecodeTime",function(U){T&&E.audioSegmentStream.setVideoBaseMediaDecodeTime(U)}),E.videoSegmentStream.on("timingInfo",g.trigger.bind(g,"videoTimingInfo")),E.h264Stream.pipe(E.videoSegmentStream).pipe(E.coalesceStream)),T&&!E.audioSegmentStream&&(E.coalesceStream.numberOfTracks++,E.audioSegmentStream=new Yt(T,d),E.audioSegmentStream.on("log",g.getLogTrigger_("audioSegmentStream")),E.audioSegmentStream.on("timingInfo",g.trigger.bind(g,"audioTimingInfo")),E.audioSegmentStream.on("segmentTimingInfo",g.trigger.bind(g,"audioSegmentTimingInfo")),E.adtsStream.pipe(E.audioSegmentStream).pipe(E.coalesceStream)),g.trigger("trackinfo",{hasAudio:!!T,hasVideo:!!y})}}),E.coalesceStream.on("data",this.trigger.bind(this,"data")),E.coalesceStream.on("id3Frame",function(L){L.dispatchType=E.metadataStream.dispatchType,g.trigger("id3Frame",L)}),E.coalesceStream.on("caption",this.trigger.bind(this,"caption")),E.coalesceStream.on("done",this.trigger.bind(this,"done")),mn(this,E)},this.setBaseMediaDecodeTime=function(E){var L=this.transmuxPipeline_;d.keepOriginalTimestamps||(this.baseMediaDecodeTime=E),T&&(T.timelineStartInfo.dts=void 0,T.timelineStartInfo.pts=void 0,bt.clearDtsInfo(T),L.audioTimestampRolloverStream&&L.audioTimestampRolloverStream.discontinuity()),y&&(L.videoSegmentStream&&(L.videoSegmentStream.gopCache_=[]),y.timelineStartInfo.dts=void 0,y.timelineStartInfo.pts=void 0,bt.clearDtsInfo(y),L.captionStream.reset()),L.timestampRolloverStream&&L.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(E){T&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(E)},this.setRemux=function(E){var L=this.transmuxPipeline_;d.remux=E,L&&L.coalesceStream&&L.coalesceStream.setRemux(E)},this.alignGopsWith=function(E){y&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(E)},this.getLogTrigger_=function(E){var L=this;return function(N){N.stream=E,L.trigger("log",N)}},this.push=function(E){if(_){var L=er(E);L&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!L&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),_=!1}this.transmuxPipeline_.headOfPipeline.push(E)},this.flush=function(){_=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},mi.prototype=new hi;var ir={Transmuxer:mi},yn=function(d){return d>>>0},nr=function(d){return("00"+d.toString(16)).slice(-2)},Qt={toUnsigned:yn,toHexString:nr},rr=function(d){var g="";return g+=String.fromCharCode(d[0]),g+=String.fromCharCode(d[1]),g+=String.fromCharCode(d[2]),g+=String.fromCharCode(d[3]),g},Mi=rr,_n=Qt.toUnsigned,sr=Mi,vn=function(d,g){var _=[],y,T,E,L,N;if(!g.length)return null;for(y=0;y<d.byteLength;)T=_n(d[y]<<24|d[y+1]<<16|d[y+2]<<8|d[y+3]),E=sr(d.subarray(y+4,y+8)),L=T>1?y+T:d.byteLength,E===g[0]&&(g.length===1?_.push(d.subarray(y+8,L)):(N=vn(d.subarray(y+8,L),g.slice(1)),N.length&&(_=_.concat(N)))),y=L;return _},Ni=vn,gi=Qt.toUnsigned,Tn=o.getUint64,bn=function(d){var g={version:d[0],flags:new Uint8Array(d.subarray(1,4))};return g.version===1?g.baseMediaDecodeTime=Tn(d.subarray(4)):g.baseMediaDecodeTime=gi(d[4]<<24|d[5]<<16|d[6]<<8|d[7]),g},yi=bn,ar=function(d){var g=new DataView(d.buffer,d.byteOffset,d.byteLength),_={version:d[0],flags:new Uint8Array(d.subarray(1,4)),trackId:g.getUint32(4)},y=_.flags[2]&1,T=_.flags[2]&2,E=_.flags[2]&8,L=_.flags[2]&16,N=_.flags[2]&32,U=_.flags[0]&65536,q=_.flags[0]&131072,J;return J=8,y&&(J+=4,_.baseDataOffset=g.getUint32(12),J+=4),T&&(_.sampleDescriptionIndex=g.getUint32(J),J+=4),E&&(_.defaultSampleDuration=g.getUint32(J),J+=4),L&&(_.defaultSampleSize=g.getUint32(J),J+=4),N&&(_.defaultSampleFlags=g.getUint32(J)),U&&(_.durationIsEmpty=!0),!y&&q&&(_.baseDataOffsetIsMoof=!0),_},Bi=ar,or=function(d){return{isLeading:(d[0]&12)>>>2,dependsOn:d[0]&3,isDependedOn:(d[1]&192)>>>6,hasRedundancy:(d[1]&48)>>>4,paddingValue:(d[1]&14)>>>1,isNonSyncSample:d[1]&1,degradationPriority:d[2]<<8|d[3]}},_i=or,Jt=_i,lr=function(d){var g={version:d[0],flags:new Uint8Array(d.subarray(1,4)),samples:[]},_=new DataView(d.buffer,d.byteOffset,d.byteLength),y=g.flags[2]&1,T=g.flags[2]&4,E=g.flags[1]&1,L=g.flags[1]&2,N=g.flags[1]&4,U=g.flags[1]&8,q=_.getUint32(4),J=8,se;for(y&&(g.dataOffset=_.getInt32(J),J+=4),T&&q&&(se={flags:Jt(d.subarray(J,J+4))},J+=4,E&&(se.duration=_.getUint32(J),J+=4),L&&(se.size=_.getUint32(J),J+=4),U&&(g.version===1?se.compositionTimeOffset=_.getInt32(J):se.compositionTimeOffset=_.getUint32(J),J+=4),g.samples.push(se),q--);q--;)se={},E&&(se.duration=_.getUint32(J),J+=4),L&&(se.size=_.getUint32(J),J+=4),N&&(se.flags=Jt(d.subarray(J,J+4)),J+=4),U&&(g.version===1?se.compositionTimeOffset=_.getInt32(J):se.compositionTimeOffset=_.getUint32(J),J+=4),g.samples.push(se);return g},Fi=lr,Sn={tfdt:yi,trun:Fi},xn={parseTfdt:Sn.tfdt,parseTrun:Sn.trun},ur=function(d){for(var g=0,_=String.fromCharCode(d[g]),y="";_!=="\0";)y+=_,g++,_=String.fromCharCode(d[g]);return y+=_,y},B={uint8ToCString:ur},ke=B.uint8ToCString,Zt=o.getUint64,$i=function(d){var g=4,_=d[0],y,T,E,L,N,U,q,J;if(_===0){y=ke(d.subarray(g)),g+=y.length,T=ke(d.subarray(g)),g+=T.length;var se=new DataView(d.buffer);E=se.getUint32(g),g+=4,N=se.getUint32(g),g+=4,U=se.getUint32(g),g+=4,q=se.getUint32(g),g+=4}else if(_===1){var se=new DataView(d.buffer);E=se.getUint32(g),g+=4,L=Zt(d.subarray(g)),g+=8,U=se.getUint32(g),g+=4,q=se.getUint32(g),g+=4,y=ke(d.subarray(g)),g+=y.length,T=ke(d.subarray(g)),g+=T.length}J=new Uint8Array(d.subarray(g,d.byteLength));var Ee={scheme_id_uri:y,value:T,timescale:E||1,presentation_time:L,presentation_time_delta:N,event_duration:U,id:q,message_data:J};return Ti(_,Ee)?Ee:void 0},vi=function(d,g,_,y){return d||d===0?d/g:y+_/g},Ti=function(d,g){var _=g.scheme_id_uri!=="\0",y=d===0&&Ce(g.presentation_time_delta)&&_,T=d===1&&Ce(g.presentation_time)&&_;return!(d>1)&&y||T},Ce=function(d){return d!==void 0||d!==null},b={parseEmsgBox:$i,scaleTime:vi},D;typeof window<"u"?D=window:typeof r<"u"?D=r:typeof self<"u"?D=self:D={};var le=D,Ae=Qt.toUnsigned,$e=Qt.toHexString,qe=Ni,Ct=Mi,cr=b,kr=Bi,Pr=Fi,Rr=yi,Or=o.getUint64,gr,yr,_r,vr,Tr,dr,br,hr=le,Lr=Xi.parseId3Frames;gr=function(d){var g={},_=qe(d,["moov","trak"]);return _.reduce(function(y,T){var E,L,N,U,q;return E=qe(T,["tkhd"])[0],!E||(L=E[0],N=L===0?12:20,U=Ae(E[N]<<24|E[N+1]<<16|E[N+2]<<8|E[N+3]),q=qe(T,["mdia","mdhd"])[0],!q)?null:(L=q[0],N=L===0?12:20,y[U]=Ae(q[N]<<24|q[N+1]<<16|q[N+2]<<8|q[N+3]),y)},g)},yr=function(d,g){var _;_=qe(g,["moof","traf"]);var y=_.reduce(function(T,E){var L=qe(E,["tfhd"])[0],N=Ae(L[4]<<24|L[5]<<16|L[6]<<8|L[7]),U=d[N]||9e4,q=qe(E,["tfdt"])[0],J=new DataView(q.buffer,q.byteOffset,q.byteLength),se;q[0]===1?se=Or(q.subarray(4,12)):se=J.getUint32(4);let Ee;return typeof se=="bigint"?Ee=se/hr.BigInt(U):typeof se=="number"&&!isNaN(se)&&(Ee=se/U),Ee<Number.MAX_SAFE_INTEGER&&(Ee=Number(Ee)),Ee<T&&(T=Ee),T},1/0);return typeof y=="bigint"||isFinite(y)?y:0},_r=function(d,g){var _=qe(g,["moof","traf"]),y=0,T=0,E;if(_&&_.length){var L=qe(_[0],["tfhd"])[0],N=qe(_[0],["trun"])[0],U=qe(_[0],["tfdt"])[0];if(L){var q=kr(L);E=q.trackId}if(U){var J=Rr(U);y=J.baseMediaDecodeTime}if(N){var se=Pr(N);se.samples&&se.samples.length&&(T=se.samples[0].compositionTimeOffset||0)}}var Ee=d[E]||9e4;typeof y=="bigint"&&(T=hr.BigInt(T),Ee=hr.BigInt(Ee));var de=(y+T)/Ee;return typeof de=="bigint"&&de<Number.MAX_SAFE_INTEGER&&(de=Number(de)),de},vr=function(d){var g=qe(d,["moov","trak"]),_=[];return g.forEach(function(y){var T=qe(y,["mdia","hdlr"]),E=qe(y,["tkhd"]);T.forEach(function(L,N){var U=Ct(L.subarray(8,12)),q=E[N],J,se,Ee;U==="vide"&&(J=new DataView(q.buffer,q.byteOffset,q.byteLength),se=J.getUint8(0),Ee=se===0?J.getUint32(12):J.getUint32(20),_.push(Ee))})}),_},dr=function(d){var g=d[0],_=g===0?12:20;return Ae(d[_]<<24|d[_+1]<<16|d[_+2]<<8|d[_+3])},Tr=function(d){var g=qe(d,["moov","trak"]),_=[];return g.forEach(function(y){var T={},E=qe(y,["tkhd"])[0],L,N;E&&(L=new DataView(E.buffer,E.byteOffset,E.byteLength),N=L.getUint8(0),T.id=N===0?L.getUint32(12):L.getUint32(20));var U=qe(y,["mdia","hdlr"])[0];if(U){var q=Ct(U.subarray(8,12));q==="vide"?T.type="video":q==="soun"?T.type="audio":T.type=q}var J=qe(y,["mdia","minf","stbl","stsd"])[0];if(J){var se=J.subarray(8);T.codec=Ct(se.subarray(4,8));var Ee=qe(se,[T.codec])[0],de,Re;Ee&&(/^[asm]vc[1-9]$/i.test(T.codec)?(de=Ee.subarray(78),Re=Ct(de.subarray(4,8)),Re==="avcC"&&de.length>11?(T.codec+=".",T.codec+=$e(de[9]),T.codec+=$e(de[10]),T.codec+=$e(de[11])):T.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(T.codec)?(de=Ee.subarray(28),Re=Ct(de.subarray(4,8)),Re==="esds"&&de.length>20&&de[19]!==0?(T.codec+="."+$e(de[19]),T.codec+="."+$e(de[20]>>>2&63).replace(/^0/,"")):T.codec="mp4a.40.2"):T.codec=T.codec.toLowerCase())}var Ue=qe(y,["mdia","mdhd"])[0];Ue&&(T.timescale=dr(Ue)),_.push(T)}),_},br=function(d,g=0){var _=qe(d,["emsg"]);return _.map(y=>{var T=cr.parseEmsgBox(new Uint8Array(y)),E=Lr(T.message_data);return{cueTime:cr.scaleTime(T.presentation_time,T.timescale,T.presentation_time_delta,g),duration:cr.scaleTime(T.event_duration,T.timescale),frames:E}})};var Ui={findBox:qe,parseType:Ct,timescale:gr,startTime:yr,compositionStartTime:_r,videoTrackIds:vr,tracks:Tr,getTimescaleFromMediaHeader:dr,getEmsgID3:br};const{parseTrun:Mr}=xn,{findBox:Sr}=Ui;var xr=le,Nr=function(d){var g=Sr(d,["moof","traf"]),_=Sr(d,["mdat"]),y=[];return _.forEach(function(T,E){var L=g[E];y.push({mdat:T,traf:L})}),y},Br=function(d,g,_){var y=g,T=_.defaultSampleDuration||0,E=_.defaultSampleSize||0,L=_.trackId,N=[];return d.forEach(function(U){var q=Mr(U),J=q.samples;J.forEach(function(se){se.duration===void 0&&(se.duration=T),se.size===void 0&&(se.size=E),se.trackId=L,se.dts=y,se.compositionTimeOffset===void 0&&(se.compositionTimeOffset=0),typeof y=="bigint"?(se.pts=y+xr.BigInt(se.compositionTimeOffset),y+=xr.BigInt(se.duration)):(se.pts=y+se.compositionTimeOffset,y+=se.duration)}),N=N.concat(J)}),N},Er={getMdatTrafPairs:Nr,parseSamples:Br},Fr=pt.discardEmulationPreventionBytes,$r=xi.CaptionStream,fr=Ni,Ur=yi,Hr=Bi,{getMdatTrafPairs:jr,parseSamples:Vr}=Er,qr=function(d,g){for(var _=d,y=0;y<g.length;y++){var T=g[y];if(_<T.size)return T;_-=T.size}return null},zr=function(d,g,_){var y=new DataView(d.buffer,d.byteOffset,d.byteLength),T={logs:[],seiNals:[]},E,L,N,U;for(L=0;L+4<d.length;L+=N)if(N=y.getUint32(L),L+=4,!(N<=0))switch(d[L]&31){case 6:var q=d.subarray(L+1,L+1+N),J=qr(L,g);if(E={nalUnitType:"sei_rbsp",size:N,data:q,escapedRBSP:Fr(q),trackId:_},J)E.pts=J.pts,E.dts=J.dts,U=J;else if(U)E.pts=U.pts,E.dts=U.dts;else{T.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+L+" for trackId "+_+". See mux.js#223."});break}T.seiNals.push(E);break}return T},Gr=function(d,g){var _={},y=jr(d);return y.forEach(function(T){var E=T.mdat,L=T.traf,N=fr(L,["tfhd"]),U=Hr(N[0]),q=U.trackId,J=fr(L,["tfdt"]),se=J.length>0?Ur(J[0]).baseMediaDecodeTime:0,Ee=fr(L,["trun"]),de,Re;g===q&&Ee.length>0&&(de=Vr(Ee,se,U),Re=zr(E,de,q),_[q]||(_[q]={seiNals:[],logs:[]}),_[q].seiNals=_[q].seiNals.concat(Re.seiNals),_[q].logs=_[q].logs.concat(Re.logs))}),_},Wr=function(d,g,_){var y;if(g===null)return null;y=Gr(d,g);var T=y[g]||{};return{seiNals:T.seiNals,logs:T.logs,timescale:_}},Kr=function(){var d=!1,g,_,y,T,E,L;this.isInitialized=function(){return d},this.init=function(N){g=new $r,d=!0,L=N?N.isPartial:!1,g.on("data",function(U){U.startTime=U.startPts/T,U.endTime=U.endPts/T,E.captions.push(U),E.captionStreams[U.stream]=!0}),g.on("log",function(U){E.logs.push(U)})},this.isNewInit=function(N,U){return N&&N.length===0||U&&typeof U=="object"&&Object.keys(U).length===0?!1:y!==N[0]||T!==U[y]},this.parse=function(N,U,q){var J;if(this.isInitialized()){if(!U||!q)return null;if(this.isNewInit(U,q))y=U[0],T=q[y];else if(y===null||!T)return _.push(N),null}else return null;for(;_.length>0;){var se=_.shift();this.parse(se,U,q)}return J=Wr(N,y,T),J&&J.logs&&(E.logs=E.logs.concat(J.logs)),J===null||!J.seiNals?E.logs.length?{logs:E.logs,captions:[],captionStreams:[]}:null:(this.pushNals(J.seiNals),this.flushStream(),E)},this.pushNals=function(N){if(!this.isInitialized()||!N||N.length===0)return null;N.forEach(function(U){g.push(U)})},this.flushStream=function(){if(!this.isInitialized())return null;L?g.partialFlush():g.flush()},this.clearParsedCaptions=function(){E.captions=[],E.captionStreams={},E.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;g.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){_=[],y=null,T=null,E?this.clearParsedCaptions():E={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Xr=Kr;const{parseTfdt:Yr}=xn,jt=Ni,{getTimescaleFromMediaHeader:Qr}=Ui,{parseSamples:Jr,getMdatTrafPairs:Zr}=Er;var Cr=function(){let d=9e4;this.init=function(g){const _=jt(g,["moov","trak","mdia","mdhd"])[0];_&&(d=Qr(_))},this.parseSegment=function(g){const _=[],y=Zr(g);let T=0;return y.forEach(function(E){const L=E.mdat,N=E.traf,U=jt(N,["tfdt"])[0],q=jt(N,["tfhd"])[0],J=jt(N,["trun"]);if(U&&(T=Yr(U).baseMediaDecodeTime),J.length&&q){const se=Jr(J,T,q);let Ee=0;se.forEach(function(de){const Re="utf-8",Ue=new TextDecoder(Re),ut=L.slice(Ee,Ee+de.size);if(jt(ut,["vtte"])[0]){Ee+=de.size;return}jt(ut,["vttc"]).forEach(function(Hi){const ji=jt(Hi,["payl"])[0],Vi=jt(Hi,["sttg"])[0],qi=de.pts/d,wn=(de.pts+de.duration)/d;let Qe,zi;if(ji)try{Qe=Ue.decode(ji)}catch(At){console.error(At)}if(Vi)try{zi=Ue.decode(Vi)}catch(At){console.error(At)}de.duration&&Qe&&_.push({cueText:Qe,start:qi,end:wn,settings:zi})}),Ee+=de.size})}}),_}},pr=ni,wr=function(d){var g=d[1]&31;return g<<=8,g|=d[2],g},En=function(d){return!!(d[1]&64)},Cn=function(d){var g=0;return(d[3]&48)>>>4>1&&(g+=d[4]+1),g},es=function(d,g){var _=wr(d);return _===0?"pat":_===g?"pmt":g?"pes":null},ts=function(d){var g=En(d),_=4+Cn(d);return g&&(_+=d[_]+1),(d[_+10]&31)<<8|d[_+11]},is=function(d){var g={},_=En(d),y=4+Cn(d);if(_&&(y+=d[y]+1),!!(d[y+5]&1)){var T,E,L;T=(d[y+1]&15)<<8|d[y+2],E=3+T-4,L=(d[y+10]&15)<<8|d[y+11];for(var N=12+L;N<E;){var U=y+N;g[(d[U+1]&31)<<8|d[U+2]]=d[U],N+=((d[U+3]&15)<<8|d[U+4])+5}return g}},ns=function(d,g){var _=wr(d),y=g[_];switch(y){case pr.H264_STREAM_TYPE:return"video";case pr.ADTS_STREAM_TYPE:return"audio";case pr.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},rs=function(d){var g=En(d);if(!g)return null;var _=4+Cn(d);if(_>=d.byteLength)return null;var y=null,T;return T=d[_+7],T&192&&(y={},y.pts=(d[_+9]&14)<<27|(d[_+10]&255)<<20|(d[_+11]&254)<<12|(d[_+12]&255)<<5|(d[_+13]&254)>>>3,y.pts*=4,y.pts+=(d[_+13]&6)>>>1,y.dts=y.pts,T&64&&(y.dts=(d[_+14]&14)<<27|(d[_+15]&255)<<20|(d[_+16]&254)<<12|(d[_+17]&255)<<5|(d[_+18]&254)>>>3,y.dts*=4,y.dts+=(d[_+18]&6)>>>1)),y},mr=function(d){switch(d){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},ss=function(d){for(var g=4+Cn(d),_=d.subarray(g),y=0,T=0,E=!1,L;T<_.byteLength-3;T++)if(_[T+2]===1){y=T+5;break}for(;y<_.byteLength;)switch(_[y]){case 0:if(_[y-1]!==0){y+=2;break}else if(_[y-2]!==0){y++;break}T+3!==y-2&&(L=mr(_[T+3]&31),L==="slice_layer_without_partitioning_rbsp_idr"&&(E=!0));do y++;while(_[y]!==1&&y<_.length);T=y-2,y+=3;break;case 1:if(_[y-1]!==0||_[y-2]!==0){y+=3;break}L=mr(_[T+3]&31),L==="slice_layer_without_partitioning_rbsp_idr"&&(E=!0),T=y-2,y+=3;break;default:y+=3;break}return _=_.subarray(T),y-=T,T=0,_&&_.byteLength>3&&(L=mr(_[T+3]&31),L==="slice_layer_without_partitioning_rbsp_idr"&&(E=!0)),E},as={parseType:es,parsePat:ts,parsePmt:is,parsePayloadUnitStartIndicator:En,parsePesType:ns,parsePesTime:rs,videoPacketContainsKeyFrame:ss},Ar=ni,bi=Ki.handleRollover,Ge={};Ge.ts=as,Ge.aac=Ri;var ei=Fe.ONE_SECOND_IN_TS,ht=188,kt=71,os=function(d,g){for(var _=0,y=ht,T,E;y<d.byteLength;){if(d[_]===kt&&d[y]===kt){switch(T=d.subarray(_,y),E=Ge.ts.parseType(T,g.pid),E){case"pat":g.pid=Ge.ts.parsePat(T);break;case"pmt":var L=Ge.ts.parsePmt(T);g.table=g.table||{},Object.keys(L).forEach(function(N){g.table[N]=L[N]});break}_+=ht,y+=ht;continue}_++,y++}},Dr=function(d,g,_){for(var y=0,T=ht,E,L,N,U,q,J=!1;T<=d.byteLength;){if(d[y]===kt&&(d[T]===kt||T===d.byteLength)){switch(E=d.subarray(y,T),L=Ge.ts.parseType(E,g.pid),L){case"pes":N=Ge.ts.parsePesType(E,g.table),U=Ge.ts.parsePayloadUnitStartIndicator(E),N==="audio"&&U&&(q=Ge.ts.parsePesTime(E),q&&(q.type="audio",_.audio.push(q),J=!0));break}if(J)break;y+=ht,T+=ht;continue}y++,T++}for(T=d.byteLength,y=T-ht,J=!1;y>=0;){if(d[y]===kt&&(d[T]===kt||T===d.byteLength)){switch(E=d.subarray(y,T),L=Ge.ts.parseType(E,g.pid),L){case"pes":N=Ge.ts.parsePesType(E,g.table),U=Ge.ts.parsePayloadUnitStartIndicator(E),N==="audio"&&U&&(q=Ge.ts.parsePesTime(E),q&&(q.type="audio",_.audio.push(q),J=!0));break}if(J)break;y-=ht,T-=ht;continue}y--,T--}},ls=function(d,g,_){for(var y=0,T=ht,E,L,N,U,q,J,se,Ee,de=!1,Re={data:[],size:0};T<d.byteLength;){if(d[y]===kt&&d[T]===kt){switch(E=d.subarray(y,T),L=Ge.ts.parseType(E,g.pid),L){case"pes":if(N=Ge.ts.parsePesType(E,g.table),U=Ge.ts.parsePayloadUnitStartIndicator(E),N==="video"&&(U&&!de&&(q=Ge.ts.parsePesTime(E),q&&(q.type="video",_.video.push(q),de=!0)),!_.firstKeyFrame)){if(U&&Re.size!==0){for(J=new Uint8Array(Re.size),se=0;Re.data.length;)Ee=Re.data.shift(),J.set(Ee,se),se+=Ee.byteLength;if(Ge.ts.videoPacketContainsKeyFrame(J)){var Ue=Ge.ts.parsePesTime(J);Ue?(_.firstKeyFrame=Ue,_.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}Re.size=0}Re.data.push(E),Re.size+=E.byteLength}break}if(de&&_.firstKeyFrame)break;y+=ht,T+=ht;continue}y++,T++}for(T=d.byteLength,y=T-ht,de=!1;y>=0;){if(d[y]===kt&&d[T]===kt){switch(E=d.subarray(y,T),L=Ge.ts.parseType(E,g.pid),L){case"pes":N=Ge.ts.parsePesType(E,g.table),U=Ge.ts.parsePayloadUnitStartIndicator(E),N==="video"&&U&&(q=Ge.ts.parsePesTime(E),q&&(q.type="video",_.video.push(q),de=!0));break}if(de)break;y-=ht,T-=ht;continue}y--,T--}},us=function(d,g){if(d.audio&&d.audio.length){var _=g;(typeof _>"u"||isNaN(_))&&(_=d.audio[0].dts),d.audio.forEach(function(E){E.dts=bi(E.dts,_),E.pts=bi(E.pts,_),E.dtsTime=E.dts/ei,E.ptsTime=E.pts/ei})}if(d.video&&d.video.length){var y=g;if((typeof y>"u"||isNaN(y))&&(y=d.video[0].dts),d.video.forEach(function(E){E.dts=bi(E.dts,y),E.pts=bi(E.pts,y),E.dtsTime=E.dts/ei,E.ptsTime=E.pts/ei}),d.firstKeyFrame){var T=d.firstKeyFrame;T.dts=bi(T.dts,y),T.pts=bi(T.pts,y),T.dtsTime=T.dts/ei,T.ptsTime=T.pts/ei}}},cs=function(d){for(var g=!1,_=0,y=null,T=null,E=0,L=0,N;d.length-L>=3;){var U=Ge.aac.parseType(d,L);switch(U){case"timed-metadata":if(d.length-L<10){g=!0;break}if(E=Ge.aac.parseId3TagSize(d,L),E>d.length){g=!0;break}T===null&&(N=d.subarray(L,L+E),T=Ge.aac.parseAacTimestamp(N)),L+=E;break;case"audio":if(d.length-L<7){g=!0;break}if(E=Ge.aac.parseAdtsSize(d,L),E>d.length){g=!0;break}y===null&&(N=d.subarray(L,L+E),y=Ge.aac.parseSampleRate(N)),_++,L+=E;break;default:L++;break}if(g)return null}if(y===null||T===null)return null;var q=ei/y,J={audio:[{type:"audio",dts:T,pts:T},{type:"audio",dts:T+_*1024*q,pts:T+_*1024*q}]};return J},ds=function(d){var g={pid:null,table:null},_={};os(d,g);for(var y in g.table)if(g.table.hasOwnProperty(y)){var T=g.table[y];switch(T){case Ar.H264_STREAM_TYPE:_.video=[],ls(d,g,_),_.video.length===0&&delete _.video;break;case Ar.ADTS_STREAM_TYPE:_.audio=[],Dr(d,g,_),_.audio.length===0&&delete _.audio;break}}return _},hs=function(d,g){var _=Ge.aac.isLikelyAacData(d),y;return _?y=cs(d):y=ds(d),!y||!y.audio&&!y.video?null:(us(y,g),y)},fs={inspect:hs,parseAudioPes_:Dr};const ps=function(d,g){g.on("data",function(_){const y=_.initSegment;_.initSegment={data:y.buffer,byteOffset:y.byteOffset,byteLength:y.byteLength};const T=_.data;_.data=T.buffer,d.postMessage({action:"data",segment:_,byteOffset:T.byteOffset,byteLength:T.byteLength},[_.data])}),g.on("done",function(_){d.postMessage({action:"done"})}),g.on("gopInfo",function(_){d.postMessage({action:"gopInfo",gopInfo:_})}),g.on("videoSegmentTimingInfo",function(_){const y={start:{decode:Fe.videoTsToSeconds(_.start.dts),presentation:Fe.videoTsToSeconds(_.start.pts)},end:{decode:Fe.videoTsToSeconds(_.end.dts),presentation:Fe.videoTsToSeconds(_.end.pts)},baseMediaDecodeTime:Fe.videoTsToSeconds(_.baseMediaDecodeTime)};_.prependedContentDuration&&(y.prependedContentDuration=Fe.videoTsToSeconds(_.prependedContentDuration)),d.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:y})}),g.on("audioSegmentTimingInfo",function(_){const y={start:{decode:Fe.videoTsToSeconds(_.start.dts),presentation:Fe.videoTsToSeconds(_.start.pts)},end:{decode:Fe.videoTsToSeconds(_.end.dts),presentation:Fe.videoTsToSeconds(_.end.pts)},baseMediaDecodeTime:Fe.videoTsToSeconds(_.baseMediaDecodeTime)};_.prependedContentDuration&&(y.prependedContentDuration=Fe.videoTsToSeconds(_.prependedContentDuration)),d.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:y})}),g.on("id3Frame",function(_){d.postMessage({action:"id3Frame",id3Frame:_})}),g.on("caption",function(_){d.postMessage({action:"caption",caption:_})}),g.on("trackinfo",function(_){d.postMessage({action:"trackinfo",trackInfo:_})}),g.on("audioTimingInfo",function(_){d.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Fe.videoTsToSeconds(_.start),end:Fe.videoTsToSeconds(_.end)}})}),g.on("videoTimingInfo",function(_){d.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Fe.videoTsToSeconds(_.start),end:Fe.videoTsToSeconds(_.end)}})}),g.on("log",function(_){d.postMessage({action:"log",log:_})})};class Ir{constructor(g,_){this.options=_||{},this.self=g,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new ir.Transmuxer(this.options),ps(this.self,this.transmuxer)}pushMp4Captions(g){this.captionParser||(this.captionParser=new Xr,this.captionParser.init());const _=new Uint8Array(g.data,g.byteOffset,g.byteLength),y=this.captionParser.parse(_,g.trackIds,g.timescales);this.self.postMessage({action:"mp4Captions",captions:y&&y.captions||[],logs:y&&y.logs||[],data:_.buffer},[_.buffer])}initMp4WebVttParser(g){this.webVttParser||(this.webVttParser=new Cr);const _=new Uint8Array(g.data,g.byteOffset,g.byteLength);this.webVttParser.init(_)}getMp4WebVttText(g){this.webVttParser||(this.webVttParser=new Cr);const _=new Uint8Array(g.data,g.byteOffset,g.byteLength),y=this.webVttParser.parseSegment(_);this.self.postMessage({action:"getMp4WebVttText",mp4VttCues:y||[],data:_.buffer},[_.buffer])}probeMp4StartTime({timescales:g,data:_}){const y=Ui.startTime(g,_);this.self.postMessage({action:"probeMp4StartTime",startTime:y,data:_},[_.buffer])}probeMp4Tracks({data:g}){const _=Ui.tracks(g);this.self.postMessage({action:"probeMp4Tracks",tracks:_,data:g},[g.buffer])}probeEmsgID3({data:g,offset:_}){const y=Ui.getEmsgID3(g,_);this.self.postMessage({action:"probeEmsgID3",id3Frames:y,emsgData:g},[g.buffer])}probeTs({data:g,baseStartTime:_}){const y=typeof _=="number"&&!isNaN(_)?_*Fe.ONE_SECOND_IN_TS:void 0,T=fs.inspect(g,y);let E=null;T&&(E={hasVideo:T.video&&T.video.length===2||!1,hasAudio:T.audio&&T.audio.length===2||!1},E.hasVideo&&(E.videoStart=T.video[0].ptsTime),E.hasAudio&&(E.audioStart=T.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:E,data:g},[g.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(g){const _=new Uint8Array(g.data,g.byteOffset,g.byteLength);this.transmuxer.push(_)}reset(){this.transmuxer.reset()}setTimestampOffset(g){const _=g.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(Fe.secondsToVideoTs(_)))}setAudioAppendStart(g){this.transmuxer.setAudioAppendStart(Math.ceil(Fe.secondsToVideoTs(g.appendStart)))}setRemux(g){this.transmuxer.setRemux(g.remux)}flush(g){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(g){this.transmuxer.alignGopsWith(g.gopsToAlignWith.slice())}}self.onmessage=function(d){if(d.data.action==="init"&&d.data.options){this.messageHandlers=new Ir(self,d.data.options);return}this.messageHandlers||(this.messageHandlers=new Ir(self)),d.data&&d.data.action&&d.data.action!=="init"&&this.messageHandlers[d.data.action]&&this.messageHandlers[d.data.action](d.data)}}));var TransmuxWorker=factory(workerCode$1);const handleData_=(r,e,n)=>{const{type:s,initSegment:a,captions:o,captionStreams:l,metadata:u,videoFrameDtsTime:c,videoFramePtsTime:f}=r.data.segment;e.buffer.push({captions:o,captionStreams:l,metadata:u});const m=r.data.segment.boxes||{data:r.data.segment.data},v={type:s,data:new Uint8Array(m.data,m.data.byteOffset,m.data.byteLength),initSegment:new Uint8Array(a.data,a.byteOffset,a.byteLength)};typeof c<"u"&&(v.videoFrameDtsTime=c),typeof f<"u"&&(v.videoFramePtsTime=f),n(v)},handleDone_=({transmuxedData:r,callback:e})=>{r.buffer=[],e(r)},handleGopInfo_=(r,e)=>{e.gopInfo=r.data.gopInfo},processTransmux=r=>{const{transmuxer:e,bytes:n,audioAppendStart:s,gopsToAlignWith:a,remux:o,onData:l,onTrackInfo:u,onAudioTimingInfo:c,onVideoTimingInfo:f,onVideoSegmentTimingInfo:m,onAudioSegmentTimingInfo:v,onId3:x,onCaptions:C,onDone:w,onEndedTimeline:S,onTransmuxerLog:k,isEndOfTimeline:M,segment:V,triggerSegmentEventFn:H}=r,F={buffer:[]};let G=M;const W=Q=>{e.currentTransmux===r&&(Q.data.action==="data"&&handleData_(Q,F,l),Q.data.action==="trackinfo"&&u(Q.data.trackInfo),Q.data.action==="gopInfo"&&handleGopInfo_(Q,F),Q.data.action==="audioTimingInfo"&&c(Q.data.audioTimingInfo),Q.data.action==="videoTimingInfo"&&f(Q.data.videoTimingInfo),Q.data.action==="videoSegmentTimingInfo"&&m(Q.data.videoSegmentTimingInfo),Q.data.action==="audioSegmentTimingInfo"&&v(Q.data.audioSegmentTimingInfo),Q.data.action==="id3Frame"&&x([Q.data.id3Frame],Q.data.id3Frame.dispatchType),Q.data.action==="caption"&&C(Q.data.caption),Q.data.action==="endedtimeline"&&(G=!1,S()),Q.data.action==="log"&&k(Q.data.log),Q.data.type==="transmuxed"&&(G||(e.onmessage=null,handleDone_({transmuxedData:F,callback:w}),dequeue(e))))},R=()=>{const Q={message:"Received an error message from the transmuxer worker",metadata:{errorType:videojs.Error.StreamingFailedToTransmuxSegment,segmentInfo:segmentInfoPayload({segment:V})}};w(null,Q)};if(e.onmessage=W,e.onerror=R,s&&e.postMessage({action:"setAudioAppendStart",appendStart:s}),Array.isArray(a)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:a}),typeof o<"u"&&e.postMessage({action:"setRemux",remux:o}),n.byteLength){const Q=n instanceof ArrayBuffer?n:n.buffer,A=n instanceof ArrayBuffer?0:n.byteOffset;H({type:"segmenttransmuxingstart",segment:V}),e.postMessage({action:"push",data:Q,byteOffset:A,byteLength:n.byteLength},[Q])}M&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},dequeue=r=>{r.currentTransmux=null,r.transmuxQueue.length&&(r.currentTransmux=r.transmuxQueue.shift(),typeof r.currentTransmux=="function"?r.currentTransmux():processTransmux(r.currentTransmux))},processAction=(r,e)=>{r.postMessage({action:e}),dequeue(r)},enqueueAction=(r,e)=>{if(!e.currentTransmux){e.currentTransmux=r,processAction(e,r);return}e.transmuxQueue.push(processAction.bind(null,e,r))},reset=r=>{enqueueAction("reset",r)},endTimeline=r=>{enqueueAction("endTimeline",r)},transmux=r=>{if(!r.transmuxer.currentTransmux){r.transmuxer.currentTransmux=r,processTransmux(r);return}r.transmuxer.transmuxQueue.push(r)},createTransmuxer=r=>{const e=new TransmuxWorker;e.currentTransmux=null,e.transmuxQueue=[];const n=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,n.call(e)),e.postMessage({action:"init",options:r}),e};var segmentTransmuxer={reset,endTimeline,transmux,createTransmuxer};const workerCallback=function(r){const e=r.transmuxer,n=r.endAction||r.action,s=r.callback,a=_extends({},r,{endAction:null,transmuxer:null,callback:null}),o=l=>{l.data.action===n&&(e.removeEventListener("message",o),l.data.data&&(l.data.data=new Uint8Array(l.data.data,r.byteOffset||0,r.byteLength||l.data.data.byteLength),r.data&&(r.data=l.data.data)),s(l.data))};if(e.addEventListener("message",o),r.data){const l=r.data instanceof ArrayBuffer;a.byteOffset=l?0:r.data.byteOffset,a.byteLength=r.data.byteLength;const u=[l?r.data:r.data.buffer];e.postMessage(a,u)}else e.postMessage(a)},REQUEST_ERRORS={FAILURE:2,TIMEOUT:-101,ABORTED:-102},WEB_VTT_CODEC="wvtt",abortAll=r=>{r.forEach(e=>{e.abort()})},getRequestStats=r=>({bandwidth:r.bandwidth,bytesReceived:r.bytesReceived||0,roundTripTime:r.roundTripTime||0}),getProgressStats=r=>{const e=r.target,s={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return s.bytesReceived=r.loaded,s.bandwidth=Math.floor(s.bytesReceived/s.roundTripTime*8*1e3),s},handleErrors=(r,e)=>{const{requestType:n}=e,s=getStreamingNetworkErrorMetadata({requestType:n,request:e,error:r});return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:REQUEST_ERRORS.TIMEOUT,xhr:e,metadata:s}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:REQUEST_ERRORS.ABORTED,xhr:e,metadata:s}:r?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:REQUEST_ERRORS.FAILURE,xhr:e,metadata:s}:e.responseType==="arraybuffer"&&e.response.byteLength===0?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:REQUEST_ERRORS.FAILURE,xhr:e,metadata:s}:null},handleKeyResponse=(r,e,n,s)=>(a,o)=>{const l=o.response,u=handleErrors(a,o);if(u)return n(u,r);if(l.byteLength!==16)return n({status:o.status,message:"Invalid HLS key at URL: "+o.uri,code:REQUEST_ERRORS.FAILURE,xhr:o},r);const c=new DataView(l),f=new Uint32Array([c.getUint32(0),c.getUint32(4),c.getUint32(8),c.getUint32(12)]);for(let v=0;v<e.length;v++)e[v].bytes=f;const m={uri:o.uri};return s({type:"segmentkeyloadcomplete",segment:r,keyInfo:m}),n(null,r)},initMp4Text=(r,e)=>{e===WEB_VTT_CODEC&&r.transmuxer.postMessage({action:"initMp4WebVttParser",data:r.map.bytes})},parseMp4TextSegment=(r,e,n)=>{e===WEB_VTT_CODEC&&workerCallback({action:"getMp4WebVttText",data:r.bytes,transmuxer:r.transmuxer,callback:({data:s,mp4VttCues:a})=>{r.bytes=s,n(null,r,{mp4VttCues:a})}})},parseInitSegment=(r,e)=>{const n=detectContainerForBytes(r.map.bytes);if(n!=="mp4"){const s=r.map.resolvedUri||r.map.uri,a=n||"unknown";return e({internal:!0,message:`Found unsupported ${a} container for initialization segment at URL: ${s}`,code:REQUEST_ERRORS.FAILURE,metadata:{mediaType:a}})}workerCallback({action:"probeMp4Tracks",data:r.map.bytes,transmuxer:r.transmuxer,callback:({tracks:s,data:a})=>(r.map.bytes=a,s.forEach(function(o){r.map.tracks=r.map.tracks||{},!r.map.tracks[o.type]&&(r.map.tracks[o.type]=o,typeof o.id=="number"&&o.timescale&&(r.map.timescales=r.map.timescales||{},r.map.timescales[o.id]=o.timescale),o.type==="text"&&initMp4Text(r,o.codec))}),e(null))})},handleInitSegmentResponse=({segment:r,finishProcessingFn:e,triggerSegmentEventFn:n})=>(s,a)=>{const o=handleErrors(s,a);if(o)return e(o,r);const l=new Uint8Array(a.response);if(n({type:"segmentloaded",segment:r}),r.map.key)return r.map.encryptedBytes=l,e(null,r);r.map.bytes=l,parseInitSegment(r,function(u){if(u)return u.xhr=a,u.status=a.status,e(u,r);e(null,r)})},handleSegmentResponse=({segment:r,finishProcessingFn:e,responseType:n,triggerSegmentEventFn:s})=>(a,o)=>{const l=handleErrors(a,o);if(l)return e(l,r);s({type:"segmentloaded",segment:r});const u=n==="arraybuffer"||!o.responseText?o.response:stringToArrayBuffer(o.responseText.substring(r.lastReachedChar||0));return r.stats=getRequestStats(o),r.key?r.encryptedBytes=new Uint8Array(u):r.bytes=new Uint8Array(u),e(null,r)},transmuxAndNotify=({segment:r,bytes:e,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:f,dataFn:m,doneFn:v,onTransmuxerLog:x,triggerSegmentEventFn:C})=>{const w=r.map&&r.map.tracks||{},S=!!(w.audio&&w.video);let k=s.bind(null,r,"audio","start");const M=s.bind(null,r,"audio","end");let V=s.bind(null,r,"video","start");const H=s.bind(null,r,"video","end"),F=()=>transmux({bytes:e,transmuxer:r.transmuxer,audioAppendStart:r.audioAppendStart,gopsToAlignWith:r.gopsToAlignWith,remux:S,onData:G=>{G.type=G.type==="combined"?"video":G.type,m(r,G)},onTrackInfo:G=>{n&&(S&&(G.isMuxed=!0),n(r,G))},onAudioTimingInfo:G=>{k&&typeof G.start<"u"&&(k(G.start),k=null),M&&typeof G.end<"u"&&M(G.end)},onVideoTimingInfo:G=>{V&&typeof G.start<"u"&&(V(G.start),V=null),H&&typeof G.end<"u"&&H(G.end)},onVideoSegmentTimingInfo:G=>{const W={pts:{start:G.start.presentation,end:G.end.presentation},dts:{start:G.start.decode,end:G.end.decode}};C({type:"segmenttransmuxingtiminginfoavailable",segment:r,timingInfo:W}),a(G)},onAudioSegmentTimingInfo:G=>{const W={pts:{start:G.start.pts,end:G.end.pts},dts:{start:G.start.dts,end:G.end.dts}};C({type:"segmenttransmuxingtiminginfoavailable",segment:r,timingInfo:W}),o(G)},onId3:(G,W)=>{l(r,G,W)},onCaptions:G=>{u(r,[G])},isEndOfTimeline:c,onEndedTimeline:()=>{f()},onTransmuxerLog:x,onDone:(G,W)=>{v&&(G.type=G.type==="combined"?"video":G.type,C({type:"segmenttransmuxingcomplete",segment:r}),v(W,r,G))},segment:r,triggerSegmentEventFn:C});workerCallback({action:"probeTs",transmuxer:r.transmuxer,data:e,baseStartTime:r.baseStartTime,callback:G=>{r.bytes=e=G.data;const W=G.result;W&&(n(r,{hasAudio:W.hasAudio,hasVideo:W.hasVideo,isMuxed:S}),n=null),F()}})},handleSegmentBytes=({segment:r,bytes:e,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:f,dataFn:m,doneFn:v,onTransmuxerLog:x,triggerSegmentEventFn:C})=>{let w=new Uint8Array(e);if(isLikelyFmp4MediaSegment(w)){r.isFmp4=!0;const{tracks:S}=r.map;if(S.text&&(!S.audio||!S.video)){m(r,{data:w,type:"text"}),parseMp4TextSegment(r,S.text.codec,v);return}const M={isFmp4:!0,hasVideo:!!S.video,hasAudio:!!S.audio};S.audio&&S.audio.codec&&S.audio.codec!=="enca"&&(M.audioCodec=S.audio.codec),S.video&&S.video.codec&&S.video.codec!=="encv"&&(M.videoCodec=S.video.codec),S.video&&S.audio&&(M.isMuxed=!0),n(r,M);const V=(H,F)=>{m(r,{data:w,type:M.hasAudio&&!M.isMuxed?"audio":"video"}),F&&F.length&&l(r,F),H&&H.length&&u(r,H),v(null,r,{})};workerCallback({action:"probeMp4StartTime",timescales:r.map.timescales,data:w,transmuxer:r.transmuxer,callback:({data:H,startTime:F})=>{e=H.buffer,r.bytes=w=H,M.hasAudio&&!M.isMuxed&&s(r,"audio","start",F),M.hasVideo&&s(r,"video","start",F),workerCallback({action:"probeEmsgID3",data:w,transmuxer:r.transmuxer,offset:F,callback:({emsgData:G,id3Frames:W})=>{if(e=G.buffer,r.bytes=w=G,!S.video||!G.byteLength||!r.transmuxer){V(void 0,W);return}workerCallback({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:r.transmuxer,data:w,timescales:r.map.timescales,trackIds:[S.video.id],callback:R=>{e=R.data.buffer,r.bytes=w=R.data,R.logs.forEach(function(Q){x(merge(Q,{stream:"mp4CaptionParser"}))}),V(R.captions,W)}})}})}});return}if(!r.transmuxer){v(null,r,{});return}if(typeof r.container>"u"&&(r.container=detectContainerForBytes(w)),r.container!=="ts"&&r.container!=="aac"){n(r,{hasAudio:!1,hasVideo:!1}),v(null,r,{});return}transmuxAndNotify({segment:r,bytes:e,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:f,dataFn:m,doneFn:v,onTransmuxerLog:x,triggerSegmentEventFn:C})},decrypt=function({id:r,key:e,encryptedBytes:n,decryptionWorker:s,segment:a,doneFn:o},l){const u=f=>{if(f.data.source===r){s.removeEventListener("message",u);const m=f.data.decrypted;l(new Uint8Array(m.bytes,m.byteOffset,m.byteLength))}};s.onerror=()=>{const f="An error occurred in the decryption worker",m=segmentInfoPayload({segment:a}),v={message:f,metadata:{error:new Error(f),errorType:videojs.Error.StreamingFailedToDecryptSegment,segmentInfo:m,keyInfo:{uri:a.key.resolvedUri||a.map.key.resolvedUri}}};o(v,a)},s.addEventListener("message",u);let c;e.bytes.slice?c=e.bytes.slice():c=new Uint32Array(Array.prototype.slice.call(e.bytes)),s.postMessage(createTransferableMessage({source:r,encrypted:n,key:c,iv:e.iv}),[n.buffer,c.buffer])},decryptSegment=({decryptionWorker:r,segment:e,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:f,dataFn:m,doneFn:v,onTransmuxerLog:x,triggerSegmentEventFn:C})=>{C({type:"segmentdecryptionstart"}),decrypt({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:r,segment:e,doneFn:v},w=>{e.bytes=w,C({type:"segmentdecryptioncomplete",segment:e}),handleSegmentBytes({segment:e,bytes:e.bytes,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:f,dataFn:m,doneFn:v,onTransmuxerLog:x,triggerSegmentEventFn:C})})},waitForCompletion=({activeXhrs:r,decryptionWorker:e,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:f,dataFn:m,doneFn:v,onTransmuxerLog:x,triggerSegmentEventFn:C})=>{let w=0,S=!1;return(k,M)=>{if(!S){if(k)return S=!0,abortAll(r),v(k,M);if(w+=1,w===r.length){const V=function(){if(M.encryptedBytes)return decryptSegment({decryptionWorker:e,segment:M,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:f,dataFn:m,doneFn:v,onTransmuxerLog:x,triggerSegmentEventFn:C});handleSegmentBytes({segment:M,bytes:M.bytes,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:f,dataFn:m,doneFn:v,onTransmuxerLog:x,triggerSegmentEventFn:C})};if(M.endOfAllRequests=Date.now(),M.map&&M.map.encryptedBytes&&!M.map.bytes)return C({type:"segmentdecryptionstart",segment:M}),decrypt({decryptionWorker:e,id:M.requestId+"-init",encryptedBytes:M.map.encryptedBytes,key:M.map.key,segment:M,doneFn:v},H=>{M.map.bytes=H,C({type:"segmentdecryptioncomplete",segment:M}),parseInitSegment(M,F=>{if(F)return abortAll(r),v(F,M);V()})});V()}}}},handleLoadEnd=({loadendState:r,abortFn:e})=>n=>{n.target.aborted&&e&&!r.calledAbortFn&&(e(),r.calledAbortFn=!0)},handleProgress=({segment:r,progressFn:e,trackInfoFn:n,timingInfoFn:s,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:f,dataFn:m})=>v=>{if(!v.target.aborted)return r.stats=merge(r.stats,getProgressStats(v)),!r.stats.firstBytesReceivedAt&&r.stats.bytesReceived&&(r.stats.firstBytesReceivedAt=Date.now()),e(v,r)},mediaSegmentRequest=({xhr:r,xhrOptions:e,decryptionWorker:n,segment:s,abortFn:a,progressFn:o,trackInfoFn:l,timingInfoFn:u,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:f,id3Fn:m,captionsFn:v,isEndOfTimeline:x,endedTimelineFn:C,dataFn:w,doneFn:S,onTransmuxerLog:k,triggerSegmentEventFn:M})=>{const V=[],H=waitForCompletion({activeXhrs:V,decryptionWorker:n,trackInfoFn:l,timingInfoFn:u,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:f,id3Fn:m,captionsFn:v,isEndOfTimeline:x,endedTimelineFn:C,dataFn:w,doneFn:S,onTransmuxerLog:k,triggerSegmentEventFn:M});if(s.key&&!s.key.bytes){const Q=[s.key];s.map&&!s.map.bytes&&s.map.key&&s.map.key.resolvedUri===s.key.resolvedUri&&Q.push(s.map.key);const A=merge(e,{uri:s.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),P=handleKeyResponse(s,Q,H,M),j={uri:s.key.resolvedUri};M({type:"segmentkeyloadstart",segment:s,keyInfo:j});const X=r(A,P);V.push(X)}if(s.map&&!s.map.bytes){if(s.map.key&&(!s.key||s.key.resolvedUri!==s.map.key.resolvedUri)){const X=merge(e,{uri:s.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),Z=handleKeyResponse(s,[s.map.key],H,M),ae={uri:s.map.key.resolvedUri};M({type:"segmentkeyloadstart",segment:s,keyInfo:ae});const pe=r(X,Z);V.push(pe)}const A=merge(e,{uri:s.map.resolvedUri,responseType:"arraybuffer",headers:segmentXhrHeaders(s.map),requestType:"segment-media-initialization"}),P=handleInitSegmentResponse({segment:s,finishProcessingFn:H,triggerSegmentEventFn:M});M({type:"segmentloadstart",segment:s});const j=r(A,P);V.push(j)}const F=merge(e,{uri:s.part&&s.part.resolvedUri||s.resolvedUri,responseType:"arraybuffer",headers:segmentXhrHeaders(s),requestType:"segment"}),G=handleSegmentResponse({segment:s,finishProcessingFn:H,responseType:F.responseType,triggerSegmentEventFn:M});M({type:"segmentloadstart",segment:s});const W=r(F,G);W.addEventListener("progress",handleProgress({segment:s,progressFn:o,trackInfoFn:l,timingInfoFn:u,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:f,id3Fn:m,captionsFn:v,isEndOfTimeline:x,endedTimelineFn:C,dataFn:w})),V.push(W);const R={};return V.forEach(Q=>{Q.addEventListener("loadend",handleLoadEnd({loadendState:R,abortFn:a}))}),()=>abortAll(V)},logFn=logger("PlaylistSelector"),representationToString=function(r){if(!r||!r.playlist)return;const e=r.playlist;return JSON.stringify({id:e.id,bandwidth:r.bandwidth,width:r.width,height:r.height,codecs:e.attributes&&e.attributes.CODECS||""})},safeGetComputedStyle=function(r,e){if(!r)return"";const n=window$1.getComputedStyle(r);return n?n[e]:""},stableSort=function(r,e){const n=r.slice();r.sort(function(s,a){const o=e(s,a);return o===0?n.indexOf(s)-n.indexOf(a):o})},comparePlaylistBandwidth=function(r,e){let n,s;return r.attributes.BANDWIDTH&&(n=r.attributes.BANDWIDTH),n=n||window$1.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(s=e.attributes.BANDWIDTH),s=s||window$1.Number.MAX_VALUE,n-s},comparePlaylistResolution=function(r,e){let n,s;return r.attributes.RESOLUTION&&r.attributes.RESOLUTION.width&&(n=r.attributes.RESOLUTION.width),n=n||window$1.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(s=e.attributes.RESOLUTION.width),s=s||window$1.Number.MAX_VALUE,n===s&&r.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?r.attributes.BANDWIDTH-e.attributes.BANDWIDTH:n-s};let simpleSelector=function(r){const{main:e,bandwidth:n,playerWidth:s,playerHeight:a,playerObjectFit:o,limitRenditionByPlayerDimensions:l,playlistController:u}=r;if(!e)return;const c={bandwidth:n,width:s,height:a,limitRenditionByPlayerDimensions:l};let f=e.playlists;Playlist.isAudioOnly(e)&&(f=u.getAudioTrackPlaylists_(),c.audioOnly=!0);let m=f.map(R=>{let Q;const A=R.attributes&&R.attributes.RESOLUTION&&R.attributes.RESOLUTION.width,P=R.attributes&&R.attributes.RESOLUTION&&R.attributes.RESOLUTION.height;return Q=R.attributes&&R.attributes.BANDWIDTH,Q=Q||window$1.Number.MAX_VALUE,{bandwidth:Q,width:A,height:P,playlist:R}});stableSort(m,(R,Q)=>R.bandwidth-Q.bandwidth),m=m.filter(R=>!Playlist.isIncompatible(R.playlist));let v=m.filter(R=>Playlist.isEnabled(R.playlist));v.length||(v=m.filter(R=>!Playlist.isDisabled(R.playlist)));const x=v.filter(R=>R.bandwidth*Config.BANDWIDTH_VARIANCE<n);let C=x[x.length-1];const w=x.filter(R=>R.bandwidth===C.bandwidth)[0];if(l===!1){const R=w||v[0]||m[0];if(R&&R.playlist){let Q="sortedPlaylistReps";return w&&(Q="bandwidthBestRep"),v[0]&&(Q="enabledPlaylistReps"),logFn(`choosing ${representationToString(R)} using ${Q} with options`,c),R.playlist}return logFn("could not choose a playlist with options",c),null}const S=x.filter(R=>R.width&&R.height);stableSort(S,(R,Q)=>R.width-Q.width);const k=S.filter(R=>R.width===s&&R.height===a);C=k[k.length-1];const M=k.filter(R=>R.bandwidth===C.bandwidth)[0];let V,H,F;M||(V=S.filter(R=>o==="cover"?R.width>s&&R.height>a:R.width>s||R.height>a),H=V.filter(R=>R.width===V[0].width&&R.height===V[0].height),C=H[H.length-1],F=H.filter(R=>R.bandwidth===C.bandwidth)[0]);let G;if(u.leastPixelDiffSelector){const R=S.map(Q=>(Q.pixelDiff=Math.abs(Q.width-s)+Math.abs(Q.height-a),Q));stableSort(R,(Q,A)=>Q.pixelDiff===A.pixelDiff?A.bandwidth-Q.bandwidth:Q.pixelDiff-A.pixelDiff),G=R[0]}const W=G||F||M||w||v[0]||m[0];if(W&&W.playlist){let R="sortedPlaylistReps";return G?R="leastPixelDiffRep":F?R="resolutionPlusOneRep":M?R="resolutionBestRep":w?R="bandwidthBestRep":v[0]&&(R="enabledPlaylistReps"),logFn(`choosing ${representationToString(W)} using ${R} with options`,c),W.playlist}return logFn("could not choose a playlist with options",c),null};const lastBandwidthSelector=function(){let r=this.useDevicePixelRatio&&window$1.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(r=this.customPixelRatio),simpleSelector({main:this.playlists.main,bandwidth:this.systemBandwidth,playerWidth:parseInt(safeGetComputedStyle(this.tech_.el(),"width"),10)*r,playerHeight:parseInt(safeGetComputedStyle(this.tech_.el(),"height"),10)*r,playerObjectFit:this.usePlayerObjectFit?safeGetComputedStyle(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})},movingAverageBandwidthSelector=function(r){let e=-1,n=-1;if(r<0||r>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let s=this.useDevicePixelRatio&&window$1.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(s=this.customPixelRatio),e<0&&(e=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(e=r*this.systemBandwidth+(1-r)*e,n=this.systemBandwidth),simpleSelector({main:this.playlists.main,bandwidth:e,playerWidth:parseInt(safeGetComputedStyle(this.tech_.el(),"width"),10)*s,playerHeight:parseInt(safeGetComputedStyle(this.tech_.el(),"height"),10)*s,playerObjectFit:this.usePlayerObjectFit?safeGetComputedStyle(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})}},minRebufferMaxBandwidthSelector=function(r){const{main:e,currentTime:n,bandwidth:s,duration:a,segmentDuration:o,timeUntilRebuffer:l,currentTimeline:u,syncController:c}=r,f=e.playlists.filter(w=>!Playlist.isIncompatible(w));let m=f.filter(Playlist.isEnabled);m.length||(m=f.filter(w=>!Playlist.isDisabled(w)));const x=m.filter(Playlist.hasAttribute.bind(null,"BANDWIDTH")).map(w=>{const k=c.getSyncPoint(w,a,u,n)?1:2,V=Playlist.estimateSegmentRequestTime(o,s,w)*k-l;return{playlist:w,rebufferingImpact:V}}),C=x.filter(w=>w.rebufferingImpact<=0);return stableSort(C,(w,S)=>comparePlaylistBandwidth(S.playlist,w.playlist)),C.length?C[0]:(stableSort(x,(w,S)=>w.rebufferingImpact-S.rebufferingImpact),x[0]||null)},lowestBitrateCompatibleVariantSelector=function(){const r=this.playlists.main.playlists.filter(Playlist.isEnabled);return stableSort(r,(n,s)=>comparePlaylistBandwidth(n,s)),r.filter(n=>!!codecsForPlaylist(this.playlists.main,n).video)[0]||null},concatSegments=r=>{let e=0,n;return r.bytes&&(n=new Uint8Array(r.bytes),r.segments.forEach(s=>{n.set(s,e),e+=s.byteLength})),n};function compactSegmentUrlDescription(r){try{return new URL(r).pathname.split("/").slice(-2).join("/")}catch{return""}}const createCaptionsTrackIfNotExists=function(r,e,n){if(!r[n]){e.trigger({type:"usage",name:"vhs-608"});let s=n;/^cc708_/.test(n)&&(s="SERVICE"+n.split("_")[1]);const a=e.textTracks().getTrackById(s);if(a)r[n]=a;else{const o=e.options_.vhs&&e.options_.vhs.captionServices||{};let l=n,u=n,c=!1;const f=o[s];f&&(l=f.label,u=f.language,c=f.default),r[n]=e.addRemoteTextTrack({kind:"captions",id:s,default:c,label:l,language:u},!1).track}}},addCaptionData=function({inbandTextTracks:r,captionArray:e,timestampOffset:n}){if(!e)return;const s=window$1.WebKitDataCue||window$1.VTTCue;e.forEach(a=>{const o=a.stream;a.content?a.content.forEach(l=>{const u=new s(a.startTime+n,a.endTime+n,l.text);u.line=l.line,u.align="left",u.position=l.position,u.positionAlign="line-left",r[o].addCue(u)}):r[o].addCue(new s(a.startTime+n,a.endTime+n,a.text))})},deprecateOldCue=function(r){Object.defineProperties(r.frame,{id:{get(){return videojs.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),r.value.key}},value:{get(){return videojs.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),r.value.data}},privateData:{get(){return videojs.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),r.value.data}}})},addMetadata=({inbandTextTracks:r,metadataArray:e,timestampOffset:n,videoDuration:s})=>{if(!e)return;const a=window$1.WebKitDataCue||window$1.VTTCue,o=r.metadataTrack_;if(!o||(e.forEach(m=>{const v=m.cueTime+n;typeof v!="number"||window$1.isNaN(v)||v<0||!(v<1/0)||!m.frames||!m.frames.length||m.frames.forEach(x=>{const C=new a(v,v,x.value||x.url||x.data||"");C.frame=x,C.value=x,deprecateOldCue(C),o.addCue(C)})}),!o.cues||!o.cues.length))return;const l=o.cues,u=[];for(let m=0;m<l.length;m++)l[m]&&u.push(l[m]);const c=u.reduce((m,v)=>{const x=m[v.startTime]||[];return x.push(v),m[v.startTime]=x,m},{}),f=Object.keys(c).sort((m,v)=>Number(m)-Number(v));f.forEach((m,v)=>{const x=c[m],C=isFinite(s)?s:m,w=Number(f[v+1])||C;x.forEach(S=>{S.endTime=w})})},dateRangeAttr={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},dateRangeKeysToOmit=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),addDateRangeMetadata=({inbandTextTracks:r,dateRanges:e})=>{const n=r.metadataTrack_;if(!n)return;const s=window$1.WebKitDataCue||window$1.VTTCue;e.forEach(a=>{for(const o of Object.keys(a)){if(dateRangeKeysToOmit.has(o))continue;const l=new s(a.startTime,a.endTime,"");l.id=a.id,l.type="com.apple.quicktime.HLS",l.value={key:dateRangeAttr[o],data:a[o]},(o==="scte35Out"||o==="scte35In")&&(l.value.data=new Uint8Array(l.value.data.match(/[\da-f]{2}/gi)).buffer),n.addCue(l)}a.processDateRange()})},createMetadataTrackIfNotExists=(r,e,n)=>{r.metadataTrack_||(r.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,videojs.browser.IS_ANY_SAFARI||(r.metadataTrack_.inBandMetadataTrackDispatchType=e))},removeCuesFromTrack=function(r,e,n){let s,a;if(n&&n.cues)for(s=n.cues.length;s--;)a=n.cues[s],a.startTime>=r&&a.endTime<=e&&n.removeCue(a)},removeDuplicateCuesFromTrack=function(r){const e=r.cues;if(!e)return;const n={};for(let s=e.length-1;s>=0;s--){const a=e[s],o=`${a.startTime}-${a.endTime}-${a.text}`;n[o]?r.removeCue(a):n[o]=a}},gopsSafeToAlignWith=(r,e,n)=>{if(typeof e>"u"||e===null||!r.length)return[];const s=Math.ceil((e-n+3)*clockExports.ONE_SECOND_IN_TS);let a;for(a=0;a<r.length&&!(r[a].pts>s);a++);return r.slice(a)},updateGopBuffer=(r,e,n)=>{if(!e.length)return r;if(n)return e.slice();const s=e[0].pts;let a=0;for(a;a<r.length&&!(r[a].pts>=s);a++);return r.slice(0,a).concat(e)},removeGopBuffer=(r,e,n,s)=>{const a=Math.ceil((e-s)*clockExports.ONE_SECOND_IN_TS),o=Math.ceil((n-s)*clockExports.ONE_SECOND_IN_TS),l=r.slice();let u=r.length;for(;u--&&!(r[u].pts<=o););if(u===-1)return l;let c=u+1;for(;c--&&!(r[c].pts<=a););return c=Math.max(c,0),l.splice(c,u-c+1),l},shallowEqual=function(r,e){if(!r&&!e||!r&&e||r&&!e)return!1;if(r===e)return!0;const n=Object.keys(r).sort(),s=Object.keys(e).sort();if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++){const o=n[a];if(o!==s[a]||r[o]!==e[o])return!1}return!0},getSyncSegmentCandidate=function(r,e,n){e=e||[];const s=[];let a=0;for(let o=0;o<e.length;o++){const l=e[o];if(r===l.timeline&&(s.push(o),a+=l.duration,a>n))return o}return s.length===0?0:s[s.length-1]},MIN_BACK_BUFFER=1,CHECK_BUFFER_DELAY=500,finite=r=>typeof r=="number"&&isFinite(r),MIN_SEGMENT_DURATION_TO_SAVE_STATS=1/60,illegalMediaSwitch=(r,e,n)=>r!=="main"||!e||!n?null:!n.hasAudio&&!n.hasVideo?"Neither audio nor video found in segment.":e.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,safeBackBufferTrimTime=(r,e,n)=>{let s=e-Config.BACK_BUFFER_LENGTH;r.length&&(s=Math.max(s,r.start(0)));const a=e-n;return Math.min(a,s)},segmentInfoString=r=>{const{startOfSegment:e,duration:n,segment:s,part:a,playlist:{mediaSequence:o,id:l,segments:u=[]},mediaIndex:c,partIndex:f,timeline:m}=r,v=u.length-1;let x="mediaIndex/partIndex increment";r.getMediaInfoForTime?x=`getMediaInfoForTime (${r.getMediaInfoForTime})`:r.isSyncRequest&&(x="getSyncSegmentCandidate (isSyncRequest)"),r.independent&&(x+=` with independent ${r.independent}`);const C=typeof f=="number",w=r.segment.uri?"segment":"pre-segment",S=C?getKnownPartCount({preloadSegment:s})-1:0;return`${w} [${o+c}/${o+v}]`+(C?` part [${f}/${S}]`:"")+` segment start/end [${s.start} => ${s.end}]`+(C?` part start/end [${a.start} => ${a.end}]`:"")+` startOfSegment [${e}] duration [${n}] timeline [${m}] selected by [${x}] playlist [${l}]`},timingInfoPropertyForMedia=r=>`${r}TimingInfo`,timestampOffsetForSegment=({segmentTimeline:r,currentTimeline:e,startOfSegment:n,buffered:s,overrideCheck:a})=>!a&&r===e?null:r<e?n:s.length?s.end(s.length-1):n,shouldWaitForTimelineChange=({timelineChangeController:r,currentTimeline:e,segmentTimeline:n,loaderType:s,audioDisabled:a})=>{if(e===n)return!1;if(s==="audio"){const o=r.lastTimelineChange({type:"main"});return!o||o.to!==n}if(s==="main"&&a){const o=r.pendingTimelineChange({type:"audio"});return!(o&&o.to===n)}return!1},shouldFixBadTimelineChanges=r=>{if(!r)return!1;const e=r.pendingTimelineChange({type:"audio"}),n=r.pendingTimelineChange({type:"main"}),s=e&&n,a=s&&e.to!==n.to;return!!(s&&e.from!==-1&&n.from!==-1&&a)},isAudioTimelineBehind=r=>{const e=r.timelineChangeController_.pendingTimelineChange({type:"audio"}),n=r.timelineChangeController_.pendingTimelineChange({type:"main"});return e&&n&&e.to<n.to},checkAndFixTimelines=r=>{const e=r.pendingSegment_;if(!e)return;if(shouldWaitForTimelineChange({timelineChangeController:r.timelineChangeController_,currentTimeline:r.currentTimeline_,segmentTimeline:e.timeline,loaderType:r.loaderType_,audioDisabled:r.audioDisabled_})&&shouldFixBadTimelineChanges(r.timelineChangeController_)){if(isAudioTimelineBehind(r)){r.timelineChangeController_.trigger("audioTimelineBehind");return}r.timelineChangeController_.trigger("fixBadTimelineChange")}},mediaDuration=r=>{let e=0;return["video","audio"].forEach(function(n){const s=r[`${n}TimingInfo`];if(!s)return;const{start:a,end:o}=s;let l;typeof a=="bigint"||typeof o=="bigint"?l=window$1.BigInt(o)-window$1.BigInt(a):typeof a=="number"&&typeof o=="number"&&(l=o-a),typeof l<"u"&&l>e&&(e=l)}),typeof e=="bigint"&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e},segmentTooLong=({segmentDuration:r,maxDuration:e})=>r?Math.round(r)>e+TIME_FUDGE_FACTOR:!1,getTroublesomeSegmentDurationMessage=(r,e)=>{if(e!=="hls")return null;const n=mediaDuration({audioTimingInfo:r.audioTimingInfo,videoTimingInfo:r.videoTimingInfo});if(!n)return null;const s=r.playlist.targetDuration,a=segmentTooLong({segmentDuration:n,maxDuration:s*2}),o=segmentTooLong({segmentDuration:n,maxDuration:s}),l=`Segment with index ${r.mediaIndex} from playlist ${r.playlist.id} has a duration of ${n} when the reported duration is ${r.duration} and the target duration is ${s}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return a||o?{severity:a?"warn":"info",message:l}:null},segmentInfoPayload=({type:r,segment:e})=>{if(!e)return;const n=!!(e.key||e.map&&e.map.ke),s=!!(e.map&&!e.map.bytes),a=e.startOfSegment===void 0?e.start:e.startOfSegment;return{type:r||e.type,uri:e.resolvedUri||e.uri,start:a,duration:e.duration,isEncrypted:n,isMediaInitialization:s}};class SegmentLoader extends videojs.EventTarget{constructor(e,n={}){if(super(),!e)throw new TypeError("Initialization settings are required");if(typeof e.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=logger(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(s){s!==this.state_&&(this.logger_(`${this.state_} -> ${s}`),this.state_=s,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():checkAndFixTimelines(this)}),this.sourceUpdater_.on("codecschange",s=>{this.trigger(_extends({type:"codecschange"},s))}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():checkAndFixTimelines(this)}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",s=>{this.trigger(_extends({type:"timelinechange"},s)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():checkAndFixTimelines(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():checkAndFixTimelines(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return segmentTransmuxer.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&window$1.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null),this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,window$1.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&segmentTransmuxer.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return createTimeRanges();if(this.loaderType_==="main"){const{hasAudio:n,hasVideo:s,isMuxed:a}=e;if(s&&n&&!this.audioDisabled_&&!a)return this.sourceUpdater_.buffered();if(s)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,n=!1){if(!e)return null;const s=initSegmentId(e);let a=this.initSegments_[s];return n&&!a&&e.bytes&&(this.initSegments_[s]=a={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),a||e}segmentKey(e,n=!1){if(!e)return null;const s=segmentKeyId(e);let a=this.keyCache_[s];this.cacheEncryptionKeys_&&n&&!a&&e.bytes&&(this.keyCache_[s]=a={resolvedUri:e.resolvedUri,bytes:e.bytes});const o={resolvedUri:(a||e).resolvedUri};return a&&(o.bytes=a.bytes),o}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,n={}){if(!e||this.playlist_&&this.playlist_.endList&&e.endList&&this.playlist_.uri===e.uri)return;const s=this.playlist_,a=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=n,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));let o=null;if(s&&(s.id?o=s.id:s.uri&&(o=s.uri)),this.logger_(`playlist update [${o} => ${e.id||e.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(e,this.currentTime_()),this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${lastBufferedEnd(this.buffered_())}
`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!s||s.uri!==e.uri){this.mediaIndex!==null&&(!e.endList&&typeof e.partTargetDuration=="number"?this.resetLoader():this.resyncLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}const l=e.mediaSequence-s.mediaSequence;if(this.logger_(`live window shift [${l}]`),this.mediaIndex!==null)if(this.mediaIndex-=l,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const u=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!u.parts||!u.parts.length||!u.parts[this.partIndex])){const c=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=c}}a&&(a.mediaIndex-=l,a.mediaIndex<0?(a.mediaIndex=null,a.partIndex=null):(a.mediaIndex>=0&&(a.segment=e.segments[a.mediaIndex]),a.partIndex>=0&&a.segment.parts&&(a.part=a.segment.parts[a.partIndex]))),this.syncController_.saveExpiredSegmentInfo(s,e)}pause(){this.checkBufferTimeout_&&(window$1.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&segmentTransmuxer.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;const e=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;this.sourceType_==="hls"&&!e&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,n,s=()=>{},a=!1){if(n===1/0&&(n=this.duration_()),n<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let o=1;const l=()=>{o--,o===0&&s()};(a||!this.audioDisabled_)&&(o++,this.sourceUpdater_.removeAudio(e,n,l)),(a||this.loaderType_==="main")&&(this.gopBuffer_=removeGopBuffer(this.gopBuffer_,e,n,this.timeMapping_),o++,this.sourceUpdater_.removeVideo(e,n,l));for(const u in this.inbandTextTracks_)removeCuesFromTrack(e,n,this.inbandTextTracks_[u]);removeCuesFromTrack(e,n,this.segmentMetadataTrack_),l()}monitorBuffer_(){this.checkBufferTimeout_&&window$1.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=window$1.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&window$1.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=window$1.setTimeout(this.monitorBufferTick_.bind(this),CHECK_BUFFER_DELAY)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();if(!e)return;const n={segmentInfo:segmentInfoPayload({type:this.loaderType_,segment:e})};this.trigger({type:"segmentselected",metadata:n}),typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e)}isEndOfStream_(e=this.mediaIndex,n=this.playlist_,s=this.partIndex){if(!n||!this.mediaSource_)return!1;const a=typeof e=="number"&&n.segments[e],o=e+1===n.segments.length,l=!a||!a.parts||s+1===a.parts.length;return n.endList&&this.mediaSource_.readyState==="open"&&o&&l}chooseNextRequest_(){const e=this.buffered_(),n=lastBufferedEnd(e)||0,s=timeAheadOf(e,this.currentTime_()),a=!this.hasPlayed_()&&s>=1,o=s>=this.goalBufferLength_(),l=this.playlist_.segments;if(!l.length||a||o)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const u={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(u.isSyncRequest)u.mediaIndex=getSyncSegmentCandidate(this.currentTimeline_,l,n),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${u.mediaIndex}`);else if(this.mediaIndex!==null){const x=l[this.mediaIndex],C=typeof this.partIndex=="number"?this.partIndex:-1;u.startOfSegment=x.end?x.end:n,x.parts&&x.parts[C+1]?(u.mediaIndex=this.mediaIndex,u.partIndex=C+1):u.mediaIndex=this.mediaIndex+1}else{let x,C,w;const S=this.fetchAtBuffer_?n:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${S}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${n}
Fetch At Buffer: ${this.fetchAtBuffer_}
`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const k=this.getSyncInfoFromMediaSequenceSync_(S);if(!k){const M="No sync info found while using media sequence sync";return this.error({message:M,metadata:{errorType:videojs.Error.StreamingFailedToSelectNextSegment,error:new Error(M)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${k.start} --> ${k.end})`),x=k.segmentIndex,C=k.partIndex,w=k.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const k=Playlist.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:S,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});x=k.segmentIndex,C=k.partIndex,w=k.startTime}u.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${S}`:`currentTime ${S}`,u.mediaIndex=x,u.startOfSegment=w,u.partIndex=C,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${u.mediaIndex} `)}const c=l[u.mediaIndex];let f=c&&typeof u.partIndex=="number"&&c.parts&&c.parts[u.partIndex];if(!c||typeof u.partIndex=="number"&&!f)return null;typeof u.partIndex!="number"&&c.parts&&(u.partIndex=0,f=c.parts[0]);const m=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!s&&f&&!m&&!f.independent)if(u.partIndex===0){const x=l[u.mediaIndex-1],C=x.parts&&x.parts.length&&x.parts[x.parts.length-1];C&&C.independent&&(u.mediaIndex-=1,u.partIndex=x.parts.length-1,u.independent="previous segment")}else c.parts[u.partIndex-1].independent&&(u.partIndex-=1,u.independent="previous part");const v=this.mediaSource_&&this.mediaSource_.readyState==="ended";return u.mediaIndex>=l.length-1&&v&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,u.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(u))}getSyncInfoFromMediaSequenceSync_(e){if(!this.mediaSequenceSync_)return null;const n=Math.max(e,this.mediaSequenceSync_.start);e!==n&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${e} to ${n}`);const s=this.mediaSequenceSync_.getSyncInfoForTime(n);if(!s)return null;if(!s.isAppended)return s;const a=this.mediaSequenceSync_.getSyncInfoForTime(s.end);return a?(a.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),a):null}generateSegmentInfo_(e){const{independent:n,playlist:s,mediaIndex:a,startOfSegment:o,isSyncRequest:l,partIndex:u,forceTimestampOffset:c,getMediaInfoForTime:f}=e,m=s.segments[a],v=typeof u=="number"&&m.parts[u],x={requestId:"segment-loader-"+Math.random(),uri:v&&v.resolvedUri||m.resolvedUri,mediaIndex:a,partIndex:v?u:null,isSyncRequest:l,startOfSegment:o,playlist:s,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:m.timeline,duration:v&&v.duration||m.duration,segment:m,part:v,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:f,independent:n},C=typeof c<"u"?c:this.isPendingTimestampOffset_;x.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:m.timeline,currentTimeline:this.currentTimeline_,startOfSegment:o,buffered:this.buffered_(),overrideCheck:C});const w=lastBufferedEnd(this.sourceUpdater_.audioBuffered());return typeof w=="number"&&(x.audioAppendStart=w-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(x.gopsToAlignWith=gopsSafeToAlignWith(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),x}timestampOffsetForSegment_(e){return timestampOffsetForSegment(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const n=this.currentTime_(),s=e.bandwidth,a=this.pendingSegment_.duration,o=Playlist.estimateSegmentRequestTime(a,s,this.playlist_,e.bytesReceived),l=timeUntilRebuffer(this.buffered_(),n,this.vhs_.tech_.playbackRate())-1;if(o<=l)return;const u=minRebufferMaxBandwidthSelector({main:this.vhs_.playlists.main,currentTime:n,bandwidth:s,duration:this.duration_(),segmentDuration:a,timeUntilRebuffer:l,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!u)return;const f=o-l-u.rebufferingImpact;let m=.5;l<=TIME_FUDGE_FACTOR&&(m=1),!(!u.playlist||u.playlist.uri===this.playlist_.uri||f<m)&&(this.bandwidth=u.playlist.attributes.BANDWIDTH*Config.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${segmentInfoString(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,n){this.earlyAbortWhenNeeded_(n.stats),!this.checkForAbort_(n.requestId)&&this.trigger("progress")}handleTrackInfo_(e,n){const{hasAudio:s,hasVideo:a}=n,o={segmentInfo:segmentInfoPayload({type:this.loaderType_,segment:e}),trackInfo:{hasAudio:s,hasVideo:a}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:o}),this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(n)||(n=n||{},shallowEqual(this.currentMediaInfo_,n)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=n,this.currentMediaInfo_=n,this.logger_("trackinfo update",n),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=n,this.hasEnoughInfoToAppend_()?this.processCallQueue_():checkAndFixTimelines(this))))}handleTimingInfo_(e,n,s,a){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const o=this.pendingSegment_,l=timingInfoPropertyForMedia(n);o[l]=o[l]||{},o[l][s]=a,this.logger_(`timinginfo: ${n} - ${s} - ${a}`),this.hasEnoughInfoToAppend_()?this.processCallQueue_():checkAndFixTimelines(this)}handleCaptions_(e,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(n.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,n));return}const a=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),o={};n.forEach(l=>{o[l.stream]=o[l.stream]||{startTime:1/0,captions:[],endTime:0};const u=o[l.stream];u.startTime=Math.min(u.startTime,l.startTime+a),u.endTime=Math.max(u.endTime,l.endTime+a),u.captions.push(l)}),Object.keys(o).forEach(l=>{const{startTime:u,endTime:c,captions:f}=o[l],m=this.inbandTextTracks_;this.logger_(`adding cues from ${u} -> ${c} for ${l}`),createCaptionsTrackIfNotExists(m,this.vhs_.tech_,l),removeCuesFromTrack(u,c,m[l]),addCaptionData({captionArray:f,inbandTextTracks:m,timestampOffset:a})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,n,s){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,n,s));return}this.addMetadataToTextTrack(s,n,this.duration_())}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(n=>n())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(n=>n())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!shouldWaitForTimelineChange({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,n=this.getCurrentMediaInfo_();if(!e||!n)return!1;const{hasAudio:s,hasVideo:a,isMuxed:o}=n;return!(a&&!e.videoTimingInfo||s&&!this.audioDisabled_&&!o&&!e.audioTimingInfo||shouldWaitForTimelineChange({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){checkAndFixTimelines(this),this.callQueue_.push(this.handleData_.bind(this,e,n));return}const s=this.pendingSegment_;if(this.setTimeMapping_(s.timeline),this.updateMediaSecondsLoaded_(s.part||s.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),s.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),s.isFmp4=e.isFmp4,s.timingInfo=s.timingInfo||{},s.isFmp4)this.trigger("fmp4"),s.timingInfo.start=s[timingInfoPropertyForMedia(n.type)].start;else{const a=this.getCurrentMediaInfo_(),o=this.loaderType_==="main"&&a&&a.hasVideo;let l;o&&(l=s.videoTimingInfo.start),s.timingInfo.start=this.trueSegmentStart_({currentStart:s.timingInfo.start,playlist:s.playlist,mediaIndex:s.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:o,firstVideoFrameTimeForData:l,videoTimingInfo:s.videoTimingInfo,audioTimingInfo:s.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(s,n.type),this.updateSourceBufferTimestampOffset_(s),s.isSyncRequest){this.updateTimingInfoEnd_(s),this.syncController_.saveSegmentTimingInfo({segmentInfo:s,shouldSaveTimelineMapping:this.loaderType_==="main"});const a=this.chooseNextRequest_();if(a.mediaIndex!==s.mediaIndex||a.partIndex!==s.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}s.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(s,n)}}updateAppendInitSegmentStatus(e,n){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[n]!==e.playlist&&(this.appendInitSegment_[n]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:n,map:s,playlist:a}){if(s){const o=initSegmentId(s);if(this.activeInitSegmentId_===o)return null;n=this.initSegmentForMap(s,!0).bytes,this.activeInitSegmentId_=o}return n&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=a,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,n):null}handleQuotaExceededError_({segmentInfo:e,type:n,bytes:s},a){const o=this.sourceUpdater_.audioBuffered(),l=this.sourceUpdater_.videoBuffered();o.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+timeRangesToArray(o).join(", ")),l.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+timeRangesToArray(l).join(", "));const u=o.length?o.start(0):0,c=o.length?o.end(o.length-1):0,f=l.length?l.start(0):0,m=l.length?l.end(l.length-1):0;if(c-u<=MIN_BACK_BUFFER&&m-f<=MIN_BACK_BUFFER){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${s.byteLength}, audio buffer: ${timeRangesToArray(o).join(", ")}, video buffer: ${timeRangesToArray(l).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:n,bytes:s}));const x=this.currentTime_()-MIN_BACK_BUFFER;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${x}`),this.remove(0,x,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${MIN_BACK_BUFFER}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=window$1.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},MIN_BACK_BUFFER*1e3)},!0)}handleAppendError_({segmentInfo:e,type:n,bytes:s},a){if(a){if(a.code===QUOTA_EXCEEDED_ERR){this.handleQuotaExceededError_({segmentInfo:e,type:n,bytes:s});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",a),this.error({message:`${n} append of ${s.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`,metadata:{errorType:videojs.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:s,data:a,bytes:o}){if(!o){const u=[a];let c=a.byteLength;s&&(u.unshift(s),c+=s.byteLength),o=concatSegments({bytes:c,segments:u})}const l={segmentInfo:segmentInfoPayload({type:this.loaderType_,segment:e})};this.trigger({type:"segmentappendstart",metadata:l}),this.sourceUpdater_.appendBuffer({segmentInfo:e,type:n,bytes:o},this.handleAppendError_.bind(this,{segmentInfo:e,type:n,bytes:o}))}handleSegmentTimingInfo_(e,n,s){if(!this.pendingSegment_||n!==this.pendingSegment_.requestId)return;const a=this.pendingSegment_.segment,o=`${e}TimingInfo`;a[o]||(a[o]={}),a[o].transmuxerPrependedSeconds=s.prependedContentDuration||0,a[o].transmuxedPresentationStart=s.start.presentation,a[o].transmuxedDecodeStart=s.start.decode,a[o].transmuxedPresentationEnd=s.end.presentation,a[o].transmuxedDecodeEnd=s.end.decode,a[o].baseMediaDecodeTime=s.baseMediaDecodeTime}appendData_(e,n){const{type:s,data:a}=n;if(!a||!a.byteLength||s==="audio"&&this.audioDisabled_)return;const o=this.getInitSegmentAndUpdateState_({type:s,initSegment:n.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:s,initSegment:o,data:a})}loadSegment_(e){if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){checkAndFixTimelines(this),this.loadQueue_.push(()=>{const n=_extends({},e,{forceTimestampOffset:!0});_extends(e,this.generateSegmentInfo_(n)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const n=this.createSimplifiedSegmentObj_(e),s=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),a=this.mediaIndex!==null,o=e.timeline!==this.currentTimeline_&&e.timeline>0,l=s||a&&o;this.logger_(`Requesting
${compactSegmentUrlDescription(e.uri)}
${segmentInfoString(e)}`),n.map&&!n.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=mediaSegmentRequest({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:n,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:l,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:u,level:c,stream:f})=>{this.logger_(`${segmentInfoString(e)} logged from transmuxer stream ${f} as a ${c}: ${u}`)},triggerSegmentEventFn:({type:u,segment:c,keyInfo:f,trackInfo:m,timingInfo:v})=>{const C={segmentInfo:segmentInfoPayload({segment:c})};f&&(C.keyInfo=f),m&&(C.trackInfo=m),v&&(C.timingInfo=v),this.trigger({type:u,metadata:C})}})}trimBackBuffer_(e){const n=safeBackBufferTrimTime(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);n>0&&this.remove(0,n)}createSimplifiedSegmentObj_(e){const n=e.segment,s=e.part,a=e.segment.key||e.segment.map&&e.segment.map.key,o=e.segment.map&&!e.segment.map.bytes,l={resolvedUri:s?s.resolvedUri:n.resolvedUri,byterange:s?s.byterange:n.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part,type:this.loaderType_,start:e.startOfSegment,duration:e.duration,isEncrypted:a,isMediaInitialization:o},u=e.playlist.segments[e.mediaIndex-1];if(u&&u.timeline===n.timeline&&(u.videoTimingInfo?l.baseStartTime=u.videoTimingInfo.transmuxedDecodeEnd:u.audioTimingInfo&&(l.baseStartTime=u.audioTimingInfo.transmuxedDecodeEnd)),n.key){const c=n.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);l.key=this.segmentKey(n.key),l.key.iv=c}return n.map&&(l.map=this.initSegmentForMap(n.map)),l}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,n){if(this.pendingSegment_.byteLength=n.bytesReceived,e<MIN_SEGMENT_DURATION_TO_SAVE_STATS){this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${MIN_SEGMENT_DURATION_TO_SAVE_STATS}`);return}const s={bandwidthInfo:{from:this.bandwidth,to:n.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:s}),this.bandwidth=n.bandwidth,this.roundTrip=n.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,n,s){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,n,s));return}if(this.saveTransferStats_(n.stats),!this.pendingSegment_||n.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===REQUEST_ERRORS.ABORTED)return;if(this.pause(),e.code===REQUEST_ERRORS.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}const a=this.pendingSegment_;this.saveBandwidthRelatedStats_(a.duration,n.stats),a.endOfAllRequests=n.endOfAllRequests,s.gopInfo&&(this.gopBuffer_=updateGopBuffer(this.gopBuffer_,s.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(a)}setTimeMapping_(e){const n=this.syncController_.mappingForTimeline(e);n!==null&&(this.timeMapping_=n)}updateMediaSecondsLoaded_(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:e,playlist:n,mediaIndex:s,firstVideoFrameTimeForData:a,currentVideoTimestampOffset:o,useVideoTimingInfo:l,videoTimingInfo:u,audioTimingInfo:c}){if(typeof e<"u")return e;if(!l)return c.start;const f=n.segments[s-1];return s===0||!f||typeof f.start>"u"||f.end!==a+o?a:u.start}waitForAppendsToComplete_(e){const n=this.getCurrentMediaInfo_(e);if(!n){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}const{hasAudio:s,hasVideo:a,isMuxed:o}=n,l=this.loaderType_==="main"&&a,u=!this.audioDisabled_&&s&&!o;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}l&&e.waitingOnAppends++,u&&e.waitingOnAppends++,l&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),u&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const n=illegalMediaSwitch(this.loaderType_,this.getCurrentMediaInfo_(),e);return n?(this.error({message:n,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(e){if(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")return;let n=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),n=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),n=!0),n&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:n,timingInfo:s}){return this.useDtsForTimestampOffset_?e&&typeof e.transmuxedDecodeStart=="number"?e.transmuxedDecodeStart:n&&typeof n.transmuxedDecodeStart=="number"?n.transmuxedDecodeStart:s.start:s.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const n=this.getMediaInfo_(),a=this.loaderType_==="main"&&n&&n.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;a&&(e.timingInfo.end=typeof a.end=="number"?a.end:a.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_){const c={segmentInfo:segmentInfoPayload({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:c})}if(!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}const e=this.pendingSegment_;e.part&&e.part.syncInfo?e.part.syncInfo.markAppended():e.segment.syncInfo&&e.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});const n=getTroublesomeSegmentDurationMessage(e,this.sourceType_);if(n&&(n.severity==="warn"?videojs.log.warn(n.message):this.logger_(n.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${segmentInfoString(e)}`);return}this.logger_(`Appended ${segmentInfoString(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const s=e.segment,a=e.part,o=s.end&&this.currentTime_()-s.end>e.playlist.targetDuration*3,l=a&&a.end&&this.currentTime_()-a.end>e.playlist.partTargetDuration*3;if(o||l){this.logger_(`bad ${o?"segment":"part"} ${segmentInfoString(e)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<MIN_SEGMENT_DURATION_TO_SAVE_STATS){this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${MIN_SEGMENT_DURATION_TO_SAVE_STATS}`);return}const n=this.throughput.rate,s=Date.now()-e.endOfAllRequests+1,a=Math.floor(e.byteLength/s*8*1e3);this.throughput.rate+=(a-n)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const n=e.segment,s=n.start,a=n.end;if(!finite(s)||!finite(a))return;removeCuesFromTrack(s,a,this.segmentMetadataTrack_);const o=window$1.WebKitDataCue||window$1.VTTCue,l={custom:n.custom,dateTimeObject:n.dateTimeObject,dateTimeString:n.dateTimeString,programDateTime:n.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:s,end:a},u=JSON.stringify(l),c=new o(s,a,u);c.value=l,this.segmentMetadataTrack_.addCue(c)}}function noop(){}const toTitleCase=function(r){return typeof r!="string"?r:r.replace(/./,e=>e.toUpperCase())},bufferTypes=["video","audio"],updating=(r,e)=>{const n=e[`${r}Buffer`];return n&&n.updating||e.queuePending[r]},nextQueueIndexOfType=(r,e)=>{for(let n=0;n<e.length;n++){const s=e[n];if(s.type==="mediaSource")return null;if(s.type===r)return n}return null},shiftQueue=(r,e)=>{if(e.queue.length===0)return;let n=0,s=e.queue[n];if(s.type==="mediaSource"){!e.updating()&&e.mediaSource.readyState!=="closed"&&(e.queue.shift(),s.action(e),s.doneFn&&s.doneFn(),shiftQueue("audio",e),shiftQueue("video",e));return}if(r!=="mediaSource"&&!(!e.ready()||e.mediaSource.readyState==="closed"||updating(r,e))){if(s.type!==r){if(n=nextQueueIndexOfType(r,e.queue),n===null)return;s=e.queue[n]}if(e.queue.splice(n,1),e.queuePending[r]=s,s.action(r,e),!s.doneFn){e.queuePending[r]=null,shiftQueue(r,e);return}}},cleanupBuffer=(r,e)=>{const n=e[`${r}Buffer`],s=toTitleCase(r);n&&(n.removeEventListener("updateend",e[`on${s}UpdateEnd_`]),n.removeEventListener("error",e[`on${s}Error_`]),e.codecs[r]=null,e[`${r}Buffer`]=null)},inSourceBuffers=(r,e)=>r&&e&&Array.prototype.indexOf.call(r.sourceBuffers,e)!==-1,actions={appendBuffer:(r,e,n)=>(s,a)=>{const o=a[`${s}Buffer`];if(inSourceBuffers(a.mediaSource,o)){a.logger_(`Appending segment ${e.mediaIndex}'s ${r.length} bytes to ${s}Buffer`);try{o.appendBuffer(r)}catch(l){a.logger_(`Error with code ${l.code} `+(l.code===QUOTA_EXCEEDED_ERR?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${s}Buffer`),a.queuePending[s]=null,n(l)}}},remove:(r,e)=>(n,s)=>{const a=s[`${n}Buffer`];if(inSourceBuffers(s.mediaSource,a)){s.logger_(`Removing ${r} to ${e} from ${n}Buffer`);try{a.remove(r,e)}catch{s.logger_(`Remove ${r} to ${e} from ${n}Buffer failed`)}}},timestampOffset:r=>(e,n)=>{const s=n[`${e}Buffer`];inSourceBuffers(n.mediaSource,s)&&(n.logger_(`Setting ${e}timestampOffset to ${r}`),s.timestampOffset=r)},callback:r=>(e,n)=>{r()},endOfStream:r=>e=>{if(e.mediaSource.readyState==="open"){e.logger_(`Calling mediaSource endOfStream(${r||""})`);try{e.mediaSource.endOfStream(r)}catch(n){videojs.log.warn("Failed to call media source endOfStream",n)}}},duration:r=>e=>{e.logger_(`Setting mediaSource duration to ${r}`);try{e.mediaSource.duration=r}catch(n){videojs.log.warn("Failed to set media source duration",n)}},abort:()=>(r,e)=>{if(e.mediaSource.readyState!=="open")return;const n=e[`${r}Buffer`];if(inSourceBuffers(e.mediaSource,n)){e.logger_(`calling abort on ${r}Buffer`);try{n.abort()}catch(s){videojs.log.warn(`Failed to abort on ${r}Buffer`,s)}}},addSourceBuffer:(r,e)=>n=>{const s=toTitleCase(r),a=getMimeForCodec(e);n.logger_(`Adding ${r}Buffer with codec ${e} to mediaSource`);const o=n.mediaSource.addSourceBuffer(a);o.addEventListener("updateend",n[`on${s}UpdateEnd_`]),o.addEventListener("error",n[`on${s}Error_`]),n.codecs[r]=e,n[`${r}Buffer`]=o},removeSourceBuffer:r=>e=>{const n=e[`${r}Buffer`];if(cleanupBuffer(r,e),!!inSourceBuffers(e.mediaSource,n)){e.logger_(`Removing ${r}Buffer with codec ${e.codecs[r]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(n)}catch(s){videojs.log.warn(`Failed to removeSourceBuffer ${r}Buffer`,s)}}},changeType:r=>(e,n)=>{const s=n[`${e}Buffer`],a=getMimeForCodec(r);if(!inSourceBuffers(n.mediaSource,s))return;const o=r.substring(0,r.indexOf(".")),l=n.codecs[e];if(l.substring(0,l.indexOf("."))===o)return;const c={codecsChangeInfo:{from:l,to:r}};n.trigger({type:"codecschange",metadata:c}),n.logger_(`changing ${e}Buffer codec from ${l} to ${r}`);try{s.changeType(a),n.codecs[e]=r}catch(f){c.errorType=videojs.Error.StreamingCodecsChangeError,c.error=f,f.metadata=c,n.error_=f,n.trigger("error"),videojs.log.warn(`Failed to changeType on ${e}Buffer`,f)}}},pushQueue=({type:r,sourceUpdater:e,action:n,doneFn:s,name:a})=>{e.queue.push({type:r,action:n,doneFn:s,name:a}),shiftQueue(r,e)},onUpdateend=(r,e)=>n=>{const s=e[`${r}Buffered`](),a=bufferedRangesToString(s);if(e.logger_(`received "updateend" event for ${r} Source Buffer: `,a),e.queuePending[r]){const o=e.queuePending[r].doneFn;e.queuePending[r]=null,o&&o(e[`${r}Error_`])}shiftQueue(r,e)};class SourceUpdater extends videojs.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>shiftQueue("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=logger("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=onUpdateend("video",this),this.onAudioUpdateEnd_=onUpdateend("audio",this),this.onVideoError_=n=>{this.videoError_=n},this.onAudioError_=n=>{this.audioError_=n},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,n){pushQueue({type:"mediaSource",sourceUpdater:this,action:actions.addSourceBuffer(e,n),name:"addSourceBuffer"})}abort(e){pushQueue({type:e,sourceUpdater:this,action:actions.abort(e),name:"abort"})}removeSourceBuffer(e){if(!this.canRemoveSourceBuffer()){videojs.log.error("removeSourceBuffer is not supported!");return}pushQueue({type:"mediaSource",sourceUpdater:this,action:actions.removeSourceBuffer(e),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!videojs.browser.IS_FIREFOX&&window$1.MediaSource&&window$1.MediaSource.prototype&&typeof window$1.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return window$1.SourceBuffer&&window$1.SourceBuffer.prototype&&typeof window$1.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(e,n){if(!this.canChangeType()){videojs.log.error("changeType is not supported!");return}pushQueue({type:e,sourceUpdater:this,action:actions.changeType(n),name:"changeType"})}addOrChangeSourceBuffers(e){if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(n=>{const s=e[n];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(n,s);this.canChangeType()&&this.changeType(n,s)})}appendBuffer(e,n){const{segmentInfo:s,type:a,bytes:o}=e;if(this.processedAppend_=!0,a==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,n]),this.logger_(`delayed audio append of ${o.length} until video append`);return}const l=n;if(pushQueue({type:a,sourceUpdater:this,action:actions.appendBuffer(o,s||{mediaIndex:-1},l),doneFn:n,name:"appendBuffer"}),a==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const u=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${u.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,u.forEach(c=>{this.appendBuffer.apply(this,c)})}}audioBuffered(){return inSourceBuffers(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:createTimeRanges()}videoBuffered(){return inSourceBuffers(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:createTimeRanges()}buffered(){const e=inSourceBuffers(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,n=inSourceBuffers(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return n&&!e?this.audioBuffered():e&&!n?this.videoBuffered():bufferIntersection(this.audioBuffered(),this.videoBuffered())}setDuration(e,n=noop){pushQueue({type:"mediaSource",sourceUpdater:this,action:actions.duration(e),name:"duration",doneFn:n})}endOfStream(e=null,n=noop){typeof e!="string"&&(e=void 0),pushQueue({type:"mediaSource",sourceUpdater:this,action:actions.endOfStream(e),name:"endOfStream",doneFn:n})}removeAudio(e,n,s=noop){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){s();return}pushQueue({type:"audio",sourceUpdater:this,action:actions.remove(e,n),doneFn:s,name:"remove"})}removeVideo(e,n,s=noop){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){s();return}pushQueue({type:"video",sourceUpdater:this,action:actions.remove(e,n),doneFn:s,name:"remove"})}updating(){return!!(updating("audio",this)||updating("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(pushQueue({type:"audio",sourceUpdater:this,action:actions.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset_!==e&&(pushQueue({type:"video",sourceUpdater:this,action:actions.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&pushQueue({type:"audio",sourceUpdater:this,action:actions.callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&pushQueue({type:"video",sourceUpdater:this,action:actions.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),bufferTypes.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>cleanupBuffer(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const uint8ToUtf8=r=>decodeURIComponent(escape(String.fromCharCode.apply(null,r))),bufferToHexString=r=>{const e=new Uint8Array(r);return Array.from(e).map(n=>n.toString(16).padStart(2,"0")).join("")},VTT_LINE_TERMINATORS=new Uint8Array(`

`.split("").map(r=>r.charCodeAt(0)));class NoVttJsError extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class VTTSegmentLoader extends SegmentLoader{constructor(e,n={}){super(e,n),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return createTimeRanges();const e=this.subtitlesTrack_.cues,n=e[0].startTime,s=e[e.length-1].startTime;return createTimeRanges([[n,s]])}initSegmentForMap(e,n=!1){if(!e)return null;const s=initSegmentId(e);let a=this.initSegments_[s];if(n&&!a&&e.bytes){const o=VTT_LINE_TERMINATORS.byteLength+e.bytes.byteLength,l=new Uint8Array(o);l.set(e.bytes),l.set(VTT_LINE_TERMINATORS,e.bytes.byteLength),this.initSegments_[s]=a={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:l}}return a||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(e,n){removeCuesFromTrack(e,n,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(this.syncController_.timestampOffsetForTimeline(e.timeline)===null){const n=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",n),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,n,s){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(n.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===REQUEST_ERRORS.TIMEOUT&&this.handleTimeout_(),e.code===REQUEST_ERRORS.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}const a=this.pendingSegment_,o=s.mp4VttCues&&s.mp4VttCues.length;o&&(a.mp4VttCues=s.mp4VttCues),this.saveBandwidthRelatedStats_(a.duration,n.stats),n.key&&this.segmentKey(n.key,!0),this.state="APPENDING",this.trigger("appending");const l=a.segment;if(l.map&&(l.map.bytes=n.map.bytes),a.bytes=n.bytes,typeof window$1.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(e,n,s),()=>this.stopForError({message:"Error loading vtt.js"}));return}l.requested=!0;try{this.parseVTTCues_(a)}catch(u){this.stopForError({message:u.message,metadata:{errorType:videojs.Error.StreamingVttParserError,error:u}});return}if(o||this.updateTimeMapping_(a,this.syncController_.timelines[a.timeline],this.playlist_),a.cues.length?a.timingInfo={start:a.cues[0].startTime,end:a.cues[a.cues.length-1].endTime}:a.timingInfo={start:a.startOfSegment,end:a.startOfSegment+a.duration},a.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}a.byteLength=a.bytes.byteLength,this.mediaSecondsLoaded+=l.duration,a.cues.forEach(u=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new window$1.VTTCue(u.startTime,u.endTime,u.text):u)}),removeDuplicateCuesFromTrack(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(e,n){const s=e&&e.type==="vtt",a=n&&n.type==="text";s&&a&&super.handleData_(e,n)}updateTimingInfoEnd_(){}parseMp4VttCues_(e){const n=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();e.mp4VttCues.forEach(s=>{const a=s.start+n,o=s.end+n,l=new window$1.VTTCue(a,o,s.cueText);s.settings&&s.settings.split(" ").forEach(u=>{const c=u.split(":"),f=c[0],m=c[1];l[f]=isNaN(m)?m:Number(m)}),e.cues.push(l)})}parseVTTCues_(e){let n,s=!1;if(typeof window$1.WebVTT!="function")throw new NoVttJsError;if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},e.mp4VttCues){this.parseMp4VttCues_(e);return}typeof window$1.TextDecoder=="function"?n=new window$1.TextDecoder("utf8"):(n=window$1.WebVTT.StringDecoder(),s=!0);const a=new window$1.WebVTT.Parser(window$1,window$1.vttjs,n);if(a.oncue=e.cues.push.bind(e.cues),a.ontimestampmap=l=>{e.timestampmap=l},a.onparsingerror=l=>{videojs.log.warn("Error encountered when parsing cues: "+l.message)},e.segment.map){let l=e.segment.map.bytes;s&&(l=uint8ToUtf8(l)),a.parse(l)}let o=e.bytes;s&&(o=uint8ToUtf8(o)),a.parse(o),a.flush()}updateTimeMapping_(e,n,s){const a=e.segment;if(!n)return;if(!e.cues.length){a.empty=!0;return}const{MPEGTS:o,LOCAL:l}=e.timestampmap,c=o/clockExports.ONE_SECOND_IN_TS-l+n.mapping;if(e.cues.forEach(f=>{const m=f.endTime-f.startTime,v=this.handleRollover_(f.startTime+c,n.time);f.startTime=Math.max(v,0),f.endTime=Math.max(v+m,0)}),!s.syncInfo){const f=e.cues[0].startTime,m=e.cues[e.cues.length-1].startTime;s.syncInfo={mediaSequence:s.mediaSequence+e.mediaIndex,time:Math.min(f,m-a.duration)}}}handleRollover_(e,n){if(n===null)return e;let s=e*clockExports.ONE_SECOND_IN_TS;const a=n*clockExports.ONE_SECOND_IN_TS;let o;for(a<s?o=-8589934592:o=8589934592;Math.abs(s-a)>4294967296;)s+=o;return s/clockExports.ONE_SECOND_IN_TS}}const findAdCue=function(r,e){const n=r.cues;for(let s=0;s<n.length;s++){const a=n[s];if(e>=a.adStartTime&&e<=a.adEndTime)return a}return null},updateAdCues=function(r,e,n=0){if(!r.segments)return;let s=n,a;for(let o=0;o<r.segments.length;o++){const l=r.segments[o];if(a||(a=findAdCue(e,s+l.duration/2)),a){if("cueIn"in l){a.endTime=s,a.adEndTime=s,s+=l.duration,a=null;continue}if(s<a.endTime){s+=l.duration;continue}a.endTime+=l.duration}else if("cueOut"in l&&(a=new window$1.VTTCue(s,s+l.duration,l.cueOut),a.adStartTime=s,a.adEndTime=s+parseFloat(l.cueOut),e.addCue(a)),"cueOutCont"in l){const[u,c]=l.cueOutCont.split("/").map(parseFloat);a=new window$1.VTTCue(s,s+l.duration,""),a.adStartTime=s-u,a.adEndTime=a.adStartTime+c,e.addCue(a)}s+=l.duration}};class SyncInfo{constructor({start:e,end:n,segmentIndex:s,partIndex:a=null,appended:o=!1}){this.start_=e,this.end_=n,this.segmentIndex_=s,this.partIndex_=a,this.appended_=o}isInRange(e){return e>=this.start&&e<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}class SyncInfoData{constructor(e,n=[]){this.segmentSyncInfo_=e,this.partsSyncInfo_=n}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(e=>e.resetAppendedStatus())}}class MediaSequenceSync{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(e=>e.resetAppendStatus())}update(e,n){const{mediaSequence:s,segments:a}=e;if(this.isReliable_=this.isReliablePlaylist_(s,a),!!this.isReliable_)return this.updateStorage_(a,s,this.calculateBaseTime_(s,a,n))}getSyncInfoForTime(e){for(const{segmentSyncInfo:n,partsSyncInfo:s}of this.storage_.values())if(s.length){for(const a of s)if(a.isInRange(e))return a}else if(n.isInRange(e))return n;return null}getSyncInfoForMediaSequence(e){return this.storage_.get(e)}updateStorage_(e,n,s){const a=new Map;let o=`
`,l=s,u=n;this.start_=l,e.forEach((c,f)=>{const m=this.storage_.get(u),v=l,x=v+c.duration,C=!!(m&&m.segmentSyncInfo&&m.segmentSyncInfo.isAppended),w=new SyncInfo({start:v,end:x,appended:C,segmentIndex:f});c.syncInfo=w;let S=l;const k=(c.parts||[]).map((M,V)=>{const H=S,F=S+M.duration,G=!!(m&&m.partsSyncInfo&&m.partsSyncInfo[V]&&m.partsSyncInfo[V].isAppended),W=new SyncInfo({start:H,end:F,appended:G,segmentIndex:f,partIndex:V});return S=F,o+=`Media Sequence: ${u}.${V} | Range: ${H} --> ${F} | Appended: ${G}
`,M.syncInfo=W,W});a.set(u,new SyncInfoData(w,k)),o+=`${compactSegmentUrlDescription(c.resolvedUri)} | Media Sequence: ${u} | Range: ${v} --> ${x} | Appended: ${C}
`,u++,l=x}),this.end_=l,this.storage_=a,this.diagnostics_=o}calculateBaseTime_(e,n,s){if(!this.storage_.size)return 0;if(this.storage_.has(e))return this.storage_.get(e).segmentSyncInfo.start;const a=Math.min(...this.storage_.keys());if(e<a){const o=a-e;let l=this.storage_.get(a).segmentSyncInfo.start;for(let u=0;u<o;u++){const c=n[u];l-=c.duration}return l}return s}isReliablePlaylist_(e,n){return e!=null&&Array.isArray(n)&&n.length}}class DependantMediaSequenceSync extends MediaSequenceSync{constructor(e){super(),this.parent_=e}calculateBaseTime_(e,n,s){if(!this.storage_.size){const a=this.parent_.getSyncInfoForMediaSequence(e);return a?a.segmentSyncInfo.start:0}return super.calculateBaseTime_(e,n,s)}}const MAX_MEDIA_SEQUENCE_DIFF_FOR_SYNC=86400,syncPointStrategies=[{name:"VOD",run:(r,e,n,s,a)=>n!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(r,e,n,s,a,o)=>{const l=r.getMediaSequenceSync(o);if(!l||!l.isReliable)return null;const u=l.getSyncInfoForTime(a);return u?{time:u.start,partIndex:u.partIndex,segmentIndex:u.segmentIndex}:null}},{name:"ProgramDateTime",run:(r,e,n,s,a)=>{if(!Object.keys(r.timelineToDatetimeMappings).length)return null;let o=null,l=null;const u=getPartsAndSegments(e);a=a||0;for(let c=0;c<u.length;c++){const f=e.endList||a===0?c:u.length-(c+1),m=u[f],v=m.segment,x=r.timelineToDatetimeMappings[v.timeline];if(!x||!v.dateTimeObject)continue;let w=v.dateTimeObject.getTime()/1e3+x;if(v.parts&&typeof m.partIndex=="number")for(let k=0;k<m.partIndex;k++)w+=v.parts[k].duration;const S=Math.abs(a-w);if(l!==null&&(S===0||l<S))break;l=S,o={time:w,segmentIndex:m.segmentIndex,partIndex:m.partIndex}}return o}},{name:"Segment",run:(r,e,n,s,a)=>{let o=null,l=null;a=a||0;const u=getPartsAndSegments(e);for(let c=0;c<u.length;c++){const f=e.endList||a===0?c:u.length-(c+1),m=u[f],v=m.segment,x=m.part&&m.part.start||v&&v.start;if(v.timeline===s&&typeof x<"u"){const C=Math.abs(a-x);if(l!==null&&l<C)break;(!o||l===null||l>=C)&&(l=C,o={time:x,segmentIndex:m.segmentIndex,partIndex:m.partIndex})}}return o}},{name:"Discontinuity",run:(r,e,n,s,a)=>{let o=null;if(a=a||0,e.discontinuityStarts&&e.discontinuityStarts.length){let l=null;for(let u=0;u<e.discontinuityStarts.length;u++){const c=e.discontinuityStarts[u],f=e.discontinuitySequence+u+1,m=r.discontinuities[f];if(m){const v=Math.abs(a-m.time);if(l!==null&&l<v)break;(!o||l===null||l>=v)&&(l=v,o={time:m.time,segmentIndex:c,partIndex:null})}}}return o}},{name:"Playlist",run:(r,e,n,s,a)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];class SyncController extends videojs.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const n=new MediaSequenceSync,s=new DependantMediaSequenceSync(n),a=new DependantMediaSequenceSync(n);this.mediaSequenceStorage_={main:n,audio:s,vtt:a},this.logger_=logger("SyncController")}getMediaSequenceSync(e){return this.mediaSequenceStorage_[e]||null}getSyncPoint(e,n,s,a,o){if(n!==1/0)return syncPointStrategies.find(({name:c})=>c==="VOD").run(this,e,n);const l=this.runStrategies_(e,n,s,a,o);if(!l.length)return null;for(const u of l){const{syncPoint:c,strategy:f}=u,{segmentIndex:m,time:v}=c;if(m<0)continue;const x=e.segments[m],C=v,w=C+x.duration;if(this.logger_(`Strategy: ${f}. Current time: ${a}. selected segment: ${m}. Time: [${C} -> ${w}]}`),a>=C&&a<w)return this.logger_("Found sync point with exact match: ",c),c}return this.selectSyncPoint_(l,{key:"time",value:a})}getExpiredTime(e,n){if(!e||!e.segments)return null;const s=this.runStrategies_(e,n,e.discontinuitySequence,0);if(!s.length)return null;const a=this.selectSyncPoint_(s,{key:"segmentIndex",value:0});return a.segmentIndex>0&&(a.time*=-1),Math.abs(a.time+sumDurations({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:a.segmentIndex,endIndex:0}))}runStrategies_(e,n,s,a,o){const l=[];for(let u=0;u<syncPointStrategies.length;u++){const c=syncPointStrategies[u],f=c.run(this,e,n,s,a,o);f&&(f.strategy=c.name,l.push({strategy:c.name,syncPoint:f}))}return l}selectSyncPoint_(e,n){let s=e[0].syncPoint,a=Math.abs(e[0].syncPoint[n.key]-n.value),o=e[0].strategy;for(let l=1;l<e.length;l++){const u=Math.abs(e[l].syncPoint[n.key]-n.value);u<a&&(a=u,s=e[l].syncPoint,o=e[l].strategy)}return this.logger_(`syncPoint for [${n.key}: ${n.value}] chosen with strategy [${o}]: [time:${s.time}, segmentIndex:${s.segmentIndex}`+(typeof s.partIndex=="number"?`,partIndex:${s.partIndex}`:"")+"]"),s}saveExpiredSegmentInfo(e,n){const s=n.mediaSequence-e.mediaSequence;if(s>MAX_MEDIA_SEQUENCE_DIFF_FOR_SYNC){videojs.log.warn(`Not saving expired segment info. Media sequence gap ${s} is too large.`);return}for(let a=s-1;a>=0;a--){const o=e.segments[a];if(o&&typeof o.start<"u"){n.syncInfo={mediaSequence:e.mediaSequence+a,time:o.start},this.logger_(`playlist refresh sync: [time:${n.syncInfo.time}, mediaSequence: ${n.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const n=e.segments[0],s=n.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[n.timeline]=-s}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:n}){const s=this.calculateSegmentTimeMapping_(e,e.timingInfo,n),a=e.segment;s&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:a.start}));const o=a.dateTimeObject;a.discontinuity&&n&&o&&(this.timelineToDatetimeMappings[a.timeline]=-(o.getTime()/1e3))}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,n,s){const a=e.segment,o=e.part;let l=this.timelines[e.timeline],u,c;if(typeof e.timestampOffset=="number")l={time:e.startOfSegment,mapping:e.startOfSegment-n.start},s&&(this.timelines[e.timeline]=l,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${l.time}] [mapping: ${l.mapping}]`)),u=e.startOfSegment,c=n.end+l.mapping;else if(l)u=n.start+l.mapping,c=n.end+l.mapping;else return!1;return o&&(o.start=u,o.end=c),(!a.start||u<a.start)&&(a.start=u),a.end=c,!0}saveDiscontinuitySyncInfo_(e){const n=e.playlist,s=e.segment;if(s.discontinuity)this.discontinuities[s.timeline]={time:s.start,accuracy:0};else if(n.discontinuityStarts&&n.discontinuityStarts.length)for(let a=0;a<n.discontinuityStarts.length;a++){const o=n.discontinuityStarts[a],l=n.discontinuitySequence+a+1,u=o-e.mediaIndex,c=Math.abs(u);if(!this.discontinuities[l]||this.discontinuities[l].accuracy>c){let f;u<0?f=s.start-sumDurations({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:e.mediaIndex,endIndex:o}):f=s.end+sumDurations({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:e.mediaIndex+1,endIndex:o}),this.discontinuities[l]={time:f,accuracy:c}}}}dispose(){this.trigger("dispose"),this.off()}}class TimelineChangeController extends videojs.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:n,to:s}){return typeof n=="number"&&typeof s=="number"&&(this.pendingTimelineChanges_[e]={type:e,from:n,to:s},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:n,to:s}){if(typeof n=="number"&&typeof s=="number"){this.lastTimelineChanges_[e]={type:e,from:n,to:s},delete this.pendingTimelineChanges_[e];const a={timelineChangeInfo:{from:n,to:s}};this.trigger({type:"timelinechange",metadata:a})}return this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const workerCode=transform(getWorkerString(function(){var r=function(){function S(){this.listeners={}}var k=S.prototype;return k.on=function(V,H){this.listeners[V]||(this.listeners[V]=[]),this.listeners[V].push(H)},k.off=function(V,H){if(!this.listeners[V])return!1;var F=this.listeners[V].indexOf(H);return this.listeners[V]=this.listeners[V].slice(0),this.listeners[V].splice(F,1),F>-1},k.trigger=function(V){var H=this.listeners[V];if(H)if(arguments.length===2)for(var F=H.length,G=0;G<F;++G)H[G].call(this,arguments[1]);else for(var W=Array.prototype.slice.call(arguments,1),R=H.length,Q=0;Q<R;++Q)H[Q].apply(this,W)},k.dispose=function(){this.listeners={}},k.pipe=function(V){this.on("data",function(H){V.push(H)})},S}();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function e(S){return S.subarray(0,S.byteLength-S[S.byteLength-1])}/*! @name aes-decrypter @version 4.0.2 @license Apache-2.0 */const n=function(){const S=[[[],[],[],[],[]],[[],[],[],[],[]]],k=S[0],M=S[1],V=k[4],H=M[4];let F,G,W;const R=[],Q=[];let A,P,j,X,Z,ae;for(F=0;F<256;F++)Q[(R[F]=F<<1^(F>>7)*283)^F]=F;for(G=W=0;!V[G];G^=A||1,W=Q[W]||1)for(X=W^W<<1^W<<2^W<<3^W<<4,X=X>>8^X&255^99,V[G]=X,H[X]=G,j=R[P=R[A=R[G]]],ae=j*16843009^P*65537^A*257^G*16843008,Z=R[X]*257^X*16843008,F=0;F<4;F++)k[F][G]=Z=Z<<24^Z>>>8,M[F][X]=ae=ae<<24^ae>>>8;for(F=0;F<5;F++)k[F]=k[F].slice(0),M[F]=M[F].slice(0);return S};let s=null;class a{constructor(k){s||(s=n()),this._tables=[[s[0][0].slice(),s[0][1].slice(),s[0][2].slice(),s[0][3].slice(),s[0][4].slice()],[s[1][0].slice(),s[1][1].slice(),s[1][2].slice(),s[1][3].slice(),s[1][4].slice()]];let M,V,H;const F=this._tables[0][4],G=this._tables[1],W=k.length;let R=1;if(W!==4&&W!==6&&W!==8)throw new Error("Invalid aes key size");const Q=k.slice(0),A=[];for(this._key=[Q,A],M=W;M<4*W+28;M++)H=Q[M-1],(M%W===0||W===8&&M%W===4)&&(H=F[H>>>24]<<24^F[H>>16&255]<<16^F[H>>8&255]<<8^F[H&255],M%W===0&&(H=H<<8^H>>>24^R<<24,R=R<<1^(R>>7)*283)),Q[M]=Q[M-W]^H;for(V=0;M;V++,M--)H=Q[V&3?M:M-4],M<=4||V<4?A[V]=H:A[V]=G[0][F[H>>>24]]^G[1][F[H>>16&255]]^G[2][F[H>>8&255]]^G[3][F[H&255]]}decrypt(k,M,V,H,F,G){const W=this._key[1];let R=k^W[0],Q=H^W[1],A=V^W[2],P=M^W[3],j,X,Z;const ae=W.length/4-2;let pe,me=4;const ee=this._tables[1],ne=ee[0],oe=ee[1],he=ee[2],ge=ee[3],Ie=ee[4];for(pe=0;pe<ae;pe++)j=ne[R>>>24]^oe[Q>>16&255]^he[A>>8&255]^ge[P&255]^W[me],X=ne[Q>>>24]^oe[A>>16&255]^he[P>>8&255]^ge[R&255]^W[me+1],Z=ne[A>>>24]^oe[P>>16&255]^he[R>>8&255]^ge[Q&255]^W[me+2],P=ne[P>>>24]^oe[R>>16&255]^he[Q>>8&255]^ge[A&255]^W[me+3],me+=4,R=j,Q=X,A=Z;for(pe=0;pe<4;pe++)F[(3&-pe)+G]=Ie[R>>>24]<<24^Ie[Q>>16&255]<<16^Ie[A>>8&255]<<8^Ie[P&255]^W[me++],j=R,R=Q,Q=A,A=P,P=j}}class o extends r{constructor(){super(r),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(k){this.jobs.push(k),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const l=function(S){return S<<24|(S&65280)<<8|(S&16711680)>>8|S>>>24},u=function(S,k,M){const V=new Int32Array(S.buffer,S.byteOffset,S.byteLength>>2),H=new a(Array.prototype.slice.call(k)),F=new Uint8Array(S.byteLength),G=new Int32Array(F.buffer);let W,R,Q,A,P,j,X,Z,ae;for(W=M[0],R=M[1],Q=M[2],A=M[3],ae=0;ae<V.length;ae+=4)P=l(V[ae]),j=l(V[ae+1]),X=l(V[ae+2]),Z=l(V[ae+3]),H.decrypt(P,j,X,Z,G,ae),G[ae]=l(G[ae]^W),G[ae+1]=l(G[ae+1]^R),G[ae+2]=l(G[ae+2]^Q),G[ae+3]=l(G[ae+3]^A),W=P,R=j,Q=X,A=Z;return F};class c{constructor(k,M,V,H){const F=c.STEP,G=new Int32Array(k.buffer),W=new Uint8Array(k.byteLength);let R=0;for(this.asyncStream_=new o,this.asyncStream_.push(this.decryptChunk_(G.subarray(R,R+F),M,V,W)),R=F;R<G.length;R+=F)V=new Uint32Array([l(G[R-4]),l(G[R-3]),l(G[R-2]),l(G[R-1])]),this.asyncStream_.push(this.decryptChunk_(G.subarray(R,R+F),M,V,W));this.asyncStream_.push(function(){H(null,e(W))})}static get STEP(){return 32e3}decryptChunk_(k,M,V,H){return function(){const F=u(k,M,V);H.set(F,k.byteOffset)}}}var f=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},m;typeof window<"u"?m=window:typeof f<"u"?m=f:typeof self<"u"?m=self:m={};var v=m,x=function(k){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(k):k&&k.buffer instanceof ArrayBuffer},C=v.BigInt||Number;C("0x1"),C("0x100"),C("0x10000"),C("0x1000000"),C("0x100000000"),C("0x10000000000"),C("0x1000000000000"),C("0x100000000000000"),C("0x10000000000000000"),function(){var S=new Uint16Array([65484]),k=new Uint8Array(S.buffer,S.byteOffset,S.byteLength);return k[0]===255?"big":k[0]===204?"little":"unknown"}();const w=function(S){const k={};return Object.keys(S).forEach(M=>{const V=S[M];x(V)?k[M]={bytes:V.buffer,byteOffset:V.byteOffset,byteLength:V.byteLength}:k[M]=V}),k};self.onmessage=function(S){const k=S.data,M=new Uint8Array(k.encrypted.bytes,k.encrypted.byteOffset,k.encrypted.byteLength),V=new Uint32Array(k.key.bytes,k.key.byteOffset,k.key.byteLength/4),H=new Uint32Array(k.iv.bytes,k.iv.byteOffset,k.iv.byteLength/4);new c(M,V,H,function(F,G){self.postMessage(w({source:k.source,decrypted:G}),[G.buffer])})}}));var Decrypter=factory(workerCode);const audioTrackKind_=r=>{let e=r.default?"main":"alternative";return r.characteristics&&r.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},stopLoaders=(r,e)=>{r.abort(),r.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},startLoaders=(r,e)=>{e.activePlaylistLoader=r,r.load()},onGroupChanged=(r,e)=>()=>{const{segmentLoaders:{[r]:n,main:s},mediaTypes:{[r]:a}}=e,o=a.activeTrack(),l=a.getActiveGroup(),u=a.activePlaylistLoader,c=a.lastGroup_;if(!(l&&c&&l.id===c.id)&&(a.lastGroup_=l,a.lastTrack_=o,stopLoaders(n,a),!(!l||l.isMainPlaylist))){if(!l.playlistLoader){u&&s.resetEverything();return}n.resyncLoader(),startLoaders(l.playlistLoader,a)}},onGroupChanging=(r,e)=>()=>{const{segmentLoaders:{[r]:n},mediaTypes:{[r]:s}}=e;s.lastGroup_=null,n.abort(),n.pause()},onTrackChanged=(r,e)=>()=>{const{mainPlaylistLoader:n,segmentLoaders:{[r]:s,main:a},mediaTypes:{[r]:o}}=e,l=o.activeTrack(),u=o.getActiveGroup(),c=o.activePlaylistLoader,f=o.lastTrack_;if(!(f&&l&&f.id===l.id)&&(o.lastGroup_=u,o.lastTrack_=l,stopLoaders(s,o),!!u)){if(u.isMainPlaylist){if(!l||!f||l.id===f.id)return;const m=e.vhs.playlistController_,v=m.selectPlaylist();if(m.media()===v)return;o.logger_(`track change. Switching main audio from ${f.id} to ${l.id}`),n.pause(),a.resetEverything(),m.fastQualityChange_(v);return}if(r==="AUDIO"){if(!u.playlistLoader){a.setAudio(!0),a.resetEverything();return}s.setAudio(!0),a.setAudio(!1)}if(c===u.playlistLoader){startLoaders(u.playlistLoader,o);return}s.track&&s.track(l),s.resetEverything(),startLoaders(u.playlistLoader,o)}},onError={AUDIO:(r,e)=>()=>{const{mediaTypes:{[r]:n},excludePlaylist:s}=e,a=n.activeTrack(),o=n.activeGroup(),l=(o.filter(c=>c.default)[0]||o[0]).id,u=n.tracks[l];if(a===u){s({error:{message:"Problem encountered loading the default audio track."}});return}videojs.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const c in n.tracks)n.tracks[c].enabled=n.tracks[c]===u;n.onTrackChanged()},SUBTITLES:(r,e)=>()=>{const{mediaTypes:{[r]:n}}=e;videojs.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const s=n.activeTrack();s&&(s.mode="disabled"),n.onTrackChanged()}},setupListeners={AUDIO:(r,e,n)=>{if(!e)return;const{tech:s,requestOptions:a,segmentLoaders:{[r]:o}}=n;e.on("loadedmetadata",()=>{const l=e.media();o.playlist(l,a),(!s.paused()||l.endList&&s.preload()!=="none")&&o.load()}),e.on("loadedplaylist",()=>{o.playlist(e.media(),a),s.paused()||o.load()}),e.on("error",onError[r](r,n))},SUBTITLES:(r,e,n)=>{const{tech:s,requestOptions:a,segmentLoaders:{[r]:o},mediaTypes:{[r]:l}}=n;e.on("loadedmetadata",()=>{const u=e.media();o.playlist(u,a),o.track(l.activeTrack()),(!s.paused()||u.endList&&s.preload()!=="none")&&o.load()}),e.on("loadedplaylist",()=>{o.playlist(e.media(),a),s.paused()||o.load()}),e.on("error",onError[r](r,n))}},initialize={AUDIO:(r,e)=>{const{vhs:n,sourceType:s,segmentLoaders:{[r]:a},requestOptions:o,main:{mediaGroups:l},mediaTypes:{[r]:{groups:u,tracks:c,logger_:f}},mainPlaylistLoader:m}=e,v=isAudioOnly(m.main);(!l[r]||Object.keys(l[r]).length===0)&&(l[r]={main:{default:{default:!0}}},v&&(l[r].main.default.playlists=m.main.playlists));for(const x in l[r]){u[x]||(u[x]=[]);for(const C in l[r][x]){let w=l[r][x][C],S;if(v?(f(`AUDIO group '${x}' label '${C}' is a main playlist`),w.isMainPlaylist=!0,S=null):s==="vhs-json"&&w.playlists?S=new PlaylistLoader(w.playlists[0],n,o):w.resolvedUri?S=new PlaylistLoader(w.resolvedUri,n,o):w.playlists&&s==="dash"?S=new DashPlaylistLoader(w.playlists[0],n,o,m):S=null,w=merge({id:C,playlistLoader:S},w),setupListeners[r](r,w.playlistLoader,e),u[x].push(w),typeof c[C]>"u"){const k=new videojs.AudioTrack({id:C,kind:audioTrackKind_(w),enabled:!1,language:w.language,default:w.default,label:C});c[C]=k}}}a.on("error",onError[r](r,e))},SUBTITLES:(r,e)=>{const{tech:n,vhs:s,sourceType:a,segmentLoaders:{[r]:o},requestOptions:l,main:{mediaGroups:u},mediaTypes:{[r]:{groups:c,tracks:f}},mainPlaylistLoader:m}=e;for(const v in u[r]){c[v]||(c[v]=[]);for(const x in u[r][v]){if(!s.options_.useForcedSubtitles&&u[r][v][x].forced)continue;let C=u[r][v][x],w;if(a==="hls")w=new PlaylistLoader(C.resolvedUri,s,l);else if(a==="dash"){if(!C.playlists.filter(k=>k.excludeUntil!==1/0).length)return;w=new DashPlaylistLoader(C.playlists[0],s,l,m)}else a==="vhs-json"&&(w=new PlaylistLoader(C.playlists?C.playlists[0]:C.resolvedUri,s,l));if(C=merge({id:x,playlistLoader:w},C),setupListeners[r](r,C.playlistLoader,e),c[v].push(C),typeof f[x]>"u"){const S=n.addRemoteTextTrack({id:x,kind:"subtitles",default:C.default&&C.autoselect,language:C.language,label:x},!1).track;f[x]=S}}}o.on("error",onError[r](r,e))},"CLOSED-CAPTIONS":(r,e)=>{const{tech:n,main:{mediaGroups:s},mediaTypes:{[r]:{groups:a,tracks:o}}}=e;for(const l in s[r]){a[l]||(a[l]=[]);for(const u in s[r][l]){const c=s[r][l][u];if(!/^(?:CC|SERVICE)/.test(c.instreamId))continue;const f=n.options_.vhs&&n.options_.vhs.captionServices||{};let m={label:u,language:c.language,instreamId:c.instreamId,default:c.default&&c.autoselect};if(f[m.instreamId]&&(m=merge(m,f[m.instreamId])),m.default===void 0&&delete m.default,a[l].push(merge({id:u},c)),typeof o[u]>"u"){const v=n.addRemoteTextTrack({id:m.instreamId,kind:"captions",default:m.default,language:m.language,label:m.label},!1).track;o[u]=v}}}}},groupMatch=(r,e)=>{for(let n=0;n<r.length;n++)if(playlistMatch(e,r[n])||r[n].playlists&&groupMatch(r[n].playlists,e))return!0;return!1},activeGroup=(r,e)=>n=>{const{mainPlaylistLoader:s,mediaTypes:{[r]:{groups:a}}}=e,o=s.media();if(!o)return null;let l=null;o.attributes[r]&&(l=a[o.attributes[r]]);const u=Object.keys(a);if(!l)if(r==="AUDIO"&&u.length>1&&isAudioOnly(e.main))for(let c=0;c<u.length;c++){const f=a[u[c]];if(groupMatch(f,o)){l=f;break}}else a.main?l=a.main:u.length===1&&(l=a[u[0]]);return typeof n>"u"?l:n===null||!l?null:l.filter(c=>c.id===n.id)[0]||null},activeTrack={AUDIO:(r,e)=>()=>{const{mediaTypes:{[r]:{tracks:n}}}=e;for(const s in n)if(n[s].enabled)return n[s];return null},SUBTITLES:(r,e)=>()=>{const{mediaTypes:{[r]:{tracks:n}}}=e;for(const s in n)if(n[s].mode==="showing"||n[s].mode==="hidden")return n[s];return null}},getActiveGroup=(r,{mediaTypes:e})=>()=>{const n=e[r].activeTrack();return n?e[r].activeGroup(n):null},setupMediaGroups=r=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(f=>{initialize[f](f,r)});const{mediaTypes:e,mainPlaylistLoader:n,tech:s,vhs:a,segmentLoaders:{["AUDIO"]:o,main:l}}=r;["AUDIO","SUBTITLES"].forEach(f=>{e[f].activeGroup=activeGroup(f,r),e[f].activeTrack=activeTrack[f](f,r),e[f].onGroupChanged=onGroupChanged(f,r),e[f].onGroupChanging=onGroupChanging(f,r),e[f].onTrackChanged=onTrackChanged(f,r),e[f].getActiveGroup=getActiveGroup(f,r)});const u=e.AUDIO.activeGroup();if(u){const f=(u.filter(v=>v.default)[0]||u[0]).id;e.AUDIO.tracks[f].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(l.setAudio(!1),o.setAudio(!0)):l.setAudio(!0)}n.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(f=>e[f].onGroupChanged())}),n.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(f=>e[f].onGroupChanging())});const c=()=>{e.AUDIO.onTrackChanged(),s.trigger({type:"usage",name:"vhs-audio-change"})};s.audioTracks().addEventListener("change",c),s.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),a.on("dispose",()=>{s.audioTracks().removeEventListener("change",c),s.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),s.clearTracks("audio");for(const f in e.AUDIO.tracks)s.audioTracks().addTrack(e.AUDIO.tracks[f])},createMediaTypes=()=>{const r={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{r[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:noop,activeTrack:noop,getActiveGroup:noop,onGroupChanged:noop,onTrackChanged:noop,lastTrack_:null,logger_:logger(`MediaGroups[${e}]`)}}),r};class SteeringManifest{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(e){e===1&&(this.version_=e)}set ttl(e){this.ttl_=e||300}set reloadUri(e){e&&(this.reloadUri_=resolveUrl(this.reloadUri_,e))}set priority(e){e&&e.length&&(this.priority_=e)}set pathwayClones(e){e&&e.length&&(this.pathwayClones_=new Map(e.map(n=>[n.ID,n])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class ContentSteeringController extends videojs.EventTarget{constructor(e,n){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new SteeringManifest,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=logger("Content Steering"),this.xhr_=e,this.getBandwidth_=n}assignTagProperties(e,n){this.manifestType_=n.serverUri?"HLS":"DASH";const s=n.serverUri||n.serverURL;if(!s){this.logger_(`steering manifest URL is ${s}, cannot request steering manifest.`),this.trigger("error");return}if(s.startsWith("data:")){this.decodeDataUriManifest_(s.substring(s.indexOf(",")+1));return}this.steeringManifest.reloadUri=resolveUrl(e,s),this.defaultPathway=n.pathwayId||n.defaultServiceLocation,this.queryBeforeStart=n.queryBeforeStart,this.proxyServerUrl_=n.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering")}requestSteeringManifest(e){const n=this.steeringManifest.reloadUri;if(!n)return;const s=e?n:this.getRequestURI(n);if(!s){this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),this.dispose();return}const a={contentSteeringInfo:{uri:s}};this.trigger({type:"contentsteeringloadstart",metadata:a}),this.request_=this.xhr_({uri:s,requestType:"content-steering-manifest"},(o,l)=>{if(o){if(l.status===410){this.logger_(`manifest request 410 ${o}.`),this.logger_(`There will be no more content steering requests to ${s} this session.`),this.excludedSteeringManifestURLs.add(s);return}if(l.status===429){const f=l.responseHeaders["retry-after"];this.logger_(`manifest request 429 ${o}.`),this.logger_(`content steering will retry in ${f} seconds.`),this.startTTLTimeout_(parseInt(f,10));return}this.logger_(`manifest failed to load ${o}.`),this.startTTLTimeout_();return}this.trigger({type:"contentsteeringloadcomplete",metadata:a});let u;try{u=JSON.parse(this.request_.responseText)}catch(f){const m={errorType:videojs.Error.StreamingContentSteeringParserError,error:f};this.trigger({type:"error",metadata:m})}this.assignSteeringProperties_(u);const c={contentSteeringInfo:a.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:c}),this.startTTLTimeout_()})}setProxyServerUrl_(e){const n=new window$1.URL(e),s=new window$1.URL(this.proxyServerUrl_);return s.searchParams.set("url",encodeURI(n.toString())),this.setSteeringParams_(s.toString())}decodeDataUriManifest_(e){const n=JSON.parse(window$1.atob(e));this.assignSteeringProperties_(n)}setSteeringParams_(e){const n=new window$1.URL(e),s=this.getPathway(),a=this.getBandwidth_();if(s){const o=`_${this.manifestType_}_pathway`;n.searchParams.set(o,s)}if(a){const o=`_${this.manifestType_}_throughput`;n.searchParams.set(o,a)}return n.toString()}assignSteeringProperties_(e){if(this.steeringManifest.version=e.VERSION,!this.steeringManifest.version){this.logger_(`manifest version is ${e.VERSION}, which is not supported.`),this.trigger("error");return}this.steeringManifest.ttl=e.TTL,this.steeringManifest.reloadUri=e["RELOAD-URI"],this.steeringManifest.priority=e["PATHWAY-PRIORITY"]||e["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=e["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const s=(a=>{for(const o of a)if(this.availablePathways_.has(o))return o;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==s&&(this.currentPathway=s,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(e){if(!e)return null;const n=a=>this.excludedSteeringManifestURLs.has(a);if(this.proxyServerUrl_){const a=this.setProxyServerUrl_(e);if(!n(a))return a}const s=this.setSteeringParams_(e);return n(s)?null:s}startTTLTimeout_(e=this.steeringManifest.ttl){const n=e*1e3;this.ttlTimeout_=window$1.setTimeout(()=>{this.requestSteeringManifest()},n)}clearTTLTimeout_(){window$1.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new SteeringManifest}addAvailablePathway(e){e&&this.availablePathways_.add(e)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(e){return this.availablePathways_.delete(e)}didDASHTagChange(e,n){return!n&&this.steeringManifest.reloadUri||n&&(resolveUrl(e,n.serverURL)!==this.steeringManifest.reloadUri||n.defaultServiceLocation!==this.defaultPathway||n.queryBeforeStart!==this.queryBeforeStart||n.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}const debounce=(r,e)=>{let n=null;return(...s)=>{clearTimeout(n),n=setTimeout(()=>{r.apply(null,s)},e)}},ABORT_EARLY_EXCLUSION_SECONDS=10;let Vhs$1;const loaderStats=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],sumLoaderStat=function(r){return this.audioSegmentLoader_[r]+this.mainSegmentLoader_[r]},shouldSwitchToMedia=function({currentPlaylist:r,buffered:e,currentTime:n,nextPlaylist:s,bufferLowWaterLine:a,bufferHighWaterLine:o,duration:l,bufferBasedABR:u,log:c}){if(!s)return videojs.log.warn("We received no playlist to switch to. Please check your stream."),!1;const f=`allowing switch ${r&&r.id||"null"} -> ${s.id}`;if(!r)return c(`${f} as current playlist is not set`),!0;if(s.id===r.id)return!1;const m=!!findRange(e,n).length;if(!r.endList)return!m&&typeof r.partTargetDuration=="number"?(c(`not ${f} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(c(`${f} as current playlist is live`),!0);const v=timeAheadOf(e,n),x=u?Config.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Config.MAX_BUFFER_LOW_WATER_LINE;if(l<x)return c(`${f} as duration < max low water line (${l} < ${x})`),!0;const C=s.attributes.BANDWIDTH,w=r.attributes.BANDWIDTH;if(C<w&&(!u||v<o)){let S=`${f} as next bandwidth < current bandwidth (${C} < ${w})`;return u&&(S+=` and forwardBuffer < bufferHighWaterLine (${v} < ${o})`),c(S),!0}if((!u||C>w)&&v>=a){let S=`${f} as forwardBuffer >= bufferLowWaterLine (${v} >= ${a})`;return u&&(S+=` and next bandwidth > current bandwidth (${C} > ${w})`),c(S),!0}return c(`not ${f} as no switching criteria met`),!1};class PlaylistController extends videojs.EventTarget{constructor(e){super(),this.fastQualityChange_=debounce(this.fastQualityChange_.bind(this),100);const{src:n,withCredentials:s,tech:a,bandwidth:o,externVhs:l,useCueTags:u,playlistExclusionDuration:c,enableLowInitialPlaylist:f,sourceType:m,cacheEncryptionKeys:v,bufferBasedABR:x,leastPixelDiffSelector:C,captionServices:w,experimentalUseMMS:S}=e;if(!n)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:k}=e;(k===null||typeof k>"u")&&(k=1/0),Vhs$1=l,this.bufferBasedABR=!!x,this.leastPixelDiffSelector=!!C,this.withCredentials=s,this.tech_=a,this.vhs_=a.vhs,this.player_=e.player_,this.sourceType_=m,this.useCueTags_=u,this.playlistExclusionDuration=c,this.maxPlaylistRetries=k,this.enableLowInitialPlaylist=f,this.usingManagedMediaSource_=!1,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:s,maxPlaylistRetries:k,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=createMediaTypes(),S&&window$1.ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new window$1.ManagedMediaSource,this.usingManagedMediaSource_=!0,videojs.log("Using ManagedMediaSource")):window$1.MediaSource&&(this.mediaSource=new window$1.MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=createTimeRanges(),this.hasPlayed_=!1,this.syncController_=new SyncController(e),this.segmentMetadataTrack_=a.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.segmentMetadataTrack_.mode="hidden",this.decrypter_=new Decrypter,this.sourceUpdater_=new SourceUpdater(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new TimelineChangeController,this.keyStatusMap_=new Map;const M={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:w,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:o,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:v,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_=this.sourceType_==="dash"?new DashPlaylistLoader(n,this.vhs_,merge(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new PlaylistLoader(n,this.vhs_,merge(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new SegmentLoader(merge(M,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new SegmentLoader(merge(M,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new VTTSegmentLoader(merge(M,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((F,G)=>{function W(){a.off("vttjserror",R),F()}function R(){a.off("vttjsloaded",W),G()}a.one("vttjsloaded",W),a.one("vttjserror",R),a.addWebVttScript_()})}),e);const V=()=>this.mainSegmentLoader_.bandwidth;this.contentSteeringController_=new ContentSteeringController(this.vhs_.xhr,V),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),loaderStats.forEach(F=>{this[F+"_"]=sumLoaderStat.bind(this,F)}),this.logger_=logger("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const H=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(H,()=>{const F=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-F,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),n=this.audioAppendsToLoadedData_();return e===-1||n===-1?-1:e+n}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const n=this.selectPlaylist();n&&this.shouldSwitchToMedia_(n)&&this.switchMedia_(n,e)}switchMedia_(e,n,s){const a=this.media(),o=a&&(a.id||a.uri),l=e&&(e.id||e.uri);if(o&&o!==l){this.logger_(`switch media ${o} -> ${l} from ${n}`);const u={renditionInfo:{id:l,bandwidth:e.attributes.BANDWIDTH,resolution:e.attributes.RESOLUTION,codecs:e.attributes.CODECS},cause:n};this.trigger({type:"renditionselected",metadata:u}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${n}`})}this.mainPlaylistLoader_.media(e,s)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{const n=this.mediaTypes_[e],s=n?n.activeGroup():null,a=this.contentSteeringController_.getPathway();if(s&&a){const l=(s.length?s[0].playlists:s.playlists).filter(u=>u.attributes.serviceLocation===a);l.length&&this.mediaTypes_[e].activePlaylistLoader.media(l[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=window$1.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(window$1.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),n=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return n;const s=e.mediaGroups.AUDIO,a=Object.keys(s);let o;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)o=this.mediaTypes_.AUDIO.activeTrack();else{const u=s.main||a.length&&s[a[0]];for(const c in u)if(u[c].default){o={label:c};break}}if(!o)return n;const l=[];for(const u in s)if(s[u][o.label]){const c=s[u][o.label];if(c.playlists&&c.playlists.length)l.push.apply(l,c.playlists);else if(c.uri)l.push(c);else if(e.playlists.length)for(let f=0;f<e.playlists.length;f++){const m=e.playlists[f];m.attributes&&m.attributes.AUDIO&&m.attributes.AUDIO===u&&l.push(m)}}return l.length?l:n}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const n=this.mainPlaylistLoader_.media(),s=n.targetDuration*1.5*1e3;isLowestEnabledRendition(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=s,n.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(n,this.requestOptions_),this.mainSegmentLoader_.load()),setupMediaGroups({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),n),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let n=this.mainPlaylistLoader_.media();if(!n){this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_();let s;if(this.enableLowInitialPlaylist&&(s=this.selectInitialPlaylist()),s||(s=this.selectPlaylist()),!s||!this.shouldSwitchToMedia_(s)||(this.initialMedia_=s,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;n=this.initialMedia_}this.handleUpdatedMediaPlaylist(n)}),this.mainPlaylistLoader_.on("error",()=>{const n=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:n.playlist,error:n})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const n=this.mainPlaylistLoader_.media(),s=n.targetDuration*1.5*1e3;isLowestEnabledRendition(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=s,this.sourceType_==="dash"&&this.mainPlaylistLoader_.isPaused&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(n,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const n=this.mainPlaylistLoader_.media();if(n.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(n)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(n=>{this.mainPlaylistLoader_.on(n,s=>{this.player_.trigger(_extends({},s))})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,n){const s=e.mediaGroups||{};let a=!0;const o=Object.keys(s.AUDIO);for(const l in s.AUDIO)for(const u in s.AUDIO[l])s.AUDIO[l][u].uri||(a=!1);a&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(s.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),Vhs$1.Playlist.isAes(n)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),o.length&&Object.keys(s.AUDIO[o[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const n=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,s=this.tech_.currentTime(),a=this.bufferLowWaterLine(),o=this.bufferHighWaterLine(),l=this.tech_.buffered();return shouldSwitchToMedia({buffered:l,currentTime:s,currentPlaylist:n,nextPlaylist:e,bufferLowWaterLine:a,bufferHighWaterLine:o,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const s=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:s.playlist,error:s})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{const s=this.audioSegmentLoader_.pendingSegment_;if(!s||!s.segment||!s.segment.syncInfo)return;const a=s.segment.syncInfo.end+.01;this.tech_.setCurrentTime(a)}),this.timelineChangeController_.on("fixBadTimelineChange",()=>{this.logger_("Fix bad timeline change. Restarting al segment loaders..."),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}),this.mainSegmentLoader_.on("earlyabort",s=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:ABORT_EARLY_EXCLUSION_SECONDS}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const s=this.getCodecsOrExclude_();s&&this.sourceUpdater_.addOrChangeSourceBuffers(s)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(s=>{this.mainSegmentLoader_.on(s,a=>{this.player_.trigger(_extends({},a))}),this.audioSegmentLoader_.on(s,a=>{this.player_.trigger(_extends({},a))}),this.subtitleSegmentLoader_.on(s,a=>{this.player_.trigger(_extends({},a))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(e=this.selectPlaylist()){if(e&&e===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){const n=this.seekable();if(!n.length)return!1;const s=n.end(0);let a=s;if(e.start){const o=e.start.timeOffset;o<0?a=Math.max(s+o,n.start(0)):a=Math.min(s,o)}this.trigger("firstplay"),this.tech_.setCurrentTime(a)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,n=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const n=this.duration();e[e.length-1].endTime=isNaN(n)||Math.abs(n)===1/0?Number.MAX_VALUE:n}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const n=this.mainSegmentLoader_.getCurrentMediaInfo_();!n||n.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const s=this.syncController_.getExpiredTime(e,this.duration());if(s===null)return!1;const a=Vhs$1.Playlist.playlistEnd(e,s),o=this.tech_.currentTime(),l=this.tech_.buffered();if(!l.length)return a-o<=SAFE_TIME_DELTA;const u=l.end(l.length-1);return u-o<=SAFE_TIME_DELTA&&a-u<=SAFE_TIME_DELTA}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:n={},playlistExclusionDuration:s}){if(e=e||this.mainPlaylistLoader_.media(),s=s||n.playlistExclusionDuration||this.playlistExclusionDuration,!e){this.error=n,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}e.playlistErrors_++;const a=this.mainPlaylistLoader_.main.playlists,o=a.filter(isEnabled),l=o.length===1&&o[0]===e;if(a.length===1&&s!==1/0)return videojs.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(l);if(l){if(this.main().contentSteering){const w=this.pathwayAttribute_(e),S=this.contentSteeringController_.steeringManifest.ttl*1e3;this.contentSteeringController_.excludePathway(w),this.excludeThenChangePathway_(),setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(w)},S);return}let C=!1;a.forEach(w=>{if(w===e)return;const S=w.excludeUntil;typeof S<"u"&&S!==1/0&&(C=!0,delete w.excludeUntil)}),C&&(videojs.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let u;e.playlistErrors_>this.maxPlaylistRetries?u=1/0:u=Date.now()+s*1e3,e.excludeUntil=u,n.reason&&(e.lastExcludeReason_=n.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const c=this.selectPlaylist();if(!c){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}const f=n.internal?this.logger_:videojs.log.warn,m=n.message?" "+n.message:"";f(`${n.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${m} Switching to playlist ${c.id}.`),c.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),c.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const v=c.targetDuration/2*1e3||5*1e3,x=typeof c.lastRequest=="number"&&Date.now()-c.lastRequest<=v;return this.switchMedia_(c,"exclude",l||x)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,n){const s=[],a=e==="all";(a||e==="main")&&s.push(this.mainPlaylistLoader_);const o=[];(a||e==="audio")&&o.push("AUDIO"),(a||e==="subtitle")&&(o.push("CLOSED-CAPTIONS"),o.push("SUBTITLES")),o.forEach(l=>{const u=this.mediaTypes_[l]&&this.mediaTypes_[l].activePlaylistLoader;u&&s.push(u)}),["main","audio","subtitle"].forEach(l=>{const u=this[`${l}SegmentLoader_`];u&&(e===l||e==="all")&&s.push(u)}),s.forEach(l=>n.forEach(u=>{typeof l[u]=="function"&&l[u]()}))}setCurrentTime(e){const n=findRange(this.tech_.buffered(),e);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(n&&n.length)return e;this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:Vhs$1.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}getSeekableRange_(e,n){const s=e.media();if(!s)return null;const a=this.syncController_.getMediaSequenceSync(n);if(a&&a.isReliable){const u=a.start,c=a.end;if(!isFinite(u)||!isFinite(c))return null;const f=Vhs$1.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,s),m=Math.max(u,c-f);return createTimeRanges([[u,m]])}const o=this.syncController_.getExpiredTime(s,this.duration());if(o===null)return null;const l=Vhs$1.Playlist.seekable(s,o,Vhs$1.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,s));return l.length?l:null}computeFinalSeekable_(e,n){if(!n)return e;const s=e.start(0),a=e.end(0),o=n.start(0),l=n.end(0);return o>a||s>l?e:createTimeRanges([[Math.max(s,o),Math.min(a,l)]])}onSyncInfoUpdate_(){if(!this.mainPlaylistLoader_)return;const e=this.getSeekableRange_(this.mainPlaylistLoader_,"main");if(!e)return;let n;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(n=this.getSeekableRange_(this.mediaTypes_.AUDIO.activePlaylistLoader,"audio"),!n))return;const s=this.seekable_;if(this.seekable_=this.computeFinalSeekable_(e,n),!this.seekable_||s&&s.length&&this.seekable_.length&&s.start(0)===this.seekable_.start(0)&&s.end(0)===this.seekable_.end(0))return;this.logger_(`seekable updated [${printableRange(this.seekable_)}]`);const a={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:a}),this.tech_.trigger("seekablechanged")}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){const a=this.seekable();if(!a.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<a.end(a.length-1))&&this.sourceUpdater_.setDuration(a.end(a.length-1));return}const n=this.tech_.buffered();let s=Vhs$1.Playlist.duration(this.mainPlaylistLoader_.media());n.length>0&&(s=Math.max(s,n.end(n.length-1))),this.mediaSource.duration!==s&&this.sourceUpdater_.setDuration(s)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const n=this.mediaTypes_[e].groups;for(const s in n)n[s].forEach(a=>{a.playlistLoader&&a.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,n=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),s=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!n||!s)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},n=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const s=codecsForPlaylist(this.main(),n),a={},o=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(a.video=s.video||e.main.videoCodec||DEFAULT_VIDEO_CODEC),e.main.isMuxed&&(a.video+=`,${s.audio||e.main.audioCodec||DEFAULT_AUDIO_CODEC}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||o)&&(a.audio=s.audio||e.main.audioCodec||e.audio.audioCodec||DEFAULT_AUDIO_CODEC,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!a.audio&&!a.video){this.excludePlaylist({playlistToExclude:n,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}const l=(f,m)=>f?browserSupportsCodec(m,this.usingManagedMediaSource_):muxerSupportsCodec(m),u={};let c;if(["video","audio"].forEach(function(f){if(a.hasOwnProperty(f)&&!l(e[f].isFmp4,a[f])){const m=e[f].isFmp4?"browser":"muxer";u[m]=u[m]||[],u[m].push(a[f]),f==="audio"&&(c=m)}}),o&&c&&n.attributes.AUDIO){const f=n.attributes.AUDIO;this.main().playlists.forEach(m=>{(m.attributes&&m.attributes.AUDIO)===f&&m!==n&&(m.excludeUntil=1/0)}),this.logger_(`excluding audio group ${f} as ${c} does not support codec(s): "${a.audio}"`)}if(Object.keys(u).length){const f=Object.keys(u).reduce((m,v)=>(m&&(m+=", "),m+=`${v} does not support codec(s): "${u[v].join(",")}"`,m),"")+".";this.excludePlaylist({playlistToExclude:n,error:{internal:!0,message:f},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const f=[];if(["video","audio"].forEach(m=>{const v=(parseCodecs(this.sourceUpdater_.codecs[m]||"")[0]||{}).type,x=(parseCodecs(a[m]||"")[0]||{}).type;v&&x&&v.toLowerCase()!==x.toLowerCase()&&f.push(`"${this.sourceUpdater_.codecs[m]}" -> "${a[m]}"`)}),f.length){this.excludePlaylist({playlistToExclude:n,error:{message:`Codec switching not supported: ${f.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return a}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const n=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(n)}excludeUnsupportedVariants_(){const e=this.main().playlists,n=[];Object.keys(e).forEach(s=>{const a=e[s];if(n.indexOf(a.id)!==-1)return;n.push(a.id);const o=codecsForPlaylist(this.main,a),l=[];o.audio&&!muxerSupportsCodec(o.audio)&&!browserSupportsCodec(o.audio,this.usingManagedMediaSource_)&&l.push(`audio codec ${o.audio}`),o.video&&!muxerSupportsCodec(o.video)&&!browserSupportsCodec(o.video,this.usingManagedMediaSource_)&&l.push(`video codec ${o.video}`),o.text&&o.text==="stpp.ttml.im1t"&&l.push(`text codec ${o.text}`),l.length&&(a.excludeUntil=1/0,this.logger_(`excluding ${a.id} for unsupported: ${l.join(", ")}`))})}excludeIncompatibleVariants_(e){const n=[],s=this.main().playlists,a=unwrapCodecList(parseCodecs(e)),o=codecCount(a),l=a.video&&parseCodecs(a.video)[0]||null,u=a.audio&&parseCodecs(a.audio)[0]||null;Object.keys(s).forEach(c=>{const f=s[c];if(n.indexOf(f.id)!==-1||f.excludeUntil===1/0)return;n.push(f.id);const m=[],v=codecsForPlaylist(this.mainPlaylistLoader_.main,f),x=codecCount(v);if(!(!v.audio&&!v.video)){if(x!==o&&m.push(`codec count "${x}" !== "${o}"`),!this.sourceUpdater_.canChangeType()){const C=v.video&&parseCodecs(v.video)[0]||null,w=v.audio&&parseCodecs(v.audio)[0]||null;C&&l&&C.type.toLowerCase()!==l.type.toLowerCase()&&m.push(`video codec "${C.type}" !== "${l.type}"`),w&&u&&w.type.toLowerCase()!==u.type.toLowerCase()&&m.push(`audio codec "${w.type}" !== "${u.type}"`)}m.length&&(f.excludeUntil=1/0,this.logger_(`excluding ${f.id}: ${m.join(" && ")}`))}})}updateAdCues_(e){let n=0;const s=this.seekable();s.length&&(n=s.start(0)),updateAdCues(e,this.cueTagsTrack_,n)}goalBufferLength(){const e=this.tech_.currentTime(),n=Config.GOAL_BUFFER_LENGTH,s=Config.GOAL_BUFFER_LENGTH_RATE,a=Math.max(n,Config.MAX_GOAL_BUFFER_LENGTH);return Math.min(n+e*s,a)}bufferLowWaterLine(){const e=this.tech_.currentTime(),n=Config.BUFFER_LOW_WATER_LINE,s=Config.BUFFER_LOW_WATER_LINE_RATE,a=Math.max(n,Config.MAX_BUFFER_LOW_WATER_LINE),o=Math.max(n,Config.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(n+e*s,this.bufferBasedABR?o:a)}bufferHighWaterLine(){return Config.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e){createMetadataTrackIfNotExists(this.inbandTextTracks_,"com.apple.streaming",this.tech_),addDateRangeMetadata({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}addMetadataToTextTrack(e,n,s){const a=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();createMetadataTrackIfNotExists(this.inbandTextTracks_,e,this.tech_),addMetadata({inbandTextTracks:this.inbandTextTracks_,metadataArray:n,timestampOffset:a,videoDuration:s})}pathwayAttribute_(e){return e.attributes["PATHWAY-ID"]||e.attributes.serviceLocation}initContentSteeringController_(){const e=this.main();if(e.contentSteering){for(const n of e.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(n));if(this.contentSteeringController_.assignTagProperties(e.uri,e.contentSteering),this.contentSteeringController_.queryBeforeStart){this.contentSteeringController_.requestSteeringManifest(!0);return}this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(n=>{this.contentSteeringController_.on(n,s=>{this.trigger(_extends({},s))})}),this.sourceType_==="dash"&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const n=this.main();(this.contentSteeringController_.didDASHTagChange(n.uri,n.contentSteering)||(()=>{const o=this.contentSteeringController_.getAvailablePathways(),l=[];for(const u of n.playlists){const c=u.attributes.serviceLocation;if(c&&(l.push(c),!o.has(c)))return!0}return!!(!l.length&&o.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const e=this.contentSteeringController_.getPathway();if(!e)return;this.handlePathwayClones_();const s=this.main().playlists,a=new Set;let o=!1;Object.keys(s).forEach(l=>{const u=s[l],c=this.pathwayAttribute_(u),f=c&&e!==c;u.excludeUntil===1/0&&u.lastExcludeReason_==="content-steering"&&!f&&(delete u.excludeUntil,delete u.lastExcludeReason_,o=!0);const v=!u.excludeUntil&&u.excludeUntil!==1/0;!a.has(u.id)&&f&&v&&(a.add(u.id),u.excludeUntil=1/0,u.lastExcludeReason_="content-steering",this.logger_(`excluding ${u.id} for ${u.lastExcludeReason_}`))}),this.contentSteeringController_.manifestType_==="DASH"&&Object.keys(this.mediaTypes_).forEach(l=>{const u=this.mediaTypes_[l];if(u.activePlaylistLoader){const c=u.activePlaylistLoader.media_;c&&c.attributes.serviceLocation!==e&&(o=!0)}}),o&&this.changeSegmentPathway_()}handlePathwayClones_(){const n=this.main().playlists,s=this.contentSteeringController_.currentPathwayClones,a=this.contentSteeringController_.nextPathwayClones;if(s&&s.size||a&&a.size){for(const[l,u]of s.entries())a.get(l)||(this.mainPlaylistLoader_.updateOrDeleteClone(u),this.contentSteeringController_.excludePathway(l));for(const[l,u]of a.entries()){const c=s.get(l);if(!c){n.filter(m=>m.attributes["PATHWAY-ID"]===u["BASE-ID"]).forEach(m=>{this.mainPlaylistLoader_.addClonePathway(u,m)}),this.contentSteeringController_.addAvailablePathway(l);continue}this.equalPathwayClones_(c,u)||(this.mainPlaylistLoader_.updateOrDeleteClone(u,!0),this.contentSteeringController_.addAvailablePathway(l))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...a])))}}equalPathwayClones_(e,n){if(e["BASE-ID"]!==n["BASE-ID"]||e.ID!==n.ID||e["URI-REPLACEMENT"].HOST!==n["URI-REPLACEMENT"].HOST)return!1;const s=e["URI-REPLACEMENT"].PARAMS,a=n["URI-REPLACEMENT"].PARAMS;for(const o in s)if(s[o]!==a[o])return!1;for(const o in a)if(s[o]!==a[o])return!1;return!0}changeSegmentPathway_(){const e=this.selectPlaylist();this.pauseLoading(),this.contentSteeringController_.manifestType_==="DASH"&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let e=0;const n="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(s=>{const a=this.mainPlaylistLoader_.getKeyIdSet(s);!a||!a.size||a.forEach(o=>{const l="usable",u=this.keyStatusMap_.has(o)&&this.keyStatusMap_.get(o)===l,c=s.lastExcludeReason_===n&&s.excludeUntil===1/0;u?u&&c&&(delete s.excludeUntil,delete s.lastExcludeReason_,this.logger_(`enabling playlist ${s.id} because key ID ${o} is ${l}`)):(s.excludeUntil!==1/0&&s.lastExcludeReason_!==n&&(s.excludeUntil=1/0,s.lastExcludeReason_=n,this.logger_(`excluding playlist ${s.id} because the key ID ${o} doesn't exist in the keyStatusMap or is not ${l}`)),e++)})}),e>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(s=>{const a=s&&s.attributes&&s.attributes.RESOLUTION&&s.attributes.RESOLUTION.height<720,o=s.excludeUntil===1/0&&s.lastExcludeReason_===n;a&&o&&(delete s.excludeUntil,videojs.log.warn(`enabling non-HD playlist ${s.id} because all playlists were excluded due to ${n} key IDs`))})}addKeyStatus_(e,n){const o=(typeof e=="string"?e:bufferToHexString(e)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${n}' with key ID ${o} added to the keyStatusMap`),this.keyStatusMap_.set(o,n)}updatePlaylistByKeyStatus(e,n){this.addKeyStatus_(e,n),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}const enableFunction=(r,e,n)=>s=>{const a=r.main.playlists[e],o=isIncompatible(a),l=isEnabled(a);if(typeof s>"u")return l;s?delete a.disabled:a.disabled=!0;const u={renditionInfo:{id:e,bandwidth:a.attributes.BANDWIDTH,resolution:a.attributes.RESOLUTION,codecs:a.attributes.CODECS},cause:"fast-quality"};return s!==l&&!o&&(s?(n(a),r.trigger({type:"renditionenabled",metadata:u})):r.trigger({type:"renditiondisabled",metadata:u})),s};class Representation{constructor(e,n,s){const{playlistController_:a}=e,o=a.fastQualityChange_.bind(a);if(n.attributes){const l=n.attributes.RESOLUTION;this.width=l&&l.width,this.height=l&&l.height,this.bandwidth=n.attributes.BANDWIDTH,this.frameRate=n.attributes["FRAME-RATE"]}this.codecs=codecsForPlaylist(a.main(),n),this.playlist=n,this.id=s,this.enabled=enableFunction(e.playlists,n.id,o)}}const renditionSelectionMixin=function(r){r.representations=()=>{const e=r.playlistController_.main(),n=isAudioOnly(e)?r.playlistController_.getAudioTrackPlaylists_():e.playlists;return n?n.filter(s=>!isIncompatible(s)).map((s,a)=>new Representation(r,s,s.id)):[]}},timerCancelEvents=["seeking","seeked","pause","playing","error"];class PlaybackWatcher extends videojs.EventTarget{constructor(e){super(),this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=logger("PlaybackWatcher"),this.logger_("initialize");const n=()=>this.monitorCurrentTime_(),s=()=>this.monitorCurrentTime_(),a=()=>this.techWaiting_(),o=()=>this.resetTimeUpdate_(),l=this.playlistController_,u=["main","subtitle","audio"],c={};u.forEach(m=>{c[m]={reset:()=>this.resetSegmentDownloads_(m),updateend:()=>this.checkSegmentDownloads_(m)},l[`${m}SegmentLoader_`].on("appendsdone",c[m].updateend),l[`${m}SegmentLoader_`].on("playlistupdate",c[m].reset),this.tech_.on(["seeked","seeking"],c[m].reset)});const f=m=>{["main","audio"].forEach(v=>{l[`${v}SegmentLoader_`][m]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),f("off"))},this.clearSeekingAppendCheck_=()=>f("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),f("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",a),this.tech_.on(timerCancelEvents,o),this.tech_.on("canplay",s),this.tech_.one("play",n),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",a),this.tech_.off(timerCancelEvents,o),this.tech_.off("canplay",s),this.tech_.off("play",n),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),u.forEach(m=>{l[`${m}SegmentLoader_`].off("appendsdone",c[m].updateend),l[`${m}SegmentLoader_`].off("playlistupdate",c[m].reset),this.tech_.off(["seeked","seeking"],c[m].reset)}),this.checkCurrentTimeTimeout_&&window$1.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&window$1.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=window$1.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const n=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=n.buffered_()}checkSegmentDownloads_(e){const n=this.playlistController_,s=n[`${e}SegmentLoader_`],a=s.buffered_(),o=isRangeDifferent(this[`${e}Buffered_`],a);if(this[`${e}Buffered_`]=a,o){const l={bufferedRanges:a};n.trigger({type:"bufferedrangeschanged",metadata:l}),this.resetSegmentDownloads_(e);return}this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:s.playlist_&&s.playlist_.id,buffered:timeRangesToArray(a)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),e!=="subtitle"&&n.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),n=this.tech_.buffered();if(this.lastRecordedTime===e&&(!n.length||e+SAFE_TIME_DELTA>=n.end(n.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&e===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(e===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push(createTimeRanges([this.lastRecordedTime,e]));const s={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:s}),this.consecutiveUpdates=0,this.lastRecordedTime=e}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const n=this.seekable(),s=this.tech_.currentTime(),a=this.afterSeekableWindow_(n,s,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let o;if(a&&(o=n.end(n.length-1)),this.beforeSeekableWindow_(n,s)){const w=n.start(0);o=w+(w===n.end(0)?0:SAFE_TIME_DELTA)}if(typeof o<"u")return this.logger_(`Trying to seek outside of seekable at time ${s} with seekable range ${printableRange(n)}. Seeking to ${o}.`),this.tech_.setCurrentTime(o),!0;const l=this.playlistController_.sourceUpdater_,u=this.tech_.buffered(),c=l.audioBuffer?l.audioBuffered():null,f=l.videoBuffer?l.videoBuffered():null,m=this.media(),v=m.partTargetDuration?m.partTargetDuration:(m.targetDuration-TIME_FUDGE_FACTOR)*2,x=[c,f];for(let w=0;w<x.length;w++){if(!x[w])continue;if(timeAheadOf(x[w],s)<v)return!1}const C=findNextRange(u,s);return C.length===0?!1:(o=C.start(0)+SAFE_TIME_DELTA,this.logger_(`Buffered region starts (${C.start(0)})  just beyond seek point (${s}). Seeking to ${o}.`),this.tech_.setCurrentTime(o),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),n=this.tech_.buffered(),s=findRange(n,e);if(s.length&&e+3<=s.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${s.start(0)} -> ${s.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){const e=this.seekable(),n=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,n)){const u=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${n}. Seeking to live point (seekable end) ${u}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(u),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const s=this.tech_.vhs.playlistController_.sourceUpdater_,a=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:s.audioBuffered(),videoBuffered:s.videoBuffered(),currentTime:n}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const l=findNextRange(a,n);return l.length>0?(this.logger_(`Stopped at ${n} and seeking to ${l.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(n),!0):!1}afterSeekableWindow_(e,n,s,a=!1){if(!e.length)return!1;let o=e.end(e.length-1)+SAFE_TIME_DELTA;const l=!s.endList,u=typeof s.partTargetDuration=="number";return l&&(u||a)&&(o=e.end(e.length-1)+s.targetDuration*3),n>o}beforeSeekableWindow_(e,n){return!!(e.length&&e.start(0)>0&&n<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:n,currentTime:s}){if(!e)return;let a;if(e.length&&n.length){const o=findRange(e,s-3),l=findRange(e,s),u=findRange(n,s);u.length&&!l.length&&o.length&&(a={start:o.end(0),end:u.end(0)})}else findNextRange(e,s).length||(a=this.gapFromVideoUnderflow_(e,s));return a?(this.logger_(`Encountered a gap in video from ${a.start} to ${a.end}. Seeking to current time ${s}`),!0):!1}skipTheGap_(e){const n=this.tech_.buffered(),s=this.tech_.currentTime(),a=findNextRange(n,s);if(this.resetTimeUpdate_(),a.length===0||s!==e)return;this.logger_("skipTheGap_:","currentTime:",s,"scheduled currentTime:",e,"nextRange start:",a.start(0)),this.tech_.setCurrentTime(a.start(0)+TIME_FUDGE_FACTOR);const o={gapInfo:{from:s,to:a.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:o}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(e,n){const s=findGaps(e);for(let a=0;a<s.length;a++){const o=s.start(a),l=s.end(a);if(n-o<4&&n-o>2)return{start:o,end:l}}return null}}const defaultOptions={errorInterval:30,getSource(r){const n=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return r(n)}},initPlugin=function(r,e){let n=0,s=0;const a=merge(defaultOptions,e);r.ready(()=>{r.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const o=function(){s&&r.currentTime(s)},l=function(m){m!=null&&(s=r.duration()!==1/0&&r.currentTime()||0,r.one("loadedmetadata",o),r.src(m),r.trigger({type:"usage",name:"vhs-error-reload"}),r.play())},u=function(){if(Date.now()-n<a.errorInterval*1e3){r.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!a.getSource||typeof a.getSource!="function"){videojs.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return n=Date.now(),a.getSource.call(r,l)},c=function(){r.off("loadedmetadata",o),r.off("error",u),r.off("dispose",c)},f=function(m){c(),initPlugin(r,m)};r.on("error",u),r.on("dispose",c),r.reloadSourceOnError=f},reloadSourceOnError=function(r){initPlugin(this,r)};var version$4="3.17.0",version$3="7.1.0",version$2="1.3.1",version$1="7.2.0",version="4.0.2";const Vhs={PlaylistLoader,Playlist,utils,STANDARD_PLAYLIST_SELECTOR:lastBandwidthSelector,INITIAL_PLAYLIST_SELECTOR:lowestBitrateCompatibleVariantSelector,lastBandwidthSelector,movingAverageBandwidthSelector,comparePlaylistBandwidth,comparePlaylistResolution,xhr:xhrFactory()};Object.keys(Config).forEach(r=>{Object.defineProperty(Vhs,r,{get(){return videojs.log.warn(`using Vhs.${r} is UNSAFE be sure you know what you are doing`),Config[r]},set(e){if(videojs.log.warn(`using Vhs.${r} is UNSAFE be sure you know what you are doing`),typeof e!="number"||e<0){videojs.log.warn(`value of Vhs.${r} must be greater than or equal to 0`);return}Config[r]=e}})});const LOCAL_STORAGE_KEY="videojs-vhs",handleVhsMediaChange=function(r,e){const n=e.media();let s=-1;for(let a=0;a<r.length;a++)if(r[a].id===n.id){s=a;break}r.selectedIndex_=s,r.trigger({selectedIndex:s,type:"change"})},handleVhsLoadedMetadata=function(r,e){e.representations().forEach(n=>{r.addQualityLevel(n)}),handleVhsMediaChange(r,e.playlists)};Vhs.canPlaySource=function(){return videojs.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const emeKeySystems=(r,e,n)=>{if(!r)return r;let s={};e&&e.attributes&&e.attributes.CODECS&&(s=unwrapCodecList(parseCodecs(e.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(s.audio=n.attributes.CODECS);const a=getMimeForCodec(s.video),o=getMimeForCodec(s.audio),l={};for(const u in r)l[u]={},o&&(l[u].audioContentType=o),a&&(l[u].videoContentType=a),e.contentProtection&&e.contentProtection[u]&&e.contentProtection[u].pssh&&(l[u].pssh=e.contentProtection[u].pssh),typeof r[u]=="string"&&(l[u].url=r[u]);return merge(r,l)},getAllPsshKeySystemsOptions=(r,e)=>r.reduce((n,s)=>{if(!s.contentProtection)return n;const a=e.reduce((o,l)=>{const u=s.contentProtection[l];return u&&u.pssh&&(o[l]={pssh:u.pssh}),o},{});return Object.keys(a).length&&n.push(a),n},[]),waitForKeySessionCreation=({player:r,sourceKeySystems:e,audioMedia:n,mainPlaylists:s})=>{if(!r.eme.initializeMediaKeys)return Promise.resolve();const a=n?s.concat([n]):s,o=getAllPsshKeySystemsOptions(a,Object.keys(e)),l=[],u=[];return o.forEach(c=>{u.push(new Promise((f,m)=>{r.tech_.one("keysessioncreated",f)})),l.push(new Promise((f,m)=>{r.eme.initializeMediaKeys({keySystems:c},v=>{if(v){m(v);return}f()})}))}),Promise.race([Promise.all(l),Promise.race(u)])},setupEmeOptions=({player:r,sourceKeySystems:e,media:n,audioMedia:s})=>{const a=emeKeySystems(e,n,s);return a?(r.currentSource().keySystems=a,a&&!r.eme?(videojs.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},getVhsLocalStorage=()=>{if(!window$1.localStorage)return null;const r=window$1.localStorage.getItem(LOCAL_STORAGE_KEY);if(!r)return null;try{return JSON.parse(r)}catch{return null}},updateVhsLocalStorage=r=>{if(!window$1.localStorage)return!1;let e=getVhsLocalStorage();e=e?merge(e,r):r;try{window$1.localStorage.setItem(LOCAL_STORAGE_KEY,JSON.stringify(e))}catch{return!1}return e},expandDataUri=r=>r.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(r.substring(r.indexOf(",")+1)):r,addOnRequestHook=(r,e)=>{r._requestCallbackSet||(r._requestCallbackSet=new Set),r._requestCallbackSet.add(e)},addOnResponseHook=(r,e)=>{r._responseCallbackSet||(r._responseCallbackSet=new Set),r._responseCallbackSet.add(e)},removeOnRequestHook=(r,e)=>{r._requestCallbackSet&&(r._requestCallbackSet.delete(e),r._requestCallbackSet.size||delete r._requestCallbackSet)},removeOnResponseHook=(r,e)=>{r._responseCallbackSet&&(r._responseCallbackSet.delete(e),r._responseCallbackSet.size||delete r._responseCallbackSet)};Vhs.supportsNativeHls=function(){if(!document$1||!document$1.createElement)return!1;const r=document$1.createElement("video");return videojs.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(n){return/maybe|probably/i.test(r.canPlayType(n))}):!1}();Vhs.supportsNativeDash=function(){return!document$1||!document$1.createElement||!videojs.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(document$1.createElement("video").canPlayType("application/dash+xml"))}();Vhs.supportsTypeNatively=r=>r==="hls"?Vhs.supportsNativeHls:r==="dash"?Vhs.supportsNativeDash:!1;Vhs.isSupported=function(){return videojs.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};Vhs.xhr.onRequest=function(r){addOnRequestHook(Vhs.xhr,r)};Vhs.xhr.onResponse=function(r){addOnResponseHook(Vhs.xhr,r)};Vhs.xhr.offRequest=function(r){removeOnRequestHook(Vhs.xhr,r)};Vhs.xhr.offResponse=function(r){removeOnResponseHook(Vhs.xhr,r)};const Component=videojs.getComponent("Component");class VhsHandler extends Component{constructor(e,n,s){if(super(n,s.vhs),typeof s.initialBandwidth=="number"&&(this.options_.bandwidth=s.initialBandwidth),this.logger_=logger("VhsHandler"),n.options_&&n.options_.playerId){const a=videojs.getPlayer(n.options_.playerId);this.player_=a}if(this.tech_=n,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(document$1,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],a=>{const o=document$1.fullscreenElement||document$1.webkitFullscreenElement||document$1.mozFullScreenElement||document$1.msFullscreenElement;o&&o.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(e={}){if(this.options_=merge(this.options_,e),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.usePlayerObjectFit=this.options_.usePlayerObjectFit||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=typeof this.options_.useNetworkInformationApi<"u"?this.options_.useNetworkInformationApi:!0,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const s=getVhsLocalStorage();s&&s.bandwidth&&(this.options_.bandwidth=s.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),s&&s.throughput&&(this.options_.throughput=s.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=Config.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Config.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","usePlayerObjectFit","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(s=>{typeof this.source_[s]<"u"&&(this.options_[s]=this.source_[s])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio,this.usePlayerObjectFit=this.options_.usePlayerObjectFit;const n=this.options_.customPixelRatio;typeof n=="number"&&n>=0&&(this.customPixelRatio=n)}setOptions(e={}){this.setOptions_(e)}src(e,n){if(!e)return;this.setOptions_(),this.options_.src=expandDataUri(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Vhs,this.options_.sourceType=simpleTypeFromSourceType(n),this.options_.seekTo=o=>{this.tech_.setCurrentTime(o)},this.options_.player_=this.player_,this.playlistController_=new PlaylistController(this.options_);const s=merge({liveRangeSafeTimeDelta:SAFE_TIME_DELTA},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new PlaybackWatcher(s),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const o=videojs.players[this.tech_.options_.playerId];let l=this.playlistController_.error;typeof l=="object"&&!l.code?l.code=3:typeof l=="string"&&(l={message:l,code:3}),o.error(l)});const a=this.options_.bufferBasedABR?Vhs.movingAverageBandwidthSelector(.55):Vhs.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):a.bind(this),this.playlistController_.selectInitialPlaylist=Vhs.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(o){this.playlistController_.selectPlaylist=o.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(o){this.playlistController_.mainSegmentLoader_.throughput.rate=o,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let o=this.playlistController_.mainSegmentLoader_.bandwidth;const l=window$1.navigator.connection||window$1.navigator.mozConnection||window$1.navigator.webkitConnection,u=1e7;if(this.options_.useNetworkInformationApi&&l){const c=l.downlink*1e3*1e3;c>=u&&o>=u?o=Math.max(o,c):o=c}return o},set(o){this.playlistController_.mainSegmentLoader_.bandwidth=o,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const o=1/(this.bandwidth||1);let l;return this.throughput>0?l=1/this.throughput:l=0,Math.floor(1/(o+l))},set(){videojs.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>timeRangesToArray(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>timeRangesToArray(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&updateVhsLocalStorage({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{renditionSelectionMixin(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=window$1.URL.createObjectURL(this.playlistController_.mediaSource),(videojs.browser.IS_ANY_SAFARI||videojs.browser.IS_IOS)&&this.options_.overrideNative&&this.options_.sourceType==="hls"&&typeof this.tech_.addSourceElement=="function"?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),waitForKeySessionCreation({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(n=>{this.logger_("error while creating EME key session",n),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,n=setupEmeOptions({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});if(this.player_.tech_.on("keystatuschange",s=>{this.playlistController_.updatePlaylistByKeyStatus(s.keyId,s.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),!n){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){const e=videojs.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{handleVhsLoadedMetadata(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{handleVhsMediaChange(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":version$4,"mux.js":version$3,"mpd-parser":version$2,"m3u8-parser":version$1,"aes-decrypter":version}}version(){return this.constructor.version()}canChangeType(){return SourceUpdater.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&window$1.URL.revokeObjectURL&&(window$1.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,n){return getProgramTime({playlist:this.playlistController_.media(),time:e,callback:n})}seekToProgramTime(e,n,s=!0,a=2){return seekToProgramTime({programTime:e,playlist:this.playlistController_.media(),retryCount:a,pauseAfterSeek:s,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:n})}setupXhrHooks_(){this.xhr.onRequest=e=>{addOnRequestHook(this.xhr,e)},this.xhr.onResponse=e=>{addOnResponseHook(this.xhr,e)},this.xhr.offRequest=e=>{removeOnRequestHook(this.xhr,e)},this.xhr.offResponse=e=>{removeOnResponseHook(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){const e=["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"],n=["gapjumped","playedrangeschanged"];e.forEach(s=>{this.playlistController_.on(s,a=>{this.player_.trigger(_extends({},a))})}),n.forEach(s=>{this.playbackWatcher_.on(s,a=>{this.player_.trigger(_extends({},a))})})}}const VhsSourceHandler={name:"videojs-http-streaming",VERSION:version$4,canHandleSource(r,e={}){const n=merge(videojs.options,e);return!n.vhs.experimentalUseMMS&&!browserSupportsCodec("avc1.4d400d,mp4a.40.2",!1)?!1:VhsSourceHandler.canPlayType(r.type,n)},handleSource(r,e,n={}){const s=merge(videojs.options,n);return e.vhs=new VhsHandler(r,e,s),e.vhs.xhr=xhrFactory(),e.vhs.setupXhrHooks_(),e.vhs.src(r.src,r.type),e.vhs},canPlayType(r,e){const n=simpleTypeFromSourceType(r);if(!n)return"";const s=VhsSourceHandler.getOverrideNative(e);return!Vhs.supportsTypeNatively(n)||s?"maybe":""},getOverrideNative(r={}){const{vhs:e={}}=r,n=!(videojs.browser.IS_ANY_SAFARI||videojs.browser.IS_IOS),{overrideNative:s=n}=e;return s}},supportsNativeMediaSources=()=>browserSupportsCodec("avc1.4d400d,mp4a.40.2",!0);supportsNativeMediaSources()&&videojs.getTech("Html5").registerSourceHandler(VhsSourceHandler,0);videojs.VhsHandler=VhsHandler;videojs.VhsSourceHandler=VhsSourceHandler;videojs.Vhs=Vhs;videojs.use||videojs.registerComponent("Vhs",Vhs);videojs.options.vhs=videojs.options.vhs||{};(!videojs.getPlugin||!videojs.getPlugin("reloadSourceOnError"))&&videojs.registerPlugin("reloadSourceOnError",reloadSourceOnError);const app=createApp(_sfc_main);app.use(PullRefresh);app.use(Icon);app.mount("#app");
